{"remainingRequest":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/DashboardComponents/ActiveCampaigns.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/DashboardComponents/ActiveCampaigns.vue","mtime":1581270622000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEYXNoYm9hcmRTZXJ2aWNlIGZyb20gJy4vLi4vLi4vc2VydmljZXMvRGFzaGJvYXJkU2VydmljZScKaW1wb3J0IHtFdmVudFNlcnZpY2V9IGZyb20gJy4uLy4uL21haW4nCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2FjdGl2ZUNhbXBhaWducycsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNhcmREYXRhOiBudWxsLAogICAgICB0aW1lZnJhbWU6ICJhbHdheXMiLAogICAgICBzaG93TG9hZGluZzogZmFsc2UKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldERhdGEoKTsKICAgIEV2ZW50U2VydmljZS4kb24oJ2xvY2F0aW9uQ2hhbmdlJywgdGhpcy5nZXREYXRhKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uICgpIHsKICAgIEV2ZW50U2VydmljZS4kb2ZmKCdsb2NhdGlvbkNoYW5nZScsIHRoaXMuZ2V0RGF0YSk7CiAgfSwKICBmaWx0ZXJzOiB7CiAgICBmb3JtYXROdW0odmFsdWUpIHsKICAgICAgICBsZXQgdmFsID0gKHZhbHVlLzEpLnRvRml4ZWQoMCkucmVwbGFjZSgnLicsICcsJykKICAgICAgICByZXR1cm4gdmFsLnRvU3RyaW5nKCkucmVwbGFjZSgvXEIoPz0oXGR7M30pKyg/IVxkKSkvZywgIiwiKQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZm9sbG93TGluayh0YXJnZXRQYWdlKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwYXNzZWRGaWx0ZXJzJywgSlNPTi5zdHJpbmdpZnkoe25hbWU6ICdTdGF0dXMnLCB2YWx1ZTogWydhY3RpdmUnXX0pKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2godGFyZ2V0UGFnZSk7CiAgICB9LAogICAgY2hlY2tGb3JTZWxlY3RlZChjb21tYW5kKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmKGNvbW1hbmQgPT0gdm0udGltZWZyYW1lKSB7CiAgICAgICAgcmV0dXJuICdlbC1pY29uLWNoZWNrJwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQogICAgfSwKICAgIGdldERhdGEoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZtLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgbGV0IHNlYXJjaE9iamVjdCA9IHt9CiAgICAgIGxldCBsb2NhdGlvbklkQXJyYXkgPSBbXTsKICAgICAgbGV0IGxvY2F0aW9uSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9jYXRpb25JZCcpOwogICAgICBpZihsb2NhdGlvbklkKSB7CiAgICAgICAgbG9jYXRpb25JZEFycmF5LnB1c2gobG9jYXRpb25JZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGV0IGxvY09wdGlvbnMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2NhdGlvbk9wdGlvbnMnKSk7CiAgICAgICAgbG9jT3B0aW9ucy5tYXAoZWwgPT4gbG9jYXRpb25JZEFycmF5LnB1c2goZWwubG9jYXRpb25JZCkpOwogICAgICB9CiAgICAgIHNlYXJjaE9iamVjdC5sb2NhdGlvbnMgPSBsb2NhdGlvbklkQXJyYXk7CiAgICAgIHNlYXJjaE9iamVjdC50aW1lZnJhbWUgPSB2bS50aW1lZnJhbWU7CgogICAgICBEYXNoYm9hcmRTZXJ2aWNlLmdldEFjdGl2ZUNhbXBhaWducyhzZWFyY2hPYmplY3QpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICB2bS5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgIHZtLmNhcmREYXRhID0gcmVzcG9uc2UubGVuZ3RoOwogICAgICB9KTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["ActiveCampaigns.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ActiveCampaigns.vue","sourceRoot":"src/components/DashboardComponents","sourcesContent":["<template>\n  <el-card shadow=\"always\" class=\"short-card\">\n    <el-row>\n      <el-col :span=\"12\">\n        <div class=\"o-card-title-3 clickable\" @click=\"followLink('/campaigns')\">\n          Active Campaigns\n        </div>\n        <div class=\"o-card-data\" v-show=\"!showLoading && cardData >= 0\">\n          {{ cardData | formatNum }}\n        </div>\n        <div class=\"dashboard-row dashboard-loader\" v-show=\"showLoading\"><i class=\"far fa-hourglass fa-spin\"></i></div>\n      </el-col>\n      <el-col :span=\"12\">\n        <div class=\"o-card-icon\">\n          <i class=\"fas fa-bullhorn blue\"></i>\n        </div>\n      </el-col>\n    </el-row>\n  </el-card>\n</template>\n\n<script>\nimport DashboardService from './../../services/DashboardService'\nimport {EventService} from '../../main'\n\nexport default {\n  name: 'activeCampaigns',\n  data() {\n    return {\n      cardData: null,\n      timeframe: \"always\",\n      showLoading: false\n    }\n  },\n  created() {\n    this.getData();\n    EventService.$on('locationChange', this.getData);\n  },\n  beforeDestroy: function () {\n    EventService.$off('locationChange', this.getData);\n  },\n  filters: {\n    formatNum(value) {\n        let val = (value/1).toFixed(0).replace('.', ',')\n        return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n    }\n  },\n  methods: {\n    followLink(targetPage) {\n      localStorage.setItem('passedFilters', JSON.stringify({name: 'Status', value: ['active']}));\n      this.$router.push(targetPage);\n    },\n    checkForSelected(command) {\n      let vm = this;\n      if(command == vm.timeframe) {\n        return 'el-icon-check'\n      } else {\n        return '';\n      }\n    },\n    getData() {\n      var vm = this;\n      vm.showLoading = true;\n      let searchObject = {}\n      let locationIdArray = [];\n      let locationId = localStorage.getItem('locationId');\n      if(locationId) {\n        locationIdArray.push(locationId);\n      } else {\n        let locOptions = JSON.parse(localStorage.getItem('locationOptions'));\n        locOptions.map(el => locationIdArray.push(el.locationId));\n      }\n      searchObject.locations = locationIdArray;\n      searchObject.timeframe = vm.timeframe;\n\n      DashboardService.getActiveCampaigns(searchObject).then(function(response) {\n        vm.showLoading = false;\n        vm.cardData = response.length;\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"]}]}