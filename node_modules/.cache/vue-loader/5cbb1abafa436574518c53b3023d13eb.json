{"remainingRequest":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/LinkLocation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/LinkLocation.vue","mtime":1581270622000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMb2NhdGlvblNlcnZpY2UgZnJvbSAnLi8uLi9zZXJ2aWNlcy9Mb2NhdGlvblNlcnZpY2UnCmltcG9ydCBVc2VyU2VydmljZSBmcm9tICcuLi9zZXJ2aWNlcy9Vc2VyU2VydmljZSc7CmltcG9ydCBBdXRoU2VydmljZSBmcm9tICcuLi9zZXJ2aWNlcy9BdXRoU2VydmljZSc7CmltcG9ydCB7IEV2ZW50U2VydmljZSB9IGZyb20gIi4uL21haW4iOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdsaW5rTG9jYXRpb24nLAogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgZ29vZ2xlTG9jYXRpb25zOiBbXSwKICAgICAgdXNlckxvY2F0aW9uczogW10sCiAgICAgIGFjY2Vzc1Rva2VuOiBudWxsLAogICAgICBsaW5rRXJyb3I6IG51bGwsCiAgICAgIGxvYWRpbmdMaXN0czogdHJ1ZSwKICAgICAgY3VycmVudGx5TGlua2luZzogZmFsc2UKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExvY2F0aW9ucygpOwogICAgdGhpcy5wYXJzZUdvb2dsZUxvY2F0aW9ucygpOwogICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmdtYlRva2VuOwogICAgaWYgKCF0aGlzLmFjY2Vzc1Rva2VuKSB7CiAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgKICAgICAgICAiZXJyb3JNZXNzYWdlIiwKICAgICAgICAiTm8gYWNjZXNzIHRva2VuIGRldGVjdGVkLiBDYW4ndCBsaW5rIGxvY2F0aW9ucyEiCiAgICAgICk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICByZWZyZXNoKCkgewogICAgICBBdXRoU2VydmljZS5yZWZyZXNoQWN0aXZpdHkoKTsKICAgIH0sCiAgICBnZXRMb2NhdGlvbnMoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIFVzZXJTZXJ2aWNlLmdldEFsbFVzZXJMb2NhdGlvbnMoKS50aGVuKAogICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICB2YXIgbG9jYXRpb25zID0gcmVzcG9uc2U7CiAgICAgICAgICBsb2NhdGlvbnMuc29ydChmdW5jdGlvbihhLGIpIHsKICAgICAgICAgICAgaWYgKGEubmFtZSA+IGIubmFtZSkgewogICAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgICB9IGVsc2UgaWYgKGEubmFtZSA9PSBiLm5hbWUpIHsKICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgdm0udXNlckxvY2F0aW9ucyA9IGxvY2F0aW9uczsKICAgICAgICAgIHZtLnByZXNlbGVjdExvY2F0aW9ucygpOwogICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfSwKICAgIHBhcnNlR29vZ2xlTG9jYXRpb25zKCkgewogICAgICBpZiAodGhpcy4kcm91dGUucXVlcnkubG9jYXRpb25MaXN0ICYmIHRoaXMuJHJvdXRlLnF1ZXJ5LmxvY2F0aW9uTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgdmFyIHVucGFyc2VkTG9jYXRpb25zID0gdGhpcy4kcm91dGUucXVlcnkubG9jYXRpb25MaXN0LnNwbGl0KCckJyk7CiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHVucGFyc2VkTG9jYXRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgdW5wYXJzZWRMb2NhdGlvbiA9IHVucGFyc2VkTG9jYXRpb25zW2ldLnNwbGl0KCcsJyk7CiAgICAgICAgICB2YXIgbmV3TG9jYXRpb24gPSB7CiAgICAgICAgICAgIGxvY2F0aW9uUGF0aDogZGVjb2RlVVJJQ29tcG9uZW50KHVucGFyc2VkTG9jYXRpb25bMF0pLAogICAgICAgICAgICBsb2NhdGlvbk5hbWU6IGRlY29kZVVSSUNvbXBvbmVudCh1bnBhcnNlZExvY2F0aW9uWzFdKSwKICAgICAgICAgICAgbG9jYXRpb25QaG9uZTogZGVjb2RlVVJJQ29tcG9uZW50KHVucGFyc2VkTG9jYXRpb25bMl0pLAogICAgICAgICAgICBsb2NhdGlvbkFkZHJlc3MxOiBkZWNvZGVVUklDb21wb25lbnQodW5wYXJzZWRMb2NhdGlvblszXSksCiAgICAgICAgICAgIGxvY2FsaXR5OiBkZWNvZGVVUklDb21wb25lbnQodW5wYXJzZWRMb2NhdGlvbls0XSkKICAgICAgICAgIH07CiAgICAgICAgICBpZiAobmV3TG9jYXRpb24ubG9jYXRpb25QYXRoKQogICAgICAgICAgICB0aGlzLmdvb2dsZUxvY2F0aW9ucy5wdXNoKG5ld0xvY2F0aW9uKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5wcmVzZWxlY3RMb2NhdGlvbnMoKTsKICAgICAgICB0aGlzLmxvYWRpbmdMaXN0cyA9IGZhbHNlOwogICAgICB9IGVsc2UgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LmdtYlRva2VuKSB7CiAgICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAic2hvdyIpOwogICAgICAgIExvY2F0aW9uU2VydmljZS5mZXRjaEdNQkxvY2F0aW9ucyh0aGlzLiRyb3V0ZS5xdWVyeS5nbWJUb2tlbikudGhlbihmdW5jdGlvbihnbWJMb2NhdGlvbnMpIHsKICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIik7CiAgICAgICAgICB2bS5sb2FkaW5nTGlzdHMgPSBmYWxzZTsKICAgICAgICAgIHZhciB0ZW1wTG9jYXRpb25zID0gW107CiAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8Z21iTG9jYXRpb25zLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGlmIChnbWJMb2NhdGlvbnNbal0gJiYgZ21iTG9jYXRpb25zW2pdLm5hbWUpIHsKICAgICAgICAgICAgICB2YXIgbmV3TG9jYXRpb24gPSB7CiAgICAgICAgICAgICAgICBsb2NhdGlvblBhdGg6IGdtYkxvY2F0aW9uc1tqXS5uYW1lLAogICAgICAgICAgICAgICAgbG9jYXRpb25OYW1lOiBnbWJMb2NhdGlvbnNbal0ubG9jYXRpb25OYW1lLAogICAgICAgICAgICAgICAgbG9jYXRpb25QaG9uZTogZ21iTG9jYXRpb25zW2pdLnByaW1hcnlQaG9uZSwKICAgICAgICAgICAgICAgIGxvY2F0aW9uQWRkcmVzczE6IGdtYkxvY2F0aW9uc1tqXS5hZGRyZXNzLmFkZHJlc3NMaW5lc1swXSwKICAgICAgICAgICAgICAgIGxvY2FsaXR5OiBnbWJMb2NhdGlvbnNbal0uYWRkcmVzcy5sb2NhbGl0eQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgdGVtcExvY2F0aW9ucy5wdXNoKG5ld0xvY2F0aW9uKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHRlbXBMb2NhdGlvbnMuc29ydChmdW5jdGlvbihhLGIpIHsKICAgICAgICAgICAgaWYgKGEubG9jYXRpb25OYW1lID4gYi5sb2NhdGlvbk5hbWUpIHsKICAgICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgICAgfSBlbHNlIGlmIChhLmxvY2F0aW9uTmFtZSA9PSBiLmxvY2F0aW9uTmFtZSkgewogICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgICAgdm0uZ29vZ2xlTG9jYXRpb25zID0gdGVtcExvY2F0aW9uczsKICAgICAgICAgIHZtLnByZXNlbGVjdExvY2F0aW9ucygpOwogICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZmV0Y2hpbmcgR01CIExvY2F0aW9uczogJywgZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgcHJlc2VsZWN0TG9jYXRpb25zKCkgewogICAgICBpZiAodGhpcy5nb29nbGVMb2NhdGlvbnMgJiYgdGhpcy51c2VyTG9jYXRpb25zKSB7CiAgICAgICAgZm9yIChsZXQgaT0wOyBpPHRoaXMuZ29vZ2xlTG9jYXRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBmb3IgKGxldCBqPTA7IGo8dGhpcy51c2VyTG9jYXRpb25zLmxlbmd0aCAmJiAhdGhpcy5nb29nbGVMb2NhdGlvbnNbaV0uYXNzaWduZWRMb2NhdGlvbjsgaisrKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnVzZXJMb2NhdGlvbnNbal0uZ21iICYmIHRoaXMudXNlckxvY2F0aW9uc1tqXS5nbWIuZ21iSWQgPT0gdGhpcy5nb29nbGVMb2NhdGlvbnNbaV0ubG9jYXRpb25QYXRoKSB7CiAgICAgICAgICAgICAgdGhpcy5nb29nbGVMb2NhdGlvbnNbaV0uYXNzaWduZWRMb2NhdGlvbiA9IHRoaXMudXNlckxvY2F0aW9uc1tqXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGxpbmtBbGxMb2NhdGlvbnMoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZhciBjYWxsQ291bnQgPSAwOwogICAgICB2YXIgYXNzaWduZWRDb3VudCA9IDA7CiAgICAgIHRoaXMuY3VycmVudGx5TGlua2luZyA9IHRydWU7CiAgICAgIHRoaXMubGlua0Vycm9yID0gJyc7CiAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJzaG93Iik7CiAgICAgIGZvciAodmFyIGk9MDsgaTx0aGlzLmdvb2dsZUxvY2F0aW9ucy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciB0aGlzR0xvYyA9IHRoaXMuZ29vZ2xlTG9jYXRpb25zW2ldOwogICAgICAgIGlmICh0aGlzR0xvYy5hc3NpZ25lZExvY2F0aW9uICYmIHRoaXNHTG9jLmFzc2lnbmVkTG9jYXRpb24ubG9jYXRpb25JZCkgewogICAgICAgICAgY2FsbENvdW50Kys7CiAgICAgICAgICBMb2NhdGlvblNlcnZpY2UubGlua0xvY2F0aW9uR01CKHRoaXNHTG9jLmFzc2lnbmVkTG9jYXRpb24ubG9jYXRpb25JZCwgdGhpc0dMb2MubG9jYXRpb25QYXRoLCB2bS5hY2Nlc3NUb2tlbikudGhlbigKICAgICAgICAgICAgZnVuY3Rpb24ocmVzKSB7CiAgICAgICAgICAgICAgYXNzaWduZWRDb3VudCsrOwogICAgICAgICAgICAgIGlmIChhc3NpZ25lZENvdW50ID09IGNhbGxDb3VudCkgewogICAgICAgICAgICAgICAgdm0uJHJvdXRlci5yZXBsYWNlKCdsb2NhdGlvbkxpc3QnKTsKICAgICAgICAgICAgICAgIHZtLmN1cnJlbnRseUxpbmtpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgICAgIGFzc2lnbmVkQ291bnQrKzsKICAgICAgICAgICAgICBpZiAoYXNzaWduZWRDb3VudCA9PSBjYWxsQ291bnQpIHsKICAgICAgICAgICAgICAgIHZtLmxpbmtFcnJvciA9ICJBbiBlcnJvciBvY2N1cnJlZCBsaW5raW5nIHRoaXMgbG9jYXRpb24uICBQbGVhc2UgY29udGFjdCBzdXBwb3J0IHdpdGggdGhpcyBpbmZvcm1hdGlvbjogIiArIGVycm9yOwogICAgICAgICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KAogICAgICAgICAgICAgICAgICAiZXJyb3JNZXNzYWdlIiwKICAgICAgICAgICAgICAgICAgYCR7dm0ubGlua0Vycm9yfWAKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB2bS5jdXJyZW50bHlMaW5raW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAiaGlkZSIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["LinkLocation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LinkLocation.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"link-location-view\">\n    <el-card>\n      <div class=\"card-actions\">\n        <el-button type=\"primary\" size=\"large\" @click=\"linkAllLocations()\" v-if=\"accessToken && !currentlyLinking\">Link locations</el-button>\n      </div>\n      <el-table size=\"medium\" :data=\"googleLocations\" class=\"card-table-min-height\" highlight-current-row>\n        <el-table-column prop=\"name\" label=\"Name\" min-width=\"120\">\n          <template slot-scope=\"scope\">\n            <span>{{scope.row.locationName}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"address\" label=\"Address\" min-width=\"120\">\n          <template slot-scope=\"scope\">\n            <span>{{scope.row.locationAddress1}} {{scope.row.locality}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"phone\" label=\"Phone\" min-width=\"120\">\n          <template slot-scope=\"scope\">\n            <span>{{scope.row.locationPhone}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"link\" label=\"Link To\" min-width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-select size=\"medium\" v-model=\"scope.row.assignedLocation\" @change=\"refresh()\">\n              <el-option v-for=\"(opLoc, index) in userLocations\" :key=\"index\" :value=\"opLoc\">{{opLoc.name}}</el-option>\n            </el-select>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"location-row\" style=\"text-align: center\">\n        {{linkError}}\n      </div>\n      <div class=\"location-row\" style=\"text-align: center\" v-if=\"googleLocations.length == 0 && !loadingLists\">\n        No locations found on your Google account.\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport LocationService from './../services/LocationService'\nimport UserService from '../services/UserService';\nimport AuthService from '../services/AuthService';\nimport { EventService } from \"../main\";\n\nexport default {\n  name: 'linkLocation',\n  data: function() {\n    return {\n      googleLocations: [],\n      userLocations: [],\n      accessToken: null,\n      linkError: null,\n      loadingLists: true,\n      currentlyLinking: false\n    }\n  },\n  created() {\n    this.getLocations();\n    this.parseGoogleLocations();\n    this.accessToken = this.$route.query.gmbToken;\n    if (!this.accessToken) {\n      EventService.$emit(\n        \"errorMessage\",\n        \"No access token detected. Can't link locations!\"\n      );\n    }\n  },\n  methods: {\n    refresh() {\n      AuthService.refreshActivity();\n    },\n    getLocations() {\n      var vm = this;\n      UserService.getAllUserLocations().then(\n        function(response) {\n          var locations = response;\n          locations.sort(function(a,b) {\n            if (a.name > b.name) {\n              return 1;\n            } else if (a.name == b.name) {\n              return 0;\n            } else {\n              return -1;\n            }\n          });\n          vm.userLocations = locations;\n          vm.preselectLocations();\n        }, function(error) {\n          console.log(error);\n      });\n    },\n    parseGoogleLocations() {\n      if (this.$route.query.locationList && this.$route.query.locationList.length > 0) {\n        var unparsedLocations = this.$route.query.locationList.split('$');\n        for (var i=0; i<unparsedLocations.length; i++) {\n          var unparsedLocation = unparsedLocations[i].split(',');\n          var newLocation = {\n            locationPath: decodeURIComponent(unparsedLocation[0]),\n            locationName: decodeURIComponent(unparsedLocation[1]),\n            locationPhone: decodeURIComponent(unparsedLocation[2]),\n            locationAddress1: decodeURIComponent(unparsedLocation[3]),\n            locality: decodeURIComponent(unparsedLocation[4])\n          };\n          if (newLocation.locationPath)\n            this.googleLocations.push(newLocation);\n        }\n        this.preselectLocations();\n        this.loadingLists = false;\n      } else if (this.$route.query.gmbToken) {\n        var vm = this;\n        EventService.$emit(\"loading\", \"show\");\n        LocationService.fetchGMBLocations(this.$route.query.gmbToken).then(function(gmbLocations) {\n          EventService.$emit(\"loading\", \"hide\");\n          vm.loadingLists = false;\n          var tempLocations = [];\n          for (var j=0; j<gmbLocations.length; j++) {\n            if (gmbLocations[j] && gmbLocations[j].name) {\n              var newLocation = {\n                locationPath: gmbLocations[j].name,\n                locationName: gmbLocations[j].locationName,\n                locationPhone: gmbLocations[j].primaryPhone,\n                locationAddress1: gmbLocations[j].address.addressLines[0],\n                locality: gmbLocations[j].address.locality\n              };\n              tempLocations.push(newLocation);\n            }\n          }\n\n          tempLocations.sort(function(a,b) {\n            if (a.locationName > b.locationName) {\n              return 1;\n            } else if (a.locationName == b.locationName) {\n              return 0;\n            } else {\n              return -1;\n            }\n          });\n\n          vm.googleLocations = tempLocations;\n          vm.preselectLocations();\n        }, function(error) {\n          console.log('Error fetching GMB Locations: ', error);\n        });\n      }\n    },\n    preselectLocations() {\n      if (this.googleLocations && this.userLocations) {\n        for (let i=0; i<this.googleLocations.length; i++) {\n          for (let j=0; j<this.userLocations.length && !this.googleLocations[i].assignedLocation; j++) {\n            if (this.userLocations[j].gmb && this.userLocations[j].gmb.gmbId == this.googleLocations[i].locationPath) {\n              this.googleLocations[i].assignedLocation = this.userLocations[j];\n            }\n          }\n        }\n      }\n    },\n    linkAllLocations() {\n      var vm = this;\n      var callCount = 0;\n      var assignedCount = 0;\n      this.currentlyLinking = true;\n      this.linkError = '';\n      EventService.$emit(\"loading\", \"show\");\n      for (var i=0; i<this.googleLocations.length; i++) {\n        var thisGLoc = this.googleLocations[i];\n        if (thisGLoc.assignedLocation && thisGLoc.assignedLocation.locationId) {\n          callCount++;\n          LocationService.linkLocationGMB(thisGLoc.assignedLocation.locationId, thisGLoc.locationPath, vm.accessToken).then(\n            function(res) {\n              assignedCount++;\n              if (assignedCount == callCount) {\n                vm.$router.replace('locationList');\n                vm.currentlyLinking = false;\n                EventService.$emit(\"loading\", \"hide\");\n              }\n            }, function(error) {\n              assignedCount++;\n              if (assignedCount == callCount) {\n                vm.linkError = \"An error occurred linking this location.  Please contact support with this information: \" + error;\n                EventService.$emit(\n                  \"errorMessage\",\n                  `${vm.linkError}`\n                );\n                vm.currentlyLinking = false;\n                EventService.$emit(\"loading\", \"hide\");\n              }\n            });\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.card-actions span {\n  font-size: 14px;\n  text-align: center;\n}\n.card-actions {\n  display: flex;\n  justify-content: flex-end;\n}\n.link-location-view {\n\n}\n.location-link-button {\n  margin: 0 0px 20px 0px;\n}\n\n.location-link-button button {\n  background: limegreen;\n  padding: 5px 10px;\n  color: white;\n}\n\n.location-table {\n  background: white;\n  font-size: 14px;\n  padding: 10px;\n  clear: both;\n}\n\n.location-header-row {\n  width: calc(100% - 20px);\n  font-weight: bold;\n  padding: 10px;\n  border-top: 1px solid #efefef;\n  border-bottom: 1px solid #efefef;\n  height: 14px;\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: space-evenly;\n  cursor: pointer;\n}\n\n.location-header-row div, .location-row div {\n  margin: auto;\n}\n\n.location-row {\n  width: calc(100% - 20px);\n  clear: both;\n  padding: 10px;\n  border-bottom: 1px solid #efefef;\n  height: auto;\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: space-evenly;\n}\n\n.location-row:nth-child(even) {\n  /* background: #efefef; */\n}\n\n.location-row:hover {\n  background: #dfdfdf;\n}\n\n.location-table-cell-1 {\n  flex: 1 1 200px;\n}\n\n.location-table-cell-2 {\n  flex: 1 1 100px;\n}\n\n.location-table-cell-3 {\n  flex: 1 1 200px;\n}\n\n.location-table-cell-4 {\n  flex: 1 1 200px;\n}\n\n.disappear-leave-active {\n  animation: scale-down 1s cubic-bezier(0.390, 0.575, 0.565, 1.000) both;\n}\n\n.disappear-enter-active {\n  animation: scale-up 1s cubic-bezier(0.390, 0.575, 0.565, 1.000) both;\n}\n\n\n@keyframes scale-down {\n  0% {\n    transform: scaleY(1);\n  }\n  100% {\n    background: #4fcbc5;\n    transform: scaleY(0);\n  }\n}\n\n@keyframes scale-up {\n  0% {\n    transform: scaleY(0);\n  }\n  100% {\n    transform: scaleY(1);\n  }\n}\n</style>\n"]}]}