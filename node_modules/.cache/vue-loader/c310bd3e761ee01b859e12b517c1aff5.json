{"remainingRequest":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/UserDetail.vue?vue&type=style&index=0&id=b7412fa8&scoped=true&lang=css&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/UserDetail.vue","mtime":1587799109380},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi50ZXh0LS1yZWQgewogIGNvbG9yOiAjREQyQzAwOwp9CgoubG9jYXRpb24tZGV0YWlsLXRpdGxlIHsKICBmb250LXNpemU6IDIycHg7CiAgZm9udC13ZWlnaHQ6IDUwMDsKfQoKLnVzZXItZGV0YWlscy1jb250YWluZXIgewogIHdpZHRoOiAxMDAlOwogIGRpc3BsYXk6IGZsZXg7Cn0KCi51c2VyLWRldGFpbHMgewogIHdpZHRoOiA2MDBweDsKICBoZWlnaHQ6IDYwMHB4OwogIG92ZXJmbG93LXk6IGF1dG87CiAgbWF4LXdpZHRoOiAxMDAlOwp9CgoudGl0bGUtY2FyZCB7CiAgd2lkdGg6IDEwMCU7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW4KfQoKLmJhY2stbGluayB7CiAgZm9udC1zaXplOiAxNHB4OwogIGNvbG9yOiAjOWE5YTlhOwp9CgoucmVtb3ZlLWxpbmsgewogIGNvbG9yOiByZWQ7Cn0KCi5pbWFnZS1jb250YWluZXIgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBtYXJnaW46IDUwcHggYXV0bzsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KCi5wcm9maWxlLWltYWdlIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgaGVpZ2h0OiA2MHB4OwogIHdpZHRoOiA2MHB4OwogIGJvcmRlci1yYWRpdXM6IDUwJTsKICBjdXJzb3I6IHBvaW50ZXI7CiAgYm9yZGVyOiAxcHggc29saWQgIzlhOWE5YTsKfQoKLnByb2ZpbGUtaW1hZ2UudGV4dCB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgZm9udC1zaXplOiAyOHB4OwogIGJhY2tncm91bmQ6ICM2NjYxNUI7CiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgIzY2NjE1QiwgcmdiKDEyOCwgMTIxLCAxMTIpKTsKICBjb2xvcjogd2hpdGU7Cn0KCi5jaGFuZ2UtcGhvdG8gewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBib3R0b206IDA7CiAgcmlnaHQ6IDA7Cn0KCi5uYW1lLWNvbnRhaW5lciB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIG1hcmdpbi1sZWZ0OiAzMHB4Owp9CgoudXNlcm5hbWUgewogIGZvbnQtc2l6ZTogMjJweDsKfQoKLnVzZXJyb2xlIHsKICBtYXJnaW4tdG9wOiA1cHg7CiAgZm9udC1zaXplOiAxNHB4Owp9Cgoucm9sZSB7CiAgZm9udC13ZWlnaHQ6IDUwMDsKICBjb2xvcjogIzRmY2JjNTsKfQoKLnVwcGVyY2FzZSB7CiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKfQoKLmVkaXQtdXNlci1jb250YWluZXIgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKfQoKLnRvcC1yb3cgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IHJvdzsKfQoKLnVzZXItaW5wdXQgewogIC8qIHdpZHRoOiA1MCU7ICovCn0KCi5sZWZ0LW1hcmdpbiB7CiAgd2lkdGg6IDUwJTsKICBtYXJnaW4tbGVmdDogMTUlOwp9CgouZnVsbC13aWR0aCB7CiAgd2lkdGg6IDEwMCU7Cn0KCi5lZGl0LXVzZXItYnV0dG9ucyB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHBhZGRpbmc6IDIwcHg7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICBib3R0b206IDA7CiAgbGVmdDogMDsKICByaWdodDogMDsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGJhY2tncm91bmQ6IHdoaXRlOwp9CgouZm9vdGVyLWJ1dHRvbnMgewogIHdpZHRoOiAyMjBweDsKICBtYXgtd2lkdGg6IDI2MHB4Owp9CgoubG9jYXRpb24tZGV0YWlscyB7CiAgLyogd2lkdGg6IDY1JTsgKi8KICB3aWR0aDogMTAwMHB4OwogIG1heC13aWR0aDogMTAwJTsKICBtYXJnaW4tbGVmdDogMjBweDsKfQoKLnVzZXItbG9jYXRpb25zLWNvbnRhaW5lciB7CiAgbWFyZ2luLXRvcDogNDBweDsKfQoKLndpZGUtc2VsZWN0IHsKICB3aWR0aDogMTAwJTsKfQoKLmVsLXNlbGVjdF9fdGFncy10ZXh0IHsKICBmb250LXNpemU6IDEwcHggIWltcG9ydGFudDsKfQoKLmFkZC1idXR0b24gewogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgd2lkdGg6IDEwMCU7CiAgbWFyZ2luLXRvcDogNDBweDsKfQouZWwtdGFibGUgLmNlbGwgewogIG1hcmdpbi10b3A6IDIwcHg7Cn0KCi5hZGQtYnV0dG9uIC5lbC1idXR0b24gewogIHdpZHRoOiAyNTBweDsKfQoKQG1lZGlhIChtYXgtd2lkdGg6IDEyMDBweCkgewogIC51c2VyLWRldGFpbHMtY29udGFpbmVyIHsKICAgIGZsZXgtd3JhcDogd3JhcDsKICB9CiAgLnVzZXItZGV0YWlscyB7CiAgICBtYXJnaW4tYm90dG9tOiAyMHB4OwogICAgd2lkdGg6IDEwMCU7CiAgfQogIC5sb2NhdGlvbi1kZXRhaWxzIHsKICAgIG1hcmdpbjogMDsKICB9Cn0KCg=="},{"version":3,"sources":["UserDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2aA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserDetail.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <transition name=\"modal\">\n    <div class=\"user-details-container\">\n      <el-card class=\"user-details\">\n        <span class=\"title-card\" v-if=\"userCanEdit\">\n          <span class=\"back-link clickable\" @click=\"closeModal()\">\n            <i class=\"fal fa-arrow-left\"></i>\n            Back to Users\n          </span>\n          <el-dropdown style=\"cursor:pointer;\" trigger=\"click\" @command=\"handleDropdownCommands\" v-if=\"(currentUser.role == 'owner' || currentUser.isSuperAdmin) && currentUser.userId != selectedUser.userId\">\n            <span class=\"el-dropdown-link\">\n              <i class=\"ellipse fas fa-ellipsis-v\"></i>\n            </span>\n            <el-dropdown-menu slot=\"dropdown\">\n              <el-dropdown-item command=\"deactivate\" >Deactivate User</el-dropdown-item>\n              <el-dropdown-item command=\"delete\" class=\"text--red\">Delete User</el-dropdown-item>\n            </el-dropdown-menu>\n          </el-dropdown>\n          <!-- <span class=\"remove-link clickable\" v-if=\"(currentUser.role == 'owner' || currentUser.isSuperAdmin) && currentUser.userId != selectedUser.userId\" @click=\"deleteUser()\">\n            <i class=\"fal fa-times\"></i>\n            Remove This User\n          </span> -->\n        </span>\n        <div class=\"image-container\">\n          <el-tooltip>\n            <div slot=\"content\">Change Profile Picture</div>\n            <span class=\"profile-image text\" v-if=\"(selectedUser.firstName || selectedUser.lastName) && !selectedUser.userImage\" @click=\"$refs.imageUpload.click()\">{{selectedUser.firstName.charAt(0) + selectedUser.lastName.charAt(0)}}</span>\n            <img v-else :src=\"appendImageHeader(selectedUser.userImage)\" alt=\"profile image\" class=\"profile-image\" @click=\"$refs.imageUpload.click()\">\n          </el-tooltip>\n          <input ref=\"imageUpload\" type=\"file\" accept=\"image/*\" placeholder=\"Image\" @change=\"userImageChange()\" hidden />\n          <div class=\"name-container\">\n            <span class=\"username\">{{selectedUser.firstName}} {{selectedUser.lastName}}</span>\n            <span class=\"userrole uppercase\">Role:\n              <span class=\"role\">{{selectedUser.role}}</span>\n              </span>\n          </div>\n        </div>\n        <el-row :gutter=\"20\">\n          <el-col :span=\"12\">\n            <label class=\"input-label\">First Name</label>\n            <el-input v-model=\"selectedUser.firstName\" :disabled=\"inputsDisabled\"></el-input>\n          </el-col>\n          <el-col :span=\"12\">\n            <label class=\"input-label\">Last Name</label>\n            <el-input v-model=\"selectedUser.lastName\" :disabled=\"inputsDisabled\"></el-input>\n          </el-col>\n        </el-row>\n        <el-row :gutter=\"20\">\n          <el-col :span=\"24\">\n            <label class=\"input-label\">Email</label>\n            <el-input v-model=\"selectedUser.email\" :disabled=\"inputsDisabled\"></el-input>\n          </el-col>\n        </el-row>\n        <!-- <div class=\"edit-user-container\">\n          <div class=\"top-row\">\n            <div class=\"user-input\">\n              <label class=\"input-label\">First Name</label>\n              <el-input v-model=\"selectedUser.firstName\" :disabled=\"inputsDisabled\"></el-input>\n            </div>\n            <div class=\"user-input left-margin\">\n              <label class=\"input-label\">Last Name</label>\n              <el-input v-model=\"selectedUser.lastName\" :disabled=\"inputsDisabled\"></el-input>\n            </div>\n          </div>\n          <div class=\"user-input full-width\">\n            <label class=\"input-label\">Email</label>\n            <el-input v-model=\"selectedUser.email\" :disabled=\"inputsDisabled\"></el-input>\n          </div>\n        </div> -->\n        <div class=\"edit-user-buttons\">\n          <el-button class=\"secondary footer-buttons\" type=\"warning\" v-if=\"currentUser.role == 'owner' || currentUser.role == 'admin' || selectedUser.userId == currentUser.userId\" @click=\"resetPassword()\">Reset Password</el-button>\n          <el-button class=\"footer-buttons\" type=\"primary\"  @click=\"inputsDisabled = false\" v-if=\"inputsDisabled == true && (currentUser.role == 'owner' || currentUser.role == 'admin' || selectedUser.userId == currentUser.userId)\">Edit Profile</el-button>\n          <el-button class=\"footer-buttons\" type=\"primary\" round @click=\"saveUser()\" v-if=\"inputsDisabled == false && (currentUser.role == 'owner' || currentUser.role == 'admin' || selectedUser.userId == currentUser.userId)\">Save Changes</el-button>\n        </div>\n      </el-card>\n      <el-card class=\"location-details\">\n        <span class=\"location-detail-title\">Location Details</span>\n        <div class=\"user-locations-container\">\n          <el-table :data=\"userLocations\" v-loading=\"loading\" element-loading-text=\"Loading...\"\n            element-loading-spinner=\"el-icon-loading\" element-loading-background=\"rgba(0, 0, 0, 0.8)\" ref=\"locationTable\" size=\"small\" height=\"400\">\n            <el-table-column label=\"Location Name\" min-width=\"150\">\n              <template slot-scope=\"scope\">\n                <!-- {{scope.row.name}} -->\n                <el-select size=\"small\" filterable class=\"user-location-detail\" placeholder=\"Select Location\" v-model=\"scope.row.locationId\" :value-key=\"scope.row.locationId\" :disabled=\"(currentUser.role != 'owner' && currentUser.role != 'admin') && !userCanEdit\">\n                  <el-option v-for=\"location in locationOptions\" :key=\"location.locationId\" :value=\"location.locationId\" :label=\"location.name\">\n                  </el-option>\n                </el-select>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"Role\" min-width=\"120\">\n              <template slot-scope=\"scope\">\n                <el-select size=\"small\" class=\"user-location-detail\" :disabled=\"(currentUser.role != 'owner' && currentUser.role != 'admin') && !userCanEdit\" v-model=\"scope.row.role\" @change=\"saveUserLocations(scope.row)\">\n                  <el-option v-for=\"(role, index) in roles\" :value=\"role.value\" :key=\"index\" :label=\"role.label\"></el-option>\n                </el-select>\n              </template>\n            </el-table-column>\n            <el-table-column min-width=\"300\" label=\"Communication Preferences\">\n              <template slot-scope=\"scope\">\n                <el-select :collapse-tags=\"true\" size=\"small\" class=\"wide-select\" placeholder=\"Select Types\" multiple v-model=\"scope.row.communications\" @change=\"saveUserLocations(scope.row)\">\n                  <el-option v-for=\"value in communicationsOptions\" :value=\"value\" :label=\"value\" :key=\"value\">\n                  </el-option>\n                </el-select>\n              </template>\n            </el-table-column>\n            <el-table-column min-width=\"40\">\n              <template slot-scope=\"scope\">\n                <el-button style=\"color:#757575; margin-bottom: 8px;\" type=\"text\" icon=\"far fa-trash-alt\" circle size=\"medium\" @click=\"deleteUserLocation(scope.row)\"></el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n          {{highestRole}}\n          <div class=\"add-button\" v-if=\"currentUser.role != 'agent'\">\n            <el-button type=\"primary\" @click=\"addUserLocation()\">Add User Location</el-button>\n          </div>\n        </div>\n      </el-card>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport UserService from \"./../services/UserService\";\nimport { EventService } from \"../main\";\nimport imageFile from '../assets/imageFile';\n// import { Loading } from 'element-ui';\n\nexport default {\n  name: \"addUser\",\n  props: [\"selectedUser\"],\n  data: function() {\n    return {\n      createdDateDisplay: \"\",\n      createdByUser: {},\n      userLocations: [],\n      userImageBackground: '',\n      userCanEdit: true,\n      loading: false,\n      inputsDisabled: true,\n      searchText: '',\n      roles: [\n        {label: 'Owner', value: 'owner'},\n        {label: 'Manager', value: 'manager'},\n        {label: 'Agent', value: 'agent'},\n        {label: 'None', value: 'none'}\n      ],\n      communicationsOptions: [\n        'New Review',\n        'Potential Negative Review',\n        'New Customer Message'\n      ],\n      newUserLocation: {\n        userId: '',\n        locationId: '',\n        role: '',\n        getEmail: true,\n        communications: []\n      },\n      locationOptions: [],\n    };\n  },\n  computed: {\n    highestRole() {\n      this.currentUser.role;\n      return this.currentUser.role;\n    }\n  },\n  created() {\n    this.user = this.selectedUser;\n    this.currentUser = JSON.parse(localStorage.getItem('currentUser'));\n    this.getUserLocations();\n    this.checkCurrentUser();\n    this.generateCreatedDateDisplay();\n  },\n  methods: {\n    handleDropdownCommands (command) {\n      if(command == 'delete') {\n        this.deleteUser();\n      } else if(command == 'deactivate') {\n        this.deactivateUser();\n      }\n    },\n    checkCurrentUser() {\n      let vm = this;\n      if(vm.selectedUser.locations.length) {\n        UserService.getUserLocations().then(response => {\n          let currentUserLocations = response.results;\n          let highestRole = 0;\n          currentUserLocations.map(location => {\n            var i;\n            for(i = 0; i < vm.selectedUser.locations.length; i++) {\n              if(location.name === vm.selectedUser.locations[i]) {\n                if(location.role == 'agent' && highestRole == 0 ) {\n                  highestRole = 1;\n                } else if(location.role == 'manager' && highestRole < 2) {\n                  highestRole = 2;\n                } else if(location.role == 'owner' && highestRole < 3) {\n                  highestRole = 3;\n                  break;\n                } else if(location.role == 'admin') {\n                  highestRole = 4;\n                  break;\n                }\n              }\n            }\n          })\n          if(highestRole >= 3) {\n            vm.currentUser.role = 'owner';\n          } else if(highestRole == 2) {\n            vm.currentUser.role = 'manager';\n          } else if(highestRole == 1) {\n            vm.currentUser.role = 'agent';\n          } else {\n            vm.currentUser.role = 'none';\n          }\n          vm.userLocations.push({})\n          vm.userLocations.pop({})\n        })\n      } else {\n        vm.currentUser.role == 'owner';\n        vm.userLocations.push({})\n        vm.userLocations.pop({})\n      }\n    },\n    closeModal() {\n      this.$emit(\"closeModal\");\n    },\n    getLocationOptions() {\n      let existingUserLocations = [];\n      this.userLocations.map(el => {\n        existingUserLocations.push(el.locationId);\n      })\n      this.locationOptions = JSON.parse(localStorage.getItem('locationOptions')).filter(el => {\n        return !existingUserLocations.includes(el.locationId);\n      });\n      // this.locationOptions = this.locationOptions\n    },\n    appendImageHeader(imgText) {\n      if (!imgText)\n        imgText = imageFile.imgBlock();\n      if (imgText && imgText[0] == \",\") {\n        return \"data:image/png;base64\" + imgText;\n      } else {\n        return \"data:image/png;base64,\" + imgText;\n      }\n    },\n    resetPassword() {\n      var vm = this;\n      var token = Math.floor((new Date().getTime())/100);\n      UserService.sendResetPasswordEmail(this.selectedUser.email, token) .then(\n        function(response) {\n          if (response.success) {\n            EventService.$emit('successMessage', 'Hooray! Password Reset Email Sent')\n          } else {\n          }\n        }, function(error) {\n          EventService.$emit('errorMessage', 'Sorry, something went wrong. Please try again.')\n      });\n    },\n    deleteUser() {\n      let vm = this;\n      this.$confirm('Are you sure you want to delete this user?', \"Confirmation\", {\n        confirmButtonText: 'Yes',\n        cancelButtonText: 'Cancel',\n        type: \"error\"\n      }).then(() => {\n        UserService.deleteUser(vm.selectedUser.userId).then(response => {\n          if(response) {\n            EventService.$emit('successMessage', 'User has been deleted')\n            vm.closeModal();\n          }\n        })\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: \"Delete Cancelled\"\n        })\n      })\n    },\n    deactivateUser() {\n      let vm = this;\n      this.$confirm('Are you sure you want to deactivate this user?', \"Confirmation\", {\n        confirmButtonText: 'Yes',\n        cancelButtonText: 'Cancel',\n        type: \"error\"\n      }).then(() => {\n        UserService.deactivateUser(vm.selectedUser.userId).then(response => {\n          if(response) {\n            EventService.$emit('successMessage', 'User has been deactivated')\n            vm.closeModal();\n          }\n        })\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: \"Deactivation Cancelled\"\n        })\n      })\n    },\n    deleteUserLocation(data) {\n      let vm = this;\n      UserService.removeUserLocation(vm.selectedUser.userId, data.locationId).then(response => {\n        if(response) {\n          EventService.$emit('successMessage', 'User location removed.')\n          vm.getUserLocations();\n        } else {\n          EventService.$emit('warningMessage', 'Something went wrong, please try again.')\n        }\n      })\n    },\n    userImageChange: function() {\n      var element = this.$refs.imageUpload;\n      var vm = this;\n      this.showLogoSizeError = false;\n      this.userImageBackground = {};\n      if (element.files && element.files[0]) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          if(reader.result.length > 500000 * 1.36) {\n            vm.showLogoSizeError = true;\n            EventService.$emit('errorMessage', 'Image size is too large. 500 Kb maximum.')\n          } else {\n            vm.selectedUser.userImage = reader.result.substring(22);\n            vm.saveUser();\n          }\n        };\n        reader.readAsDataURL(element.files[0]);\n      }\n      this.changes = true;\n    },\n    generateCreatedDateDisplay: function() {\n      if (this.selectedUser.createdDate) {\n        var date = new Date(this.selectedUser.createdDate);\n        this.createdDateDisplay +=\n          date.toLocaleTimeString() + \" on \" + date.toLocaleDateString();\n      } else {\n        return \" some time in 2017\";\n      }\n    },\n    getCreatedByUser: function() {\n      var vm = this;\n      UserService.getUser(vm.selectedUser.createdBy).then(\n        function(response) {\n          vm.createdByUser = response;\n        },\n        function(error) {\n          console.log(error);\n        }\n      );\n    },\n    getUserLocations: function() {\n      var vm = this;\n      vm.loading = true;\n      let userProfile = vm.$route.params.state\n      UserService.getUserLocations(vm.selectedUser.userId, 0).then(\n        function(response) {\n          vm.userLocations = response.results;\n          console.log(response.result);\n          vm.getLocationOptions();\n          vm.loading = false;\n          if(userProfile && userProfile != 'add') {\n            let higherThanAgent = false;\n            vm.userLocations.map(response => {\n              if(response.role != 'agent' && response.role != 'none') {\n                higherThanAgent = true;\n              }\n            })\n            if(!higherThanAgent) {\n              vm.userCanEdit = false;\n            }\n          }\n        },\n        function(error) {\n          console.log(error);\n        }\n      );\n    },\n    addUserLocation() {\n      let vm = this;\n      vm.userLocations.push(JSON.parse(JSON.stringify(vm.newUserLocation)));\n    },\n    saveUser() {\n      let vm = this;\n      UserService.saveUser(vm.user).then(response => {\n        if(response) {\n          vm.inputsDisabled = true;\n          EventService.$emit('successMessage', 'User Updated')\n        } else {\n          EventService.$emit('errorMessage', 'An error has occurred, please try again.')\n        }\n      })\n    },\n    saveUserLocations(data) {\n      var vm = this;\n      this.getLocationOptions();\n      vm.userLocations.map(location => {\n        if (location.role == '' || location.role == 'None') {\n          location.getsEmail = false;\n          UserService.saveUserLocation(vm.user.userId, location.locationId, location.role, location.communications).then( function(response) {\n            EventService.$emit('successMessage', 'User Location Updated')\n            }, function(error) {\n              console.log(error);\n          });\n          this.unassignUser(location);\n        } else {\n          UserService.saveUserLocation(vm.user.userId, location.locationId, location.role, location.communications).then(\n            function(response) {\n              EventService.$emit('successMessage', 'User Location Updated')\n            }, function(error) {\n              console.log(error);\n          });\n        }\n      })\n      // vm.closeModal();\n    },\n    unassignUser: function(location) {\n      var vm = this;\n      UserService.removeUserLocation(vm.user.userId, location.locationId).then(\n        function(response) {\n        }, function(error) {\n          console.log(error);\n      });\n    },\n  }\n};\n</script>\n\n<style scoped>\n.text--red {\n  color: #DD2C00;\n}\n\n.location-detail-title {\n  font-size: 22px;\n  font-weight: 500;\n}\n\n.user-details-container {\n  width: 100%;\n  display: flex;\n}\n\n.user-details {\n  width: 600px;\n  height: 600px;\n  overflow-y: auto;\n  max-width: 100%;\n}\n\n.title-card {\n  width: 100%;\n  display: flex;\n  justify-content: space-between\n}\n\n.back-link {\n  font-size: 14px;\n  color: #9a9a9a;\n}\n\n.remove-link {\n  color: red;\n}\n\n.image-container {\n  position: relative;\n  margin: 50px auto;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.profile-image {\n  position: relative;\n  height: 60px;\n  width: 60px;\n  border-radius: 50%;\n  cursor: pointer;\n  border: 1px solid #9a9a9a;\n}\n\n.profile-image.text {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-weight: 400;\n  font-size: 28px;\n  background: #66615B;\n  background: linear-gradient(to bottom, #66615B, rgb(128, 121, 112));\n  color: white;\n}\n\n.change-photo {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n}\n\n.name-container {\n  display: flex;\n  flex-direction: column;\n  margin-left: 30px;\n}\n\n.username {\n  font-size: 22px;\n}\n\n.userrole {\n  margin-top: 5px;\n  font-size: 14px;\n}\n\n.role {\n  font-weight: 500;\n  color: #4fcbc5;\n}\n\n.uppercase {\n  text-transform: uppercase;\n}\n\n.edit-user-container {\n  display: flex;\n  flex-direction: column;\n}\n\n.top-row {\n  display: flex;\n  flex-direction: row;\n}\n\n.user-input {\n  /* width: 50%; */\n}\n\n.left-margin {\n  width: 50%;\n  margin-left: 15%;\n}\n\n.full-width {\n  width: 100%;\n}\n\n.edit-user-buttons {\n  position: absolute;\n  padding: 20px;\n  box-sizing: border-box;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  justify-content: center;\n  background: white;\n}\n\n.footer-buttons {\n  width: 220px;\n  max-width: 260px;\n}\n\n.location-details {\n  /* width: 65%; */\n  width: 1000px;\n  max-width: 100%;\n  margin-left: 20px;\n}\n\n.user-locations-container {\n  margin-top: 40px;\n}\n\n.wide-select {\n  width: 100%;\n}\n\n.el-select__tags-text {\n  font-size: 10px !important;\n}\n\n.add-button {\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  margin-top: 40px;\n}\n.el-table .cell {\n  margin-top: 20px;\n}\n\n.add-button .el-button {\n  width: 250px;\n}\n\n@media (max-width: 1200px) {\n  .user-details-container {\n    flex-wrap: wrap;\n  }\n  .user-details {\n    margin-bottom: 20px;\n    width: 100%;\n  }\n  .location-details {\n    margin: 0;\n  }\n}\n\n</style>\n"]}]}