{"remainingRequest":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/AddCampaign.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/AddCampaign.vue","mtime":1581270622000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQcmV2aWV3TGFuZGluZyBmcm9tICIuL1ByZXZpZXdMYW5kaW5nIjsKaW1wb3J0IE91dHJlYWNoU2VydmljZSBmcm9tICcuLy4uL3NlcnZpY2VzL091dHJlYWNoU2VydmljZSc7CmltcG9ydCBVc2VyU2VydmljZSBmcm9tICIuLy4uL3NlcnZpY2VzL1VzZXJTZXJ2aWNlLmpzIjsKaW1wb3J0IExvY2F0aW9uU2VydmljZSBmcm9tICIuLy4uL3NlcnZpY2VzL0xvY2F0aW9uU2VydmljZS5qcyI7CmltcG9ydCB7IEV2ZW50U2VydmljZSB9IGZyb20gIi4uL21haW4iOwppbXBvcnQgY29uZmlnIGZyb20gIi4uL2NvbmZpZy5qcyI7CmltcG9ydCBDdXN0b21lclNlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvQ3VzdG9tZXJTZXJ2aWNlJzsKaW1wb3J0IENhbXBhaWduU2VydmljZSBmcm9tICcuLi9zZXJ2aWNlcy9DYW1wYWlnblNlcnZpY2UnOwppbXBvcnQgeyBMb2FkaW5nIH0gZnJvbSAnZWxlbWVudC11aSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFkZENhbXBhaWduIiwKICBwcm9wczogWyJzZWxlY3RlZENhbXBhaWduIiwgIm5ld091dHJlYWNoIl0sCiAgY29tcG9uZW50czogewogICAgUHJldmlld0xhbmRpbmcKICB9LAogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgdmFyIHZhbGlkYXRlUGVyY2VudGFnZXMgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7ICAgICAgCiAgICAgIGxldCB0b3RhbCA9IDA7ICAgICAgCiAgICAgIHZhbHVlLm1hcChyb3RhdG9yID0+IHsKICAgICAgICB0b3RhbCArPSByb3RhdG9yLnBlcmNlbnRhZ2U7ICAgICAgICAKICAgICAgfSkKICAgICAgaWYodG90YWwgIT0gMCAmJiB0b3RhbCAhPSAxMDApIHsKICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdSb3RhdG9yIHBlcmNlbnRhZ2VzIG11c3QgZXF1YWwgMCBvciAxMDAlJykpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHsKICAgICAgY3VycmVudFN0ZXA6IDAsCiAgICAgIHNlbGVjdGVkQ3VzdG9taXphdGlvbjogJzEnLAogICAgICBjYW1wYWlnbk9wZW46IHRydWUsCiAgICAgIHN0YXJ0UG9zaXRpb246IG51bGwsCiAgICAgIHNlYXJjaExvY2F0aW9uVGV4dDogJycsCiAgICAgIHNob3dpbmdNZW51OiBmYWxzZSwKICAgICAgZW1haWxQcmV2aWV3OiBmYWxzZSwKICAgICAgbGFuZGluZ1ByZXZpZXc6IGZhbHNlLAogICAgICBzaG93Q3VzdG9tZXJzTGlzdDogZmFsc2UsCiAgICAgIGVuZFBvc2l0aW9uOiBudWxsLAogICAgICBkcmFnZ2luZzogZmFsc2UsCiAgICAgIHVybFN0cmluZzogJycsCiAgICAgIHBhZ2VBY3Rpb246ICJOZXciLAogICAgICB0ZXN0RW1haWw6ICcnLAogICAgICB0ZXN0U01TOiAnJywKICAgICAgY3VycmVudFVzZXI6IHt9LAogICAgICBmaWx0ZXJMaXN0U2VhcmNoVGV4dDogJycsCiAgICAgIGV4Y2x1ZGVkQ3VzdG9tZXJzOiBbXSwKICAgICAgbG9jYXRpb25OYW1lOiAnJywKICAgICAgY3VzdG9tZXJTZWFyY2hUZXh0OiAnJywKICAgICAgaW5pdGlhbGl6ZWRVbmxheWVyOiBmYWxzZSwKICAgICAgdmlzaXRlZDQ6IGZhbHNlLAogICAgICBzZWxlY3RlZExvY2F0aW9uOiB7fSwKICAgICAgY3VycmVudExpc3Q6IFtdLAogICAgICBvcGVuUHJldmlld0NhbXBhaWduOiBmYWxzZSwKICAgICAgY2FtcGFpZ25UZW1wbGF0ZXM6IFsiUmV2aWV3IFJlcXVlc3QiLCAiQ3VzdG9tIE1lc3NhZ2UiXSwKICAgICAgZGVmYXVsdFRhZ09wdGlvbnM6IFsiTW92ZS1JbiIsICJNb3ZlLU91dCIsICJXb3JrIE9yZGVyIl0sCiAgICAgIGZyZXF1ZW5jeVNjaGVkdWxlT3B0aW9uczogWyJCaS1XZWVrbHkiLCAiTW9udGhseSIsICJRdWFydGVybHkiLCAiWWVhcmx5Il0sCiAgICAgIHJlc2VuZE9wdGlvbnM6IFsKICAgICAgICB7dmFsdWU6Im5ldmVyIiwgbGFiZWw6Ik5ldmVyIn0sCiAgICAgICAge3ZhbHVlOiIyNTkyMDAwMDAwIiwgbGFiZWw6IjEgTW9udGgifSwKICAgICAgICB7dmFsdWU6Ijc3NzYwMDAwMDAiLCBsYWJlbDoiMyBNb250aHMifSwKICAgICAgICB7dmFsdWU6IjE1NzI0ODAwMDAwIiwgbGFiZWw6IjYgTW9udGhzIn0sCiAgICAgICAge3ZhbHVlOiIzMTUzNjAwMDAwMCIsIGxhYmVsOiIxIFllYXIifSwKICAgICAgICB7dmFsdWU6ImFsd2F5cyIsIGxhYmVsOiJJbW1lZGlhdGVseSJ9CiAgICAgIF0sCiAgICAgIGxvY2F0aW9uT3B0aW9uczogW10sCiAgICAgIHJvdGF0b3JPcHRpb25zOiBbIkdvb2dsZSIsICJZZWxwIiwgIkZhY2Vib29rIl0sCiAgICAgIGNvbnRhY3RNZXRob2Q6IFsiRW1haWwiLCAiU01TIl0sCiAgICAgIHJvdGF0b3JQZXJjZW50YWdlTGlzdDogWzAsIDEwLCAyMCwgMzAsIDQwLCA1MCwgNjAsIDcwLCA4MCwgOTAsIDEwMF0sCiAgICAgIHN1cnZleVFzOiAiIiwKICAgICAgbGFuZGluZ1BhZ2U6ICcnLAogICAgICBjYW1wYWlnbjogewogICAgICAgIGNhbXBhaWduSWQ6ICIiLAogICAgICAgIHRlbXBvcmFyeUlkOiAiIiwKICAgICAgICB0eXBlOiAiIiwKICAgICAgICBuYW1lOiAiIiwKICAgICAgICBsb2NhdGlvbklkOiAnJywKICAgICAgICByZXNlbmQ6ICIxNTcyNDgwMDAwMCIsCiAgICAgICAgc3RhdHVzOiAiYWN0aXZlIiwKICAgICAgICBlbWFpbE1lc3NhZ2U6ICIiLAogICAgICAgIGVtYWlsRGV0YWlsczogewogICAgICAgICAgc3ViamVjdDogIkhvdyBBcmUgV2UgRG9pbmc/IiwKICAgICAgICAgIGRlc2lnbjogewogICAgICAgICAgICBkYXRhOiAiIiwKICAgICAgICAgICAgZGVzaWduOiAiIgogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc21zRGV0YWlsczogewogICAgICAgICAgaGVhZGVyOiAiIiwKICAgICAgICAgIG1lc3NhZ2U6ICIiCiAgICAgICAgfSwKICAgICAgICBmcmVxdWVuY3k6IHsKICAgICAgICAgIHR5cGU6ICcnLAogICAgICAgICAgZGF0ZTogJycsCiAgICAgICAgICBzY2hlZHVsZTogJycsCiAgICAgICAgICBkZWxheTogMAogICAgICAgIH0sCiAgICAgICAgZmlsdGVyczogewogICAgICAgICAgaW5jbHVkZTogeyAgICAgICAgICAgIAogICAgICAgICAgICByYXRpbmc6IFtdLAogICAgICAgICAgICB0YWdzOiBbXQogICAgICAgICAgfSwKICAgICAgICAgIGV4Y2x1ZGU6IHsKICAgICAgICAgICAgcmF0aW5nOiBbXSwKICAgICAgICAgICAgdGFnczogW10KICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGZvbGxvd1VwczogWwogICAgICAgICAge2hvdXJzOiA3Miwgc3ViamVjdDogIldlJ2QgTG92ZSB0byBIZWFyIGZyb20gWW91ISJ9LAogICAgICAgICAge2hvdXJzOiAyMTYsIHN1YmplY3Q6ICJXZSdkIFN0aWxsIExvdmUgdG8gSGVhciBmcm9tIFlvdSEifQogICAgICAgIF0sCiAgICAgICAgbWF4Rm9sbG93VXBzOiA0LAogICAgICAgIGNvbnRhY3RNZXRob2Q6IFsiRW1haWwiLCAiU01TIl0sCiAgICAgICAgc21zTWVzc2FnZTogIiIsCiAgICAgICAgZGVzaWduOiB7fSwKICAgICAgICBzdXJ2ZXk6ICIiLAogICAgICAgIHN1cnZleVF1ZXN0aW9uczogW10sCiAgICAgICAgcm90YXRvcnM6IFtdLAogICAgICAgIGxhbmRpbmdQYWdlOiB7CiAgICAgICAgICBscDE6ICJUaGFua3MgZm9yIHRoZSBGZWVkYmFjayEiLAogICAgICAgICAgbHAyOiAiIiwKICAgICAgICAgIGxwMzogIldlJ2QgbG92ZSB0byBoZWFyIHdoYXQgeW91J3ZlIGVuam95ZWQgYWJvdXQgb3VyIHNlcnZpY2Ugc28gd2UgY2FuIGNvbnRpbnVlIHRvIGRvIG91ciBiZXN0ISBQbGVhc2UgYWxzbyBjb25zaWRlciBsZWF2aW5nIHVzIGEgcHVibGljIHJldmlldyEiLAogICAgICAgICAgcnAxOiAiV2UncmUgU29ycnkgVG8gSGVhciBUaGF0IiwKICAgICAgICAgIHJwMjogIlBsZWFzZSBUZWxsIFVzIE1vcmUiLAogICAgICAgICAgcnAzOgogICAgICAgICAgICAiV2UgdGFrZSBvdXIgY3VzdG9tZXIgZmVlZGJhY2sgdmVyeSBzZXJpb3VzbHkgLSBwbGVhc2UgbGV0IHVzIGtub3cgaG93IHlvdXIgZXhwZXJpZW5jZSB3YXMgbGVzcyB0aGFuIGlkZWFsIHNvIHdlIGNhbiBpbXByb3ZlIGluIHRoZSBmdXR1cmUuIEluIG9yZGVyIHRvIGJldHRlciBhZGRyZXNzIHRoZSBpc3N1ZSwgcGxlYXNlIHByb3ZpZGUgc3BlY2lmaWNzLiBXZSBhcHByZWNpYXRlIHlvdXIgZmVlZGJhY2shIiwKICAgICAgICAgIGVtYWlsTm90RGlzcGxheWVkOiAiIgogICAgICAgIH0sCiAgICAgICAgaW50ZXJhY3Rpb25zOiB7CiAgICAgICAgICBlbWFpbHM6IHsKICAgICAgICAgICAgc2VudDogMCwKICAgICAgICAgICAgZGVsaXZlcmVkOiAwLAogICAgICAgICAgICBmYWlsZWQ6IDAsCiAgICAgICAgICAgIG9wZW5zOiAwLAogICAgICAgICAgICByZXBsaWVkOiAwCiAgICAgICAgICB9LAogICAgICAgICAgc21zOiB7CiAgICAgICAgICAgIHNlbnQ6IDAsCiAgICAgICAgICAgIGRlbGl2ZXJlZDogMCwKICAgICAgICAgICAgZmFpbGVkOiAwLAogICAgICAgICAgICBvcGVuczogMCwKICAgICAgICAgICAgcmVwbGllZDogMAogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgc3RlcDogMSwKICAgICAgcGFnaW5hdGlvbkRhdGE6IHsKICAgICAgICBwZXJQYWdlOiAyNSwKICAgICAgICBjdXJyZW50UGFnZTogMCwKICAgICAgICBwZXJQYWdlT3B0aW9uczogWzUsIDEwLCAyNV0sCiAgICAgICAgdG90YWw6IDAKICAgICAgfSwKICAgICAgYmFzZVVybDogJycsCiAgICAgIGN4OiAnNTAnLAogICAgICBidXR0b25Db2xvcnM6IFtdLAogICAgICBwcmV2aWV3TG9hZGluZzogZmFsc2UsCiAgICAgIGR1cGxpY2F0ZUlkOiBmYWxzZSwKICAgICAgc3RlcE9uZVJ1bGVzOiB7CiAgICAgICAgbmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ1BsZWFzZSBpbnB1dCBhIGNhbXBhaWduIG5hbWUnLCB0cmlnZ2VyOiAnYmx1cicgfSwgICAKICAgICAgICBdLAogICAgICAgIGxvY2F0aW9uSWQ6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICdQbGVhc2Ugc2VsZWN0IGEgbG9jYXRpb24nLCB0cmlnZ2VyOiAnY2hhbmdlJyB9LCAgICAgICAgICAgIAogICAgICAgIF0sCiAgICAgICAgdHlwZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ1BsZWFzZSBzZWxlY3QgYSBjYW1wYWlnbiB0eXBlJywgdHJpZ2dlcjogJ2NoYW5nZSd9CiAgICAgICAgXSwKICAgICAgICBjb250YWN0TWV0aG9kOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAnUGxlYXNlIHNlbGVjdCBob3cgeW91IHdhbnQgdGhlIGNhbXBhaWduIHRvIHNlbmQnLCB0cmlnZ2VyOiAnY2hhbmdlJ30gICAgICAgICAgCiAgICAgICAgXSwKICAgICAgICAnZnJlcXVlbmN5LnR5cGUnOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAnUGxlYXNlIHNlbGVjdCBob3cgb2Z0ZW4geW91IHdhbnQgdGhlIGNhbXBhaWduIHRvIHNlbmQnLCB0cmlnZ2VyOiAnY2hhbmdlJ30gICAgICAgICAgCiAgICAgICAgXQogICAgICB9LAogICAgICBzdGVwRm91clJ1bGVzOiB7CiAgICAgICAgcm90YXRvcnM6IFsKICAgICAgICAgIHsgdmFsaWRhdG9yOiB2YWxpZGF0ZVBlcmNlbnRhZ2VzLCBtZXNzYWdlOiAnRGlzdHJpYnV0aW9uIG11c3QgZXF1YWwgMCUgb3IgMTAwJScsIHRyaWdnZXI6ICdibHVyJyB9LCAgIAogICAgICAgIF0gICAgICAgIAogICAgICB9LAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjaGVja01vYmlsZSAoKSB7CiAgICAgIHJldHVybiB3aWR0aE1vYmlsZSA8PSAxMjAwOwogICAgfSwKICAgIGZyZXF1ZW5jeVR5cGVPcHRpb25zKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBpZih2bS5jYW1wYWlnbi50eXBlID09ICdSZXZpZXcgUmVxdWVzdCcgJiYgdm0uY3VycmVudFVzZXIuaXNTdXBlckFkbWluKSB7CiAgICAgICAgcmV0dXJuIChbIkltbWVkaWF0ZSIsICJTY2hlZHVsZWQiLCAiUmVjdXJyaW5nIiwgIkF1dG9tYXRlZCJdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gKFsiSW1tZWRpYXRlIiwgIlNjaGVkdWxlZCIsICJSZWN1cnJpbmciXSk7ICAgICAgCiAgICAgIH0KICAgIH0sCiAgICBjaGVja0JvcmRlclJhZGl1czEoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmKHZtLmNhbXBhaWduLnR5cGUgPT0gJ1JldmlldyBSZXF1ZXN0JykgewogICAgICAgIHJldHVybiAnMHB4JwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnMTVweCcKICAgICAgfQogICAgfSwKICAgIGNoZWNrQm9yZGVyUmFkaXVzMigpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgaWYodm0uY2FtcGFpZ24udHlwZSAhPSAnUmV2aWV3IFJlcXVlc3QnKSB7CiAgICAgICAgcmV0dXJuICcwcHgnCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICcxNXB4JwogICAgICB9CiAgICB9LAogICAgY2hlY2tCb3JkZXJSYWRpdXMzKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBpZih2bS5jYW1wYWlnbi50eXBlID09ICdDdXN0b20gTWVzc2FnZScgJiYgdm0uY2FtcGFpZ24uZnJlcXVlbmN5LnR5cGUgPT0gJ0ltbWVkaWF0ZScpIHsKICAgICAgICByZXR1cm4gJzE1cHgnCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICcwcHgnCiAgICAgIH0KICAgIH0sCiAgICBub1JvdGF0b3JzKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBpZighdm0uY2FtcGFpZ24ucm90YXRvcnMgfHwgIXZtLmNhbXBhaWduLnJvdGF0b3JzLmxlbmd0aCkgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGV0IHBlcmNlbnRhZ2UgPSAwOwogICAgICAgIHZtLmNhbXBhaWduLnJvdGF0b3JzLm1hcChyb3RhdG9yID0+IHsKICAgICAgICAgIGlmKHJvdGF0b3IucGVyY2VudGFnZSAmJiByb3RhdG9yLnBlcmNlbnRhZ2UgPiAwKSB7CiAgICAgICAgICAgIHBlcmNlbnRhZ2UgKz0gcm90YXRvci5wZXJjZW50YWdlOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgaWYocGVyY2VudGFnZSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLnNlbGVjdGVkQ2FtcGFpZ24gJiYgIXRoaXMuaW5pdGlhbGl6ZWRVbmxheWVyKSB7CiAgICAgIGlmKCF0aGlzLnNlbGVjdGVkQ2FtcGFpZ24uZm9sbG93VXBzKSB0aGlzLnNlbGVjdGVkQ2FtcGFpZ24uZm9sbG93VXBzID0gW107CiAgICAgIHRoaXMucGFnZUFjdGlvbiA9ICJBbmFseXRpY3MiOwogICAgICB0aGlzLmNhbXBhaWduID0gdGhpcy5zZWxlY3RlZENhbXBhaWduOwogICAgICBsZXQgbG9jYXRpb24gPSB7IHZhbHVlOiB0aGlzLmNhbXBhaWduLmxvY2F0aW9uSWQgfTsKICAgICAgdGhpcy5jaGFuZ2VMb2NhdGlvbihsb2NhdGlvbik7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmNhbXBhaWduLnR5cGUgPSB0aGlzLm5ld091dHJlYWNoOwogICAgfQogICAgaWYoIXRoaXMuc2VsZWN0ZWRDYW1wYWlnbikgewogICAgICB0aGlzLmdlbmVyYXRlSWQoKTsKICAgIH0KICAgIHRoaXMuY3VycmVudFVzZXIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50VXNlcicpKTsKICAgIAogICAgdGhpcy5nZXRMb2NhdGlvbk9wdGlvbnMoKTsKICAgIHRoaXMuYmFzZVVybCA9IGNvbmZpZy5iYXNlVXJsOwogICAgdGhpcy5jaXJjbGVJbnQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgIHRoaXMuY2hlY2tDaXJjbGVEaXN0YW5jZSgpOwogICAgfSwgMjUwKTsKICB9LAogIGZpbHRlcnM6IHsKICAgIG9uZURlY2ltYWwodmFsdWUpIHsKICAgICAgaWYoIWlzTmFOKHZhbHVlKSkgewogICAgICAgIHJldHVybiAodmFsdWUpLnRvRml4ZWQoMSkgKyAnICUnOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnLSc7CiAgICAgIH0KICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGFuZ2VFbWFpbE1lc3NhZ2UoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIC8vIEZpeCBkZXNpZ24uZGVzaWduIGRpZyBkb3duIHRvIHdoZXJlIHRoZSBhY3R1YWwgbGluZSBpcyBvbiBjdXN0b20gbWVzc2FnZXMuCiAgICAgIGlmKHZtLmNhbXBhaWduLnR5cGUgPT0gJ0N1c3RvbSBNZXNzYWdlJyAmJiB2bS5jYW1wYWlnbi5lbWFpbERldGFpbHMuZGVzaWduLmRhdGEpIHsKICAgICAgICB2bS5jYW1wYWlnbi5lbWFpbERldGFpbHMuZGVzaWduLmRhdGEgPSB2bS5jYW1wYWlnbi5lbWFpbERldGFpbHMuZGVzaWduLmRhdGEucmVwbGFjZSgnPHN0cm9uZz48L3N0cm9uZz4nLCB2bS5jYW1wYWlnbi5lbWFpbE1lc3NhZ2UpOwogICAgICAgIHZtLmNhbXBhaWduLmVtYWlsRGV0YWlscy5kZXNpZ24uZGVzaWduLmJvZHkucm93c1swXS5jb2x1bW5zWzBdLmNvbnRlbnRzWzBdLnZhbHVlcy5odG1sID0gdm0uY2FtcGFpZ24uZW1haWxEZXRhaWxzLmRlc2lnbi5kZXNpZ24uYm9keS5yb3dzWzBdLmNvbHVtbnNbMF0uY29udGVudHNbMF0udmFsdWVzLmh0bWwucmVwbGFjZSgnPHN0cm9uZz48L3N0cm9uZz4nLCB2bS5jYW1wYWlnbi5lbWFpbE1lc3NhZ2UpOwogICAgICB9IGVsc2UgaWYodm0uY2FtcGFpZ24udHlwZSA9PSAnUmV2aWV3IFJlcXVlc3QnICYmIHZtLmNhbXBhaWduLmVtYWlsRGV0YWlscy5kZXNpZ24uZGF0YSkgewogICAgICAgIGxldCBtZXNzYWdlID0gdm0uY2FtcGFpZ24uZW1haWxEZXRhaWxzLmRlc2lnbi5kYXRhOyAgICAgICAgCiAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2Uuc3Vic3RyaW5nKG1lc3NhZ2UuaW5kZXhPZignY2xhc3M9InRleHQtYmxvY2siJykrMTc2LCBtZXNzYWdlLmluZGV4T2YoJ1BMRUFTRSBSQVRFIFlPVVIgRVhQRVJJRU5DRTonKS0xNDUpOwogICAgICAgIGxldCBtZXNzYWdlMiA9IHZtLmNhbXBhaWduLmVtYWlsRGV0YWlscy5kZXNpZ24uZGVzaWduLmJvZHkucm93c1swXS5jb2x1bW5zWzBdLmNvbnRlbnRzWzBdLnZhbHVlcy5odG1sOwogICAgICAgIG1lc3NhZ2UyID0gbWVzc2FnZTIuc3Vic3RyaW5nKG1lc3NhZ2UyLmluZGV4T2YoJ2NsYXNzPSJ0ZXh0LWJsb2NrIicpKzE3NiwgbWVzc2FnZTIuaW5kZXhPZignUExFQVNFIFJBVEUgWU9VUiBFWFBFUklFTkNFOicpLTE0NSk7CiAgICAgICAgdm0uY2FtcGFpZ24uZW1haWxEZXRhaWxzLmRlc2lnbi5kYXRhID0gdm0uY2FtcGFpZ24uZW1haWxEZXRhaWxzLmRlc2lnbi5kYXRhLnJlcGxhY2UobWVzc2FnZSwgdm0uY2FtcGFpZ24uZW1haWxNZXNzYWdlKTsKICAgICAgICB2bS5jYW1wYWlnbi5lbWFpbERldGFpbHMuZGVzaWduLmRlc2lnbi5ib2R5LnJvd3NbMF0uY29sdW1uc1swXS5jb250ZW50c1swXS52YWx1ZXMuaHRtbCA9IHZtLmNhbXBhaWduLmVtYWlsRGV0YWlscy5kZXNpZ24uZGVzaWduLmJvZHkucm93c1swXS5jb2x1bW5zWzBdLmNvbnRlbnRzWzBdLnZhbHVlcy5odG1sLnJlcGxhY2UobWVzc2FnZTIsIHZtLmNhbXBhaWduLmVtYWlsTWVzc2FnZSk7CiAgICAgIH0KICAgIH0sCiAgICBnZW5lcmF0ZUlkKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBDYW1wYWlnblNlcnZpY2UuZ2V0VGVtcG9yYXJ5SWQoKS50aGVuKHJlc3BvbnNlID0+IHsgICAgICAKICAgICAgICB2bS5jYW1wYWlnbi50ZW1wb3JhcnlJZCA9IHJlc3BvbnNlOwogICAgICB9KQogICAgfSwKICAgIGhhbmRsZVdpZHRoU2l6ZSgpIHsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHsKICAgICAgICAvLyB0aGlzLndpZHRoTW9iaWxlID0gd2luZG93LmlubmVyV2lkdGg7CiAgICAgICAgaWYgKHRoaXMuaXNUYWJsZXQgfHwgL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7CiAgICAgICAgICB0aGlzLndpZHRoTW9iaWxlID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy53aWR0aE1vYmlsZSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCAgICAKICAgIGNhbmNlbFByZXZpZXcoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIHZtLnJlbW92ZUlmcmFtZSgnY2FuY2VsbGVkJyk7CiAgICAgIHZtLmVtYWlsUHJldmlldyA9IGZhbHNlOwogICAgfSwKICAgIHRvZ2dsZVByZXZpZXcoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIHZtLnNhdmVFbWFpbERlc2lnbigpOyAgCiAgICAgIHZtLmVtYWlsUHJldmlldyA9IGZhbHNlOwogICAgfSwKICAgIGNsb3NlTGFuZGluZ1ByZXZpZXcoKSB7CiAgICAgIHRoaXMubGFuZGluZ1ByZXZpZXcgPSBmYWxzZTsKICAgIH0sCiAgICB2YWxpZGF0ZUlEKGlkKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIENhbXBhaWduU2VydmljZS5nZXRDYW1wYWlnbnNCeUxvY2F0aW9uKHZtLmxvY2F0aW9uSWQsIGlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBsZXQgbG9jYXRpb25DYW1wYWlnbklkcyA9IHJlc3BvbnNlLnJlc3VsdAogICAgICAgIGxldCBhbGxJZHMgPSBbXQogICAgICAgIGxvY2F0aW9uQ2FtcGFpZ25JZHMubWFwKGNhbXBhaWduID0+IHsKICAgICAgICAgIGlmKGNhbXBhaWduLnN0YXR1cyAhPSAnZGVsZXRlZCcpIHsKICAgICAgICAgICAgaWYodHlwZW9mIGNhbXBhaWduLmlkZW50aWZpZXIgIT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICBhbGxJZHMucHVzaChKU09OLnN0cmluZ2lmeShjYW1wYWlnbi5pZGVudGlmaWVyKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgYWxsSWRzLnB1c2goY2FtcGFpZ24uaWRlbnRpZmllcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIHZtLmR1cGxpY2F0ZUlkID0gYWxsSWRzLmluY2x1ZGVzKGlkKTsKICAgICAgfSkKICAgIH0sCiAgICBzYXZlRW1haWxEZXNpZ24oKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7ICAgICAgCiAgICAgIGlmICh2bS5pbml0aWFsaXplZFVubGF5ZXIpIHsKICAgICAgICB1bmxheWVyLmV4cG9ydEh0bWwoZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgdm0uY2FtcGFpZ24uZW1haWxEZXRhaWxzLmRlc2lnbiA9IHsKICAgICAgICAgICAgZGF0YTogZGF0YS5odG1sLAogICAgICAgICAgICBkZXNpZ246IGRhdGEuZGVzaWduCiAgICAgICAgICB9OwogICAgICAgICAgdm0ucmVtb3ZlSWZyYW1lKCk7CiAgICAgICAgfSk7CiAgICAgIH0gICAgICAKICAgICAgLy8gY29uc29sZS5sb2codm0uc2VsZWN0ZWRBY3Rpb24uZW1haWwpOwogICAgfSwKICAgIGNoZWNrRGVsaXZlcnlNZXRob2QoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmKCF2bS5jYW1wYWlnbi5jb250YWN0TWV0aG9kLmluY2x1ZGVzKCdFbWFpbCcpKSB7CiAgICAgICAgdm0uc2VsZWN0ZWRDdXN0b21pemF0aW9uID0gMjsKICAgICAgfSAgICAgIAogICAgfSwKICAgIHByZXZpZXdFbWFpbCgpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgdm0uZW1haWxQcmV2aWV3ID0gdHJ1ZTsKICAgICAgbGV0IGxvYWRPcHRpb25zID0gewogICAgICAgIGxvY2s6IHRydWUsCiAgICAgICAgdGV4dDogJ0xvYWRpbmcnLAogICAgICAgIHNwaW5uZXI6ICdlbC1pY29uLWxvYWRpbmcnLAogICAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDAsMCwwLC4xNSknCiAgICAgIH0KICAgICAgdm0ucHJldmlld0xvYWRpbmcgPSBMb2FkaW5nLnNlcnZpY2UobG9hZE9wdGlvbnMpOwogICAgICAvLyBDaGVja3MgZm9yIHByb3BlciBpbmZvcm1hdGlvbiBpbiBvcmRlciB0byBwYXNzIGNvcnJlY3QgZGF0YSB0byBtYWlsY2hpbXAgZm9yIHRlc3RpbmcuCiAgICAgIGlmIChjb25maWcuc3ViRG9tYWluKSB7CiAgICAgICAgdmFyIHN1YkRvbWFpbiA9IGNvbmZpZy5zdWJEb21haW47CiAgICAgIH0KICAgICAgaWYgKGNvbmZpZy5iYXNlVXJsKSB7CiAgICAgICAgdmFyIGJhc2VVcmwgPSBjb25maWcuYmFzZVVybDsKICAgICAgfQogICAgICAvLyBUaW1lb3V0IGlzIHNldCB0byBiZSBtYW5pcHVsYXRlZCBpZiB3ZSBuZWVkIG1vcmUgdGltZSBsYXRlciBpbiBhIHNpbmdsZSB2YXJpYWJsZS4KICAgICAgdmFyIHRpbWVPdXQgPSA1MDA7CiAgICAgIC8vIENoZWNrIGlmIHRoZSBhY3Rpb24gcGFzc2VkIGludG8gdGhlIGZ1bmN0aW9uIGFscmVhZHkgaGFzIGJlZW4gc2F2ZWQsIHNvIHRoYXQgaXQgaXMgbm90IG92ZXJ3cml0dGVuIGlmIGl0IGlzLgogICAgICBpZiAodm0uY2FtcGFpZ24uZW1haWxEZXRhaWxzLmRlc2lnbi5kZXNpZ24pIHsKICAgICAgICAKICAgICAgICAvLyBDcmVhdGUgdGhlIHNjcmlwdCBhbmQgaWZyYW1lIHRvIGJlIHVzZWQgdG8gZWRpdCB0aGUgZW1haWwuCiAgICAgICAgdm0uJHVubGF5ZXJTY3JpcHQgPSB7CiAgICAgICAgICBpZDogImVtYWlsLWVkaXRvciIsCiAgICAgICAgICBwcm9qZWN0SWQ6IDE3NzcsCiAgICAgICAgICBkaXNwbGF5TW9kZTogImVtYWlsIgogICAgICAgIH07CgogICAgICAgIHZhciBkID0gZG9jdW1lbnQ7CiAgICAgICAgdmFyIHMgPSBkLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOwogICAgICAgIHMudHlwZSA9ICJ0ZXh0L2phdmFzY3JpcHQiOwogICAgICAgIHMuZGVmZXIgPSB0cnVlOwogICAgICAgIHMuc3JjID0gIi8vZWRpdG9yLnVubGF5ZXIuY29tL2VtYmVkLmpzIjsKICAgICAgICB2YXIgdCA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpWzBdOwogICAgICAgIHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUocywgdCk7CiAgICAgICAgLy8gQWN0dWFsbHkgbG9hZCB0aGUgZXhpc3RpbmcgZGVzaWduIGluIHRoZSBhY3Rpb24sIGNoZWNrIGZvciBpbml0aWFsaXplZFVubGF5ZXIgZXhpc3RzIGFzIGZhaWxzYWZlIGZvciB0aGUgaWZyYW1lIG5vdCBiZWluZyByZXNldCBwcm9wZXJseS4KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIGlmICghdm0uaW5pdGlhbGl6ZWRVbmxheWVyKSB7CiAgICAgICAgICAgIHVubGF5ZXIuaW5pdCh2bS4kdW5sYXllclNjcmlwdCk7CiAgICAgICAgICAgIHVubGF5ZXIubG9hZERlc2lnbih2bS5jYW1wYWlnbi5lbWFpbERldGFpbHMuZGVzaWduLmRlc2lnbik7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgdm0uaW5pdGlhbGl6ZWRVbmxheWVyID0gdHJ1ZTsKICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgdGltZU91dCk7CiAgICAgICAgLy8gdm0uc3Bpbm5lckFjdGl2ZSA9IGZhbHNlOwogICAgICB9IGVsc2UgewoKICAgICAgICAvLyBJZiBlbWFpbCBkZXNpZ24gZG9lbnMndCBleGlzdCBmb3IgdGhlIHNlbGVjdGVkIGFjdGlvbiwgY3JlYXRlIGFsbCBuZWNlc3NhcnkgZmllbGRzIHRvIHBhc3MgYXMgZGVzaWduVGFncyBhbmQgc2V0IHRoZSBpbml0aWFsIGRlc2lnbi4KICAgICAgICBMb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb24odm0uY2FtcGFpZ24ubG9jYXRpb25JZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGlzcGxheU5hbWUpIHsKICAgICAgICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IHJlc3BvbnNlLmRpc3BsYXlOYW1lOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IHJlc3BvbnNlLm5hbWU7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgc3R5bGUgPSByZXNwb25zZS5sb2NhdGlvblN0eWxlOwogICAgICAgICAgdmFyIGxvZ28gPSBzdHlsZS5sb2dvOwogICAgICAgICAgdmFyIGNvbG9ycyA9IHN0eWxlLmJ1dHRvbkNvbG9yIHx8ICIjNGZjYmM1IjsKICAgICAgICAgIHZhciBidXR0b25Db2xvcnMgPSB2bS5nZW5lcmF0ZUJ1dHRvbkNvbG9ycyhjb2xvcnMpOyAgICAgICAgCiAgICAgICAgICB2bS4kdW5sYXllclNjcmlwdCA9IHsKICAgICAgICAgICAgaWQ6ICJlbWFpbC1lZGl0b3IiLAogICAgICAgICAgICBwcm9qZWN0SWQ6IDE3NzcsCiAgICAgICAgICAgIGRpc3BsYXlNb2RlOiAiZW1haWwiLAogICAgICAgICAgICBkZXNpZ25UYWdzOiB7CiAgICAgICAgICAgICAgbG9jYXRpb25fbmFtZTogbG9jYXRpb25OYW1lLAogICAgICAgICAgICAgIG1lc3NhZ2VfYmxvY2sgOiB2bS5jYW1wYWlnbi5lbWFpbE1lc3NhZ2UsCiAgICAgICAgICAgICAgcmV2aWV3X3VybDogImh0dHBzOi8vIiArIHN1YkRvbWFpbiArICIub3Bpbmlpb24uY29tL2NhbXBhaWduUmV2aWV3RW1haWwvIiArIHZtLmNhbXBhaWduLmxvY2F0aW9uSWQgKyAnLycgKyB2bS5jYW1wYWlnbi50ZW1wb3JhcnlJZCArICIvKnxjaWR8KiIsCiAgICAgICAgICAgICAgZGlzcGxheV91cmw6ICJodHRwczovLyIgKyBzdWJEb21haW4gKyAiLm9waW5paW9uLmNvbS9sZWF2ZUZlZWRiYWNrLyIgKyB2bS5jYW1wYWlnbi5sb2NhdGlvbklkICsgJy8qfGNpZHwqL0VtYWlsJywKICAgICAgICAgICAgICB1bnN1YnNjcmliZV91cmw6ICJodHRwczovLyIgKyBzdWJEb21haW4gKyAiLm9waW5paW9uLmNvbS91bnN1YnNjcmliZT9jaWQ9KnxjaWR8KiIsCiAgICAgICAgICAgICAgaW1hZ2VfdXJsOiBiYXNlVXJsICsgYGxvY2F0aW9uXC9zaG93SW1hZ2VcL2AgKyB2bS5jYW1wYWlnbi5sb2NhdGlvbklkLAogICAgICAgICAgICAgIHN1cnZleV91cmw6IGJhc2VVcmwgKyAnc3VydmV5UmVzcG9uc2UvJywKICAgICAgICAgICAgICBidXR0b25fY29sb3JfMDogYnV0dG9uQ29sb3JzWzBdLAogICAgICAgICAgICAgIGJ1dHRvbl9jb2xvcl8xOiBidXR0b25Db2xvcnNbMV0sCiAgICAgICAgICAgICAgYnV0dG9uX2NvbG9yXzI6IGJ1dHRvbkNvbG9yc1syXSwKICAgICAgICAgICAgICBidXR0b25fY29sb3JfMzogYnV0dG9uQ29sb3JzWzNdLAogICAgICAgICAgICAgIGJ1dHRvbl9jb2xvcl80OiBidXR0b25Db2xvcnNbNF0sCiAgICAgICAgICAgICAgZm9vdGVyX2NvbG9yOiBzdHlsZS5mb290ZXJDb2xvciB8fCAibGlnaHRncmV5IgogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgIGlmICh2bS5jYW1wYWlnbi50eXBlID09ICJTdXJ2ZXkiKSB7CiAgICAgICAgICAgIHZtLiR1bmxheWVyU2NyaXB0LnRlbXBsYXRlSWQgPSA0OTc2OwogICAgICAgICAgfSBlbHNlIGlmICh2bS5jYW1wYWlnbi50eXBlID09ICJSZXZpZXcgUmVxdWVzdCIpIHsKICAgICAgICAgICAgdm0uJHVubGF5ZXJTY3JpcHQudGVtcGxhdGVJZCA9IDk4Nzg7CiAgICAgICAgICB9IGVsc2UgaWYgKHZtLmNhbXBhaWduLnR5cGUgPT0gIkN1c3RvbSBNZXNzYWdlIikgewogICAgICAgICAgICB2bS4kdW5sYXllclNjcmlwdC50ZW1wbGF0ZUlkID0gNTI4NDsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgZCA9IGRvY3VtZW50OwogICAgICAgICAgdmFyIHMgPSBkLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOwogICAgICAgICAgcy50eXBlID0gInRleHQvamF2YXNjcmlwdCI7CiAgICAgICAgICBzLmRlZmVyID0gdHJ1ZTsKICAgICAgICAgIHMuc3JjID0gIi8vZWRpdG9yLnVubGF5ZXIuY29tL2VtYmVkLmpzIjsKICAgICAgICAgIHZhciB0ID0gZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IilbMF07CiAgICAgICAgICB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHMsIHQpOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGlmICghdm0uaW5pdGlhbGl6ZWRVbmxheWVyKSB7CiAgICAgICAgICAgICAgdW5sYXllci5pbml0KHZtLiR1bmxheWVyU2NyaXB0KTsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIHZtLmluaXRpYWxpemVkVW5sYXllciA9IHRydWU7CiAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIHRpbWVPdXQpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHRoaXMucHJldmlld0xvYWRpbmcuY2xvc2UoKTsKICAgIH0sCiAgICBnb1RvU3RlcChzdGVwKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmKHZtLmN1cnJlbnRTdGVwICE9IHN0ZXApIHsKICAgICAgICBpZih2bS5jdXJyZW50U3RlcCA9PSAxICYmIHZtLiRyZWZzWydzdGVwT25lRm9ybSddKSB7CiAgICAgICAgICB2bS4kcmVmc1snc3RlcE9uZUZvcm0nXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgICAgaWYodmFsaWQpIHsKICAgICAgICAgICAgICB2bS5jdXJyZW50U3RlcCA9IHN0ZXA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2bS5jdXJyZW50U3RlcCA9IHN0ZXA7CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIGlmIChzdGVwID09IDEgJiYgdm0uY2FtcGFpZ24ubG9jYXRpb25JZCkgewogICAgICAvLyAgIHZtLmNhbXBhaWduLmxvY2F0aW9uSWQgPSAiIjsKICAgICAgLy8gICB2YXIgcmVJbml0aWFsaXplID0gdm0uc2VsZWN0ZWRMb2NhdGlvbjsKICAgICAgLy8gICB2bS5jaGFuZ2VMb2NhdGlvbihyZUluaXRpYWxpemUsICJpbml0aWFsaXplZCIpOwogICAgICAvLyB9CiAgICAgIC8vIGlmIChzdGVwICE9IDEpIHsKICAgICAgLy8gICBpZih2bS5pbml0aWFsaXplZFVubGF5ZXIpIHsKICAgICAgLy8gICAgIHVubGF5ZXIuZXhwb3J0SHRtbChmdW5jdGlvbihkYXRhKSB7CiAgICAgIC8vICAgICAgIHZtLmNhbXBhaWduLmRlc2lnbiA9IHsKICAgICAgLy8gICAgICAgICBkYXRhOiBkYXRhLmh0bWwsCiAgICAgIC8vICAgICAgICAgZGVzaWduOiBkYXRhLmRlc2lnbgogICAgICAvLyAgICAgICB9OwogICAgICAvLyAgICAgdm0ucmVtb3ZlSWZyYW1lKCk7CiAgICAgIC8vICAgICB9KQogICAgICAvLyAgIH0KICAgICAgLy8gfQogICAgICAvLyBpZiAoc3RlcCA9PSA0ICYmIHZtLnZpc2l0ZWQ0ID09IGZhbHNlKSB7CiAgICAgIC8vICAgdm0udmlzaXRlZDQgPSB0cnVlOwogICAgICAvLyAgIHRoaXMuY2FtcGFpZ24ubGFuZGluZ1BhZ2UubHAzID0KICAgICAgLy8gICAgIGBUaGFuayB5b3Ugc28gbXVjaCBmb3IgY2hvb3NpbmcgYCArCiAgICAgIC8vICAgICB0aGlzLmRhdGEudmFsdWUgKwogICAgICAvLyAgICAgYCEgWW91ciBzYXRpc2ZhY3Rpb24gaXMgb3VyIHRvcCBwcmlvcml0eSwgYW5kIHdlJ2QgbG92ZSB0byBoZWFyIGZyb20geW91LiBQbGVhc2UgdGFrZSBhIGZldyBzZWNvbmRzIHRvIGxldCB1cyBrbm93IGhvdyB3ZSdyZSBkb2luZy5gOwogICAgICAvLyB9CiAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAvLyAgIHRoaXMuc3RlcCA9IHN0ZXA7CiAgICAgIC8vIH0sIDEwMCk7CiAgICB9LAogICAgY2xlYXJGcmVxdWVuY3koKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmKHZtLmNhbXBhaWduLnR5cGUgPT0gJ1JldmlldyBSZXF1ZXN0JykgewogICAgICAgIHZtLmNhbXBhaWduLmVtYWlsRGV0YWlscy5zdWJqZWN0ID0gJ0hvdyBBcmUgV2UgRG9pbmc/JwogICAgICAgIHZtLnNldExvY2F0aW9uTmFtZSh2bS5jYW1wYWlnbi5sb2NhdGlvbklkKTsKICAgICAgfQogICAgICB2bS5jYW1wYWlnbi5mcmVxdWVuY3kudHlwZSA9ICcnOwogICAgICBpZih2bS5jYW1wYWlnbi50eXBlID09ICdDdXN0b20gTWVzc2FnZScpIHsKICAgICAgICB2bS5jYW1wYWlnbi5lbWFpbE1lc3NhZ2UgPSAnJzsKICAgICAgICB2bS5jYW1wYWlnbi5lbWFpbERldGFpbHMuc3ViamVjdCA9ICcnOwogICAgICAgIHZtLmNhbXBhaWduLnNtc0RldGFpbHMubWVzc2FnZSA9ICcnOwogICAgICAgIHZtLnNldExvY2F0aW9uTmFtZSh2bS5jYW1wYWlnbi5sb2NhdGlvbklkKTsKICAgICAgfQogICAgfSwKICAgIGNoZWNrRWRpdChzdGVwKSB7CiAgICAgIGlmKHRoaXMuY3VycmVudFN0ZXAgPj0gMSB8fCAodGhpcy5jYW1wYWlnbi5jYW1wYWlnbklkICYmIHRoaXMucGFnZUFjdGlvbiA9PSAnRWRpdCcpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LAogICAgbmV4dFN0ZXAoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmKHZtLmN1cnJlbnRTdGVwID09IDAgJiYgdm0uJHJlZnNbJ3N0ZXBPbmVGb3JtJ10pIHsKICAgICAgICB2bS4kcmVmc1snc3RlcE9uZUZvcm0nXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgIGlmKHZhbGlkKSB7CiAgICAgICAgICAgIGlmKHZtLmNhbXBhaWduLmZyZXF1ZW5jeS50eXBlID09ICdBdXRvbWF0ZWQnKSB7CiAgICAgICAgICAgICAgdm0uY3VycmVudFN0ZXAgPSB2bS5jdXJyZW50U3RlcCsyOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZtLmN1cnJlbnRTdGVwID0gdm0uY3VycmVudFN0ZXArMTsgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0gZWxzZSBpZih2bS5jdXJyZW50U3RlcCA9PSAzICYmIHZtLiRyZWZzWydzdGVwRm91ckZvcm0nXSkgewogICAgICAgIAogICAgICAgICAgdm0uJHJlZnNbJ3N0ZXBGb3VyRm9ybSddLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgICAgICBpZih2YWxpZCkgeyAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgdm0uY3VycmVudFN0ZXAgPSB2bS5jdXJyZW50U3RlcCsxOyAgICAgIAogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgfSBlbHNlIHsKICAgICAgICB2bS5jdXJyZW50U3RlcCA9IHZtLmN1cnJlbnRTdGVwKzE7ICAgICAgCiAgICAgIH0KICAgIH0sCiAgICBsYXN0U3RlcCgpIHsgICAgIAogICAgICBpZih0aGlzLmN1cnJlbnRTdGVwID09IDIpIHsKICAgICAgICBpZih0aGlzLmNhbXBhaWduLmZyZXF1ZW5jeS50eXBlID09ICdBdXRvbWF0ZWQnKSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdGhpcy5jdXJyZW50U3RlcC0yOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdGhpcy5jdXJyZW50U3RlcC0xOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsgICAgICAKICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gdGhpcy5jdXJyZW50U3RlcC0xOyAgICAgIAogICAgICB9CiAgICB9LAogICAgaGFuZGxlRnJlcXVlbmN5Q2hhbmdlKGRhdGEpIHsgICAgICAKICAgICAgdGhpcy5jYW1wYWlnbi5mcmVxdWVuY3kuZGF0ZSA9ICcnLAogICAgICB0aGlzLmNhbXBhaWduLmZyZXF1ZW5jeS5zY2hlZHVsZSA9ICcnCiAgICAgIGlmKGRhdGEgPT0gJ1JlY3VycmluZycpIHsKICAgICAgICB0aGlzLmNhbXBhaWduLnJlc2VuZCA9ICcyNTkyMDAwMDAwJzsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZURlbGF5Q2hhbmdlKCkgewogICAgICBpZih0aGlzLmNhbXBhaWduLmZyZXF1ZW5jeS5kZWxheSA8IDApIHsKICAgICAgICB0aGlzLmNhbXBhaWduLmZyZXF1ZW5jeS5kZWxheSA9IDA7CiAgICAgIH0KICAgIH0sCiAgICBnZXRMb2NhdGlvbk9wdGlvbnMoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIFVzZXJTZXJ2aWNlLmdldEFsbFVzZXJMb2NhdGlvbnMoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB2bS5sb2NhdGlvbk9wdGlvbnMgPSByZXNwb25zZTsKICAgICAgICBsZXQgY3VycmVudExvY2F0aW9uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2F0aW9uSWQnKTsKICAgICAgICBpZihjdXJyZW50TG9jYXRpb24gJiYgdm0ucGFnZUFjdGlvbiA9PSAnTmV3JykgewogICAgICAgICAgdm0uY2FtcGFpZ24ubG9jYXRpb25JZCA9IGN1cnJlbnRMb2NhdGlvbjsgCiAgICAgICAgICB2bS5zZXRMb2NhdGlvbk5hbWUodm0uY2FtcGFpZ24ubG9jYXRpb25JZCk7CiAgICAgICAgfSAKICAgICAgfSk7CiAgICB9LAogICAgZ2V0TG9jYXRpb25OYW1lKGxvY2F0aW9uSWQpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgbGV0IGN1cnJlbnROYW1lID0gJyc7CiAgICAgIHZtLmxvY2F0aW9uT3B0aW9ucy5tYXAoZWwgPT4gewogICAgICAgIGlmKGVsLmxvY2F0aW9uSWQgPT09IGxvY2F0aW9uSWQpIGN1cnJlbnROYW1lID0gZWwubmFtZTsKICAgICAgfSkKICAgICAgcmV0dXJuIGN1cnJlbnROYW1lOwogICAgfSwKICAgIGNoYW5nZUxvY2F0aW9uKGRhdGEsIGluZGljYXRvcikgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICBpZiAoY29uZmlnLnN1YkRvbWFpbikgewogICAgICAgIHZhciBzdWJEb21haW4gPSBjb25maWcuc3ViRG9tYWluOwogICAgICB9CiAgICAgIGlmIChjb25maWcuYmFzZVVybCkgewogICAgICAgIHZhciBiYXNlVXJsID0gY29uZmlnLmJhc2VVcmw7CiAgICAgIH0KICAgICAgdmFyIHRpbWVPdXQgPSA1MDA7CiAgICAgIGlmIChkYXRhLnZhbHVlKSB7CiAgICAgICAgaWYgKGRhdGEudmFsdWUgIT0gdm0uY2FtcGFpZ24ubG9jYXRpb25JZCkgewogICAgICAgICAgdm0ucmVtb3ZlSWZyYW1lKCk7CiAgICAgICAgICB2bS5jYW1wYWlnbi5sb2NhdGlvbklkID0gZGF0YS52YWx1ZTsKICAgICAgICAgIExvY2F0aW9uU2VydmljZS5nZXRMb2NhdGlvbihkYXRhLnZhbHVlKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRpc3BsYXlOYW1lKSB7CiAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IHJlc3BvbnNlLmRpc3BsYXlOYW1lOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSByZXNwb25zZS5uYW1lOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBzdHlsZSA9IHJlc3BvbnNlLmxvY2F0aW9uU3R5bGU7CiAgICAgICAgICAgIHZhciBsb2dvID0gc3R5bGUubG9nbzsKICAgICAgICAgICAgdmFyIGNvbG9ycyA9IHN0eWxlLmJ1dHRvbkNvbG9yIHx8ICIjNGZjYmM1IjsKICAgICAgICAgICAgdmFyIGJ1dHRvbkNvbG9ycyA9IHZtLmdlbmVyYXRlQnV0dG9uQ29sb3JzKGNvbG9ycyk7CiAgICAgICAgICAgIAogICAgICAgICAgICB2bS4kdW5sYXllclNjcmlwdCA9IHsKICAgICAgICAgICAgICBpZDogImVkaXRvciIsCiAgICAgICAgICAgICAgcHJvamVjdElkOiAxNzc3LAogICAgICAgICAgICAgIGRpc3BsYXlNb2RlOiAiZW1haWwiLAogICAgICAgICAgICAgIHRvb2xzOiB7CiAgICAgICAgICAgICAgICAiY3VzdG9tI3N1cnZleSI6IHsKICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uTmFtZTogbG9jYXRpb25OYW1lCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGRlc2lnblRhZ3M6IHsKICAgICAgICAgICAgICAgIGxvY2F0aW9uX25hbWU6IGxvY2F0aW9uTmFtZSwKICAgICAgICAgICAgICAgIG1lc3NhZ2VfYmxvY2sgOiB2bS5jYW1wYWlnbi5lbWFpbE1lc3NhZ2UsCiAgICAgICAgICAgICAgICByZXZpZXdfdXJsOiAiaHR0cHM6Ly8iICsgc3ViRG9tYWluICsgIi5vcGluaWlvbi5jb20vY2FtcGFpZ25SZXZpZXdFbWFpbC8iICsgdm0uY2FtcGFpZ24ubG9jYXRpb25JZCArICcvJyArIHZtLmNhbXBhaWduLnRlbXBvcmFyeUlkICsgIi8qfGNpZHwqIiwKICAgICAgICAgICAgICAgIGRpc3BsYXlfdXJsOiAiaHR0cHM6Ly8iICsgc3ViRG9tYWluICsgIi5vcGluaWlvbi5jb20vbGVhdmVGZWVkYmFjay8iICsgdm0uY2FtcGFpZ24ubG9jYXRpb25JZCArICcvKnxjaWR8Ki9FbWFpbCcsCiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZV91cmw6ICJodHRwczovLyIgKyBzdWJEb21haW4gKyAiLm9waW5paW9uLmNvbS91bnN1YnNjcmliZT9jaWQ9KnxjaWR8KiIsCiAgICAgICAgICAgICAgICBpbWFnZV91cmw6IGJhc2VVcmwgKyBgbG9jYXRpb25cL3Nob3dJbWFnZVwvYCArIHZtLmNhbXBhaWduLmxvY2F0aW9uSWQsCiAgICAgICAgICAgICAgICBzdXJ2ZXlfdXJsOiBiYXNlVXJsICsgJ3N1cnZleVJlc3BvbnNlLycsCiAgICAgICAgICAgICAgICBidXR0b25fY29sb3JfMDogYnV0dG9uQ29sb3JzWzBdLAogICAgICAgICAgICAgICAgYnV0dG9uX2NvbG9yXzE6IGJ1dHRvbkNvbG9yc1sxXSwKICAgICAgICAgICAgICAgIGJ1dHRvbl9jb2xvcl8yOiBidXR0b25Db2xvcnNbMl0sCiAgICAgICAgICAgICAgICBidXR0b25fY29sb3JfMzogYnV0dG9uQ29sb3JzWzNdLAogICAgICAgICAgICAgICAgYnV0dG9uX2NvbG9yXzQ6IGJ1dHRvbkNvbG9yc1s0XSwKICAgICAgICAgICAgICAgIGZvb3Rlcl9jb2xvcjogc3R5bGUuZm9vdGVyQ29sb3IgfHwgImxpZ2h0Z3JleSIKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBpZiAodm0uY2FtcGFpZ24udHlwZSA9PSAiU3VydmV5IikgewogICAgICAgICAgICAgIHZtLiR1bmxheWVyU2NyaXB0LnRlbXBsYXRlSWQgPSA0OTc2OwogICAgICAgICAgICB9IGVsc2UgaWYgKHZtLmNhbXBhaWduLnR5cGUgPT0gIlJldmlldyBSZXF1ZXN0IikgewogICAgICAgICAgICAgIHZtLiR1bmxheWVyU2NyaXB0LnRlbXBsYXRlSWQgPSA5ODc4OwogICAgICAgICAgICB9IGVsc2UgaWYgKHZtLmNhbXBhaWduLnR5cGUgPT0gIkN1c3RvbSBNZXNzYWdlIikgewogICAgICAgICAgICAgIHZtLiR1bmxheWVyU2NyaXB0LnRlbXBsYXRlSWQgPSA1Mjg0OwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgZCA9IGRvY3VtZW50OwogICAgICAgICAgICB2YXIgcyA9IGQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7CiAgICAgICAgICAgIHMudHlwZSA9ICJ0ZXh0L2phdmFzY3JpcHQiOwogICAgICAgICAgICBzLmRlZmVyID0gdHJ1ZTsKICAgICAgICAgICAgcy5zcmMgPSAiLy9lZGl0b3IudW5sYXllci5jb20vZW1iZWQuanMiOwogICAgICAgICAgICB2YXIgdCA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpWzBdOwogICAgICAgICAgICB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHMsIHQpOwogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICBpZighdm0uaW5pdGlhbGl6ZWRVbmxheWVyKSB7CiAgICAgICAgICAgICAgICB1bmxheWVyLmluaXQodm0uJHVubGF5ZXJTY3JpcHQpOwogICAgICAgICAgICAgICAgaWYgKHZtLmNhbXBhaWduLmRlc2lnbi5kYXRhKSB7CiAgICAgICAgICAgICAgICAgIHVubGF5ZXIubG9hZERlc2lnbih2bS5jYW1wYWlnbi5kZXNpZ24uZGVzaWduKTsKICAgICAgICAgICAgICAgICAgdm0uaW5pdGlhbGl6ZWRVbmxheWVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHVubGF5ZXIubG9hZERlc2lnbih2bS5kZWZhdWx0RGVzaWduKTsKICAgICAgICAgICAgICAgICAgdm0uaW5pdGlhbGl6ZWRVbmxheWVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHRpbWVPdXQpOwogICAgICAgICAgICB2bS5jYW1wYWlnbi5zbXNNZXNzYWdlID0KICAgICAgICAgICAgICAiVGhhbmsgeW91IHNvIG11Y2ggZm9yIGNob29zaW5nICIgKwogICAgICAgICAgICAgIGxvY2F0aW9uTmFtZSArCiAgICAgICAgICAgICAgIiEgUGxlYXNlIHRha2UgYSBmZXcgc2Vjb25kcyB0byB0ZWxsIHVzIGhvdyB3ZSdyZSBkb2luZy4gXG5cbiBDbGljayBIZXJlOiI7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYoIXZtLmluaXRpYWxpemVkVW5sYXllciAmJiBpbmRpY2F0b3IpIHsKICAgICAgICAgICAgdm0uJHVubGF5ZXJTY3JpcHQgPSB7CiAgICAgICAgICAgICAgaWQ6ICJlZGl0b3IiLAogICAgICAgICAgICAgIHByb2plY3RJZDogMTc3NywKICAgICAgICAgICAgICBkaXNwbGF5TW9kZTogImVtYWlsIgogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgZCA9IGRvY3VtZW50OwogICAgICAgICAgICB2YXIgcyA9IGQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7CiAgICAgICAgICAgIHMudHlwZSA9ICJ0ZXh0L2phdmFzY3JpcHQiOwogICAgICAgICAgICBzLmRlZmVyID0gdHJ1ZTsKICAgICAgICAgICAgcy5zcmMgPSAiLy9lZGl0b3IudW5sYXllci5jb20vZW1iZWQuanMiOwogICAgICAgICAgICB2YXIgdCA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpWzBdOwogICAgICAgICAgICB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHMsIHQpOwogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICB1bmxheWVyLmluaXQodm0uJHVubGF5ZXJTY3JpcHQpOwogICAgICAgICAgICAgIGlmICh2bS5jYW1wYWlnbi5kZXNpZ24uZGF0YSkgewogICAgICAgICAgICAgICAgdW5sYXllci5sb2FkRGVzaWduKHZtLmNhbXBhaWduLmRlc2lnbi5kZXNpZ24pOwogICAgICAgICAgICAgICAgdm0uaW5pdGlhbGl6ZWRVbmxheWVyID0gdHJ1ZTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdW5sYXllci5sb2FkRGVzaWduKHZtLmRlZmF1bHREZXNpZ24pOwogICAgICAgICAgICAgICAgdm0uaW5pdGlhbGl6ZWRVbmxheWVyID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHRpbWVPdXQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB2bS5zZWxlY3RlZExvY2F0aW9uID0gZGF0YTsKICAgICAgICB2bS5zZWFyY2hMb2NhdGlvblRleHQgPSBkYXRhLmxhYmVsOwogICAgICAgIHZtLmhpZGVNZW51KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coIk5vIGxvY2F0aW9uIHNlbGVjdGVkIik7CiAgICAgIH0KICAgIH0sCiAgICBzZXRQcml2YXRlKCkgewogICAgICBPYmplY3QuZW50cmllcyh0aGlzLmNhbXBhaWduLnJvdGF0b3JzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHsKICAgICAgICB0aGlzLmNhbXBhaWduLnJvdGF0b3JzW2Ake2tleX1gXS5wZXJjZW50YWdlID0gMDsKICAgICAgfSkgICAgICAKICAgIH0sCiAgICByZW1vdmVJZnJhbWUodHlwZSkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBpZighdHlwZSAKICAgICAgICAmJiB2bS5jYW1wYWlnbiAKICAgICAgICAmJiB2bS5jYW1wYWlnbi5lbWFpbERldGFpbHMgCiAgICAgICAgJiYgdm0uY2FtcGFpZ24uZW1haWxEZXRhaWxzLmRlc2lnbiAKICAgICAgICAmJiB2bS5jYW1wYWlnbi5lbWFpbERldGFpbHMuZGVzaWduLmRlc2lnbi5ib2R5IAogICAgICAgICYmIHZtLmNhbXBhaWduLmVtYWlsRGV0YWlscy5kZXNpZ24uZGVzaWduLmJvZHkucm93cyAKICAgICAgICAmJiB2bS5jYW1wYWlnbi5lbWFpbERldGFpbHMuZGVzaWduLmRlc2lnbi5ib2R5LnJvd3NbMF0gCiAgICAgICAgJiYgdm0uY2FtcGFpZ24uZW1haWxEZXRhaWxzLmRlc2lnbi5kZXNpZ24uYm9keS5yb3dzWzBdLmNvbHVtbnMgCiAgICAgICAgJiYgdm0uY2FtcGFpZ24uZW1haWxEZXRhaWxzLmRlc2lnbi5kZXNpZ24uYm9keS5yb3dzWzBdLmNvbHVtbnNbMF0gCiAgICAgICAgJiYgdm0uY2FtcGFpZ24uZW1haWxEZXRhaWxzLmRlc2lnbi5kZXNpZ24uYm9keS5yb3dzWzBdLmNvbHVtbnNbMF0uY29udGVudHMgCiAgICAgICAgJiYgdm0uY2FtcGFpZ24uZW1haWxEZXRhaWxzLmRlc2lnbi5kZXNpZ24uYm9keS5yb3dzWzBdLmNvbHVtbnNbMF0uY29udGVudHNbMV0gCiAgICAgICAgJiYgdm0uY2FtcGFpZ24uZW1haWxEZXRhaWxzLmRlc2lnbi5kZXNpZ24uYm9keS5yb3dzWzBdLmNvbHVtbnNbMF0uY29udGVudHNbMV0udmFsdWVzIAogICAgICAgICYmIHZtLmNhbXBhaWduLmVtYWlsRGV0YWlscy5kZXNpZ24uZGVzaWduLmJvZHkucm93c1swXS5jb2x1bW5zWzBdLmNvbnRlbnRzWzFdLnZhbHVlcy50ZXh0KSB7CiAgICAgICAgICB2bS5jYW1wYWlnbi5lbWFpbE1lc3NhZ2UgPSB2bS5jYW1wYWlnbi5lbWFpbERldGFpbHMuZGVzaWduLmRlc2lnbi5ib2R5LnJvd3NbMF0uY29sdW1uc1swXS5jb250ZW50c1sxXS52YWx1ZXMudGV4dC5yZXBsYWNlKC88W1xzXFNdKj8+L2dtLCAnJykudHJpbSgpOwogICAgICB9CiAgICAgIGlmICh2bS5pbml0aWFsaXplZFVubGF5ZXIpIHsKICAgICAgICB2YXIgeCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpZnJhbWUiKVswXTsKICAgICAgICB2YXIgZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKVswXTsKICAgICAgICBpZiAoeCkgewogICAgICAgICAgeC5yZW1vdmUoKQogICAgICAgIH0KICAgICAgICBpZiAoZCkgewogICAgICAgICAgZC5yZW1vdmUoKQogICAgICAgIH0KICAgICAgICB2bS5pbml0aWFsaXplZFVubGF5ZXIgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGdldFRhZ1N1Z2dlc3Rpb25zKHF1ZXJ5U3RyaW5nLCBjYikgeyAgICAgIAogICAgICBsZXQgc3VnZ2VzdGVkVGFncyA9IFsKICAgICAgICB7InZhbHVlIjogJ05ldyBDdXN0b21lcid9LAogICAgICAgIHsidmFsdWUiOiAnUmV0dXJuaW5nIEN1c3RvbWVyJ30sCiAgICAgICAgeyJ2YWx1ZSI6ICdNb3ZlLUluJ30sCiAgICAgICAgeyJ2YWx1ZSI6ICdNb3ZlLU91dCd9LAogICAgICAgIHsidmFsdWUiOiAnV29yayBPcmRlcid9CiAgICAgIF0KICAgICAgbGV0IHJlc3VsdHMgPSBxdWVyeVN0cmluZyA/IHN1Z2dlc3RlZFRhZ3MuZmlsdGVyKGVsID0+IGVsLnZhbHVlLmluY2x1ZGVzKHF1ZXJ5U3RyaW5nKSkgOiBzdWdnZXN0ZWRUYWdzOwogICAgICBjYihyZXN1bHRzKTsKICAgIH0sCiAgICBjaGVja0NpcmNsZURpc3RhbmNlKCkgewogICAgICBsZXQgY2lyY2xlT25lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpcnN0LWNpcmNsZScpOwogICAgICBsZXQgY2lyY2xlVHdvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlY29uZC1jaXJjbGUnKTsKICAgICAgaWYoY2lyY2xlT25lICYmIGNpcmNsZVR3bykgewogICAgICAgIGxldCB0b3BEaXNPbmUgPSBjaXJjbGVPbmUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueTsKICAgICAgICBsZXQgdG9wRGlzVHdvID0gY2lyY2xlVHdvLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnk7CiAgICAgICAgaWYoTWF0aC5hYnModG9wRGlzT25lIC0gdG9wRGlzVHdvKSA+IDUwKSB7CiAgICAgICAgICB0aGlzLmN4ID0gJy01MCc7CiAgICAgICAgfQogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5jaXJjbGVJbnQpCiAgICAgIH0KICAgIH0sCiAgICBzaG93TWVudSgpIHsKICAgICAgdGhpcy5zaG93aW5nTWVudSA9IHRydWU7CiAgICAgIHRoaXMuc2VhcmNoTG9jYXRpb25UZXh0ID0gJyc7CiAgICB9LAogICAgaGlkZU1lbnUoKSB7CiAgICAgIHRoaXMuc2hvd2luZ01lbnUgPSBmYWxzZQogICAgfSwKICAgIHNlbGVjdFN1Ym1lbnVJbmRleChpbmRleCkgewogICAgICB0aGlzLnNlbGVjdGVkQ3VzdG9taXphdGlvbiA9IGluZGV4OwogICAgfSwKICAgIHNhdmVEcmFmdCgpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgaWYodm0uJHJlZnNbJ3N0ZXBPbmVGb3JtJ10pIHsKICAgICAgICB2bS4kcmVmc1snc3RlcE9uZUZvcm0nXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgIGlmKHZhbGlkKSB7CiAgICAgICAgICAgIHZtLnNhdmVDYW1wYWlnbignZHJhZnQnKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9IGVsc2UgewogICAgICAgIHZtLnNhdmVDYW1wYWlnbignZHJhZnQnKTsKICAgICAgfQogICAgfSwKICAgIHNhdmVDYW1wYWlnbihzdGF0dXMpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgInNob3ciKTsKICAgICAgaWYoc3RhdHVzKSB7CiAgICAgICAgdm0uY2FtcGFpZ24uc3RhdHVzID0gJ2RyYWZ0JwogICAgICB9IGVsc2UgeyAgICAgICAgCiAgICAgICAgdm0uY2FtcGFpZ24uc3RhdHVzID0gJ2FjdGl2ZScKICAgICAgfQogICAgICBDYW1wYWlnblNlcnZpY2Uuc2F2ZUNhbXBhaWduKHZtLmNhbXBhaWduKS50aGVuKAogICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgICB2bS5jYW1wYWlnbiA9IHJlc3BvbnNlOwogICAgICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAiaGlkZSIpOwogICAgICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoInN1Y2Nlc3NNZXNzYWdlIiwgIkhvb3JheSEgQ2FtcGFpZ24gU2F2ZWQuIik7CiAgICAgICAgICAgIHZtLmNsb3NlTW9kYWwoKTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICBpZiAoZXJyb3IpIHsKICAgICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgImhpZGUiKTsKICAgICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KAogICAgICAgICAgICAgICJlcnJvck1lc3NhZ2UiLAogICAgICAgICAgICAgICJTb3JyeSwgc29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4uIgogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgdm0uY2xvc2VNb2RhbCgpOwogICAgICAgIH0KICAgICAgKTsKICAgIH0sCiAgICBzZW5kVGVzdEVtYWlsKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBpZih2bS50ZXN0RW1haWwubWF0Y2goL1thLXowLTkuXyUrLV0rQFthLXowLTkuLV0rXC5bYS16XXsyLH0kL2cpKSB7CiAgICAgICAgbGV0IG1lc3NhZ2VPYmogPSB2bS5jYW1wYWlnbi5lbWFpbERldGFpbHMuZGVzaWduOwogICAgICAgIG1lc3NhZ2VPYmouc3ViamVjdCA9IHZtLmNhbXBhaWduLmVtYWlsRGV0YWlscy5zdWJqZWN0OyAgICAgIAogICAgICAgIENhbXBhaWduU2VydmljZS50ZXN0Q2FtcGFpZ25NZXNzYWdlKHZtLmNhbXBhaWduLmVtYWlsRGV0YWlscy5kZXNpZ24sIHZtLmNhbXBhaWduLmxvY2F0aW9uSWQsIHZtLnRlc3RFbWFpbCwgbnVsbCwgJ1Rlc3RlcicpCiAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCdzdWNjZXNzTWVzc2FnZScsICdUZXN0IE1lc3NhZ2UgU2VudC4gWW91IHNob3VsZCByZWNlaXZlIGl0IHNob3J0bHkuJykKICAgICAgfSBlbHNlIHsKICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoJ2Vycm9yTWVzc2FnZScsICdUZXN0IE1lc3NhZ2UgTm90IFNlbnQgRHVlIHRvIE1hbGZvcm1lZCBFbWFpbCBBZGRyZXNzLicpCiAgICAgIH0KICAgIH0sCiAgICBzZW5kVGVzdFNNUygpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgaWYodm0udGVzdFNNUy5tYXRjaCgvWzAtOV17MTB9L2cpKSB7ICAgICAgICAKICAgICAgICBDYW1wYWlnblNlcnZpY2UudGVzdENhbXBhaWduTWVzc2FnZSh2bS5jYW1wYWlnbi5zbXNEZXRhaWxzLm1lc3NhZ2UsIHZtLmNhbXBhaWduLmxvY2F0aW9uSWQsIG51bGwsIHZtLnRlc3RTTVMsICdUZXN0ZXInLCB2bS5jYW1wYWlnbi50eXBlKQogICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgnc3VjY2Vzc01lc3NhZ2UnLCAnVGVzdCBNZXNzYWdlIFNlbnQuIFlvdSBzaG91bGQgcmVjZWl2ZSBpdCBzaG9ydGx5LicpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCdlcnJvck1lc3NhZ2UnLCAnVGVzdCBNZXNzYWdlIE5vdCBTZW50IER1ZSB0byB1bnJlY29nbml6ZWQgcGhvbmUgbnVtYmVyLicpCiAgICAgIH0KICAgIH0sCiAgICB2aWV3Q3VzdG9tZXJMaXN0KGZpbHRlcnMpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgaWYoZmlsdGVycykgewogICAgICAgIEN1c3RvbWVyU2VydmljZS5zZWFyY2hDdXN0b21lcnNCeUZpbHRlcnModm0uY2FtcGFpZ24ubG9jYXRpb25JZCwgdm0uY2FtcGFpZ24uZmlsdGVycykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB2bS5jdXJyZW50TGlzdCA9IHJlc3BvbnNlOyAgICAgICAKICAgICAgICB9KQogICAgICB9IGVsc2UgewogICAgICAgIEN1c3RvbWVyU2VydmljZS5zZWFyY2hDdXN0b21lcnNCeUZpbHRlcnModm0uY2FtcGFpZ24ubG9jYXRpb25JZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB2bS5jdXJyZW50TGlzdCA9IHJlc3BvbnNlOwogICAgICAgIH0pCiAgICAgIH0KICAgICAgdm0uc2hvd0N1c3RvbWVyc0xpc3QgPSB0cnVlOwogICAgfSwKICAgIHZpZXdGaWx0ZXJzKCkgewogICAgICB0aGlzLnNob3dDdXN0b21lcnNMaXN0ID0gZmFsc2U7CiAgICB9LAogICAgY2hlY2tWYWx1ZSh0b3RhbERhdGEsIGN1cnJlbnREYXRhLCBjaXJjbGUpIHsKICAgICAgaWYoY3VycmVudERhdGEvdG90YWxEYXRhID09IEluZmluaXR5IHx8IGN1cnJlbnREYXRhL3RvdGFsRGF0YSA9PSBOYU4pIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZihjaXJjbGUpIHsKICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0YS90b3RhbERhdGEqMjgyOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gKGN1cnJlbnREYXRhL3RvdGFsRGF0YSkqMTAwOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vIGFkZENvbmRpdGlvbigpIHsKICAgIC8vICAgbGV0IHZtID0gdGhpczsKICAgIC8vICAgdm0uY2FtcGFpZ24uY29uZGl0aW9ucy5wdXNoKHsKICAgIC8vICAgICBjb21wYXJhdG9yOiAiIiwKICAgIC8vICAgICBjdXN0b21lclJhdGluZzogIiIsCiAgICAvLyAgICAgc2VsZWN0aW9uOiAiIiwKICAgIC8vICAgICB0aW1lOiAiIiwKICAgIC8vICAgICByZXN0cmljdDogIiIsCiAgICAvLyAgICAgcmVzdHJpY3RUaW1lOiAiIgogICAgLy8gICB9KTsKICAgIC8vIH0sCiAgICAvLyByZW1vdmVDb25kaXRpb24oaW5kZXgpIHsKICAgIC8vICAgdGhpcy5jYW1wYWlnbi5jb25kaXRpb25zLnNwbGljZShpbmRleCwgMSk7CiAgICAvLyB9LAogICAgY2hhbmdlUXVlc3Rpb25zKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBpZiAodm0uY2FtcGFpZ24uc3VydmV5ID09ICJub25lIikgewogICAgICAgIHZtLmNhbXBhaWduLnN1cnZleVF1ZXN0aW9ucyA9IFtdOwogICAgICB9IGVsc2UgaWYgKHZtLmNhbXBhaWduLnN1cnZleSA9PSAiMSIpIHsKICAgICAgICB2bS5jYW1wYWlnbi5zdXJ2ZXlRdWVzdGlvbnMgPSBbCiAgICAgICAgICB7IG9yZGVyOiAxLCB0eXBlOiAiIiwgdGl0bGU6ICJCcmVha2Zhc3QiLCBxdWVzdGlvbjogIkhvdyB3YXMgaXQ/IiB9LAogICAgICAgICAgeyBvcmRlcjogMiwgdHlwZTogIiIsIHRpdGxlOiAiTHVuY2giLCBxdWVzdGlvbjogIldoYXQgd2FzIGl0PyIgfSwKICAgICAgICAgIHsgb3JkZXI6IDMsIHR5cGU6ICIiLCB0aXRsZTogIkRpbm5lciIsIHF1ZXN0aW9uOiAiV2h5IHdhcyBpdD8iIH0KICAgICAgICBdOwogICAgICB9IGVsc2UgaWYgKHZtLmNhbXBhaWduLnN1cnZleSA9PSAiMiIpIHsKICAgICAgICB2bS5jYW1wYWlnbi5zdXJ2ZXlRdWVzdGlvbnMgPSBbCiAgICAgICAgICB7IG9yZGVyOiAxLCB0eXBlOiAiIiwgdGl0bGU6ICJCYXNrZXRiYWxsIiwgcXVlc3Rpb246ICJIb3cgd2FzIGl0PyIgfSwKICAgICAgICAgIHsgb3JkZXI6IDIsIHR5cGU6ICIiLCB0aXRsZTogIkJhc2ViYWxsIiwgcXVlc3Rpb246ICJXaGF0IHdhcyBpdD8iIH0sCiAgICAgICAgICB7IG9yZGVyOiAzLCB0eXBlOiAiIiwgdGl0bGU6ICJGb290YmFsbCIsIHF1ZXN0aW9uOiAiV2h5IHdhcyBpdD8iIH0KICAgICAgICBdOwogICAgICB9IGVsc2UgaWYgKHZtLmNhbXBhaWduLnN1cnZleSA9PSAiMyIpIHsKICAgICAgICB2bS5jYW1wYWlnbi5zdXJ2ZXlRdWVzdGlvbnMgPSBbCiAgICAgICAgICB7IG9yZGVyOiAxLCB0eXBlOiAiIiwgdGl0bGU6ICJBcGUiLCBxdWVzdGlvbjogIkhvdyB3YXMgaXQ/IiB9LAogICAgICAgICAgeyBvcmRlcjogMiwgdHlwZTogIiIsIHRpdGxlOiAiU2t1bmsiLCBxdWVzdGlvbjogIldoYXQgd2FzIGl0PyIgfSwKICAgICAgICAgIHsgb3JkZXI6IDMsIHR5cGU6ICIiLCB0aXRsZTogIkhvbmV5YmFkZ2VyIiwgcXVlc3Rpb246ICJXaHkgd2FzIGl0PyIgfQogICAgICAgIF07CiAgICAgIH0KICAgIH0sCiAgICBhZGRTdXJ2ZXlRdWVzdGlvbigpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgbGV0IG5ld09yZGVyID0gdm0uY2FtcGFpZ24uc3VydmV5UXVlc3Rpb25zLmxlbmd0aCArIDE7CiAgICAgIHZtLmNhbXBhaWduLnN1cnZleVF1ZXN0aW9ucy5wdXNoKHsKICAgICAgICBvcmRlcjogbmV3T3JkZXIsCiAgICAgICAgdHlwZTogIiIsCiAgICAgICAgdGl0bGU6ICIiLAogICAgICAgIHF1ZXN0aW9uOiAiIgogICAgICB9KTsKICAgIH0sCiAgICByZW1vdmVTdXJ2ZXlRdWVzdGlvbihpbmRleCkgewogICAgICB0aGlzLmNhbXBhaWduLnN1cnZleVF1ZXN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIGRyYWdTdGFydChldmVudCkgewogICAgICB0aGlzLmRyYWdnaW5nID0gdHJ1ZTsKICAgICAgbGV0IGR0ID0gZXZlbnQuZGF0YVRyYW5zZmVyOwogICAgICBkdC5zZXREYXRhKCJ0ZXh0L3BsYWluIiwgZXZlbnQudGFyZ2V0LmlkKTsKICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZGlzYWJsZS1vbi1kcmFnIik7CiAgICAgIHZhciBpOwogICAgICBmb3IgKGkgPSAwOyBpIDwgZWwubGVuZ3RoOyBpKyspIHsKICAgICAgICBlbFtpXS5kaXNhYmxlZCA9IHRydWU7CiAgICAgIH0KICAgICAgLy8gY29uc29sZS5sb2coIkRyYWdnZWQiLCBkdCk7CiAgICB9LAogICAgZHJhZ092ZXIoZXZlbnQpIHsKICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAibW92ZSI7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdkcmFnb3ZlcicsIGV2ZW50LmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0KTsKICAgIH0sCiAgICBkcm9wUXVlc3Rpb24oZXZlbnQpIHsKICAgICAgbGV0IGR0ID0gZXZlbnQuZGF0YVRyYW5zZmVyOwogICAgICB2YXIgZGF0YSA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCJ0ZXh0L3BsYWluIik7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdkcm9wcGVkJywgZGF0YSArICcgaW50bycsIGV2ZW50LnRhcmdldC5pZCk7CiAgICAgIHRoaXMuc3RhcnRQb3NpdGlvbiA9IGRhdGE7CiAgICAgIHRoaXMuZW5kUG9zaXRpb24gPSBldmVudC50YXJnZXQuaWQ7CiAgICB9LAogICAgZHJhZ0VuZChldmVudCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBsZXQgc3RhcnQgPSB0aGlzLnN0YXJ0UG9zaXRpb247CiAgICAgIGxldCBlbmQgPSB0aGlzLmVuZFBvc2l0aW9uOwogICAgICB2YXIgbmV3QXJyYXkgPSBbXTsKICAgICAgLy8gY29uc29sZS5sb2coInN0YXJ0Iiwgc3RhcnQsICJlbmQiLCBlbmQpOwogICAgICBpZiAoc3RhcnQgJiYgZW5kKSB7CiAgICAgICAgdm0uY2FtcGFpZ24uc3VydmV5UXVlc3Rpb25zLm1hcCgocXVlc3Rpb24sIGkpID0+IHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGksIHN0YXJ0LCBlbmQpOwogICAgICAgICAgaWYgKGkgPT0gc3RhcnQpIHsKICAgICAgICAgICAgaSA9IGVuZDsKICAgICAgICAgICAgbmV3QXJyYXlbaV0gPSBxdWVzdGlvbjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChlbmQgPiBzdGFydCkgewogICAgICAgICAgICAgIGlmIChpID4gc3RhcnQgJiYgaSA8PSBlbmQpIHsKICAgICAgICAgICAgICAgIGkgPSBpIC0gMTsKICAgICAgICAgICAgICAgIG5ld0FycmF5W2ldID0gcXVlc3Rpb247CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG5ld0FycmF5W2ldID0gcXVlc3Rpb247CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKGVuZCA8IHN0YXJ0KSB7CiAgICAgICAgICAgICAgaWYgKGkgPCBzdGFydCAmJiBpID49IGVuZCkgewogICAgICAgICAgICAgICAgaSA9IGkgKyAxOwogICAgICAgICAgICAgICAgbmV3QXJyYXlbaV0gPSBxdWVzdGlvbjsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbmV3QXJyYXlbaV0gPSBxdWVzdGlvbjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2bS5jYW1wYWlnbi5zdXJ2ZXlRdWVzdGlvbnMgPSBuZXdBcnJheTsKICAgICAgICAvLyBjb25zb2xlLmxvZygicmVzdWx0Iiwgdm0uY2FtcGFpZ24uc3VydmV5UXVlc3Rpb25zKTsKICAgICAgfQogICAgICAvLyBjb25zb2xlLmxvZygiZHJhZyBlbmRlZCIpOwogICAgICB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJkaXNhYmxlLW9uLWRyYWciKTsKICAgICAgdmFyIGk7CiAgICAgIGZvciAoaSA9IDA7IGkgPCBlbC5sZW5ndGg7IGkrKykgewogICAgICAgIGVsW2ldLmRpc2FibGVkID0gZmFsc2U7CiAgICAgIH0KICAgICAgdm0uZHJhZ2dpbmcgPSBmYWxzZTsKICAgIH0sCiAgICBzZXRMb2NhdGlvbk5hbWUobG9jKSB7ICAgICAgCiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGxldCBsb2NhdGlvbiA9IHZtLmxvY2F0aW9uT3B0aW9ucy5maW5kKGVsID0+IHsKICAgICAgICByZXR1cm4gZWwubG9jYXRpb25JZCA9PSBsb2M7CiAgICAgIH0pCiAgICAgIHZtLmxvY2F0aW9uTmFtZSA9IGxvY2F0aW9uLm5hbWU7CiAgICAgIGlmKHZtLmNhbXBhaWduLnR5cGUgPT0gJ1JldmlldyBSZXF1ZXN0JykgewogICAgICAgIHZtLmNhbXBhaWduLmVtYWlsTWVzc2FnZSA9IAogICAgICAgICJUaGFuayB5b3Ugc28gbXVjaCBmb3IgY2hvb3NpbmcgIiArIGxvY2F0aW9uLm5hbWUgKyAiISBZb3VyIHNhdGlzZmFjdGlvbiBpcyBvdXIgdG9wIHByaW9yaXR5LCBhbmQgd2UnZCBsb3ZlIHRvIGhlYXIgZnJvbSB5b3UuIFBsZWFzZSB0YWtlIGEgZmV3IHNlY29uZHMgdG8gbGV0IHVzIGtub3cgaG93IHdlJ3JlIGRvaW5nLiI7CiAgICAgICAgdm0uY2FtcGFpZ24uc21zRGV0YWlscy5tZXNzYWdlID0gIlRoYW5rIHlvdSBzbyBtdWNoIGZvciBjaG9vc2luZyAiICsgbG9jYXRpb24ubmFtZSArICIhIFBsZWFzZSB0YWtlIGEgZmV3IHNlY29uZHMgdG8gdGVsbCB1cyBob3cgd2UncmUgZG9pbmcuIjsKICAgICAgICB2bS5jYW1wYWlnbi5sYW5kaW5nUGFnZS5lbWFpbE5vdERpc3BsYXllZCA9ICJBdCAiICsgbG9jYXRpb24ubmFtZSArICIsIHdlIGNhcmUgYWJvdXQgeW91ciBleHBlcmllbmNlIGFuZCB3YW50IHRvIGhlYXIgYWJvdXQgaXQuIFBsZWFzZSB0YWtlIGEgbW9tZW50IHRvIGxldCB1cyBrbm93IGhvdyB3ZSdyZSBkb2luZyEiCiAgICAgIH0KICAgICAgTG9jYXRpb25TZXJ2aWNlLmdldExvY2F0aW9uKGxvYykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYocmVzcG9uc2UpIHsKICAgICAgICAgIHZtLnNlbGVjdGVkTG9jYXRpb24gPSByZXNwb25zZTsKICAgICAgICAgIGlmKHZtLmNhbXBhaWduLnR5cGUgPT0gJ1JldmlldyBSZXF1ZXN0JykgewogICAgICAgICAgICB2bS5idXR0b25Db2xvcnMgPSB2bS5nZW5lcmF0ZUJ1dHRvbkNvbG9ycyhyZXNwb25zZS5sb2NhdGlvblN0eWxlLmJ1dHRvbkNvbG9yKTsKICAgICAgICAgICAgbGV0IHNlYXJjaE9iamVjdCA9IHsKICAgICAgICAgICAgICB0eXBlOiAnRGVmYXVsdCcsCiAgICAgICAgICAgICAgYnV0dG9uQ29sb3I6IHJlc3BvbnNlLmxvY2F0aW9uU3R5bGUuYnV0dG9uQ29sb3IsCiAgICAgICAgICAgICAgZm9vdGVyQ29sb3I6IHJlc3BvbnNlLmxvY2F0aW9uU3R5bGUuZm9vdGVyQ29sb3IsCiAgICAgICAgICAgICAgbG9jYXRpb25JZDogcmVzcG9uc2UubG9jYXRpb25JZCwKICAgICAgICAgICAgICBsb2NhdGlvbk5hbWU6IHJlc3BvbnNlLmRpc3BsYXlOYW1lLAogICAgICAgICAgICAgIGNhbXBhaWduSWQ6IHZtLmNhbXBhaWduLnRlbXBvcmFyeUlkCiAgICAgICAgICAgIH0KICAgICAgICAgICAgQ2FtcGFpZ25TZXJ2aWNlLmdldEVtYWlsRGVzaWduKHNlYXJjaE9iamVjdCkudGhlbihkZXNpZ25SZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGVzaWduUmVzcG9uc2UpOwogICAgICAgICAgICAgIHZtLmNhbXBhaWduLmVtYWlsRGV0YWlscy5kZXNpZ24gPSBkZXNpZ25SZXNwb25zZTsKICAgICAgICAgICAgfSkKICAgICAgICAgIH0gZWxzZSBpZih2bS5jYW1wYWlnbi50eXBlID09ICdDdXN0b20gTWVzc2FnZScpIHsKICAgICAgICAgICAgdm0uYnV0dG9uQ29sb3JzID0gdm0uZ2VuZXJhdGVCdXR0b25Db2xvcnMocmVzcG9uc2UubG9jYXRpb25TdHlsZS5idXR0b25Db2xvcik7CiAgICAgICAgICAgIGxldCBzZWFyY2hPYmplY3QgPSB7CiAgICAgICAgICAgICAgdHlwZTogJ0N1c3RvbScsCiAgICAgICAgICAgICAgYnV0dG9uQ29sb3I6IHJlc3BvbnNlLmxvY2F0aW9uU3R5bGUuYnV0dG9uQ29sb3IsCiAgICAgICAgICAgICAgZm9vdGVyQ29sb3I6IHJlc3BvbnNlLmxvY2F0aW9uU3R5bGUuZm9vdGVyQ29sb3IsCiAgICAgICAgICAgICAgbG9jYXRpb25JZDogcmVzcG9uc2UubG9jYXRpb25JZCwKICAgICAgICAgICAgICBsb2NhdGlvbk5hbWU6IHJlc3BvbnNlLmRpc3BsYXlOYW1lLAogICAgICAgICAgICAgIGNhbXBhaWduSWQ6IHZtLmNhbXBhaWduLnRlbXBvcmFyeUlkCiAgICAgICAgICAgIH0KICAgICAgICAgICAgQ2FtcGFpZ25TZXJ2aWNlLmdldEVtYWlsRGVzaWduKHNlYXJjaE9iamVjdCkudGhlbihkZXNpZ25SZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgdm0uY2FtcGFpZ24uZW1haWxEZXRhaWxzLmRlc2lnbiA9IGRlc2lnblJlc3BvbnNlOyAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICAgIGxldCByb3RhdG9ycyA9IFtdOwogICAgICAgICAgdm0uY2FtcGFpZ24ucm90YXRvcnMgPSBbXTsKICAgICAgICAgIHJlc3BvbnNlLnJvdGF0b3JzLm1hcChlbCA9PiB7CiAgICAgICAgICAgIHJvdGF0b3JzLnB1c2goZWwubmFtZSk7CiAgICAgICAgICAgIHZtLmNhbXBhaWduLnJvdGF0b3JzLnB1c2goeyBuYW1lOiBlbC5uYW1lLCBwZXJjZW50YWdlOiAwIH0pOwogICAgICAgICAgfSk7ICAgICAgICAgIAogICAgICAgICAgdm0ucm90YXRvck9wdGlvbnMgPSByb3RhdG9yczsKICAgICAgICAgIExvY2F0aW9uU2VydmljZS5nZXRBbGxMb2NhdGlvbkN1c3RvbWVyVGFncyhsb2MsIHZtLmNhbXBhaWduLmNvbnRhY3RNZXRob2QpLnRoZW4ocmVzcG9uc2UyID0+IHsKICAgICAgICAgICAgaWYocmVzcG9uc2UyKSB7ICAgICAgICAgICAgICAKICAgICAgICAgICAgICB2bS5kZWZhdWx0VGFnT3B0aW9ucyA9IHJlc3BvbnNlMi50YWdzCiAgICAgICAgICAgIH0gICAgICAgIAogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0TGFuZGluZygpIHsKICAgICAgdGhpcy5jYW1wYWlnbi5sYW5kaW5nUGFnZSA9IHsKICAgICAgICBscDE6ICJUaGFua3MgZm9yIHRoZSBGZWVkYmFjayEiLAogICAgICAgIGxwMjogIiIsCiAgICAgICAgbHAzOiAiV2UnZCBsb3ZlIHRvIGhlYXIgd2hhdCB5b3UndmUgZW5qb3llZCBhYm91dCBvdXIgc2VydmljZSBzbyB3ZSBjYW4gY29udGludWUgdG8gZG8gb3VyIGJlc3QhIFBsZWFzZSBhbHNvIGNvbnNpZGVyIGxlYXZpbmcgdXMgYSBwdWJsaWMgcmV2aWV3ISIsCiAgICAgICAgcnAxOiAiV2UncmUgU29ycnkgVG8gSGVhciBUaGF0IiwKICAgICAgICBycDI6ICJQbGVhc2UgVGVsbCBVcyBNb3JlIiwKICAgICAgICBycDM6CiAgICAgICAgICAiV2UgdGFrZSBvdXIgY3VzdG9tZXIgZmVlZGJhY2sgdmVyeSBzZXJpb3VzbHkgLSBwbGVhc2UgbGV0IHVzIGtub3cgaG93IHlvdXIgZXhwZXJpZW5jZSB3YXMgbGVzcyB0aGFuIGlkZWFsIHNvIHdlIGNhbiBpbXByb3ZlIGluIHRoZSBmdXR1cmUuIEluIG9yZGVyIHRvIGJldHRlciBhZGRyZXNzIHRoZSBpc3N1ZSwgcGxlYXNlIHByb3ZpZGUgc3BlY2lmaWNzLiBXZSBhcHByZWNpYXRlIHlvdXIgZmVlZGJhY2shIiwKICAgICAgICBlbWFpbE5vdERpc3BsYXllZDogIiIKICAgICAgfQogICAgfSwKICAgIHJlc2V0Rm9sbG93dXBzKCkgewogICAgICB0aGlzLmNhbXBhaWduLmZvbGxvd1VwcyA9IFsKICAgICAgICB7aG91cnM6IDcyLCBzdWJqZWN0OiAiV2UnZCBMb3ZlIHRvIEhlYXIgZnJvbSBZb3UhIn0sCiAgICAgICAge2hvdXJzOiAyMTYsIHN1YmplY3Q6ICJXZSdkIFN0aWxsIExvdmUgdG8gSGVhciBmcm9tIFlvdSEifQogICAgICBdOwogICAgfSwKICAgIHJlc2V0RW1haWwoKSB7CiAgICAgIHRoaXMuY2FtcGFpZ24uZW1haWxEZXRhaWxzID0gewogICAgICAgIHN1YmplY3Q6ICJIb3cgQXJlIFdlIERvaW5nPyIsCiAgICAgICAgZGVzaWduOiB7CiAgICAgICAgICBkYXRhOiAiIiwKICAgICAgICAgIGRlc2lnbjogIiIKICAgICAgICB9CiAgICAgIH07CiAgICAgIHRoaXMuY2FtcGFpZ24uZW1haWxNZXNzYWdlID0gIlRoYW5rIHlvdSBzbyBtdWNoIGZvciBjaG9vc2luZyAiICsgdGhpcy5sb2NhdGlvbk5hbWUgKyAiISBZb3VyIHNhdGlzZmFjdGlvbiBpcyBvdXIgdG9wIHByaW9yaXR5LCBhbmQgd2UnZCBsb3ZlIHRvIGhlYXIgZnJvbSB5b3UuIFBsZWFzZSB0YWtlIGEgZmV3IHNlY29uZHMgdG8gbGV0IHVzIGtub3cgaG93IHdlJ3JlIGRvaW5nLiI7CiAgICB9LAogICAgcmVzZXRTTVMoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIHRoaXMuY2FtcGFpZ24uc21zRGV0YWlscyA9IHsKICAgICAgICBoZWFkZXI6ICIiLAogICAgICAgIG1lc3NhZ2U6ICJUaGFuayB5b3Ugc28gbXVjaCBmb3IgY2hvb3NpbmcgIiArIHZtLmxvY2F0aW9uTmFtZSArICIhIFBsZWFzZSB0YWtlIGEgZmV3IHNlY29uZHMgdG8gdGVsbCB1cyBob3cgd2UncmUgZG9pbmcuIgogICAgICB9OwogICAgfSwKICAgIGNvbnZlcnREYXRlKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICB2bS5jYW1wYWlnbi5mcmVxdWVuY3kuZGF0ZSA9IERhdGUucGFyc2Uodm0uY2FtcGFpZ24uZnJlcXVlbmN5LmRhdGUpOyAgICAgIAogICAgfSwKICAgIGRpc3BsYXlEYXRlKGRhdGUpIHsgICAgICAKICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUpLnRvU3RyaW5nKCkuc3Vic3RyKDAsMTUpOwogICAgfSwKICAgIHByZXZpZXdMYW5kaW5nKHNlbnRpbWVudCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBsZXQgbG9hZE9wdGlvbnMgPSB7CiAgICAgICAgbG9jazogdHJ1ZSwKICAgICAgICB0ZXh0OiAnTG9hZGluZycsCiAgICAgICAgc3Bpbm5lcjogJ2VsLWljb24tbG9hZGluZycsCiAgICAgICAgYmFja2dyb3VuZDogJ3JnYmEoMCwwLDAsLjE1KScKICAgICAgfQogICAgICB2bS5wcmV2aWV3TG9hZGluZyA9IExvYWRpbmcuc2VydmljZShsb2FkT3B0aW9ucyk7CiAgICAgIGxldCB1cmxTdHJpbmcgPSAnL2xlYXZlUmV2aWV3LycrIHRoaXMuY2FtcGFpZ24ubG9jYXRpb25JZCArICcvdGVzdC8nOwogICAgICB0cnkgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsYW5kaW5nUGFnZScsIEpTT04uc3RyaW5naWZ5KHZtLmNhbXBhaWduLmxhbmRpbmdQYWdlKSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CiAgICAgIGlmKHNlbnRpbWVudCA9PSAnbmVnYXRpdmUnKSB7CiAgICAgICAgdXJsU3RyaW5nID0gdXJsU3RyaW5nICsgJzEnOwogICAgICAgIHZtLmxhbmRpbmdQcmV2aWV3ID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB1cmxTdHJpbmcgPSB1cmxTdHJpbmcgKyAnNSc7CiAgICAgICAgdm0ubGFuZGluZ1ByZXZpZXcgPSB0cnVlOwogICAgICB9CiAgICAgIGlmKGNvbmZpZy5zdWJEb21haW4gIT0gJ2xvY2FsaG9zdCcpIHsKICAgICAgICBpZih2bS5jYW1wYWlnbi50ZW1wb3JhcnlJZCkgewogICAgICAgICAgdXJsU3RyaW5nID0gJ2h0dHBzOi8vJyArIGNvbmZpZy5zdWJEb21haW4gKyAnLm9waW5paW9uLmNvbScgKyB1cmxTdHJpbmcgKyAnLycgKyB2bS5jYW1wYWlnbi50ZW1wb3JhcnlJZCArICcvJyArIERhdGUubm93KCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdXJsU3RyaW5nID0gJ2h0dHBzOi8vJyArIGNvbmZpZy5zdWJEb21haW4gKyAnLm9waW5paW9uLmNvbScgKyB1cmxTdHJpbmcgKyAnLycgKyB2bS5jYW1wYWlnbi5jYW1wYWlnbklkICsgJy8nICsgRGF0ZS5ub3coKQogICAgICAgIH0KICAgICAgfSBlbHNlIHsgICAgICAgIAogICAgICAgIHVybFN0cmluZyA9ICdodHRwOi8vJyArIGNvbmZpZy5zdWJEb21haW4gKyAnOjgwODAnICsgdXJsU3RyaW5nICsgJy8nICsgdm0uY2FtcGFpZ24uY2FtcGFpZ25JZCArICcvJyArIERhdGUubm93KCkKICAgICAgfQogICAgICB2bS51cmxTdHJpbmcgPSB1cmxTdHJpbmc7CiAgICB9LAogICAgYWRkRm9sbG93VXAoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGxldCBuZXdGb2xsb3dVcCA9IHtob3VyczogMCwgc3ViamVjdDogIiJ9OwogICAgICBpZiAodm0uY2FtcGFpZ24uZm9sbG93VXBzLmxlbmd0aCA8IDQpIHsKICAgICAgICB2bS5jYW1wYWlnbi5mb2xsb3dVcHMucHVzaChuZXdGb2xsb3dVcCkKICAgICAgfSBlbHNlIHsKICAgICAgICB2bS4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiBgU29ycnksIHlvdSBtYXkgb25seSBoYXZlIDQgZm9sbG93LXVwcy5gLAogICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgIH0pOwogICAgICB9CiAgICAgIC8vIHZtLmNhbXBhaWduLmZvbGxvd1Vwcy5wdXNoKG5ld0ZvbGxvd1VwKTsKICAgIH0sCiAgICByZW1vdmVGb2xsb3dVcChpbmRleCkgewogICAgICB0aGlzLmNhbXBhaWduLmZvbGxvd1Vwcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIHN0b3BMb2FkaW5nKCkgewogICAgICB0aGlzLnByZXZpZXdMb2FkaW5nLmNsb3NlKCk7CiAgICB9LAogICAgZGlzcGxheUljb24oc291cmNlKSB7CiAgICAgIHNvdXJjZSA9IHNvdXJjZVswXS50b1VwcGVyQ2FzZSgpICsgc291cmNlLnN1YnN0cigxKTsKICAgICAgCiAgICAgIGlmIChzb3VyY2UgPT0gIkdvb2dsZSIpIHsKICAgICAgICByZXR1cm4gcmVxdWlyZSgiLi4vLi4vcHVibGljL2ltZy9Hb29nbGVfSWNvbi5wbmciKTsKICAgICAgfSBlbHNlIGlmIChzb3VyY2UgPT0gIlllbHAiKSB7CiAgICAgICAgcmV0dXJuIHJlcXVpcmUoIi4uLy4uL3B1YmxpYy9pbWcvWWVscF9JY29uLnBuZyIpOwogICAgICB9IGVsc2UgaWYgKHNvdXJjZSA9PSAiRmFjZWJvb2siKSB7CiAgICAgICAgcmV0dXJuIHJlcXVpcmUoIi4uLy4uL3B1YmxpYy9pbWcvRmFjZWJvb2tfSWNvbi5wbmciKTsKICAgICAgfSBlbHNlIGlmIChzb3VyY2UgPT0gIkZvdXJzcXVhcmUiKSB7CiAgICAgICAgcmV0dXJuIHJlcXVpcmUoIi4uLy4uL3B1YmxpYy9pbWcvRm91cnNxdWFyZV9JY29uLnBuZyIpOwogICAgICB9IGVsc2UgaWYgKHNvdXJjZSA9PSAiQ2l0eXNlYXJjaCIpIHsKICAgICAgICByZXR1cm4gcmVxdWlyZSgiLi4vLi4vcHVibGljL2ltZy9DaXR5c2VhcmNoX0ljb24ucG5nIik7CiAgICAgIH0gZWxzZSBpZiAoc291cmNlID09ICJZZWxsb3dwYWdlcyIpIHsKICAgICAgICByZXR1cm4gcmVxdWlyZSgiLi4vLi4vcHVibGljL2ltZy9ZUF9JY29uLnBuZyIpOwogICAgICAgIC8vIH0gZWxzZSBpZiAoc291cmNlID09ICdUcmlwQWR2aXNvcicpIHsKICAgICAgICAvLyAgIHJldHVybiByZXF1aXJlKCcuLi8uLi9wdWJsaWMvaW1nL1RyaXBBZHZpc29yX0ljb24ucG5nJyk7CiAgICAgICAgLy8gfSBlbHNlIGlmIChzb3VyY2UgPT0gJ0JCQicpIHsKICAgICAgICAvLyAgIHJldHVybiByZXF1aXJlKCcuLi8uLi9wdWJsaWMvaW1nL0JCQl9JY29uLnBuZycpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiByZXF1aXJlKCIuLi8uLi9wdWJsaWMvaW1nL09waW5paW9uX0ljb24ucG5nIik7CiAgICAgIH0KICAgIH0sCiAgICBjbG9zZVByZXZpZXdNb2RhbCgpIHsKICAgICAgdGhpcy5vcGVuUHJldmlld0NhbXBhaWduID0gZmFsc2U7CiAgICB9LAogICAgZWRpdENhbXBhaWduKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICB2bS5wYWdlQWN0aW9uID0gJ0VkaXQnOwogICAgICBMb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb24odm0uY2FtcGFpZ24ubG9jYXRpb25JZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdmFyIGNvbG9ycyA9IHJlc3BvbnNlLmxvY2F0aW9uU3R5bGUuYnV0dG9uQ29sb3IgfHwgIiM0ZmNiYzUiOwogICAgICAgIHZtLmJ1dHRvbkNvbG9ycyA9IHZtLmdlbmVyYXRlQnV0dG9uQ29sb3JzKGNvbG9ycyk7CiAgICAgIH0pCiAgICAgIHZtLmN1cnJlbnRTdGVwID0gMDsKICAgIH0sCiAgICBjb25maXJtQ2xvc2VNb2RhbCgpIHsKICAgICAgdGhpcy4kY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3aXNoIHRvIGV4aXQgd2l0aG91dCBzYXZpbmc/JywgJycsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ1llcycsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ0NhbmNlbCcsCiAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgIH0pLnRoZW4oIF8gPT4gewogICAgICAgIHRoaXMuY2xvc2VNb2RhbCgpOwogICAgICB9KS5jYXRjaCggXyA9PiB7ICAgICAgICAKICAgICAgfSkKICAgIH0sCiAgICBjbG9zZU1vZGFsOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy4kZW1pdCgiY2xvc2VNb2RhbCIpOwogICAgICB0aGlzLmNhbXBhaWduID0ge307CiAgICAgIHRoaXMuY2FtcGFpZ25PcGVuID0gZmFsc2U7CiAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIik7CiAgICB9LAogICAgZ2VuZXJhdGVCdXR0b25Db2xvcnMoaW5pdGlhbENvbG9yKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIHJldHVybiBbCiAgICAgICAgdm0ubGlnaHRlbkNvbG9yKGluaXRpYWxDb2xvciwgNDApLAogICAgICAgIHZtLmxpZ2h0ZW5Db2xvcihpbml0aWFsQ29sb3IsIDMwKSwKICAgICAgICB2bS5saWdodGVuQ29sb3IoaW5pdGlhbENvbG9yLCAyMCksCiAgICAgICAgdm0ubGlnaHRlbkNvbG9yKGluaXRpYWxDb2xvciwgMTApLAogICAgICAgIGluaXRpYWxDb2xvcgogICAgICBdOwogICAgfSwKICAgIGxpZ2h0ZW5Db2xvcihpbml0aWFsQ29sb3IsIGFtdCkgewogICAgICB2YXIgY29sID0gaW5pdGlhbENvbG9yLnNsaWNlKDEpOwoKICAgICAgdmFyIG51bSA9IHBhcnNlSW50KGNvbCwgMTYpOwoKICAgICAgdmFyIHIgPSAobnVtID4+IDE2KSArIGFtdDsKCiAgICAgIGlmIChyID4gMjU1KSByID0gMjU1OwogICAgICBlbHNlIGlmIChyIDwgMCkgciA9IDA7CgogICAgICB2YXIgYiA9ICgobnVtID4+IDgpICYgMHgwMGZmKSArIGFtdDsKCiAgICAgIGlmIChiID4gMjU1KSBiID0gMjU1OwogICAgICBlbHNlIGlmIChiIDwgMCkgYiA9IDA7CgogICAgICB2YXIgZyA9IChudW0gJiAweDAwMDBmZikgKyBhbXQ7CgogICAgICBpZiAoZyA+IDI1NSkgZyA9IDI1NTsKICAgICAgZWxzZSBpZiAoZyA8IDApIGcgPSAwOwoKICAgICAgcmV0dXJuICgKICAgICAgICAiIyIgKwogICAgICAgIFN0cmluZygiMDAwMDAwIiArIChnIHwgKGIgPDwgOCkgfCAociA8PCAxNikpLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTYpCiAgICAgICk7CiAgICB9LAogICAgY2hlY2tDaXJjbGVEaXN0YW5jZSgpIHsKICAgICAgbGV0IGNpcmNsZU9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaXJzdC1jaXJjbGUnKTsKICAgICAgbGV0IGNpcmNsZVR3byA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWNvbmQtY2lyY2xlJyk7CiAgICAgIGlmKGNpcmNsZU9uZSAmJiBjaXJjbGVUd28pIHsKICAgICAgICBsZXQgdG9wRGlzT25lID0gY2lyY2xlT25lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnk7CiAgICAgICAgbGV0IHRvcERpc1R3byA9IGNpcmNsZVR3by5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS55OwogICAgICAgIGlmKE1hdGguYWJzKHRvcERpc09uZSAtIHRvcERpc1R3bykgPiA1MCkgewogICAgICAgICAgdGhpcy5jeCA9ICctNTAnOwogICAgICAgIH0KICAgICAgICBjbGVhckludGVydmFsKHRoaXMuY2lyY2xlSW50KQogICAgICB9CiAgICB9LAogIH0KfTsK"},{"version":3,"sources":["AddCampaign.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA62BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddCampaign.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <transition name=\"modal\">\n    <el-dialog class=\"dialog-new-campaign-container\" width=\"1400px\" :visible.sync=\"campaignOpen\" :before-close=\"confirmCloseModal\" :show-close=\"false\">\n      <h2 class=\"header-title\" slot=\"title\" v-if=\"!emailPreview && !landingPreview && pageAction != 'Analytics'\">{{pageAction}} Campaign</h2>\n      <h2 class=\"header-title\" slot=\"title\" v-if=\"pageAction == 'Analytics'\">Campaign {{pageAction}} </h2>\n      <i class=\"fal fa-times top-left clickable\" @click=\"confirmCloseModal\" v-if=\"!emailPreview && !landingPreview\"></i>\n      <span class=\"top-left\" v-if=\"emailPreview\">Preview</span>\n      <div class=\"campaign-body-container\" v-if=\"!emailPreview && !landingPreview\">\n        <!-- Step Headers -->\n        <div class=\"campaign-steps\" v-if=\"pageAction != 'Analytics'\">\n          <el-steps :class=\"{'missing-step': campaign.frequency.type == 'Automated'}\" :active=\"currentStep\" icon=\"fas fa-home\" finish-status=\"success\" align-center >\n            <el-step :class=\"{'active-step': currentStep == 0}\" @click=\"goToStep(0)\" title=\"Setup\"></el-step>\n            <el-step :class=\"{'active-step': currentStep == 1}\" @click=\"goToStep(1)\" title=\"Audience\" v-show=\"campaign.frequency.type != 'Automated'\"></el-step>\n            <el-step :class=\"{'active-step': currentStep == 2}\" @click=\"goToStep(2)\" title=\"Customize\" description=\"(Optional)\"></el-step>\n            <el-step v-if=\"campaign.type != 'Survey'\" :class=\"{'active-step': currentStep == 3}\" @click=\"goToStep(3)\" title=\"Distribute\"></el-step>\n            <el-step :class=\"{'active-step': currentStep == 3}\" v-if=\"campaign.type == 'Survey'\" @click=\"goToStep(3)\" title=\"Survey\"></el-step>\n            <el-step :class=\"{'active-step': currentStep == 4}\" @click=\"goToStep(4)\" title=\"Complete\"></el-step>\n          </el-steps>\n        <!-- Step Bodies -->\n          <div class=\"campaign-body\">\n\n            <!-- Step 1 -->\n            <div class=\"data-container\" v-show=\"currentStep == 0\">\n              <el-form :model=\"campaign\" ref=\"stepOneForm\" :rules=\"stepOneRules\">\n                <el-row class=\"data-column\">\n                  <el-col :span=\"10\">\n                    <div class=\"grid-content\">\n                      <div class=\"data-input\">\n                        <label>Give your campaign a name.</label>\n                        <el-form-item prop=\"name\">\n                          <el-input v-model=\"campaign.name\"></el-input>\n                        </el-form-item>\n                      </div>\n                      <div class=\"data-input\">\n                        <label>What location is this campaign for?</label>\n                        <el-form-item prop=\"locationId\">\n                          <el-select v-model=\"campaign.locationId\" filterable @change=\"setLocationName($event)\">\n                            <el-option v-for=\"(location, locIndex) in locationOptions\"\n                                      :key=\"locIndex\"\n                                      :value=\"location.locationId\"\n                                      :label=\"location.name\">\n                            </el-option>\n                          </el-select>\n                        </el-form-item>\n                      </div>\n                      <div class=\"data-input\">\n                        <label>Select the type of campaign to send.</label>\n                        <el-form-item prop=\"type\">\n                          <el-select class=\"rounded-input\" v-model=\"campaign.type\" @change=\"clearFrequency()\">\n                            <el-option v-for=\"typeOption in campaignTemplates\"\n                                      :key=\"typeOption\"\n                                      :value=\"typeOption\">\n                              {{typeOption}}\n                            </el-option>\n                          </el-select>\n                        </el-form-item>\n                      </div>\n                      <div class=\"data-input\">\n                        <label>How would you like it to be delivered?</label>\n                        <el-form-item prop=\"contactMethod\">\n                          <el-select class=\"rounded-input\" v-model=\"campaign.contactMethod\" multiple @change=\"checkDeliveryMethod()\">\n                            <el-option v-for=\"methodOption in contactMethod\"\n                                      :key=\"methodOption\"\n                                      :value=\"methodOption\">\n                              {{methodOption}}\n                            </el-option>\n                          </el-select>\n                        </el-form-item>\n                      </div>\n                    </div>\n                  </el-col>\n                  <el-col :span=\"12\">\n                    <div class=\"grid-content\">\n                      <div class=\"data-input\">\n                        <label>Select Send Option.</label>\n                        <el-form-item prop=\"frequency.type\">\n                          <el-select class=\"rounded-input\" v-model=\"campaign.frequency.type\" @change=\"handleFrequencyChange\" :disabled=\"!currentUser.isSuperAdmin && campaign.frequency.type == 'Automated'\">\n                            <el-option v-for=\"frequencyType in frequencyTypeOptions\"\n                                      :key=\"frequencyType\"\n                                      :value=\"frequencyType\">\n                              {{frequencyType}}\n                            </el-option>\n                          </el-select>\n                        </el-form-item>\n                        <el-select class=\"rounded-input\" v-if=\"campaign.frequency.type == 'Recurring'\" v-model=\"campaign.frequency.schedule\" placeholder=\"Select Frequency\">\n                          <el-option v-for=\"scheduledInterval in frequencyScheduleOptions\"\n                                    :key=\"scheduledInterval\"\n                                    :value=\"scheduledInterval\">\n                            {{scheduledInterval}}\n                          </el-option>\n                        </el-select>\n                        <label v-if=\"campaign.frequency.type == 'Recurring'\">Initial Run Date </label>\n                        <label v-if=\"campaign.frequency.type == 'Scheduled'\">Run Date </label>\n                        <el-date-picker v-model=\"campaign.frequency.date\" \n                                        @change=\"convertDate()\"\n                                        v-if=\"campaign.frequency.type == 'Scheduled' || campaign.frequency.type == 'Recurring'\">\n                        </el-date-picker>\n                        <span style=\"word-break:keep-all;font-size: 12px;color:#855f00;\" v-if=\"campaign.frequency.type == 'Scheduled' && Date.now() > campaign.frequency.date && campaign.status != 'Sent'\">Scheduling in the past will send the campaign as soon as possible.</span>\n                        <div class=\"data-input\" v-else-if=\"campaign.frequency.type == 'Automated'\">\n                          <label style=\"word-break:keep-all;\">How long after a customer is added to this location should they receive this message?</label>\n                          <div>\n                            <el-input class=\"hour-delay\" \n                                      v-model=\"campaign.frequency.delay\"\n                                      min=\"0\"\n                                      type=\"number\"\n                                      @change=\"handleDelayChange\">                                    \n                            </el-input>\n                            Hours\n                          </div>\n\n                        </div>\n                        <div class=\"campaign-identifier\" v-if=\"campaign.frequency.type == 'Automated'\">\n                          <label>What tag should customers have on them to be targeted with this campaign?</label><br>\n                          <sub class=\"subtitle\">This will be used as part of your integration to ensure the correct customer is added to the correct campaign.</sub>\n                          <el-autocomplete v-model=\"campaign.identifier\" \n                                          @change=\"validateID(campaign.identifier)\"\n                                          placeholder=\"e.g.: Move-In\"\n                                          :fetch-suggestions=\"getTagSuggestions\"\n                                          :disabled=\"!currentUser.isSuperAdmin\"\n                                          >\n                          </el-autocomplete>\n                          <span class=\"error\" v-if=\"duplicateId\">This identifier is already in use. Please select another unique identifier.</span>\n                        </div>\n                      </div>\n                    </div>\n                  </el-col>\n                </el-row>              \n              </el-form>\n            </div>\n\n            <!-- Step 2 -->\n            <div class=\"data-container\" v-show=\"currentStep == 1 && campaign.frequency.type != 'Automated'\">\n              <div class=\"campaign-step-subheader\">\n                Select the recipients you'd like to engage for this campaign. Send to all your customers within Opiniion, or filter recipients by feedback they've left, tags you've specified, or search for specific customers by name.\n              </div>\n              <div class=\"filters-box\" v-if=\"!showCustomersList\">\n                <div class=\"filters-header\">Select Audience By Filter(s)</div>   \n                  <sup>Leaving filters blank will target all customers</sup>             \n                  <div class=\"filter-select-container\">\n                    <label>Rating</label>\n                    <el-select class=\"rounded-input\" size=\"small\" v-model=\"campaign.filters.include.rating\" :collapse-tags=\"true\" multiple placeholder=\"Select Multiple\">\n                      <el-option v-for=\"rating in 5\"\n                                :value=\"rating\"\n                                :key=\"rating\">\n                                {{rating}}\n                      </el-option>\n                      <el-option :value=\"'No Rating'\" >\n                        No Rating\n                      </el-option>\n                    </el-select>\n                    <label>Send to any customers with these tags:</label>                      \n                    <el-select class=\"rounded-input\" size=\"small\" v-model=\"campaign.filters.include.tags\" :collapse-tags=\"true\" multiple placeholder=\"Select Multiple\" :multiple-limit=\"4\">\n                      <el-option v-for=\"tag in defaultTagOptions\"\n                                :value=\"tag\"\n                                :key=\"tag\">\n                                {{tag}}\n                      </el-option>\n                      <el-option :value=\"'No Tags'\" >\n                        No Tags\n                      </el-option>\n                    </el-select>\n                    <label>But don't send if they have these tags:</label>\n                    <el-select class=\"rounded-input\" size=\"small\" v-model=\"campaign.filters.exclude.tags\" :collapse-tags=\"true\" multiple placeholder=\"Select Multiple\" :multiple-limit=\"4\">\n                      <el-option v-for=\"tag in defaultTagOptions\"\n                                :value=\"tag\"\n                                :key=\"tag\">\n                                {{tag}}\n                      </el-option>\n                      <el-option :value=\"'No Tags'\" >\n                        No Tags\n                      </el-option>                        \n                    </el-select>\n                  </div>\n                <div class=\"filters-footer\">\n                  <span class=\"filter-column-title\" v-if=\"campaign.frequency.type != 'Immediate'\">Resend</span>\n                  <div class=\"resend-container\" v-if=\"campaign.frequency.type != 'Immediate'\">\n                    <div class=\"resend-text\">Time elapsed before customers will be sent another message from this campaign.</div>\n                    <el-select class=\"rounded-input shorten-width\" size=\"small\" v-model=\"campaign.resend\" placeholder=\"Select One\">\n                      <el-option v-for=\"item in resendOptions\"\n                                :value=\"item.value\"\n                                :key=\"item\"\n                                :label=\"item.label\">                                 \n                      </el-option>\n                    </el-select>\n                  </div>\n                  <el-button round class=\"filter-button\" size=\"small\" type=\"primary\" @click=\"viewCustomerList('filters')\">View Filtered Customers</el-button>\n                </div>\n              </div>\n              <div class=\"filters-box\" v-if=\"showCustomersList\">\n                <div class=\"filters-actions-return\">\n                  <div class=\"return-to-filters clickable\" @click=\"viewFilters()\">\n                    Return To Filters\n                  </div>\n                  <el-input prefix-icon=\"fal fa-search\" v-model=\"customerSearchText\" placeholder=\"Search Customers\"></el-input>\n                </div>\n                <div class=\"selected-customers-container\">\n                  <el-table :data=\"currentList\" highlight-current-row height=\"335\">\n                    <el-table-column label=\"Name\">\n                      <template slot-scope=\"scope\">\n                        <span>{{scope.row.firstName}} {{scope.row.lastName}}</span>\n                      </template>\n                    </el-table-column>\n                    <el-table-column prop=\"rating\" label=\"Rating\"></el-table-column>\n                    <el-table-column prop=\"tags\" label=\"Tags\" width=\"300\" show-overflow-tooltip>\n                      <template slot-scope=\"scope\">\n                        <span class=\"tag\" v-for=\"tag in scope.row.tags\" :key=\"tag\">{{ tag }}</span>\n                      </template>\n                    </el-table-column>\n                  </el-table>\n                  <div class=\"selected-customers-pagination\">\n                    <!-- <el-pagination\n                      @current-change=\"searchCustomers\"\n                      background\n                      layout=\"prev, pager, next\"\n                      :current-page=\"paginationPage\"\n                      :page-size=\"paginationData.perPage\"\n                      :total=\"paginationData.total\"\n                      small\n                    ></el-pagination> -->\n                  </div>\n                </div>\n                <span class=\"filters-showing\">Showing {{currentList.length}} customers based on filters</span>\n              </div>\n            </div>\n\n            <!-- Step 3 -->\n\n            <div class=\"data-container\" v-show=\"currentStep == 2\">\n              <el-form :model=\"campaign\">\n                <el-menu :default-active=\"selectedCustomization\" mode=\"horizontal\" class=\"customize-menu\" @select=\"selectSubmenuIndex\" v-if=\"currentStep == 2\">\n                  <el-menu-item :style=\"{width: (100 / campaign.contactMethod.length + 1) + '%'}\" index=\"1\" v-if=\"campaign.contactMethod.includes('Email')\">\n                    Email\n                  </el-menu-item>\n                  <el-menu-item index=\"2\" :style=\"{width: (100 / campaign.contactMethod.length + 1) + '%', borderTopRightRadius: checkBorderRadius3}\" v-if=\"campaign.contactMethod.includes('SMS')\">\n                    SMS\n                  </el-menu-item>\n                  <el-menu-item index=\"3\" :style=\"{width: (100 / campaign.contactMethod.length + 1) + '%', borderTopRightRadius: checkBorderRadius1}\" v-if=\"campaign.type != 'Custom Message'\">\n                    Landing Pages\n                  </el-menu-item>\n                  <el-menu-item index=\"4\" :style=\"{width: (100 / campaign.contactMethod.length + 1) + '%', borderTopRightRadius: checkBorderRadius2}\" v-if=\"campaign.contactMethod.includes('Email') && campaign.type == 'Review Request'\">\n                    Follow Ups\n                  </el-menu-item>\n                </el-menu>\n                <div class=\"customization-options-menu\">\n                  <!-- Part 1 -->\n                  <div class=\"customization-container\" v-if=\"selectedCustomization == 1 && campaign.contactMethod.includes('Email')\">\n                    <div class=\"reset-command\" v-if=\"pageAction != 'Edit'\" @click=\"resetEmail()\">Reset Email to Default</div>\n                    <div class=\"customization-subheader\">\n                      This is the email your clients will see.\n                    </div>\n                    <el-row>\n                      <el-col :span=\"12\">\n                        <div class=\"customization-preview\">\n                          <div style=\"box-sizing: border-box;\n                                      transform: scale(.7);\n                                      width: 100%;\n                                      max-width: 600px;\n                                      color: #757575;\n                                      font-family: Montserrat, \n                                      Helvetica, sans-serif;\n                                      \">\n                              <div style=\"box-sizing: border-box;\n                                      background: white;\n                                      box-shadow: 0px 6px 12px rgba(0, 0, 0, .15);              \n                                      border-radius: 12px;              \n                                      margin: 20px;\n                                      overflow: hidden;\n                                      \">\n                              <div style=\"width: 100%;\n                                        max-width: 300px;\n                                        margin: 20px auto;\n                                        \">\n                              <img :src=\"baseUrl + 'location/showImage/' + campaign.locationId\"\n                                  style=\"width: 100%;\n                                        max-width: 100%;\" />\n                              </div>\n                              <div style=\"text-align: center;\n                                          padding: 0px 20px 20px 20px;\n                                          font-size: 12px;\n                                          line-height: 24px;\n                                          word-break: keep-all;\n                                          \" :class=\"{'custom-message': campaign.type == 'Custom Message'}\">\n                              {{campaign.emailMessage}}\n                              </div>\n                              <div style=\"text-align: center;\n                                        display: flex;\n                                        flex-direction: column;\n                                        \">\n                              <div v-if=\"campaign.type == 'Review Request'\" style=\"display: flex;\n                                          width: 100%;\n                                          max-width: 360px;\n                                          justify-content: space-between;\n                                          margin-bottom: 5px;\n                                          margin-left: auto;\n                                          margin-right: auto;\n                                          \">\n                              <div>\n                                <div href=\"[[{ review_url }]]/1\" \n                                    style=\"text-decoration: none;\n                                          color: white;\n                                  \">\n                                  <div style=\"background: #4fcbc5;\n                                              height: 50px;\n                                              width: 50px;\n                                              border-radius: 50%;\n                                              font-size: 28px;\n                                              box-shadow: 0px 3px 6px rgba(0, 0, 0, .16);\n                                              display: flex;\n                                              margin: 0px 2.5px;\n                                              flex-direction: column;\n                                              align-items: center;\n                                              align-content: center;\n                                              justify-content: center; \" \n                                              :style=\"{background: buttonColors[0]}\">\n                                    1\n                                  </div>\n                                </div>\n                              </div>\n                              <div>\n                                <div href=\"[[{ review_url }]]/2\" \n                                    style=\"text-decoration: none;\n                                          color: white;\n                                          \"\n                                    >\n                                  <div style=\"background: #4fcbc5;\n                                              height: 50px;\n                                              width: 50px;\n                                              border-radius: 50%;\n                                              font-size: 28px;\n                                              box-shadow: 0px 3px 6px rgba(0, 0, 0, .16);\n                                              margin: 0px 2.5px;\n                                              display: flex;\n                                              flex-direction: column;\n                                              align-items: center;\n                                              align-content: center;\n                                              justify-content: center;\n                                              \"\n                                              :style=\"{background: buttonColors[1]}\">\n                                    2\n                                  </div>\n                                </div>\n                              </div>\n                              <div>\n                                <div href=\"[[{ review_url }]]/3\" \n                                    style=\"text-decoration: none;\n                                          color: white;\n                                          \"\n                                    >\n                                  <div style=\"background: #4fcbc5;\n                                              height: 50px;\n                                              width: 50px;\n                                              border-radius: 50%;\n                                              font-size: 28px;\n                                              box-shadow: 0px 3px 6px rgba(0, 0, 0, .16);\n                                              margin: 0px 2.5px;\n                                              display: flex;\n                                              flex-direction: column;\n                                              align-items: center;\n                                              align-content: center;\n                                              justify-content: center;\n                                              \"\n                                              :style=\"{background: buttonColors[2]}\">\n                                    3\n                                  </div>\n                                </div>\n                              </div>\n                              <div>\n                                <div href=\"[[{ review_url }]]/4\" \n                                    style=\"text-decoration: none;\n                                          color: white;\n                                          \"\n                                    >\n                                  <div style=\"background: #4fcbc5;\n                                              height: 50px;\n                                              width: 50px;\n                                              border-radius: 50%;\n                                              font-size: 28px;\n                                              box-shadow: 0px 3px 6px rgba(0, 0, 0, .16);\n                                              margin: 0px 2.5px;\n                                              display: flex;\n                                              flex-direction: column;\n                                              align-items: center;\n                                              align-content: center;\n                                              justify-content: center;\n                                              \"\n                                              :style=\"{background: buttonColors[3]}\">\n                                    4\n                                  </div>\n                                </div>\n                              </div>\n                              <div>\n                                <div href=\"[[{ review_url }]]/5\" \n                                    style=\"text-decoration: none;\n                                          color: white;\n                                          \"\n                                    >\n                                  <div style=\"background: #4fcbc5;\n                                              height: 50px;\n                                              width: 50px;\n                                              border-radius: 50%;\n                                              font-size: 28px;\n                                              margin: 0px 2.5px;\n                                              box-shadow: 0px 3px 6px rgba(0, 0, 0, .16);\n                                              display: flex;\n                                              flex-direction: column;\n                                              align-items: center;\n                                              align-content: center;\n                                              justify-content: center;\n                                              \"\n                                              :style=\"{background: buttonColors[4]}\">\n                                    5\n                                  </div>\n                                </div>\n                              </div>\n                              </div>\n                              <div v-if=\"campaign.type == 'Review Request'\" style=\"display: flex;\n                                          justify-content: space-between; \n                                          width: 96%; \n                                          max-width: 345px;\n                                          margin: 0 auto;\n                                          margin-bottom: 20px;\n                                          font-size: 11px\n                                          \">\n                                <span>\n                                  Terrible\n                                </span>\n                                <span style=\"transform: translateX(3px);\">\n                                  Excellent\n                                </span>\n                              </div>\n                              <div>\n                                <div style=\"text-align:center;\n                                            background: #4fcbc5;\n                                            color: white;\n                                            font-size: 11px;\n                                            padding: 5px;\n                                            \" v-if=\"campaign.type != 'Custom Message'\">\n                                If this email is not displaying \n                                  correctly, \n                                  <div style=\"color: white;\">\n                                    click here.\n                                  </div>\n                              </div>\n                              <div style=\"width:100%;\n                                          clear: both;\n                                          font-size:11px;\n                                          text-align:center; \n                                          padding: 10px 0px;\n                                          color: white;\n                                          background: #545454;\n                                          line-height: 1.75;\n                                          font-size: 10px;\n                                          border-bottom-left-radius: 12px;\n                                          border-bottom-right-radius: 12px;\">\n                                <div>\n                                  <a href=\"\"\n                                      style=\"color: #4fcbc5;\">\n                                    Unsubscribe\n                                  </a>\n                                </div>\n                              <div>This email was sent on \n                                  behalf of {{locationName}}\n                                  by Opiniion LLC\n                              </div>\n                              <div>\n                                  Copyright 2019, Opiniion LLC. \n                                  All Rights Reserved\n                              </div>\n                              </div>\n                              </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                        <div class=\"preview-buttons\">\n                          <el-button round type=\"primary\" size=\"small\" @click=\"previewEmail()\">Edit Preview</el-button>\n                          <el-popover placement=\"top\"\n                                      width=\"400\"\n                                      trigger=\"click\">\n                            <el-row :gutter=\"20\" class=\"send-test-email\">\n                              <el-col :span=\"18\">\n                                <el-input type=\"email\" v-model=\"testEmail\" size=\"small\" placeholder=\"Please enter a valid email\" @keyup.native.enter=\"sendTestEmail()\"></el-input>\n                              </el-col>\n                              <el-col :span=\"4\">\n                                <el-button round type=\"primary\" size=\"small\" @click=\"sendTestEmail()\">Send</el-button>\n                              </el-col>\n                            </el-row>\n                            <!-- <el-input v-model=\"testEmail\" @keyup.native.enter=\"sendTestEmail()\">\n                              <template slot=\"prepend\">Email to Send To</template>\n                              <template slot=\"append\"><el-button type=\"primary\" @click=\"sendTestEmail()\">Send Email</el-button></template>\n                            </el-input> -->\n                            <el-button round type=\"warning\" size=\"small\" slot=\"reference\">Send Test Email</el-button>\n                          </el-popover>\n                        </div>\n                      </el-col>\n                      <el-col class=\"email-container\" :span=\"12\">\n                        <label class=\"text-label\">Email Subject</label>\n                        <el-input v-model=\"campaign.emailDetails.subject\"></el-input>\n                        <label class=\"text-label\">Message</label>\n                        <el-input :show-word-limit=\"true\" maxlength=\"250\" type=\"textarea\" class=\"email-message\" :rows=\"8\" style=\"word-break: keep-all;\" @change=\"changeEmailMessage()\" v-model=\"campaign.emailMessage\"></el-input>\n                      </el-col>\n                    </el-row>\n                  </div>\n                  <!-- Part 2 -->\n                  <div class=\"customization-container\" v-if=\"selectedCustomization == 2 && campaign.contactMethod.includes('SMS')\">\n                    <div class=\"reset-command\" v-if=\"pageAction != 'Edit'\" @click=\"resetSMS()\">Reset SMS to Default</div>\n                    <div class=\"customization-subheader\">\n                      Your audience will see this message on their phones.\n                    </div>\n                    <el-row class=\"text-message-container\">\n                      <el-col :span=\"12\">\n                        <div class=\"text-display\">\n                          {{campaign.smsDetails.message}}\n                          <br/>\n                          <br/>\n                          <span v-if=\"campaign.type == 'Review Request'\">\n                            Click Here: opin.in/exmpl\n                          </span>\n                        </div>\n                      </el-col>\n                      <el-col class=\"text-align\" :span=\"12\">\n                        <label class=\"text-label\">Message</label>\n                        <el-input :show-word-limit=\"true\" type=\"textarea\" class=\"text-message\" maxlength=\"180\" :rows=\"8\" v-model=\"campaign.smsDetails.message\"></el-input>\n                      </el-col>\n                    </el-row>\n                    <el-popover placement=\"top\" \n                                width=\"400\"\n                                trigger=\"click\">\n                      <el-row :gutter=\"20\" class=\"send-test-email\">\n                        <el-col :span=\"18\">\n                          <el-input type=\"tel\" v-model=\"testSMS\" size=\"small\" placeholder=\"Phone Number\" @keyup.native.enter=\"sendTestSMS()\"></el-input>\n                        </el-col>\n                        <el-col :span=\"4\">\n                          <el-button round type=\"primary\" size=\"small\" @click=\"sendTestSMS()\">Send</el-button>\n                        </el-col>\n                      </el-row>\n                      <el-button class=\"sms-button\" round size=\"small\" type=\"warning\" slot=\"reference\">Send Test SMS</el-button>\n                    </el-popover>\n                  </div>\n                  <!-- Part 3 -->\n                  <div class=\"customization-container\" v-if=\"selectedCustomization == 3\">\n                    <div class=\"reset-command\" v-if=\"pageAction != 'Edit'\" @click=\"resetLanding()\">Reset Landing Page to Default</div>\n                    <div class=\"customization-subheader head\">\n                      The pages your customers are re-directed to after they rate 1-5.\n                    </div>\n                    <el-row class=\"\">\n                      <el-col class=\"landing-columns\" :span=\"12\">\n                        <span class=\"review-title\">Negative Review Page</span>\n                        <span class=\"review-subtitle\">The Customer gave a rating of 1 - 3</span>\n                        <div class=\"landing-label\">\n                          <label class=\"landing-label-text\">Page Header</label>\n                          <el-input placeholder=\"This is a pre-filled header\" v-model=\"campaign.landingPage.rp1\"></el-input>\n                        </div>\n                        <div class=\"landing-label\">\n                          <label class=\"landing-label-text\">Page Subheader</label>\n                          <el-input placeholder=\"Page Subheader\" v-model=\"campaign.landingPage.rp2\"></el-input>\n                        </div>\n                        <div class=\"landing-label\">\n                          <label class=\"landing-label-text\">Page Body</label>\n                          <el-input type=\"textarea\" :show-word-limit=\"true\" maxlength=\"300\" placeholder=\"Page Body\" :rows=\"3\" v-model=\"campaign.landingPage.rp3\"></el-input>\n                        </div>\n                        <el-button round class=\"preview-button\" size=\"small\" type=\"primary\" @click=\"previewLanding('negative')\">Preview</el-button>\n                      </el-col>\n                      <el-col class=\"landing-columns\" :span=\"12\">\n                        <span class=\"review-title\">Positive Review Page</span>\n                        <span class=\"review-subtitle\">The Customer gave a rating of 4 - 5</span>\n                        <div class=\"landing-label\">\n                          <label class=\"landing-label-text\">Page Header</label>\n                          <el-input placeholder=\"This is a pre-filled header\" :show-word-limit=\"true\" maxlength=\"300\" v-model=\"campaign.landingPage.lp1\"></el-input>\n                        </div>\n                        <div class=\"landing-label\">\n                          <label class=\"landing-label-text\">Page Subheader</label>\n                          <el-input placeholder=\"Page Subheader\" v-model=\"campaign.landingPage.lp2\"></el-input>\n                        </div>\n                        <div class=\"landing-label\">\n                          <label class=\"landing-label-text\">Page Body</label>\n                          <el-input type=\"textarea\" placeholder=\"Page Body\" :rows=\"3\" v-model=\"campaign.landingPage.lp3\"></el-input>\n                        </div>\n                        <el-button round class=\"preview-button\" size=\"small\" type=\"primary\" @click=\"previewLanding('positive')\">Preview</el-button>\n                      </el-col>\n                    </el-row>\n                  </div>\n                  <!-- Part 4 -->\n                  <div class=\"customization-container\" v-if=\"selectedCustomization == 4 && campaign.contactMethod.includes('Email')\">\n                    <div class=\"reset-command\" v-if=\"pageAction != 'Edit'\" @click=\"resetFollowups()\">Reset Follow Ups to Default</div>\n                    <div class=\"customization-subheader\">\n                      Setup follow-up emails that go out at set intervals. <br> (If the customer does not respond)\n                    </div>\n                    <div class=\"follow-up-container\">\n                      <!-- <div class=\"follow-up-arrow-left\"><i class=\"fal fa-chevron-left\"></i></div> -->\n                      <div class=\"follow-up\" v-for=\"(followUp, followIndex) in campaign.followUps\" :key=\"followIndex\">\n                        <div class=\"follow-up-header\">\n                          <span>Follow-Up {{followIndex + 1}}</span>\n                          <div class=\"remove-follow-up\" @click=\"removeFollowUp(followIndex)\">\n                            <i class=\"fal fa-times\"></i>\n                          </div>\n                        </div>\n                        <div class=\"follow-up-body\">\n                          <label>Hours After Initial Send</label>\n                          <el-input type=\"number\" v-model=\"followUp.hours\"></el-input>\n                          <label>Subject</label> \n                          <el-input v-model=\"followUp.subject\" placeholder=\"Subject\"></el-input>\n                        </div>\n                      </div>\n                    <!-- <div class=\"follow-up-arrow-right\"><i class=\"fal fa-chevron-right\"></i></div> -->\n                    </div>\n                    <div class=\"add-follow-button-container\">\n                      <el-button type=\"primary\" size=\"small\" class=\"add-follow-button\" round @click=\"addFollowUp()\">Add Follow Up</el-button>\n                    </div>\n                  </div>\n                </div>\n              </el-form>\n            </div>\n\n            <!-- Step 4 -->\n\n            <div class=\"data-container\" v-show=\"currentStep == 3\">\n              <div v-if=\"campaign.type != 'Survey'\">\n                <div class=\"campaign-step-subheader\">\n                  How would you like to distribute your reviews?\n                </div>\n                <el-form :model=\"campaign\" ref=\"stepFourForm\" :rules=\"stepFourRules\">\n                  <div class=\"rotators-container\">\n                      <div v-for=\"(rotator, index) in campaign.rotators\" :key=\"index\">\n                        <el-form-item prop=\"rotators\">\n                          <div class=\"rotator-box\">\n                            <span class=\"rotator-name\"><img v-if=\"rotator.name\" height=\"25\" :src=\"displayIcon(rotator.name.toLowerCase())\" /> {{rotator.name}}</span>\n                            <el-select size=\"small\" v-model=\"rotator.percentage\" suffix-icon=\"%\">\n                              <el-option v-for=\"percentOption in rotatorPercentageList\" \n                                        :value=\"percentOption\"\n                                        :key=\"percentOption\">\n                                {{percentOption}} %\n                              </el-option>\n                            </el-select>\n                          </div>\n                        </el-form-item>             \n                      </div>   \n                  </div>\n                </el-form>\n                <div class=\"private-selection\">\n                  <span class=\"separation-segment\">Or Make <b>Private</b> Only</span>\n                  <el-button round type=\"primary\" size=\"small\" class=\"private-button\" @click=\"setPrivate()\">Make Private</el-button>\n                </div>\n              </div>\n              <div v-if=\"campaign.type == 'Survey'\">\n                <div class=\"campaign-step-subheader\">\n                 l;sdkfja;lksdjfa\n                </div>\n                <el-select v-model=\"selectedSurveyTemplate\">\n                  <el-option>Category 1</el-option>\n                  <el-option>Category 2</el-option>\n                  <el-option>Category 3</el-option>\n                  <el-option>Category 4</el-option>\n                </el-select>\n              </div>\n            </div>\n\n            <!-- Step 5 -->\n\n            <div class=\"data-container\" v-show=\"currentStep == 4\">\n              <div class=\"completion-message\">\n                <div><i class=\"fas fa-glass-cheers\"></i></div>\n                <b>Cheers! </b> Setup is complete! You can either start your campaign or save it as a draft and come back later!\n              </div>\n            </div>\n            \n          </div>\n        </div>\n\n        <!-- Campaign Analytics -->\n\n        <div class=\"campaign-analytics\" v-if=\"pageAction == 'Analytics'\">\n          <span v-if=\"campaign.interactions\" class=\"subtitle\">Here are some quick insights on how your campaign is doing:</span>\n          <div v-else class=\"campaign-analytics-no-data\"><div>Sorry, looks like there is no data to show!</div><i class=\"fal fa-exclamation-circle\"></i></div>\n          <div class=\"graphs\">            \n            <el-row :gutter=\"20\">\n              <el-col :span=\"8\">\n                <span class=\"card-data circled blue\">\n                  <svg width=\"100%\" height=\"100%\" viewBox=\"-1 -1 107 107\" >\n                    <circle id=\"first-circle\" class=\"fullcircle\" cx=\"50\" cy=\"50\" r=\"45\" />\n                    <circle id=\"second-circle\" :cx=\"cx\" cy=\"50\" r=\"45\" :stroke-dashoffset=\"1000 - checkValue(campaign.interactions.emails.sent + campaign.interactions.sms.sent, campaign.interactions.emails.delivered + campaign.interactions.sms.delivered, true)\" transform='rotate(-90)' transform-origin=\"47% 47%\"/>\n                  </svg>                    \n                  <span class=\"campaign-analytics-percent-wrapper\">\n                    <span id=\"campaign-analytics-delivered-percent\">{{checkValue(campaign.interactions.emails.sent + campaign.interactions.sms.sent, campaign.interactions.emails.delivered + campaign.interactions.sms.delivered) | oneDecimal}}</span>\n                    <span class=\"campaign-analytics-text\">Delivered</span>\n                  </span>\n                </span>\n              </el-col>\n              <el-col :span=\"8\"  v-if=\"campaign.type == 'Review Request'\">\n                <span class=\"card-data circled darkblue\">\n                  <svg width=\"100%\" height=\"100%\" viewBox=\"-1 -1 107 107\" >\n                    <circle class=\"fullcircle\" cx=\"50\" cy=\"50\" r=\"45\" />\n                    <circle :cx=\"cx\" cy=\"50\" r=\"45\" :stroke-dashoffset=\"1000 - checkValue(campaign.interactions.emails.delivered + campaign.interactions.sms.delivered, campaign.interactions.emails.opens + campaign.interactions.sms.opens, true)\" transform='rotate(-90)' transform-origin=\"47% 47%\" />\n                  </svg>\n                  <span class=\"campaign-analytics-percent-wrapper\">\n                    <span id=\"campaign-analytics-opened-percent\">{{checkValue(campaign.interactions.emails.delivered + campaign.interactions.sms.delivered, campaign.interactions.emails.opens + campaign.interactions.sms.opens) | oneDecimal}}</span>\n                    <span class=\"campaign-analytics-text\">Opened</span>\n                  </span>                    \n                </span>                    \n              </el-col>\n              <el-col :span=\"8\" v-if=\"campaign.type == 'Review Request'\">\n                <span class=\"card-data circled orange\">\n                  <svg width=\"100%\" height=\"100%\" viewBox=\"-1 -1 107 107\" >\n                    <circle class=\"fullcircle\" cx=\"50\" cy=\"50\" r=\"45\" />\n                    <circle :cx=\"cx\" cy=\"50\" r=\"45\" :stroke-dashoffset=\"1000 - checkValue(campaign.interactions.emails.opens + campaign.interactions.sms.opens, campaign.interactions.emails.replied + campaign.interactions.sms.replied, true)\" transform='rotate(-90)' transform-origin=\"47% 47%\" />\n                  </svg>\n                  <span class=\"campaign-analytics-percent-wrapper\">\n                    <span id=\"campaign-analytics-engaged-percent\">{{checkValue(campaign.interactions.emails.opens + campaign.interactions.sms.opens, campaign.interactions.emails.replied + campaign.interactions.sms.replied) | oneDecimal}}</span>\n                    <span class=\"campaign-analytics-text\">Engaged</span>     \n                  </span> \n                </span>                    \n              </el-col>\n            </el-row>\n          </div>\n        </div>\n\n        <!-- Right-side Summary Bar -->\n\n        <div class=\"campaign-running-summary\">\n          <h2>Summary</h2>\n          <div class=\"campaign-running-summary-content\">\n            <span class=\"summary-bar\">\n              <div class=\"summary-section\" :class=\"{'opacity': currentStep != 0}\">\n                <span class=\"title-bar\">\n                  <span class=\"summary-title\">Setup</span>\n                  <el-link class=\"edit-title\" @click=\"goToStep(0)\" v-if=\"checkEdit(0)\" >Edit</el-link>\n                </span>\n                <span class=\"summary-data\">\n                  <span class=\"summary-data-title\">Name:</span>\n                  <span v-if=\"campaign.name\">{{campaign.name}}</span>\n                  <span v-else>---</span>\n                </span>\n                <span class=\"summary-data\">\n                  <span class=\"summary-data-title\">Location:</span>\n                  <span v-if=\"campaign.locationId\">{{getLocationName(campaign.locationId)}}</span>\n                  <span v-else>---</span>\n                </span>\n                <span class=\"summary-data\">\n                  <span class=\"summary-data-title\">Type:</span>\n                  <span v-if=\"campaign.type\">{{campaign.type}}</span>\n                  <span v-else>---</span>\n                </span>\n                <span class=\"summary-data\">\n                  <span class=\"summary-data-title\">Delivery Method<span v-if=\"campaign.contactMethod.length > 1\">(s)</span>:</span>\n                  <div v-if=\"campaign.contactMethod\">\n                    <span>{{campaign.contactMethod[0]}}, </span>\n                    <span>{{campaign.contactMethod[1]}}</span>\n                  </div>\n                  <span v-else>---</span>\n                </span>\n                <span class=\"summary-data\">\n                  <span class=\"summary-data-title\">Send Options:</span>\n                  <span>\n                    <span v-if=\"campaign.frequency.type\">{{campaign.frequency.type}}</span>\n                    <!-- <span v-if=\"campaign.frequency.schedule\">{{campaign.frequency.schedule}}</span>\n                    <span v-if=\"campaign.frequency.type == 'Automated'\">{{campaign.identifier}}</span>\n                    <span v-else-if=\"campaign.frequency.date\">- {{campaign.frequency.date.toString().substr(0,15)}}</span>\n                    <span v-else-if=\"campaign.frequency.type == 'Delay' && campaign.frequency.delay >= 0\"> {{campaign.frequency.delay}} Hours</span>\n                    <span v-else-if=\"campaign.frequency.type != 'Immediate' && (campaign.frequency.type != 'Automated' || !campaign.identifier)\">---</span> -->\n                  </span>\n                </span>\n                <span class=\"summary-data\" v-if=\"campaign.frequency.type == 'Scheduled'\">\n                  <span class=\"summary-data-title\">Send Date:</span>\n                  <span>\n                    <!-- <span v-if=\"campaign.frequency.type\">{{campaign.frequency.type}}</span> -->\n                    <span v-if=\"campaign.frequency.schedule\">{{campaign.frequency.schedule}}</span>\n                    <span v-if=\"campaign.frequency.type == 'Automated'\">{{campaign.identifier}}</span>\n                    <span v-else-if=\"campaign.frequency.date\">{{displayDate(campaign.frequency.date)}}</span>\n                    <span v-else-if=\"campaign.frequency.type == 'Delay' && campaign.frequency.delay >= 0\"> {{campaign.frequency.delay}} Hours</span>\n                    <span v-else-if=\"campaign.frequency.type != 'Immediate' && (campaign.frequency.type != 'Automated' || !campaign.identifier)\">---</span>\n                  </span>                  \n                </span>\n              </div>\n            </span>\n            <span class=\"summary-bar\" v-if=\"campaign.frequency.type != 'Automated'\">\n              <div class=\"summary-section\" :class=\"{'opacity': currentStep != 1 && pageAction != 'Edit'}\">\n                <span class=\"title-bar\">\n                  <span class=\"summary-title\">Audience</span>\n                  <el-link class=\"edit-title\" @click=\"goToStep(1)\" v-if=\"checkEdit(1)\">Edit</el-link>\n                </span>\n                <span class=\"summary-data\">\n                  <!-- <span>Filters Applied:</span> -->\n                  <!-- <span v-if=\"campaign.filters\">{{campaign.filters}}</span>\n                  <span v-else>---</span> -->\n                </span>            \n                <span class=\"summary-data\">\n                  <span class=\"summary-data-title\">Targeted Customers:</span>\n                  <span v-if=\"currentList && currentList.length\">{{currentList.length}}</span>\n                  <span v-else>Uncalculated</span>\n                </span>\n              </div>\n            </span>\n            <span class=\"summary-bar\">\n              <div class=\"summary-section\" :class=\"{'opacity': currentStep != 2 && pageAction != 'Edit'}\">\n                <span class=\"title-bar\">\n                  <span class=\"summary-title\">Customize <span>(Optional)</span></span>\n                  <el-link class=\"edit-title\" @click=\"goToStep(2)\" v-if=\"checkEdit(2)\" >Edit</el-link>\n                </span>\n                <span class=\"summary-data\">\n                  <span class=\"summary-data-title\">Email:</span>\n                  <span v-if=\"campaign.emailDetails && campaign.emailDetails.subject\">{{campaign.emailDetails.subject}}</span>\n                  <span v-else>---</span>\n                </span>\n                <span class=\"summary-data\">\n                  <span class=\"summary-data-title\">SMS:</span>\n                  <span v-if=\"campaign.smsDetails\">{{campaign.smsDetails.message.substr(0,21)}}...</span>\n                  <span v-else>---</span>\n                </span>            \n                <span class=\"summary-data\">\n                  <span class=\"summary-data-title\">Landing Pages:</span>\n                  <span v-if=\"campaign.landingPage\">{{campaign.landingPage.lp1}}</span>\n                  <span v-else>---</span>\n                </span>\n              </div>         \n            </span>\n            <span class=\"summary-bar\">\n              <div class=\"summary-section\" :class=\"{'opacity': currentStep != 3 && pageAction != 'Edit'}\">\n                <span class=\"title-bar\">\n                  <span class=\"summary-title\">Distribute</span>\n                  <el-link class=\"edit-title\" @click=\"goToStep(3)\" v-if=\"checkEdit(3)\" >Edit</el-link>\n                </span>\n                <span class=\"summary-data\" v-if=\"campaign.rotators && campaign.rotators.length >= 1 && !noRotators\" v-for=\"(rotator, rotIndex) in campaign.rotators\" :key=\"rotIndex\">\n                  <span>{{rotator.name}}</span>\n                  <span>{{rotator.percentage}} %</span>\n                </span>   \n                <span class=\"summary-data\" v-if=\"noRotators\">\n                  <span>Opiniion</span>\n                  <span>100 %</span>\n                </span> \n              </div>\n            </span>\n          <div class=\"complete-campaign\" v-if=\"currentStep == 4\">\n            <el-button class=\"btn-start-campaign\" type=\"primary\" @click=\"saveCampaign()\">Start Campaign</el-button>\n          </div>\n          <div class=\"complete-campaign\" v-if=\"pageAction == 'Analytics'\">\n            <el-button type=\"primary\" @click=\"editCampaign()\">Edit Campaign</el-button>\n          </div>\n        </div>\n      </div>\n      </div>\n      <div class=\"email-preview\" v-if=\"emailPreview\">\n        <!-- Unlayer Editor -->\n        <div class=\"campaign-email-editor\" id=\"email-editor\"></div>\n      </div>\n      <div class=\"landing-preview\" v-if=\"landingPreview\">\n        <div class=\"landing-preview-iframe-container\">\n          <!-- <div class=\"landing-preview-loading\" v-if=\"previewLoading\">Loading</div> -->\n          <iframe :src=\"urlString\" frameborder=\"0\" @load=\"stopLoading\"></iframe>\n        </div>        \n      </div>\n      <div v-if=\"pageAction != 'Analytics'\">\n        <div class=\"footer-title\" slot=\"footer\" v-if=\"!emailPreview && !landingPreview\">\n          <el-button type=\"text\" v-if=\"currentStep == 0\" @click=\"closeModal\">Cancel</el-button>\n          <el-button type=\"text\" v-if=\"currentStep > 0\" @click=\"lastStep\">Go Back</el-button>\n          <div class=\"footer-buttons\">\n            <el-button type=\"warning\" @click=\"saveDraft()\">Save As Draft</el-button>\n            <el-button type=\"secondary\" v-if=\"currentStep < 4\" @click=\"nextStep\">Next</el-button>\n          </div>\n        </div>\n        <div class=\"footer-title\" slot=\"footer\" v-if=\"emailPreview\">\n          <div class=\"footer-buttons footer-buttons-preview\">\n            <el-button type=\"text\" @click=\"cancelPreview()\" :disabled=\"!initializedUnlayer\">Cancel</el-button>\n            <el-button type=\"primary\" @click=\"togglePreview()\" :disabled=\"!initializedUnlayer\">Finish</el-button>\n          </div>\n        </div>\n        <div class=\"footer-title\" slot=\"footer\" v-if=\"landingPreview\">\n          <div class=\"footer-buttons footer-buttons-preview\">\n            <el-button type=\"primary\" @click=\"closeLandingPreview()\">Done</el-button>\n          </div>\n        </div>\n      </div>\n    </el-dialog>           \n    <!-- <preview-landing class=\"double-modal\" :surveyQs=\"surveyQs\" :landingPage=\"landingPage\" v-if=\"openPreviewCampaign\" v-on:closePreviewModal=\"closePreviewModal()\"></preview-landing> -->\n  </transition>\n</template>\n\n<script>\nimport PreviewLanding from \"./PreviewLanding\";\nimport OutreachService from './../services/OutreachService';\nimport UserService from \"./../services/UserService.js\";\nimport LocationService from \"./../services/LocationService.js\";\nimport { EventService } from \"../main\";\nimport config from \"../config.js\";\nimport CustomerService from '../services/CustomerService';\nimport CampaignService from '../services/CampaignService';\nimport { Loading } from 'element-ui';\n\nexport default {\n  name: \"AddCampaign\",\n  props: [\"selectedCampaign\", \"newOutreach\"],\n  components: {\n    PreviewLanding\n  },\n  data: function() {\n    var validatePercentages = (rule, value, callback) => {      \n      let total = 0;      \n      value.map(rotator => {\n        total += rotator.percentage;        \n      })\n      if(total != 0 && total != 100) {\n        return callback(new Error('Rotator percentages must equal 0 or 100%'))\n      } else {\n        callback();\n      }\n    }\n    return {\n      currentStep: 0,\n      selectedCustomization: '1',\n      campaignOpen: true,\n      startPosition: null,\n      searchLocationText: '',\n      showingMenu: false,\n      emailPreview: false,\n      landingPreview: false,\n      showCustomersList: false,\n      endPosition: null,\n      dragging: false,\n      urlString: '',\n      pageAction: \"New\",\n      testEmail: '',\n      testSMS: '',\n      currentUser: {},\n      filterListSearchText: '',\n      excludedCustomers: [],\n      locationName: '',\n      customerSearchText: '',\n      initializedUnlayer: false,\n      visited4: false,\n      selectedLocation: {},\n      currentList: [],\n      openPreviewCampaign: false,\n      campaignTemplates: [\"Review Request\", \"Custom Message\"],\n      defaultTagOptions: [\"Move-In\", \"Move-Out\", \"Work Order\"],\n      frequencyScheduleOptions: [\"Bi-Weekly\", \"Monthly\", \"Quarterly\", \"Yearly\"],\n      resendOptions: [\n        {value:\"never\", label:\"Never\"},\n        {value:\"2592000000\", label:\"1 Month\"},\n        {value:\"7776000000\", label:\"3 Months\"},\n        {value:\"15724800000\", label:\"6 Months\"},\n        {value:\"31536000000\", label:\"1 Year\"},\n        {value:\"always\", label:\"Immediately\"}\n      ],\n      locationOptions: [],\n      rotatorOptions: [\"Google\", \"Yelp\", \"Facebook\"],\n      contactMethod: [\"Email\", \"SMS\"],\n      rotatorPercentageList: [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100],\n      surveyQs: \"\",\n      landingPage: '',\n      campaign: {\n        campaignId: \"\",\n        temporaryId: \"\",\n        type: \"\",\n        name: \"\",\n        locationId: '',\n        resend: \"15724800000\",\n        status: \"active\",\n        emailMessage: \"\",\n        emailDetails: {\n          subject: \"How Are We Doing?\",\n          design: {\n            data: \"\",\n            design: \"\"\n          }\n        },\n        smsDetails: {\n          header: \"\",\n          message: \"\"\n        },\n        frequency: {\n          type: '',\n          date: '',\n          schedule: '',\n          delay: 0\n        },\n        filters: {\n          include: {            \n            rating: [],\n            tags: []\n          },\n          exclude: {\n            rating: [],\n            tags: []\n          }\n        },\n        followUps: [\n          {hours: 72, subject: \"We'd Love to Hear from You!\"},\n          {hours: 216, subject: \"We'd Still Love to Hear from You!\"}\n        ],\n        maxFollowUps: 4,\n        contactMethod: [\"Email\", \"SMS\"],\n        smsMessage: \"\",\n        design: {},\n        survey: \"\",\n        surveyQuestions: [],\n        rotators: [],\n        landingPage: {\n          lp1: \"Thanks for the Feedback!\",\n          lp2: \"\",\n          lp3: \"We'd love to hear what you've enjoyed about our service so we can continue to do our best! Please also consider leaving us a public review!\",\n          rp1: \"We're Sorry To Hear That\",\n          rp2: \"Please Tell Us More\",\n          rp3:\n            \"We take our customer feedback very seriously - please let us know how your experience was less than ideal so we can improve in the future. In order to better address the issue, please provide specifics. We appreciate your feedback!\",\n          emailNotDisplayed: \"\"\n        },\n        interactions: {\n          emails: {\n            sent: 0,\n            delivered: 0,\n            failed: 0,\n            opens: 0,\n            replied: 0\n          },\n          sms: {\n            sent: 0,\n            delivered: 0,\n            failed: 0,\n            opens: 0,\n            replied: 0\n          }\n        }\n      },\n      step: 1,\n      paginationData: {\n        perPage: 25,\n        currentPage: 0,\n        perPageOptions: [5, 10, 25],\n        total: 0\n      },\n      baseUrl: '',\n      cx: '50',\n      buttonColors: [],\n      previewLoading: false,\n      duplicateId: false,\n      stepOneRules: {\n        name: [\n          { required: true, message: 'Please input a campaign name', trigger: 'blur' },   \n        ],\n        locationId: [\n          { required: true, message: 'Please select a location', trigger: 'change' },            \n        ],\n        type: [\n          { required: true, message: 'Please select a campaign type', trigger: 'change'}\n        ],\n        contactMethod: [\n          { required: true, message: 'Please select how you want the campaign to send', trigger: 'change'}          \n        ],\n        'frequency.type': [\n          { required: true, message: 'Please select how often you want the campaign to send', trigger: 'change'}          \n        ]\n      },\n      stepFourRules: {\n        rotators: [\n          { validator: validatePercentages, message: 'Distribution must equal 0% or 100%', trigger: 'blur' },   \n        ]        \n      },\n    };\n  },\n  computed: {\n    checkMobile () {\n      return widthMobile <= 1200;\n    },\n    frequencyTypeOptions() {\n      let vm = this;\n      if(vm.campaign.type == 'Review Request' && vm.currentUser.isSuperAdmin) {\n        return ([\"Immediate\", \"Scheduled\", \"Recurring\", \"Automated\"]);\n      } else {\n        return ([\"Immediate\", \"Scheduled\", \"Recurring\"]);      \n      }\n    },\n    checkBorderRadius1() {\n      let vm = this;\n      if(vm.campaign.type == 'Review Request') {\n        return '0px'\n      } else {\n        return '15px'\n      }\n    },\n    checkBorderRadius2() {\n      let vm = this;\n      if(vm.campaign.type != 'Review Request') {\n        return '0px'\n      } else {\n        return '15px'\n      }\n    },\n    checkBorderRadius3() {\n      let vm = this;\n      if(vm.campaign.type == 'Custom Message' && vm.campaign.frequency.type == 'Immediate') {\n        return '15px'\n      } else {\n        return '0px'\n      }\n    },\n    noRotators() {\n      let vm = this;\n      if(!vm.campaign.rotators || !vm.campaign.rotators.length) {\n        return true\n      } else {\n        let percentage = 0;\n        vm.campaign.rotators.map(rotator => {\n          if(rotator.percentage && rotator.percentage > 0) {\n            percentage += rotator.percentage;\n          }\n        })\n        if(percentage) {\n          return false\n        } else {\n          return true;\n        }\n      }\n    }\n  },\n  created() {\n    if (this.selectedCampaign && !this.initializedUnlayer) {\n      if(!this.selectedCampaign.followUps) this.selectedCampaign.followUps = [];\n      this.pageAction = \"Analytics\";\n      this.campaign = this.selectedCampaign;\n      let location = { value: this.campaign.locationId };\n      this.changeLocation(location);\n    } else {\n      this.campaign.type = this.newOutreach;\n    }\n    if(!this.selectedCampaign) {\n      this.generateId();\n    }\n    this.currentUser = JSON.parse(localStorage.getItem('currentUser'));\n    \n    this.getLocationOptions();\n    this.baseUrl = config.baseUrl;\n    this.circleInt = setInterval(() => {\n      this.checkCircleDistance();\n    }, 250);\n  },\n  filters: {\n    oneDecimal(value) {\n      if(!isNaN(value)) {\n        return (value).toFixed(1) + ' %';\n      } else {\n        return '-';\n      }\n    },\n  },\n  methods: {\n    changeEmailMessage() {\n      let vm = this;\n      // Fix design.design dig down to where the actual line is on custom messages.\n      if(vm.campaign.type == 'Custom Message' && vm.campaign.emailDetails.design.data) {\n        vm.campaign.emailDetails.design.data = vm.campaign.emailDetails.design.data.replace('<strong></strong>', vm.campaign.emailMessage);\n        vm.campaign.emailDetails.design.design.body.rows[0].columns[0].contents[0].values.html = vm.campaign.emailDetails.design.design.body.rows[0].columns[0].contents[0].values.html.replace('<strong></strong>', vm.campaign.emailMessage);\n      } else if(vm.campaign.type == 'Review Request' && vm.campaign.emailDetails.design.data) {\n        let message = vm.campaign.emailDetails.design.data;        \n        message = message.substring(message.indexOf('class=\"text-block\"')+176, message.indexOf('PLEASE RATE YOUR EXPERIENCE:')-145);\n        let message2 = vm.campaign.emailDetails.design.design.body.rows[0].columns[0].contents[0].values.html;\n        message2 = message2.substring(message2.indexOf('class=\"text-block\"')+176, message2.indexOf('PLEASE RATE YOUR EXPERIENCE:')-145);\n        vm.campaign.emailDetails.design.data = vm.campaign.emailDetails.design.data.replace(message, vm.campaign.emailMessage);\n        vm.campaign.emailDetails.design.design.body.rows[0].columns[0].contents[0].values.html = vm.campaign.emailDetails.design.design.body.rows[0].columns[0].contents[0].values.html.replace(message2, vm.campaign.emailMessage);\n      }\n    },\n    generateId() {\n      let vm = this;\n      CampaignService.getTemporaryId().then(response => {      \n        vm.campaign.temporaryId = response;\n      })\n    },\n    handleWidthSize() {\n      window.addEventListener('resize', () => {\n        // this.widthMobile = window.innerWidth;\n        if (this.isTablet || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\n          this.widthMobile = true;\n        } else {\n          this.widthMobile = false;\n        }\n      });\n    },    \n    cancelPreview() {\n      let vm = this;\n      vm.removeIframe('cancelled');\n      vm.emailPreview = false;\n    },\n    togglePreview() {\n      let vm = this;\n      vm.saveEmailDesign();  \n      vm.emailPreview = false;\n    },\n    closeLandingPreview() {\n      this.landingPreview = false;\n    },\n    validateID(id) {\n      let vm = this;\n      CampaignService.getCampaignsByLocation(vm.locationId, id).then(response => {\n        let locationCampaignIds = response.result\n        let allIds = []\n        locationCampaignIds.map(campaign => {\n          if(campaign.status != 'deleted') {\n            if(typeof campaign.identifier != 'string') {\n              allIds.push(JSON.stringify(campaign.identifier));\n            } else {\n              allIds.push(campaign.identifier);\n            }\n          }\n        })\n        vm.duplicateId = allIds.includes(id);\n      })\n    },\n    saveEmailDesign() {\n      let vm = this;      \n      if (vm.initializedUnlayer) {\n        unlayer.exportHtml(function(data) {\n          vm.campaign.emailDetails.design = {\n            data: data.html,\n            design: data.design\n          };\n          vm.removeIframe();\n        });\n      }      \n      // console.log(vm.selectedAction.email);\n    },\n    checkDeliveryMethod() {\n      let vm = this;\n      if(!vm.campaign.contactMethod.includes('Email')) {\n        vm.selectedCustomization = 2;\n      }      \n    },\n    previewEmail() {\n      let vm = this;\n      vm.emailPreview = true;\n      let loadOptions = {\n        lock: true,\n        text: 'Loading',\n        spinner: 'el-icon-loading',\n        background: 'rgba(0,0,0,.15)'\n      }\n      vm.previewLoading = Loading.service(loadOptions);\n      // Checks for proper information in order to pass correct data to mailchimp for testing.\n      if (config.subDomain) {\n        var subDomain = config.subDomain;\n      }\n      if (config.baseUrl) {\n        var baseUrl = config.baseUrl;\n      }\n      // Timeout is set to be manipulated if we need more time later in a single variable.\n      var timeOut = 500;\n      // Check if the action passed into the function already has been saved, so that it is not overwritten if it is.\n      if (vm.campaign.emailDetails.design.design) {\n        \n        // Create the script and iframe to be used to edit the email.\n        vm.$unlayerScript = {\n          id: \"email-editor\",\n          projectId: 1777,\n          displayMode: \"email\"\n        };\n\n        var d = document;\n        var s = d.createElement(\"script\");\n        s.type = \"text/javascript\";\n        s.defer = true;\n        s.src = \"//editor.unlayer.com/embed.js\";\n        var t = d.getElementsByTagName(\"script\")[0];\n        t.parentNode.insertBefore(s, t);\n        // Actually load the existing design in the action, check for initializedUnlayer exists as failsafe for the iframe not being reset properly.\n        setTimeout(() => {\n          if (!vm.initializedUnlayer) {\n            unlayer.init(vm.$unlayerScript);\n            unlayer.loadDesign(vm.campaign.emailDetails.design.design);\n            setTimeout(() => {              \n              vm.initializedUnlayer = true;\n            }, 1000);\n          }\n        }, timeOut);\n        // vm.spinnerActive = false;\n      } else {\n\n        // If email design doens't exist for the selected action, create all necessary fields to pass as designTags and set the initial design.\n        LocationService.getLocation(vm.campaign.locationId).then(response => {\n          if (response.displayName) {\n            var locationName = response.displayName;\n          } else {\n            var locationName = response.name;\n          }\n          var style = response.locationStyle;\n          var logo = style.logo;\n          var colors = style.buttonColor || \"#4fcbc5\";\n          var buttonColors = vm.generateButtonColors(colors);        \n          vm.$unlayerScript = {\n            id: \"email-editor\",\n            projectId: 1777,\n            displayMode: \"email\",\n            designTags: {\n              location_name: locationName,\n              message_block : vm.campaign.emailMessage,\n              review_url: \"https://\" + subDomain + \".opiniion.com/campaignReviewEmail/\" + vm.campaign.locationId + '/' + vm.campaign.temporaryId + \"/*|cid|*\",\n              display_url: \"https://\" + subDomain + \".opiniion.com/leaveFeedback/\" + vm.campaign.locationId + '/*|cid|*/Email',\n              unsubscribe_url: \"https://\" + subDomain + \".opiniion.com/unsubscribe?cid=*|cid|*\",\n              image_url: baseUrl + `location\\/showImage\\/` + vm.campaign.locationId,\n              survey_url: baseUrl + 'surveyResponse/',\n              button_color_0: buttonColors[0],\n              button_color_1: buttonColors[1],\n              button_color_2: buttonColors[2],\n              button_color_3: buttonColors[3],\n              button_color_4: buttonColors[4],\n              footer_color: style.footerColor || \"lightgrey\"\n            }\n          };\n           if (vm.campaign.type == \"Survey\") {\n            vm.$unlayerScript.templateId = 4976;\n          } else if (vm.campaign.type == \"Review Request\") {\n            vm.$unlayerScript.templateId = 9878;\n          } else if (vm.campaign.type == \"Custom Message\") {\n            vm.$unlayerScript.templateId = 5284;\n          }\n\n          var d = document;\n          var s = d.createElement(\"script\");\n          s.type = \"text/javascript\";\n          s.defer = true;\n          s.src = \"//editor.unlayer.com/embed.js\";\n          var t = d.getElementsByTagName(\"script\")[0];\n          t.parentNode.insertBefore(s, t);\n          setTimeout(() => {\n            if (!vm.initializedUnlayer) {\n              unlayer.init(vm.$unlayerScript);\n              setTimeout(() => {\n                vm.initializedUnlayer = true;\n              }, 1000);\n            }\n          }, timeOut);\n        });\n      }\n      this.previewLoading.close();\n    },\n    goToStep(step) {\n      let vm = this;\n      if(vm.currentStep != step) {\n        if(vm.currentStep == 1 && vm.$refs['stepOneForm']) {\n          vm.$refs['stepOneForm'].validate((valid) => {\n            if(valid) {\n              vm.currentStep = step;\n            } else {\n              return false;\n            }\n          })\n        } else {\n          vm.currentStep = step;\n        }\n      }\n      // if (step == 1 && vm.campaign.locationId) {\n      //   vm.campaign.locationId = \"\";\n      //   var reInitialize = vm.selectedLocation;\n      //   vm.changeLocation(reInitialize, \"initialized\");\n      // }\n      // if (step != 1) {\n      //   if(vm.initializedUnlayer) {\n      //     unlayer.exportHtml(function(data) {\n      //       vm.campaign.design = {\n      //         data: data.html,\n      //         design: data.design\n      //       };\n      //     vm.removeIframe();\n      //     })\n      //   }\n      // }\n      // if (step == 4 && vm.visited4 == false) {\n      //   vm.visited4 = true;\n      //   this.campaign.landingPage.lp3 =\n      //     `Thank you so much for choosing ` +\n      //     this.data.value +\n      //     `! Your satisfaction is our top priority, and we'd love to hear from you. Please take a few seconds to let us know how we're doing.`;\n      // }\n      // setTimeout(() => {\n      //   this.step = step;\n      // }, 100);\n    },\n    clearFrequency() {\n      let vm = this;\n      if(vm.campaign.type == 'Review Request') {\n        vm.campaign.emailDetails.subject = 'How Are We Doing?'\n        vm.setLocationName(vm.campaign.locationId);\n      }\n      vm.campaign.frequency.type = '';\n      if(vm.campaign.type == 'Custom Message') {\n        vm.campaign.emailMessage = '';\n        vm.campaign.emailDetails.subject = '';\n        vm.campaign.smsDetails.message = '';\n        vm.setLocationName(vm.campaign.locationId);\n      }\n    },\n    checkEdit(step) {\n      if(this.currentStep >= 1 || (this.campaign.campaignId && this.pageAction == 'Edit')) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    nextStep() {\n      let vm = this;\n      if(vm.currentStep == 0 && vm.$refs['stepOneForm']) {\n        vm.$refs['stepOneForm'].validate((valid) => {\n          if(valid) {\n            if(vm.campaign.frequency.type == 'Automated') {\n              vm.currentStep = vm.currentStep+2;\n            } else {\n              vm.currentStep = vm.currentStep+1;      \n            }\n          } else {\n            return false;\n          }\n        })\n      } else if(vm.currentStep == 3 && vm.$refs['stepFourForm']) {\n        \n          vm.$refs['stepFourForm'].validate((valid) => {\n            if(valid) {              \n              vm.currentStep = vm.currentStep+1;      \n            } else {\n              return false;\n            }\n          })\n      } else {\n        vm.currentStep = vm.currentStep+1;      \n      }\n    },\n    lastStep() {     \n      if(this.currentStep == 2) {\n        if(this.campaign.frequency.type == 'Automated') {\n          this.currentStep = this.currentStep-2;\n        } else {\n          this.currentStep = this.currentStep-1;\n        }\n      } else {      \n        this.currentStep = this.currentStep-1;      \n      }\n    },\n    handleFrequencyChange(data) {      \n      this.campaign.frequency.date = '',\n      this.campaign.frequency.schedule = ''\n      if(data == 'Recurring') {\n        this.campaign.resend = '2592000000';\n      }\n    },\n    handleDelayChange() {\n      if(this.campaign.frequency.delay < 0) {\n        this.campaign.frequency.delay = 0;\n      }\n    },\n    getLocationOptions() {\n      let vm = this;\n      UserService.getAllUserLocations().then(response => {\n        vm.locationOptions = response;\n        let currentLocation = localStorage.getItem('locationId');\n        if(currentLocation && vm.pageAction == 'New') {\n          vm.campaign.locationId = currentLocation; \n          vm.setLocationName(vm.campaign.locationId);\n        } \n      });\n    },\n    getLocationName(locationId) {\n      let vm = this;\n      let currentName = '';\n      vm.locationOptions.map(el => {\n        if(el.locationId === locationId) currentName = el.name;\n      })\n      return currentName;\n    },\n    changeLocation(data, indicator) {\n      var vm = this;\n      if (config.subDomain) {\n        var subDomain = config.subDomain;\n      }\n      if (config.baseUrl) {\n        var baseUrl = config.baseUrl;\n      }\n      var timeOut = 500;\n      if (data.value) {\n        if (data.value != vm.campaign.locationId) {\n          vm.removeIframe();\n          vm.campaign.locationId = data.value;\n          LocationService.getLocation(data.value).then(response => {\n            if (response.displayName) {\n              var locationName = response.displayName;\n            } else {\n              var locationName = response.name;\n            }\n            var style = response.locationStyle;\n            var logo = style.logo;\n            var colors = style.buttonColor || \"#4fcbc5\";\n            var buttonColors = vm.generateButtonColors(colors);\n            \n            vm.$unlayerScript = {\n              id: \"editor\",\n              projectId: 1777,\n              displayMode: \"email\",\n              tools: {\n                \"custom#survey\": {\n                  data: {\n                    locationName: locationName\n                  }\n                }\n              },\n              designTags: {\n                location_name: locationName,\n                message_block : vm.campaign.emailMessage,\n                review_url: \"https://\" + subDomain + \".opiniion.com/campaignReviewEmail/\" + vm.campaign.locationId + '/' + vm.campaign.temporaryId + \"/*|cid|*\",\n                display_url: \"https://\" + subDomain + \".opiniion.com/leaveFeedback/\" + vm.campaign.locationId + '/*|cid|*/Email',\n                unsubscribe_url: \"https://\" + subDomain + \".opiniion.com/unsubscribe?cid=*|cid|*\",\n                image_url: baseUrl + `location\\/showImage\\/` + vm.campaign.locationId,\n                survey_url: baseUrl + 'surveyResponse/',\n                button_color_0: buttonColors[0],\n                button_color_1: buttonColors[1],\n                button_color_2: buttonColors[2],\n                button_color_3: buttonColors[3],\n                button_color_4: buttonColors[4],\n                footer_color: style.footerColor || \"lightgrey\"\n              }\n            };\n\n            if (vm.campaign.type == \"Survey\") {\n              vm.$unlayerScript.templateId = 4976;\n            } else if (vm.campaign.type == \"Review Request\") {\n              vm.$unlayerScript.templateId = 9878;\n            } else if (vm.campaign.type == \"Custom Message\") {\n              vm.$unlayerScript.templateId = 5284;\n            }\n\n            var d = document;\n            var s = d.createElement(\"script\");\n            s.type = \"text/javascript\";\n            s.defer = true;\n            s.src = \"//editor.unlayer.com/embed.js\";\n            var t = d.getElementsByTagName(\"script\")[0];\n            t.parentNode.insertBefore(s, t);\n            setTimeout(() => {\n              if(!vm.initializedUnlayer) {\n                unlayer.init(vm.$unlayerScript);\n                if (vm.campaign.design.data) {\n                  unlayer.loadDesign(vm.campaign.design.design);\n                  vm.initializedUnlayer = true;\n                } else {\n                  unlayer.loadDesign(vm.defaultDesign);\n                  vm.initializedUnlayer = true;\n                }\n              }\n            }, timeOut);\n            vm.campaign.smsMessage =\n              \"Thank you so much for choosing \" +\n              locationName +\n              \"! Please take a few seconds to tell us how we're doing. \\n\\n Click Here:\";\n          });\n        } else {\n          if(!vm.initializedUnlayer && indicator) {\n            vm.$unlayerScript = {\n              id: \"editor\",\n              projectId: 1777,\n              displayMode: \"email\"\n            };\n            var d = document;\n            var s = d.createElement(\"script\");\n            s.type = \"text/javascript\";\n            s.defer = true;\n            s.src = \"//editor.unlayer.com/embed.js\";\n            var t = d.getElementsByTagName(\"script\")[0];\n            t.parentNode.insertBefore(s, t);\n            setTimeout(() => {\n              unlayer.init(vm.$unlayerScript);\n              if (vm.campaign.design.data) {\n                unlayer.loadDesign(vm.campaign.design.design);\n                vm.initializedUnlayer = true;\n              } else {\n                unlayer.loadDesign(vm.defaultDesign);\n                vm.initializedUnlayer = true;\n              }\n            }, timeOut);\n          }\n        }\n        vm.selectedLocation = data;\n        vm.searchLocationText = data.label;\n        vm.hideMenu();\n      } else {\n        console.log(\"No location selected\");\n      }\n    },\n    setPrivate() {\n      Object.entries(this.campaign.rotators).forEach(([key, value]) => {\n        this.campaign.rotators[`${key}`].percentage = 0;\n      })      \n    },\n    removeIframe(type) {\n      let vm = this;\n      if(!type \n        && vm.campaign \n        && vm.campaign.emailDetails \n        && vm.campaign.emailDetails.design \n        && vm.campaign.emailDetails.design.design.body \n        && vm.campaign.emailDetails.design.design.body.rows \n        && vm.campaign.emailDetails.design.design.body.rows[0] \n        && vm.campaign.emailDetails.design.design.body.rows[0].columns \n        && vm.campaign.emailDetails.design.design.body.rows[0].columns[0] \n        && vm.campaign.emailDetails.design.design.body.rows[0].columns[0].contents \n        && vm.campaign.emailDetails.design.design.body.rows[0].columns[0].contents[1] \n        && vm.campaign.emailDetails.design.design.body.rows[0].columns[0].contents[1].values \n        && vm.campaign.emailDetails.design.design.body.rows[0].columns[0].contents[1].values.text) {\n          vm.campaign.emailMessage = vm.campaign.emailDetails.design.design.body.rows[0].columns[0].contents[1].values.text.replace(/<[\\s\\S]*?>/gm, '').trim();\n      }\n      if (vm.initializedUnlayer) {\n        var x = document.getElementsByTagName(\"iframe\")[0];\n        var d = document.getElementsByTagName(\"script\")[0];\n        if (x) {\n          x.remove()\n        }\n        if (d) {\n          d.remove()\n        }\n        vm.initializedUnlayer = false;\n      }\n    },\n    getTagSuggestions(queryString, cb) {      \n      let suggestedTags = [\n        {\"value\": 'New Customer'},\n        {\"value\": 'Returning Customer'},\n        {\"value\": 'Move-In'},\n        {\"value\": 'Move-Out'},\n        {\"value\": 'Work Order'}\n      ]\n      let results = queryString ? suggestedTags.filter(el => el.value.includes(queryString)) : suggestedTags;\n      cb(results);\n    },\n    checkCircleDistance() {\n      let circleOne = document.getElementById('first-circle');\n      let circleTwo = document.getElementById('second-circle');\n      if(circleOne && circleTwo) {\n        let topDisOne = circleOne.getBoundingClientRect().y;\n        let topDisTwo = circleTwo.getBoundingClientRect().y;\n        if(Math.abs(topDisOne - topDisTwo) > 50) {\n          this.cx = '-50';\n        }\n        clearInterval(this.circleInt)\n      }\n    },\n    showMenu() {\n      this.showingMenu = true;\n      this.searchLocationText = '';\n    },\n    hideMenu() {\n      this.showingMenu = false\n    },\n    selectSubmenuIndex(index) {\n      this.selectedCustomization = index;\n    },\n    saveDraft() {\n      let vm = this;\n      if(vm.$refs['stepOneForm']) {\n        vm.$refs['stepOneForm'].validate((valid) => {\n          if(valid) {\n            vm.saveCampaign('draft');\n          } else {\n            return false;\n          }\n        })\n      } else {\n        vm.saveCampaign('draft');\n      }\n    },\n    saveCampaign(status) {\n      let vm = this;\n      EventService.$emit(\"loading\", \"show\");\n      if(status) {\n        vm.campaign.status = 'draft'\n      } else {        \n        vm.campaign.status = 'active'\n      }\n      CampaignService.saveCampaign(vm.campaign).then(\n        function(response) {\n          if (response.success) {\n            vm.campaign = response;\n            EventService.$emit(\"loading\", \"hide\");\n            EventService.$emit(\"successMessage\", \"Hooray! Campaign Saved.\");\n            vm.closeModal();\n          }\n        },\n        function(error) {\n          if (error) {\n            EventService.$emit(\"loading\", \"hide\");\n            EventService.$emit(\n              \"errorMessage\",\n              \"Sorry, something went wrong. Please try again.\"\n            );\n          }\n          vm.closeModal();\n        }\n      );\n    },\n    sendTestEmail() {\n      let vm = this;\n      if(vm.testEmail.match(/[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$/g)) {\n        let messageObj = vm.campaign.emailDetails.design;\n        messageObj.subject = vm.campaign.emailDetails.subject;      \n        CampaignService.testCampaignMessage(vm.campaign.emailDetails.design, vm.campaign.locationId, vm.testEmail, null, 'Tester')\n        EventService.$emit('successMessage', 'Test Message Sent. You should receive it shortly.')\n      } else {\n        EventService.$emit('errorMessage', 'Test Message Not Sent Due to Malformed Email Address.')\n      }\n    },\n    sendTestSMS() {\n      let vm = this;\n      if(vm.testSMS.match(/[0-9]{10}/g)) {        \n        CampaignService.testCampaignMessage(vm.campaign.smsDetails.message, vm.campaign.locationId, null, vm.testSMS, 'Tester', vm.campaign.type)\n        EventService.$emit('successMessage', 'Test Message Sent. You should receive it shortly.')\n      } else {\n        EventService.$emit('errorMessage', 'Test Message Not Sent Due to unrecognized phone number.')\n      }\n    },\n    viewCustomerList(filters) {\n      let vm = this;\n      if(filters) {\n        CustomerService.searchCustomersByFilters(vm.campaign.locationId, vm.campaign.filters).then(response => {\n          vm.currentList = response;       \n        })\n      } else {\n        CustomerService.searchCustomersByFilters(vm.campaign.locationId).then(response => {\n          vm.currentList = response;\n        })\n      }\n      vm.showCustomersList = true;\n    },\n    viewFilters() {\n      this.showCustomersList = false;\n    },\n    checkValue(totalData, currentData, circle) {\n      if(currentData/totalData == Infinity || currentData/totalData == NaN) {\n        return 0;\n      } else {\n        if(circle) {\n          return currentData/totalData*282;\n        } else {\n          return (currentData/totalData)*100;\n        }\n      }\n    },\n    // addCondition() {\n    //   let vm = this;\n    //   vm.campaign.conditions.push({\n    //     comparator: \"\",\n    //     customerRating: \"\",\n    //     selection: \"\",\n    //     time: \"\",\n    //     restrict: \"\",\n    //     restrictTime: \"\"\n    //   });\n    // },\n    // removeCondition(index) {\n    //   this.campaign.conditions.splice(index, 1);\n    // },\n    changeQuestions() {\n      let vm = this;\n      if (vm.campaign.survey == \"none\") {\n        vm.campaign.surveyQuestions = [];\n      } else if (vm.campaign.survey == \"1\") {\n        vm.campaign.surveyQuestions = [\n          { order: 1, type: \"\", title: \"Breakfast\", question: \"How was it?\" },\n          { order: 2, type: \"\", title: \"Lunch\", question: \"What was it?\" },\n          { order: 3, type: \"\", title: \"Dinner\", question: \"Why was it?\" }\n        ];\n      } else if (vm.campaign.survey == \"2\") {\n        vm.campaign.surveyQuestions = [\n          { order: 1, type: \"\", title: \"Basketball\", question: \"How was it?\" },\n          { order: 2, type: \"\", title: \"Baseball\", question: \"What was it?\" },\n          { order: 3, type: \"\", title: \"Football\", question: \"Why was it?\" }\n        ];\n      } else if (vm.campaign.survey == \"3\") {\n        vm.campaign.surveyQuestions = [\n          { order: 1, type: \"\", title: \"Ape\", question: \"How was it?\" },\n          { order: 2, type: \"\", title: \"Skunk\", question: \"What was it?\" },\n          { order: 3, type: \"\", title: \"Honeybadger\", question: \"Why was it?\" }\n        ];\n      }\n    },\n    addSurveyQuestion() {\n      let vm = this;\n      let newOrder = vm.campaign.surveyQuestions.length + 1;\n      vm.campaign.surveyQuestions.push({\n        order: newOrder,\n        type: \"\",\n        title: \"\",\n        question: \"\"\n      });\n    },\n    removeSurveyQuestion(index) {\n      this.campaign.surveyQuestions.splice(index, 1);\n    },\n    dragStart(event) {\n      this.dragging = true;\n      let dt = event.dataTransfer;\n      dt.setData(\"text/plain\", event.target.id);\n      var el = document.getElementsByClassName(\"disable-on-drag\");\n      var i;\n      for (i = 0; i < el.length; i++) {\n        el[i].disabled = true;\n      }\n      // console.log(\"Dragged\", dt);\n    },\n    dragOver(event) {\n      event.dataTransfer.dropEffect = \"move\";\n      // console.log('dragover', event.dataTransfer.dropEffect);\n    },\n    dropQuestion(event) {\n      let dt = event.dataTransfer;\n      var data = event.dataTransfer.getData(\"text/plain\");\n      // console.log('dropped', data + ' into', event.target.id);\n      this.startPosition = data;\n      this.endPosition = event.target.id;\n    },\n    dragEnd(event) {\n      let vm = this;\n      let start = this.startPosition;\n      let end = this.endPosition;\n      var newArray = [];\n      // console.log(\"start\", start, \"end\", end);\n      if (start && end) {\n        vm.campaign.surveyQuestions.map((question, i) => {\n          // console.log(i, start, end);\n          if (i == start) {\n            i = end;\n            newArray[i] = question;\n          } else {\n            if (end > start) {\n              if (i > start && i <= end) {\n                i = i - 1;\n                newArray[i] = question;\n              } else {\n                newArray[i] = question;\n              }\n            } else if (end < start) {\n              if (i < start && i >= end) {\n                i = i + 1;\n                newArray[i] = question;\n              } else {\n                newArray[i] = question;\n              }\n            }\n          }\n        });\n        vm.campaign.surveyQuestions = newArray;\n        // console.log(\"result\", vm.campaign.surveyQuestions);\n      }\n      // console.log(\"drag ended\");\n      var el = document.getElementsByClassName(\"disable-on-drag\");\n      var i;\n      for (i = 0; i < el.length; i++) {\n        el[i].disabled = false;\n      }\n      vm.dragging = false;\n    },\n    setLocationName(loc) {      \n      let vm = this;\n      let location = vm.locationOptions.find(el => {\n        return el.locationId == loc;\n      })\n      vm.locationName = location.name;\n      if(vm.campaign.type == 'Review Request') {\n        vm.campaign.emailMessage = \n        \"Thank you so much for choosing \" + location.name + \"! Your satisfaction is our top priority, and we'd love to hear from you. Please take a few seconds to let us know how we're doing.\";\n        vm.campaign.smsDetails.message = \"Thank you so much for choosing \" + location.name + \"! Please take a few seconds to tell us how we're doing.\";\n        vm.campaign.landingPage.emailNotDisplayed = \"At \" + location.name + \", we care about your experience and want to hear about it. Please take a moment to let us know how we're doing!\"\n      }\n      LocationService.getLocation(loc).then(response => {\n        if(response) {\n          vm.selectedLocation = response;\n          if(vm.campaign.type == 'Review Request') {\n            vm.buttonColors = vm.generateButtonColors(response.locationStyle.buttonColor);\n            let searchObject = {\n              type: 'Default',\n              buttonColor: response.locationStyle.buttonColor,\n              footerColor: response.locationStyle.footerColor,\n              locationId: response.locationId,\n              locationName: response.displayName,\n              campaignId: vm.campaign.temporaryId\n            }\n            CampaignService.getEmailDesign(searchObject).then(designResponse => {\n              // console.log(designResponse);\n              vm.campaign.emailDetails.design = designResponse;\n            })\n          } else if(vm.campaign.type == 'Custom Message') {\n            vm.buttonColors = vm.generateButtonColors(response.locationStyle.buttonColor);\n            let searchObject = {\n              type: 'Custom',\n              buttonColor: response.locationStyle.buttonColor,\n              footerColor: response.locationStyle.footerColor,\n              locationId: response.locationId,\n              locationName: response.displayName,\n              campaignId: vm.campaign.temporaryId\n            }\n            CampaignService.getEmailDesign(searchObject).then(designResponse => {\n              vm.campaign.emailDetails.design = designResponse;                      \n            })\n          }\n          let rotators = [];\n          vm.campaign.rotators = [];\n          response.rotators.map(el => {\n            rotators.push(el.name);\n            vm.campaign.rotators.push({ name: el.name, percentage: 0 });\n          });          \n          vm.rotatorOptions = rotators;\n          LocationService.getAllLocationCustomerTags(loc, vm.campaign.contactMethod).then(response2 => {\n            if(response2) {              \n              vm.defaultTagOptions = response2.tags\n            }        \n          })\n        }\n      });\n    },\n    resetLanding() {\n      this.campaign.landingPage = {\n        lp1: \"Thanks for the Feedback!\",\n        lp2: \"\",\n        lp3: \"We'd love to hear what you've enjoyed about our service so we can continue to do our best! Please also consider leaving us a public review!\",\n        rp1: \"We're Sorry To Hear That\",\n        rp2: \"Please Tell Us More\",\n        rp3:\n          \"We take our customer feedback very seriously - please let us know how your experience was less than ideal so we can improve in the future. In order to better address the issue, please provide specifics. We appreciate your feedback!\",\n        emailNotDisplayed: \"\"\n      }\n    },\n    resetFollowups() {\n      this.campaign.followUps = [\n        {hours: 72, subject: \"We'd Love to Hear from You!\"},\n        {hours: 216, subject: \"We'd Still Love to Hear from You!\"}\n      ];\n    },\n    resetEmail() {\n      this.campaign.emailDetails = {\n        subject: \"How Are We Doing?\",\n        design: {\n          data: \"\",\n          design: \"\"\n        }\n      };\n      this.campaign.emailMessage = \"Thank you so much for choosing \" + this.locationName + \"! Your satisfaction is our top priority, and we'd love to hear from you. Please take a few seconds to let us know how we're doing.\";\n    },\n    resetSMS() {\n      let vm = this;\n      this.campaign.smsDetails = {\n        header: \"\",\n        message: \"Thank you so much for choosing \" + vm.locationName + \"! Please take a few seconds to tell us how we're doing.\"\n      };\n    },\n    convertDate() {\n      let vm = this;\n      vm.campaign.frequency.date = Date.parse(vm.campaign.frequency.date);      \n    },\n    displayDate(date) {      \n      return new Date(date).toString().substr(0,15);\n    },\n    previewLanding(sentiment) {\n      let vm = this;\n      let loadOptions = {\n        lock: true,\n        text: 'Loading',\n        spinner: 'el-icon-loading',\n        background: 'rgba(0,0,0,.15)'\n      }\n      vm.previewLoading = Loading.service(loadOptions);\n      let urlString = '/leaveReview/'+ this.campaign.locationId + '/test/';\n      try {\n        localStorage.setItem('landingPage', JSON.stringify(vm.campaign.landingPage));\n      } catch (error) {\n        console.log(error);\n      }\n      if(sentiment == 'negative') {\n        urlString = urlString + '1';\n        vm.landingPreview = true;\n      } else {\n        urlString = urlString + '5';\n        vm.landingPreview = true;\n      }\n      if(config.subDomain != 'localhost') {\n        if(vm.campaign.temporaryId) {\n          urlString = 'https://' + config.subDomain + '.opiniion.com' + urlString + '/' + vm.campaign.temporaryId + '/' + Date.now()\n        } else {\n          urlString = 'https://' + config.subDomain + '.opiniion.com' + urlString + '/' + vm.campaign.campaignId + '/' + Date.now()\n        }\n      } else {        \n        urlString = 'http://' + config.subDomain + ':8080' + urlString + '/' + vm.campaign.campaignId + '/' + Date.now()\n      }\n      vm.urlString = urlString;\n    },\n    addFollowUp() {\n      let vm = this;\n      let newFollowUp = {hours: 0, subject: \"\"};\n      if (vm.campaign.followUps.length < 4) {\n        vm.campaign.followUps.push(newFollowUp)\n      } else {\n        vm.$message({\n          message: `Sorry, you may only have 4 follow-ups.`,\n          type: 'error'\n        });\n      }\n      // vm.campaign.followUps.push(newFollowUp);\n    },\n    removeFollowUp(index) {\n      this.campaign.followUps.splice(index, 1);\n    },\n    stopLoading() {\n      this.previewLoading.close();\n    },\n    displayIcon(source) {\n      source = source[0].toUpperCase() + source.substr(1);\n      \n      if (source == \"Google\") {\n        return require(\"../../public/img/Google_Icon.png\");\n      } else if (source == \"Yelp\") {\n        return require(\"../../public/img/Yelp_Icon.png\");\n      } else if (source == \"Facebook\") {\n        return require(\"../../public/img/Facebook_Icon.png\");\n      } else if (source == \"Foursquare\") {\n        return require(\"../../public/img/Foursquare_Icon.png\");\n      } else if (source == \"Citysearch\") {\n        return require(\"../../public/img/Citysearch_Icon.png\");\n      } else if (source == \"Yellowpages\") {\n        return require(\"../../public/img/YP_Icon.png\");\n        // } else if (source == 'TripAdvisor') {\n        //   return require('../../public/img/TripAdvisor_Icon.png');\n        // } else if (source == 'BBB') {\n        //   return require('../../public/img/BBB_Icon.png');\n      } else {\n        return require(\"../../public/img/Opiniion_Icon.png\");\n      }\n    },\n    closePreviewModal() {\n      this.openPreviewCampaign = false;\n    },\n    editCampaign() {\n      let vm = this;\n      vm.pageAction = 'Edit';\n      LocationService.getLocation(vm.campaign.locationId).then(response => {\n        var colors = response.locationStyle.buttonColor || \"#4fcbc5\";\n        vm.buttonColors = vm.generateButtonColors(colors);\n      })\n      vm.currentStep = 0;\n    },\n    confirmCloseModal() {\n      this.$confirm('Are you sure you wish to exit without saving?', '', {\n        confirmButtonText: 'Yes',\n        cancelButtonText: 'Cancel',\n        type: \"warning\"\n      }).then( _ => {\n        this.closeModal();\n      }).catch( _ => {        \n      })\n    },\n    closeModal: function() {\n      this.$emit(\"closeModal\");\n      this.campaign = {};\n      this.campaignOpen = false;\n      EventService.$emit(\"loading\", \"hide\");\n    },\n    generateButtonColors(initialColor) {\n      let vm = this;\n      return [\n        vm.lightenColor(initialColor, 40),\n        vm.lightenColor(initialColor, 30),\n        vm.lightenColor(initialColor, 20),\n        vm.lightenColor(initialColor, 10),\n        initialColor\n      ];\n    },\n    lightenColor(initialColor, amt) {\n      var col = initialColor.slice(1);\n\n      var num = parseInt(col, 16);\n\n      var r = (num >> 16) + amt;\n\n      if (r > 255) r = 255;\n      else if (r < 0) r = 0;\n\n      var b = ((num >> 8) & 0x00ff) + amt;\n\n      if (b > 255) b = 255;\n      else if (b < 0) b = 0;\n\n      var g = (num & 0x0000ff) + amt;\n\n      if (g > 255) g = 255;\n      else if (g < 0) g = 0;\n\n      return (\n        \"#\" +\n        String(\"000000\" + (g | (b << 8) | (r << 16)).toString(16)).slice(-6)\n      );\n    },\n    checkCircleDistance() {\n      let circleOne = document.getElementById('first-circle');\n      let circleTwo = document.getElementById('second-circle');\n      if(circleOne && circleTwo) {\n        let topDisOne = circleOne.getBoundingClientRect().y;\n        let topDisTwo = circleTwo.getBoundingClientRect().y;\n        if(Math.abs(topDisOne - topDisTwo) > 50) {\n          this.cx = '-50';\n        }\n        clearInterval(this.circleInt)\n      }\n    },\n  }\n};\n</script>\n\n<style scoped>\n  :root {\n    --summary-width: 330px;\n  }\n  .edit-title {\n    text-transform: uppercase;\n    color:#59CAF9 !important;\n    font-size: 12px;\n  }\n  .el-button--warning:hover {\n    /* background: white; */\n  }\n  .el-button--warning {\n    background: var(--opiniionorange);\n  }\n  .el-button--secondary {\n    background: #66615B;\n    color: white;\n  }\n  .el-button--secondary:focus, .el-button--secondary:hover {\n    background: #55514c;\n    color: white;\n    border-color: #55514c;\n  }\n  .el-button--text {\n    color: #66615B;\n  }\n\n  .dialog-new-campaign-container {\n    /* width: 100%; */\n    /* height: 100%; */\n    /* max-width: 1400px;*/\n    /* margin: auto; */\n    /* max-height: 100%; */\n    /* max-height: 90%; */\n    /* overflow: hidden; */\n    /* margin: auto;\n    width: 1300px;\n    height: 800px;\n    max-height: 90%;\n    overflow: hidden;\n    min-width: 800px;\n    max-width: 100%; */\n    /* overflow: hidden; */\n    /* margin: auto; */\n  }\n  .el-select__inner {\n    width: 100%;\n  }\n  .el-select {\n    width: 100%;\n  }\n  /* Header Section */\n\n  .el-step {\n    text-transform: uppercase;\n  }\n  .missing-step { \n    /* Since audience in steps have v-show, it's treating it like it's still there. */\n    /* This is only used to center the steps when it is missing. */\n    display: flex;\n    justify-content: center;\n  }\n\n  .el-step__main .el-step__title {\n    /* transform: translateY(-30px) !important; */\n  }\n  .el-dialog__wrapper {\n    margin: auto;\n  }\n  .el-dialog--center .el-dialog__body {\n    display: flex;\n    flex-direction: row;\n  }\n\n\n  .header-title {\n    width: calc(100% - 330px);\n  }\n  .header-title,.footer-title {\n    text-align: center;\n    /* transform: translateX(-10%); */\n    font-weight: 400;\n    font-size: 28px;\n    color: #66615B;\n  }\n\n  .campaign-body-container {\n    display: flex;\n    flex-direction: row;\n    /* min-height: 65vh; */\n  }\n\n\n  /* Body */\n  \n  .campaign-email-editor {\n    height: 700px;\n  }\n\n  /* Step 1 */\n\n  .campaign-steps {\n    width: calc(100% - 330px);\n  }\n\n  .data-column {\n    display: flex;\n    justify-content: center;\n    /* align-items: center; */\n    width: 100%;\n    margin-top: 40px;\n    margin-bottom: 30px;\n    margin-left: 60px;\n  }\n\n  .data-column .el-col:nth-child(1) {\n    border-right: 1px solid #9a9a9a35;\n    margin-right: 50px;\n    padding-right: 50px;\n  }\n\n  .grid-content {\n    /* height: 50vh; */\n  }\n\n  .data-input {\n    display: flex;\n    width: 420px;\n    max-width: 100%;\n    flex-direction: column;\n    margin-bottom: 10px;\n  }\n\n  .data-input label {\n    margin-bottom: 15px;\n    font-weight: bold;\n  }\n\n  .hour-delay {\n    max-width: 75px;\n  }\n\n  .campaign-identifier > * {\n    word-break: keep-all;\n  }\n\n  .campaign-identifier .subtitle {\n    padding: 10px 0;\n    /* margin-bottom: 10px; */\n    line-height: 1.6;\n    display: block;\n  }\n\n\n  /* Step 2 */\n\n  .campaign-step-subheader {\n    width: 90%;\n    margin: 30px auto;\n    text-align: center;\n    word-break: keep-all;\n    font-size: 15px;\n    line-height: 1.5;\n    margin-bottom: 30px;\n  }\n\n  .filters-box {\n    width: 90%;\n    height: 100%;\n    border: 1px solid #9a9a9a35;\n    border-radius: 12px;\n    margin: 0 auto;\n    margin-bottom: 30px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .filters-header {\n    font-size: 14px;\n    font-weight: bold;\n    color: #757575;\n    text-transform: uppercase;\n    text-align: center;\n    margin: 30px;\n    margin-bottom: 20px;\n  }\n\n  .filters-box sup {\n    margin-bottom: 10px;\n  }\n\n  .filter-row {\n    text-transform: uppercase;\n    text-align: center;\n  }\n\n  .filter-column {\n    display: flex;\n    flex-direction: column;\n    margin-right: 50px;\n    margin-left: 30px;\n  }\n\n  .filter-column-title {\n    font-weight: bold;\n    color: #757575;  \n    margin-bottom: 20px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .filter-select-container {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    /* width: 50%; */\n    width: 360px;\n    max-width: 95%;\n  }\n  .filter-select-container .el-select {\n    margin-bottom: 10px;\n  }\n            \n  .filter-select-container label {\n    margin-bottom: 5px;\n    margin-left: 15px;\n    font-size: 11px;\n    text-transform: none;\n    color: #9a9a9a;\n  }\n  .resend-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    width: 100%;\n  }\n  .resend-container .resend-text {\n    font-size: 14px;\n    color: #757575;\n    text-transform: none;\n    margin-bottom: 10px;\n    width: 100%;\n  }\n\n  .filter-select-container .el-select {\n    width: 100%;\n  }\n\n  .filters-footer {\n    /* font-size: 18px; */\n    text-transform: uppercase;\n    text-align: center;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin: 10px;\n  }\n\n  .shorten-width {\n    max-width: 160px;\n  }\n\n  .filters-footer > * {\n    margin-bottom: 10px;\n  }\n\n  .separation-segment {\n    font-size: 16px;\n    margin: 10px 0;\n  }\n\n  .separation-segment::before {\n    content: '';\n    display: inline-block;\n    border-top: 1px solid lightgrey;\n    width: 200px;\n    margin-right: 10px;\n    transform: translateY(-5px);\n  }\n\n  .separation-segment::after {\n    content: '';\n    display: inline-block;\n    border-top: 1px solid lightgrey;\n    width: 200px;\n    margin-left: 10px;\n    transform: translateY(-5px);\n  }\n\n  .filters-actions-return {\n    display: flex;\n    justify-content: space-between;\n    margin: 10px 20px;\n    width: 95%;\n  }\n\n  .filters-actions-return .el-input {\n    width: 300px;\n  }\n\n  .return-to-filters {\n    margin-top: 10px;\n    color: #4fcbc5;\n  }\n\n  .el-input__prefix .el-input__icon {\n    height: 80%;\n  }\n\n  .selected-customers-container {\n    width: 95%;\n  }\n\n  .filters-showing {\n    width: 95%;\n    float: left;\n    box-sizing: border-box;\n    padding-top: 20px;\n    padding-bottom: 20px;\n    color: #9a9a9a;\n  }\n\n  /* Step 3 */\n\n  /* Part 1 */\n  .customization-container {\n    /* width: calc(100% - 330px); */\n  }\n\n  .customize-menu {\n    width: 100%;\n    height: 40px;\n    margin: 0px auto 0px auto;\n    display: flex;\n    border-top-right-radius: 15px;\n    border-top-left-radius: 15px;\n    background: #66615B;\n    box-sizing: border-box;\n  }\n  .el-menu--horizontal {\n    border-top-left-radius: 20px;\n    border-top-right-radius: 20px;\n  }\n\n  .el-menu--horizontal>.el-menu-item {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n    /* width: calc(33% + 2.5px); */\n    height: 100%;\n    text-align: center;\n    background: #66615B;\n  }\n  .el-menu--horizontal>.el-menu-item:hover {\n    background: #79726a;\n    color: white !important;\n  }\n  .el-menu-item .is-active {\n    background: red;\n  }\n  .el-menu--horizontal>.el-menu-item.is-active {\n    /* border-top: 1px solid lightgrey; */\n    /* border-right: 1px solid lightgrey;\n    border-left: 1px solid lightgrey; */\n    border-bottom: none;\n  }\n  .el-menu--horizontal>.el-menu-item:nth-child(1) {\n    border-top-left-radius: 15px;\n  }\n  .el-menu--horizontal>.el-menu-item.is-active:hover {\n     /* background: #f2f2f2; */\n   }\n\n  .el-menu--horizontal>.el-menu-item.is-active:nth-child(1) {\n    background: #79726a;\n    color: white;\n    border-top-left-radius: 15px;\n  }\n\n  .el-menu--horizontal>.el-menu-item.is-active:nth-child(2) {\n    background: #79726a;\n    color: white;\n  }\n\n  .el-menu--horizontal>.el-menu-item.is-active:nth-child(3) {\n    background: #79726a;\n    color: white;\n    border-top-right-radius: 15px;\n  }\n\n  .el-menu--horizontal>.el-menu-item.is-active:nth-child(4) {\n    background: #79726a;\n    color: white;\n  }\n  \n  /* .el-menu--horizontal .el-menu-item:not(.is-disabled):focus, .el-menu--horizontal .el-menu-item:not(.is-disabled):hover {\n    border: 1px solid lightgrey;\n    color: #757575;\n  }\n  .el-menu--horizontal .el-menu-item:not(.is-active) .el-menu-item:not(.is-disabled):focus, .el-menu--horizontal .el-menu-item:not(.is-disabled):hover:nth-child(1) {\n    border-top-left-radius: 15px;\n    color: #757575;\n    border-bottom: none;\n  }\n  .el-menu--horizontal .el-menu-item:not(.is-active) .el-menu-item:not(.is-disabled):focus, .el-menu--horizontal .el-menu-item:not(.is-disabled):hover:nth-child(3) {\n    border-top-right-radius: 15px;\n    color: #757575;\n    border-bottom: none;\n  }\n  .el-menu--horizontal .el-menu-item:not(.is-active) .el-menu-item:not(.is-disabled):focus, .el-menu--horizontal .el-menu-item:not(.is-disabled):hover:nth-child(4) {\n    border-top-right-radius: 15px;\n    color: #757575;\n    border-bottom: none;\n  } */\n\n  .customization-options-menu {\n    position: relative;\n    /* width: calc(80% - 2px); */\n    width: 100%;\n    margin: 0 auto;\n    margin-bottom: 20px;\n    border: 1px solid #9a9a9a35;\n    height: 400px;\n    /* transform: translateY(-2px); */\n    border-bottom-left-radius: 15px;\n    border-bottom-right-radius: 15px;\n  }\n\n  .customization-subheader {\n    text-align: center;\n    margin-top: 20px;\n  }\n\n  .customization-preview {    \n    position: relative;\n    height: 360px;\n    width: 360px;\n    margin: auto;\n    border-radius: 15px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 42px;\n    overflow: hidden;\n  }\n\n  .customization-preview::after {\n    display: none;\n    content: 'Preview';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    background: rgba(0,0,0,.35);\n    font-size: 14px;\n    color: white;\n    font-weight: 500;\n    text-align: center;\n    padding-top: 10px;\n    padding-bottom: 10px;\n    /* transform: rotateZ(-35deg); */\n  }\n\n  .preview-buttons {\n    display: flex;\n    width: 360px;\n    justify-content: space-between;\n    margin: auto;\n    /* margin: 5px 40px; */\n    /* padding-left: 40px; */\n  }\n\n  .preview-buttons .el-button {\n    width: 170px;\n    max-width: 100%;\n  }\n\n  .email-container {\n    margin-top: 30px;\n    margin-left: 50px;\n    width: 360px;\n    max-width: 100%;\n  }\n  .email-container > .el-input {\n    padding-top: 5px;\n  }\n\n  .el-textarea .el-textarea__inner {\n    height: 190px;\n    max-height: 190px;\n    word-break: keep-all;\n  }\n\n  .email-container>label {\n    margin-bottom: 5px;\n  }\n\n  .custom-message {\n    font-size: 16px;\n  }\n\n  .send-test-email {\n    display: flex;\n  }\n\n  /* Part 2 */\n\n  .customization-options-menu {\n    padding-bottom: 30px;\n  }\n\n  .sms-button {\n    margin-left: 15%;\n  }\n  \n  .text-message {\n    padding-top: 5px;\n    height: 200px;\n    min-height: 200px;\n    word-break: keep-all;\n  }\n  .text-message.el-textarea {\n    min-height: 200px;\n    height: 200px;\n  }\n  .text-message-container {\n    margin: 40px 25px;\n  }\n\n  .text-label {\n    font-size: 11px;\n    color: #9a9a9a;\n  }\n\n  .text-display {\n    width: 350px;\n    height: 160px;\n    background: #4fcbc5;\n    color: white;\n    border-radius: 10px;\n    transform: translateY(15px);\n    padding: 10px;\n    word-break: keep-all;\n    font-size: 16px;\n    font-weight: 500;\n  }\n\n  .text-display::after {\n    position: absolute;\n    content: '';\n    bottom: 0px;\n    right: 55px;\n    width: 0;\n    height: 0;\n    border: 25px solid transparent;\n    border-top-color: #4FCBC5;\n    border-bottom: 0;\n    border-left: 0;\n    margin-bottom: -12px;\n    transform: rotateZ(225deg)\n  }\n\n  .text-align .el-input__inner {\n    height: 200px;\n    border-radius: 10px;\n  }\n\n  /* Part 3 */\n\n  .reset-command {\n    position: absolute;\n    right: 0;\n    font-size: 12px;\n    font-weight: 500;\n    text-decoration: underline;\n    cursor: pointer;\n    color: #4FCBC5;\n    margin-right: 15px;\n  }\n\n  .head {\n    margin-top: 15px;\n  }\n\n  .review-title {\n    margin-top: 15px;\n    margin-bottom: 15px;\n    text-transform: uppercase;\n    font-weight: 600;\n  }\n\n  .review-subtitle {\n    margin-bottom: 15px;\n  }\n\n  .landing-columns {\n    display: flex;\n    flex-direction: column;\n    text-align: center;\n  }\n\n  .landing-label-text {\n    font-size: 11px;\n  }\n\n  .landing-label {\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    text-align: left;\n    margin: 5px 20px 5px 20px;\n    width: 90%;\n  }\n\n  .landing-label label {\n    margin-bottom: 7px;\n  }\n\n  .preview-button {\n    width: 50%;\n    min-width: 150px;\n    margin-left: 25%;\n    margin-top: 10px;\n  }\n\n  /* Part 4 */\n\n  .follow-up-container {\n    display: flex;\n    align-items: center;\n    /* justify-content: center; */\n    height: 300px;\n    padding-top: 20px;\n    margin-top: 20px;\n    width: 100%;\n    max-width: 100%;\n    overflow-x: auto;\n    box-sizing: border-box;\n  }\n  .follow-up-arrow-left, .follow-up-arrow-right {\n    font-size: 35px;\n    margin: 40px;\n  }\n  .follow-up-header {\n    position: relative;\n    width: 100%;\n    height: 40px;\n    /* background: red; */\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .follow-up-header {\n    font-weight: 600;\n  }\n  .remove-follow-up {\n    position: absolute;\n    right: 20px;\n    top: 10px;\n    font-size: 14px;\n    cursor: pointer;\n    transition: .2s opacity;\n    -webkit-transition: .2s opacity;\n  }\n  .remove-follow-up:hover {\n    opacity: .65;\n  }\n  .follow-up-body {\n    padding: 20px;\n    box-sizing: border-box;\n  }\n  .follow-up-header {\n\n  }\n  .follow-up-body .el-input {\n    padding-top: 5px;\n  }\n  .follow-up-body label {\n    font-size: 11px;\n    color: #757575;\n  }\n  .follow-up {\n    display: flex;\n    position: relative;\n    flex-direction: column;\n    width: 300px;\n    min-width: 300px;\n    height: 240px;\n    box-shadow: 0px 3px 6px rgba(0, 0, 0, .15);\n    border-radius: 15px;\n    margin-left: 20px;\n    /* margin-right: 20px; */\n    /* margin-left: 20px; */\n    /* margin: 0px 20px auto; */\n    box-sizing: border-box;\n  }\n  .add-follow-button-container {\n    display: flex;\n    justify-content: center;\n    width: 100%;\n  }\n\n  .add-follow-button {\n    margin-top: 10px;\n  }\n\n  /* Step 4 */\n\n  .rotators-container {\n    display: flex;\n    justify-content: center;\n    flex-direction: row;\n    margin: 20px auto;\n  }\n\n  .rotator-box {\n    border: 1px solid lightgrey;\n    padding: 20px;\n    display: flex;\n    flex-direction: column;\n    margin-left: 10px;\n    margin-right: 10px;\n    border-radius: 15px;\n    /* margin: 5px; */\n    width: 150px;\n  }\n\n  .rotator-name {\n    margin: 5px auto;\n    height: 30px;\n    display: flex;\n    justify-content: center;\n    align-content: center;\n    align-items: center;\n  }\n\n  .rotator-name img {\n    margin-right: 20px;\n    transform: translateY(-4px);\n  }\n\n  .private-selection {\n    display: flex;\n    flex-direction: column;\n    text-align: center;\n  }\n\n  .private-selection {\n    margin-top: 50px;\n    font-size: 18px;\n  }\n\n  .private-button {\n    width: 200px;\n    margin: 40px auto;\n    \n  }\n\n  /* Step 5 */\n\n  .completion-message {\n    font-size: 25px;\n    max-width: 575px;\n    width: 100%;\n    /* margin: 120px auto; */\n    min-height: 360px;\n    margin: 5% auto;\n    height: auto;\n    text-align: center;\n    word-break: keep-all;\n    line-height: 1.75;\n  }\n  .completion-message i {\n    font-size: 100px;\n    margin-bottom: 40px;\n  }\n\n  /* Preview Landing */\n\n  .el-icon-loading {\n    font-size: 30px;\n  }\n\n  .landing-preview-iframe-container iframe {\n    width: 100%;\n    min-height: 650px;\n  }\n\n  /* Analytics */\n\n  .campaign-analytics {\n    height: 60vh;\n    position: relative;\n    display: flex;\n    width: calc(100% - 330px);\n    flex-direction: column;\n    align-items: center;\n  }\n  .campaign-analytics-no-data {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column-reverse;\n    font-size: 14px;\n    color: #9a9a9a;\n    margin-top: 20%;\n  }\n  .campaign-analytics-no-data i{\n    font-size: 120px;\n    margin-bottom: 30px;\n    color: #9a9a9a35;\n  }\n  .campaign-analytics .subtitle {\n    font-size: 12px;\n  }\n\n  .card-data {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-content: center;\n    align-items: center;\n  }\n\n  .campaign-analytics-percent-wrapper {\n    position: absolute;\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n  }\n\n  #campaign-analytics-delivered-percent {\n    color: #4DD0E1;\n  }\n\n  #campaign-analytics-opened-percent {\n    color: #42A5F5;\n  }\n\n  #campaign-analytics-engaged-percent {\n    color: #F6984F;\n  }\n\n  #campaign-analytics-delivered-percent,\n  #campaign-analytics-opened-percent,\n  #campaign-analytics-engaged-percent {\n    font-size: 20pt;\n  }\n\n  .campaign-analytics-text {\n    color: #757575;\n    text-transform: uppercase;\n    font-size: 10pt;\n    font-weight: bold;\n  }\n\n  .graphs {\n    display: flex;\n    flex-direction: row;\n    width: 50%;\n    justify-content: space-around;\n    margin-top: 50px;\n  }\n\n\n  svg circle {\n    height: 150px;\n    width: 150px;\n    stroke: #81D4FA;\n    stroke-width: 10px;\n    fill: none;\n    stroke-dasharray: 1000;\n  }\n  \n  .circle-graph {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    border: 15px solid #4fcbc5;\n    border-radius: 50%;\n    padding: 20px;\n    height: 100px;\n    width: 100px;\n  }\n\n  .circle-graph .data-display {\n    color: #4fcbc5;\n    font-size: 30px;\n    margin-top: 15px;\n    margin-bottom: 10px;\n  }\n\n  .circle-graph .blue {\n    color: #4DD0E1;\n  }\n\n  .circle-graph .orange {\n    color: #F6984F;\n  }\n\n  .circle-graph .darkblue {\n    color: #42A5F5;\n  }\n\n  .blue-border {\n    border: 15px solid #42A5F5;\n  }\n\n  .orange-border {\n    border: 15px solid #F6984F;\n  }\n\n\n  .circle-graph .title {\n    font-size: 16px;\n    text-transform: uppercase;\n    font-weight: 600;\n  }\n\n  .circled {\n    height: 150px;\n    width: 150px;\n  }\n  \n\n  .circled svg circle {\n    stroke: #81D4FA;\n    stroke-width: 10px;\n    fill: none;\n    stroke-dasharray: 1000;\n  }\n\n  .dataset {\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    transform: translateX(-3px);\n    cursor: pointer;\n  }\n\n  .dataset span {\n    text-align: center;\n    font-size: 14px;\n  }\n\n  .dataset span:nth-child(1) {\n    color: #81D4FA;\n    font-size: 22px;\n  }\n\n  .orange svg circle {\n    stroke: #FFCD80;\n  }\n\n  svg .fullcircle {\n    stroke: rgba(211, 211, 211, 0.379);\n  }\n\n  svg .fullcircle {\n    stroke: rgba(211, 211, 211, 0.379);\n  }\n\n  /* Summary Section */\n  .campaign-running-summary-content {\n    width: calc(100% - 40px);\n  }\n  .campaign-running-summary {\n    width: 330px;\n    position: absolute;\n    right: 0;\n    top: 0;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background: #545454;\n    border-top-right-radius: 12px;\n    border-bottom-right-radius: 12px;\n    color: white;\n    height: 100%;\n  }\n\n  .summary-section {\n    margin-bottom: 30px;\n    overflow: hidden;\n    width: calc(100% - 20px);\n    margin-left: auto;\n    margin-right: auto;\n    transition: .35s ease;\n    -webkit-transition: .35s ease;\n  }\n  .summary-section:hover.opacity {\n    opacity: 1;\n  }\n  .summary-section.opacity {\n    opacity: .5;\n    transition: .35s opacity;\n    -webkit-transition: .35s opacity;\n  }\n\n  .campaign-running-summary h2{\n    margin-bottom: 50px;\n  }\n\n  .summary-bar {\n    margin-bottom: 15px;\n  }\n\n  .title-bar {\n    display: flex;\n    justify-content: space-between;\n    border-bottom: 1px solid #9a9a9a35;\n    width: 100%;\n    margin-bottom: 10px;\n    padding-bottom: 10px;\n  }\n\n  .summary-title {\n    font-size: 14px;\n    text-transform: uppercase;\n    font-weight: 700;\n    color: #4FCBC5;\n  }\n\n  .summary-title span {\n    font-size: 14px;\n  }\n\n  .summary-data {\n    /* width: 99.9%; */\n    /* max-width: 90%; */\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 10px;\n    word-break: keep-all;\n  }\n  .summary-data span:nth-child(2) {\n    /* color: red; */\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n  .summary-data-title {\n    font-weight: 500;\n    padding-right: 10px;\n  }\n\n  .complete-campaign {\n    position: absolute;\n    padding: 0px 60px 20px 60px;\n    box-sizing: border-box;\n    bottom: 0px;\n    left: 0;\n    right: 0;\n  }\n\n  .complete-campaign .el-button {\n    width: 100%;\n  }\n\n  /* Footer Section */\n\n  .footer-title {\n    width: calc(100% - 330px);\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n  }\n\n  .footer-buttons-preview {\n    display: flex;\n    width: 100%;\n    transform: translateX(330px);\n    margin-top: 20px;\n    /* background: red; */\n    justify-content: flex-end;\n  }\n  .footer-buttons {\n    display: flex;\n    justify-content: flex-end;\n    width: 100%;\n  }\n\n  .footer-buttons > .el-button {\n    width: 100%;\n    max-width: 260px;\n    margin-left: 10px;\n  }\n\n  .footer-title > .el-button {\n    width: 260px;\n  }\n\n  .fa-times {\n    font-size: 20px;\n  }\n\n  .right {\n    position: absolute;\n    right: -350px;\n    bottom: -10px;\n  }\n\n  .right .el-button {\n    width: 260px;\n  }\n  .btn-start-campaign {\n    animation: shadow-pulse 1s infinite;\n  }\n</style>\n"]}]}