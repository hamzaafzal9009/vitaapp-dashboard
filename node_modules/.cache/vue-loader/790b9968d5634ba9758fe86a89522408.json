{"remainingRequest":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/Outreach.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/Outreach.vue","mtime":1581270622000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBPdXRyZWFjaFNlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvT3V0cmVhY2hTZXJ2aWNlJzsKaW1wb3J0IHtFdmVudFNlcnZpY2V9IGZyb20gJy4uL21haW4nOwppbXBvcnQgQWRkT3V0cmVhY2ggZnJvbSAnLi9BZGRPdXRyZWFjaCc7CmltcG9ydCBPdXRyZWFjaERldGFpbHMgZnJvbSAnLi9PdXRyZWFjaERldGFpbHMnOwppbXBvcnQgVXNlclNlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvVXNlclNlcnZpY2UnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdvdXRyZWFjaCcsCiAgY29tcG9uZW50czogewogICAgQWRkT3V0cmVhY2gsCiAgICBPdXRyZWFjaERldGFpbHMKICB9LAogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VsZWN0ZWRPdXRyZWFjaDogbnVsbCwKICAgICAgc2VsZWN0ZWRQYWdlOiAwLAogICAgICBzaG93QWRkaW5nOiBmYWxzZSwKICAgICAgc2hvd0RldGFpbHM6IGZhbHNlLAogICAgICBvdXRyZWFjaExpc3Q6IFtdLAogICAgICBzZWxlY3RlZExvY2F0aW9uOiBudWxsLAogICAgICBzZWFyY2hUZXh0OiAnJywKICAgICAgc29ydFR5cGU6ICctc2VuZERhdGUnLAogICAgICBwYWdpbmF0aW9uRGF0YTogewogICAgICAgIHBlclBhZ2U6IDI1LAogICAgICAgIGN1cnJlbnRQYWdlOiAwLAogICAgICAgIHBlclBhZ2VPcHRpb25zOiBbNSwgMTAsIDI1XSwKICAgICAgICB0b3RhbDogMCwKICAgICAgICBjaGFuZ2VQYWdlOiAic2V0UGFnZU51bSIsCiAgICAgICAgcm93Q2hhbmdlOiAic2VhcmNoQ3VzdG9tZXJzIgogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgRXZlbnRTZXJ2aWNlLiRvbigibG9jYXRpb25DaGFuZ2UiLCB0aGlzLmdldE91dHJlYWNoKTsKICAgIHRoaXMuZ2V0T3V0cmVhY2goKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJldHVybkRhdGUoZGF0ZVN0cmluZykgewogICAgICBsZXQgc2VudERhdGUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKTsKICAgICAgbGV0IHBhcnNlZERhdGUgPSBzZW50RGF0ZS50b0RhdGVTdHJpbmcoKS5zdWJzdHIoNCk7CiAgICAgIGxldCBzdHJpbmdUaW1lID0gc2VudERhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKCk7CiAgICAgIGxldCBwYXJzZWRUaW1lID0gc3RyaW5nVGltZS5zdWJzdHIoMCw0KSArIHN0cmluZ1RpbWUuc3Vic3RyKDcpOwogICAgICByZXR1cm4gcGFyc2VkRGF0ZSArICcgYXQgJyArIHBhcnNlZFRpbWU7CiAgICB9LAogICAgc2V0UGFnZU51bShwYWdlTnVtKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRQYWdlID0gcGFnZU51bTsKICAgICAgdGhpcy5nZXRPdXRyZWFjaCgpOwogICAgfSwKICAgIHRvZ2dsZVNvcnQoc2V0U29ydFR5cGUpIHsKICAgICAgaWYgKHRoaXMuc29ydFR5cGUgIT0gc2V0U29ydFR5cGUpIHsKICAgICAgICB0aGlzLnNvcnRUeXBlID0gc2V0U29ydFR5cGU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zb3J0VHlwZSA9ICctJyArIHRoaXMuc29ydFR5cGU7CiAgICAgIH0KICAgICAgdGhpcy5nZXRPdXRyZWFjaCgpOwogICAgfSwKICAgIGdldE91dHJlYWNoKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICB2YXIgbG9jYXRpb25JZEFycmF5ID0gW107CiAgICAgIGxldCBsb2NhdGlvbklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2F0aW9uSWQnKTsKICAgICAgdm0uc2VsZWN0ZWRMb2NhdGlvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2NhdGlvbklkJyk7CiAgICAgIGlmKGxvY2F0aW9uSWQpIHsKICAgICAgICBsb2NhdGlvbklkQXJyYXkucHVzaChsb2NhdGlvbklkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBsZXQgbG9jT3B0aW9ucyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2F0aW9uT3B0aW9ucycpKTsKICAgICAgICBsb2NPcHRpb25zLm1hcChlbCA9PiBsb2NhdGlvbklkQXJyYXkucHVzaChlbC5sb2NhdGlvbklkKSk7CiAgICAgIH0KICAgICAgT3V0cmVhY2hTZXJ2aWNlLmdldE91dHJlYWNoTWVzc2FnZXMobG9jYXRpb25JZEFycmF5LCB2bS5zZWxlY3RlZFBhZ2UsIHZtLnNvcnRUeXBlLCB2bS5zZWFyY2hUZXh0KS50aGVuKHJlc3BvbnNlID0+IHsgICAgIAogICAgICAgIHZtLm91dHJlYWNoTGlzdCA9IHJlc3BvbnNlWzBdLnJlc3VsdHM7CiAgICAgICAgdm0ucGFnaW5hdGlvbkRhdGEudG90YWwgPSByZXNwb25zZVswXS5jb3VudFswXS50b3RhbDsgICAgICAgIAogICAgICB9KQogICAgfSwKICAgIHZpZXdUYXJnZXRMaXN0cyhvdXRyZWFjaCkgewogICAgICAvLyBjb25zb2xlLmxvZyhvdXRyZWFjaC50YXJnZXQpOyAgICAgIAogICAgfSwKICAgIGVkaXRPdXRyZWFjaChvdXRyZWFjaCkgewogICAgICB0aGlzLnNlbGVjdGVkT3V0cmVhY2ggPSBvdXRyZWFjaDsKICAgICAgdGhpcy5zaG93QWRkaW5nID0gdHJ1ZTsKICAgIH0sCiAgICBhZGRPdXRyZWFjaCgpIHsKICAgICAgdGhpcy5zaG93QWRkaW5nID0gdHJ1ZTsKICAgIH0sCiAgICBjaGFuZ2VTdGF0dXMob3V0cmVhY2gsIHN0YXR1cykgewogICAgICBPdXRyZWFjaFNlcnZpY2UuY2hhbmdlT3V0cmVhY2hTdGF0dXMob3V0cmVhY2gub3V0cmVhY2hJZCwgc3RhdHVzKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZihyZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgICBvdXRyZWFjaC5zdGF0dXMgPSBzdGF0dXM7CiAgICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoJ3N1Y2Nlc3NNZXNzYWdlJywgJ091dHJlYWNoIHdhcyBzdWNjZXNzZnVsbHkgdXBkYXRlLicpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgnZXJyb3JNZXNzYWdlJywgJ1NvbWV0aGluZyB3ZW50IHdyb25nLiBQbGVhc2Ugd2FpdCBhIG1pbnV0ZSBhbmQgdHJ5IGFnYWluLicpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIHZpZXdEZXRhaWxzKG91dHJlYWNoKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKG91dHJlYWNoKTsKICAgICAgdGhpcy5zZWxlY3RlZE91dHJlYWNoID0gb3V0cmVhY2g7CiAgICAgIHRoaXMuc2hvd0RldGFpbHMgPSB0cnVlOwogICAgfSwKICAgIGNsb3NlTW9kYWwoKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRPdXRyZWFjaCA9IG51bGw7CiAgICAgIHRoaXMuc2VsZWN0ZWRMb2NhdGlvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2NhdGlvbklkJyk7CiAgICAgIHRoaXMuc2hvd0FkZGluZyA9IGZhbHNlOwogICAgICB0aGlzLmdldE91dHJlYWNoKCk7CiAgICB9LAogICAgY2xvc2VPdXRyZWFjaE1vZGFsKCkgewogICAgICB0aGlzLnNlbGVjdGVkT3V0cmVhY2ggPSBudWxsOwogICAgICB0aGlzLnNlbGVjdGVkTG9jYXRpb24gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9jYXRpb25JZCcpOwogICAgICB0aGlzLnNob3dEZXRhaWxzID0gZmFsc2U7CiAgICB9LAogIH0KfQo="},{"version":3,"sources":["Outreach.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Outreach.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-card>\n        <div class=\"card-header\">\n      <div class=\"card-title\">\n        <h3>Outreach</h3>\n      </div>\n      <div class=\"card-actions\">\n        <el-button\n          type=\"primary\"\n          @click=\"editOutreach()\"\n        >\n        <i class=\"fa fa-user-plus fa-flip-horizontal\"></i>\n            Add Outreach\n        </el-button>\n        <div class=\"input-group\">\n          <el-dropdown class=\"filter clickable\">\n            <i class=\"fas fa-filter\"></i>\n            <el-dropdown-menu>\n              Testing\n            </el-dropdown-menu>\n          </el-dropdown>\n          <el-input\n            suffix-icon=\"far fa-search\"\n            v-model=\"searchText\"\n            @keyup.native.enter=\"getOutreach()\"\n            placeholder=\"Search Outreach\"\n          ></el-input>\n        </div>\n      </div>\n    </div>\n    <div class=\"block\" v-if=\"outreachList && outreachList.length\">\n      <el-table :data=\"outreachList\" highlight-current-row ref=\"outreachTable\" height=\"600\">\n        <el-table-column type=\"selection\" width=\"55\">\n        </el-table-column>\n        <el-table-column prop=\"name\" label=\"Name\" width=\"300\" show-overflow-tooltip>\n        </el-table-column>\n        <el-table-column prop=\"status\" label=\"Status\" width=\"250\">\n        </el-table-column>\n        <el-table-column prop=\"style\" label=\"Type\" width=\"300\" show-overflow-tooltip>\n          <template slot-scope=\"scope\">\n            <span class=\"tag\" v-for=\"style in scope.row.style\" :key=\"style\">{{ style }}</span>\n          </template>\n        </el-table-column>\n        <!-- <el-table-column label=\"Location\" width=\"300\" show-overflow-tooltip>\n          <template slot-scope=\"scope\">\n            <span class=\"tag\">{{ scope.row.location.name }}</span>\n          </template>\n        </el-table-column> -->\n      </el-table>\n    </div>\n    <div class=\"pagination block\" v-if=\"outreachList && outreachList.length\">\n      <span>Showing {{outreachList.length}} of {{paginationData.total}} Total Results</span>\n      <el-pagination\n        @current-change=\"getOutreach\"\n        background\n        layout=\"prev, pager, next\"\n        :page-size=\"paginationData.perPage\"\n        :total=\"paginationData.total\"\n      ></el-pagination>\n      <el-select v-model=\"paginationData.perPage\" @change=\"getOutreach()\">\n        <el-option v-for=\"option in paginationData.perPageOptions\"\n                    :value=\"option\"\n                    :key=\"option\"                       \n        >{{option}}\n        </el-option>\n      </el-select>\n    </div> \n    <div class=\"block\" v-else>\n\n    </div>\n    <add-outreach v-if=\"showAdding\" v-on:closeModal=\"closeModal()\" :selectedOutreach=\"selectedOutreach\" :selectedLocation=\"selectedLocation\"></add-outreach>\n    <outreach-details v-if=\"showDetails\" v-on:closeModal=\"closeOutreachModal()\" :selectedOutreach=\"selectedOutreach\"></outreach-details>\n  </el-card>\n</template>\n\n<script>\nimport OutreachService from '../services/OutreachService';\nimport {EventService} from '../main';\nimport AddOutreach from './AddOutreach';\nimport OutreachDetails from './OutreachDetails';\nimport UserService from '../services/UserService';\n\nexport default {\n  name: 'outreach',\n  components: {\n    AddOutreach,\n    OutreachDetails\n  },\n  data: function() {\n    return {\n      selectedOutreach: null,\n      selectedPage: 0,\n      showAdding: false,\n      showDetails: false,\n      outreachList: [],\n      selectedLocation: null,\n      searchText: '',\n      sortType: '-sendDate',\n      paginationData: {\n        perPage: 25,\n        currentPage: 0,\n        perPageOptions: [5, 10, 25],\n        total: 0,\n        changePage: \"setPageNum\",\n        rowChange: \"searchCustomers\"\n      }\n    }\n  },\n  mounted() {\n    EventService.$on(\"locationChange\", this.getOutreach);\n    this.getOutreach();\n  },\n  methods: {\n    returnDate(dateString) {\n      let sentDate = new Date(dateString);\n      let parsedDate = sentDate.toDateString().substr(4);\n      let stringTime = sentDate.toLocaleTimeString();\n      let parsedTime = stringTime.substr(0,4) + stringTime.substr(7);\n      return parsedDate + ' at ' + parsedTime;\n    },\n    setPageNum(pageNum) {\n      this.selectedPage = pageNum;\n      this.getOutreach();\n    },\n    toggleSort(setSortType) {\n      if (this.sortType != setSortType) {\n        this.sortType = setSortType;\n      } else {\n        this.sortType = '-' + this.sortType;\n      }\n      this.getOutreach();\n    },\n    getOutreach() {\n      let vm = this;\n      var locationIdArray = [];\n      let locationId = localStorage.getItem('locationId');\n      vm.selectedLocation = localStorage.getItem('locationId');\n      if(locationId) {\n        locationIdArray.push(locationId);\n      } else {\n        let locOptions = JSON.parse(localStorage.getItem('locationOptions'));\n        locOptions.map(el => locationIdArray.push(el.locationId));\n      }\n      OutreachService.getOutreachMessages(locationIdArray, vm.selectedPage, vm.sortType, vm.searchText).then(response => {     \n        vm.outreachList = response[0].results;\n        vm.paginationData.total = response[0].count[0].total;        \n      })\n    },\n    viewTargetLists(outreach) {\n      // console.log(outreach.target);      \n    },\n    editOutreach(outreach) {\n      this.selectedOutreach = outreach;\n      this.showAdding = true;\n    },\n    addOutreach() {\n      this.showAdding = true;\n    },\n    changeStatus(outreach, status) {\n      OutreachService.changeOutreachStatus(outreach.outreachId, status).then(response => {\n        if(response.success) {\n          outreach.status = status;\n          EventService.$emit('successMessage', 'Outreach was successfully update.')\n        } else {\n          EventService.$emit('errorMessage', 'Something went wrong. Please wait a minute and try again.')\n        }\n      })\n    },\n    viewDetails(outreach) {\n      // console.log(outreach);\n      this.selectedOutreach = outreach;\n      this.showDetails = true;\n    },\n    closeModal() {\n      this.selectedOutreach = null;\n      this.selectedLocation = localStorage.getItem('locationId');\n      this.showAdding = false;\n      this.getOutreach();\n    },\n    closeOutreachModal() {\n      this.selectedOutreach = null;\n      this.selectedLocation = localStorage.getItem('locationId');\n      this.showDetails = false;\n    },\n  }\n}\n</script>\n\n<style scoped>\n\n.outreach-title {\n  font-size: 25px;\n  margin: 25px;\n}\n\n.outreach-actions-container {\n  background: white;\n  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25);\n  border-radius: 1px;\n  display: flex;\n  flex-direction: row;\n  height: 75px;\n  align-items: center;\n  justify-content: flex-end;\n  margin-top: 30px;\n}\n\n.outreach-add-outreach {\n  display: flex;\n  flex-direction: column;\n  margin-right: 15px;\n  cursor: pointer;\n}\n\n.outreach-add-outreach span {\n  text-align: center;\n}\n\n.fa-envelope {\n  margin-right: 3px;\n  color: #4fcbc5;\n}\n\n.fa-plus {\n  color: #4fcbc5;\n  font-size: 10px;\n  transform: translateY(-3px);\n}\n\n.add-outreach {\n  font-size: 11px;\n  font-weight: 600;\n}\n\n.outreach-search {\n  border: 2px solid #efefef;\n  border-radius: 1px;\n  margin-right: 25px;\n  margin-left: 10px;\n  padding: 0 20px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.outreach-search input {\n  border: none;\n  transform: translateY(5px);\n}\n\n.outreach-table {\n  /* margin: auto;\n  width: calc(100% - 40px); */\n  background: white;\n  font-size: 14px;\n  padding: 10px 0;\n  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25);\n  border-radius: 1px;\n  clear: both;\n  margin-top: 20px;\n}\n\n.outreach-headers {\n  width: calc(100% - 20px);\n  font-weight: bold;\n  padding: 10px 10px 20px 10px;\n  border-bottom: 3px solid #efefef;\n  height: 14px;\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: space-evenly;\n  /* cursor: pointer; */\n}\n\n.outreach-row {\n  width: calc(100% - 20px);\n  clear: both;\n  padding: 10px;\n  border-bottom: 1px solid #efefef;\n  height: auto;\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: space-evenly;\n  font-size: 12px;\n}\n\n.outreach-row:hover {\n  background: #dadada;\n}\n\n.outreach-cell-1 {\n  flex: 0 0 200px;\n  text-transform: capitalize;\n}\n\n.outreach-cell-2 {\n  flex: 0 0 150px;\n  text-align: center;\n}\n\n.outreach-row .outreach-cell-2 {\n  color: rgb(89, 138, 169);\n}\n\n.outreach-cell-3 {\n  flex: 0 0 150px;\n  text-align: center;\n}\n\n.outreach-cell-4 {\n  text-align: left;\n  flex: 0 0 150px;\n}\n\n.centered {\n  text-align: center;\n}\n\n.outreach-cell-5 {\n  flex: 0 0 100px;\n  text-transform: capitalize;\n}\n\n.outreach-cell-6 {\n  flex: 0 0 120px;\n  text-transform: capitalize;\n  text-align: center;\n}\n\n.pointer {\n  cursor: pointer;\n}\n\n.outreach-action-button {\n  /* margin-right: 10px; */\n  /* border: 1px solid black; */\n  padding: 5px;  \n}\n\n.fa-info-square {\n  /* font-size: 10px; */\n}\n\n.outreach-pagination {\n  border-top: 3px solid #efefef;\n  padding: 10px;\n  display: flex;\n  justify-content: center;\n}\n\n.outreach-pagination button {\n  border: 1px solid #efefef;\n  padding: 10px;\n  cursor: pointer;\n  background: white;\n  border-radius: 0;\n  min-width: 50px;\n}\n\n.outreach-pagination button.button-selected {\n  background: #dfdfdf;\n}\n\n.outreach-pagination button:hover {\n  background: #dfdfdf;\n}\n\n.caret {\n  margin-left: 3px;\n}\n\n\n</style>"]}]}