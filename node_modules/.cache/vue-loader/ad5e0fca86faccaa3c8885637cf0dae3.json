{"remainingRequest":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/AccountDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/AccountDetail.vue","mtime":1581270622000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBY2NvdW50U2VydmljZSBmcm9tICIuLy4uL3NlcnZpY2VzL0FjY291bnRTZXJ2aWNlIjsKaW1wb3J0IHsgRXZlbnRTZXJ2aWNlIH0gZnJvbSAiLi4vbWFpbiI7CmltcG9ydCBMb2NhdGlvblNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvTG9jYXRpb25TZXJ2aWNlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYWNjb3VudERldGFpbCIsCiAgcHJvcHM6IFsic2VsZWN0ZWRBY2NvdW50Il0sCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBhY2NvdW50OiB7fSwKICAgICAgYWNjb3VudExvY2F0aW9uczogW10sCiAgICAgIGFzc2lnbmVkTG9jYXRpb25zOiBbXSwKICAgICAgc2VhcmNoVGV4dDogJycKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5hY2NvdW50ID0gdGhpcy5zZWxlY3RlZEFjY291bnQ7CiAgICB0aGlzLmdldExvY2F0aW9uc1RvQXNzaWduKCk7CiAgICB0aGlzLmdldEFzc2lnbmVkTG9jYXRpb25zKCk7CiAgfSwKICBjb21wdXRlZDogewogICAgZmlsdGVyZWRMb2NhdGlvbnMoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIHZhciBsb2NhdGlvbnNHcm91cCA9IHZtLmFjY291bnRMb2NhdGlvbnMuZmlsdGVyKGVsID0+IHsKICAgICAgICAgIHJldHVybiBlbC5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModm0uc2VhcmNoVGV4dC50b0xvd2VyQ2FzZSgpKTsKICAgICAgICB9KQogICAgICByZXR1cm4gbG9jYXRpb25zR3JvdXA7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBmb2xsb3dMaW5rKHRhcmdldFBhZ2UpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2godGFyZ2V0UGFnZSk7CiAgICB9LAogICAgY2xvc2VNb2RhbDogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuJGVtaXQoImNsb3NlTW9kYWwiKTsKICAgIH0sCiAgICBhc3NpZ25Mb2NhdGlvbihsb2NhdGlvbklkKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIEFjY291bnRTZXJ2aWNlLmFzc29jaWF0ZUxvY2F0aW9uV2l0aEFjY291bnQobG9jYXRpb25JZCwgdm0uYWNjb3VudC5hY2NvdW50SWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHZtLmdldEFzc2lnbmVkTG9jYXRpb25zKCk7CiAgICAgICAgdm0uZ2V0TG9jYXRpb25zVG9Bc3NpZ24oKTsKICAgICAgICByZXR1cm4gcmVzcG9uc2UKICAgICAgfSkKICAgIH0sCiAgICBnZXRMb2NhdGlvbnNUb0Fzc2lnbigpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgInNob3ciKTsgICAgICAKICAgICAgTG9jYXRpb25TZXJ2aWNlLmdldE5vbkRlbGV0ZWRMb2NhdGlvbnMoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAiaGlkZSIpOwogICAgICAgIHZtLmFjY291bnRMb2NhdGlvbnMgPSByZXNwb25zZS5yZXN1bHQ7CiAgICAgICAgdm0uYWNjb3VudExvY2F0aW9ucy5tYXAoZSA9PiB7CiAgICAgICAgICBpZihlLmFjY291bnRJZCAmJiBlLmFjY291bnRJZCA9PSB2bS5hY2NvdW50LmFjY291bnRJZCkgewogICAgICAgICAgICBlLmlzQ2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgIGUuYXNzaWduYWJsZSA9IGZhbHNlOwogICAgICAgICAgfSBlbHNlIGlmKGUuYWNjb3VudElkICYmIGUuYWNjb3VudElkICE9IHZtLmFjY291bnQuYWNjb3VudElkKSB7CiAgICAgICAgICAgIGUuYXNzaWduYWJsZSA9IGZhbHNlOwogICAgICAgICAgfSBlbHNlIGlmKCFlLmFjY291bnRJZCkgewogICAgICAgICAgICBlLmlzQ2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgICBlLmFzc2lnbmFibGUgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgZ2V0QXNzaWduZWRMb2NhdGlvbnMoKXsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgTG9jYXRpb25TZXJ2aWNlLmdldEFzc29jaWF0ZWRMb2NhdGlvbnModm0uYWNjb3VudC5hY2NvdW50SWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHZtLmFzc2lnbmVkTG9jYXRpb25zID0gcmVzcG9uc2UucmVzdWx0OwogICAgICB9KQogICAgfSwKICAgIHJlbW92ZUxvY2F0aW9uQXNzb2NpYXRpb24obG9jYXRpb25JZCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBMb2NhdGlvblNlcnZpY2UucmVtb3ZlTG9jYXRpb25Bc3NvY2lhdGlvbihsb2NhdGlvbklkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB2bS5nZXRBc3NpZ25lZExvY2F0aW9ucygpOwogICAgICAgIHZtLmdldExvY2F0aW9uc1RvQXNzaWduKCk7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgICB9KQogICAgfQogIH0KfTsK"},{"version":3,"sources":["AccountDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AccountDetail.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <transition name=\"modal\">\n    <div class=\"modal-mask\" @click=\"closeModal()\">\n      <div class=\"modal-container\" @click.stop>\n        <div class=\"modal-body\">\n          <div class=\"modal-details\">\n            <div class=\"modal-header\">\n              <h5>Account Details</h5>\n            </div>\n            <div class=\"modal-detail-line\"> <label>Account ID </label> <span>{{account.accountId}} </span></div>\n            <div class=\"modal-detail-line\"> <label>Name </label> <span>{{account.name}}</span></div>\n            <div class=\"modal-detail-line\"> <label>User </label> <span>{{account.userId}}</span></div>\n            <div class=\"modal-detail-line\"> <label>Status </label> <span>{{account.status}}</span></div>\n            <div class=\"listed-locations\">\n              <div class=\"location-cards\" v-for=\"location in assignedLocations\" v-if=\"assignedLocations.length > 0\">\n                <span><a @click=\"followLink('/locationList/'+location.name)\"> {{location.name}} </a> </span><i class=\"fal fa-times\" @click=\"removeLocationAssociation(location.locationId)\" title=\"Remove Location from Account\"></i>\n              </div>\n            </div>\n            <div class=\"save-button\">\n              <button class=\"save\" @click=\"closeModal()\">Close</button>\n            </div>\n          </div>\n          <div class=\"modal-body-right\">\n            <div class=\"right-header\">\n              <span @click=\"closeModal()\"><i class=\"fal fa-times\"></i></span>\n            </div>\n            <div class=\"location-header\"><span>Associate Locations</span></div>\n            <div class=\"location-search\">\n              <label>Search</label><i class=\"fa fa-search\"></i>\n              <input type=\"text\" v-model=\"searchText\" />\n            </div>\n            <div class=\"right-container\">\n              <div class=\"location-entry\" v-for=\"locationEntry in filteredLocations\" v-if=\"filteredLocations.length > 0\">\n                <div class=\"entry-details\"><label>{{locationEntry.name}}</label> </div>\n                <div class=\"checkbox-entry\" v-if=\"locationEntry.assignable\">\n                  <label>Assign to Account</label>&nbsp; <i class=\"fal fa-plus\"  @click=\"assignLocation(locationEntry.locationId)\" title=\"Add Location to Account\"></i>\n                </div>\n                <div class=\"assigned-accounts\" v-if=\"!locationEntry.assignable\">\n                  {{locationEntry.accountDetails}}\n                </div>\n              </div>\n              <div class=\"no-locations\" v-if=\"!filteredLocations.length > 0\">There are no locations to display for this account.</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport AccountService from \"./../services/AccountService\";\nimport { EventService } from \"../main\";\nimport LocationService from \"../services/LocationService\";\n\nexport default {\n  name: \"accountDetail\",\n  props: [\"selectedAccount\"],\n  data: function() {\n    return {\n      account: {},\n      accountLocations: [],\n      assignedLocations: [],\n      searchText: ''\n    };\n  },\n  created() {\n    this.account = this.selectedAccount;\n    this.getLocationsToAssign();\n    this.getAssignedLocations();\n  },\n  computed: {\n    filteredLocations() {\n      let vm = this;\n      var locationsGroup = vm.accountLocations.filter(el => {\n          return el.name.toLowerCase().includes(vm.searchText.toLowerCase());\n        })\n      return locationsGroup;\n    }\n  },\n  methods: {\n    followLink(targetPage) {\n      this.$router.push(targetPage);\n    },\n    closeModal: function() {\n      this.$emit(\"closeModal\");\n    },\n    assignLocation(locationId) {\n      let vm = this;\n      AccountService.associateLocationWithAccount(locationId, vm.account.accountId).then(response => {\n        vm.getAssignedLocations();\n        vm.getLocationsToAssign();\n        return response\n      })\n    },\n    getLocationsToAssign() {\n      let vm = this;\n      EventService.$emit(\"loading\", \"show\");      \n      LocationService.getNonDeletedLocations().then(response => {\n        EventService.$emit(\"loading\", \"hide\");\n        vm.accountLocations = response.result;\n        vm.accountLocations.map(e => {\n          if(e.accountId && e.accountId == vm.account.accountId) {\n            e.isChecked = true;\n            e.assignable = false;\n          } else if(e.accountId && e.accountId != vm.account.accountId) {\n            e.assignable = false;\n          } else if(!e.accountId) {\n            e.isChecked = false;\n            e.assignable = true;\n          }\n        })\n      })\n    },\n    getAssignedLocations(){\n      let vm = this;\n      LocationService.getAssociatedLocations(vm.account.accountId).then(response => {\n        vm.assignedLocations = response.result;\n      })\n    },\n    removeLocationAssociation(locationId) {\n      let vm = this;\n      LocationService.removeLocationAssociation(locationId).then(response => {\n        vm.getAssignedLocations();\n        vm.getLocationsToAssign();\n        return response;\n      })\n    }\n  }\n};\n</script>\n\n<style scoped>\n.modal-container {\n  position: relative;\n  width: 1000px;\n  height: 600px;\n  padding: 0px 30px;\n  margin: 40px auto 0;\n  background-color: #fff;\n  border-radius: 2px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.33);\n  transition: all 0.3s ease;\n  position: sticky;\n  top: 50px;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid lightgrey;\n}\n\n.right-header {\n  display: flex;\n  justify-content: flex-end;\n  border-bottom: 1px solid lightgrey;\n}\n\n\n.right-header span {\n  font-size: 25px;\n  color: grey;\n  cursor: pointer;\n  margin-top: 10px;\n}\n\nspan.rerequest {\n  font-size: 14px;\n  color: #4fcbc5;\n  cursor: pointer;\n  margin: 20px 70px 0px 0px;\n}\n\n.modal-body {\n  display: flex;\n  height: 100%;\n}\n\n.modal-details {\n  width: 60%;\n  box-shadow: 5px 0 5px -2px rgba(0, 0, 0, 0.25);\n  padding-top: 10px;\n  padding-right: 10px;\n  margin-right: 30px;\n}\n\n.modal-details div {\n  margin-bottom: 15px;\n}\n\n.modal-detail-line {\n  font-size: 14px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.modal-detail-line-stars {\n  font-size: 14px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.modal-detail-line-stars div {\n  border-bottom: 1px solid lightgrey;\n  width: 70%;\n  color: #4fcbc5;\n  margin-right: 20px;\n}\n\n.modal-detail-line span {\n  border-bottom: 1px solid lightgrey;\n  width: 70%;\n  margin-right: 20px;\n  text-transform: capitalize;\n}\n\n.no-cap span {\n  text-transform: none;\n}\n\n.customer-notes {\n  width: 80%;\n  height: 100px;\n  max-width: 80%;\n  max-height: 100px;\n  margin-right: 20px;\n  box-shadow: 0px 2px 4px rgb(211, 211, 211, 0.25);\n  border-radius: 5px;\n  padding: 5px;\n  overflow-y: scroll;\n}\n\n.save-button {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 15px;\n  cursor: pointer;\n}\n\n.modal-body-right {\n  width: 40%;\n  padding-top: 10px;\n}\n\n.right-container {\n  overflow-y: scroll;\n  padding: 4px;\n  height: 75%;\n}\n\n.location-header {\n  display: flex;\n  justify-content: space-between;\n  padding: 10px 10px 10px 10px;\n  border-bottom: 1px solid lightgrey;\n}\n\n.location-header span {\n  margin-right: 30px;\n  font-weight: bold;\n}\n\n.location-entry {\n  padding: 7px;\n  border-bottom: 1px solid lightgrey;\n  margin-bottom: 10px;\n  display: flex;\n  justify-content: space-between;\n  font-size: 14px;\n  margin-right: 20px;\n}\n\n.time-entry {\n  display: flex;\n  flex-direction: column;\n  font-size: 14px;\n  font-weight: bold;\n}\n\n.time-entry .stamp {\n  text-decoration: none;\n  font-size: 12px;\n}\n\n.no-locations {\n  font-size: 12px;\n  text-align: center;\n  margin-top: 10px;\n}\n\n.modal-footer {\n  clear: both;\n  text-align: right;\n  margin-top: 50px;\n}\n\n.text-left {\n  position: absolute;\n  text-align: left;\n}\n\n.modal-details button {\n  background: #4fcbc5;\n  border-radius: 5px;\n  color: white;\n  padding: 10px 75px 10px 75px;\n}\n\n.listed-locations {\n  margin-top: 20px;\n  height: 300px;\n  overflow-y: scroll;\n}\n\n.location-cards {\n  border: 1px solid darkslategrey;\n  padding: 5px 10px;\n  border-radius: 10px;\n  max-width: 200px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.location-cards span {\n  overflow: none;\n}\n\n.location-cards a {\n  cursor: pointer;\n}\n\n.fal {\n  cursor: pointer;\n  color: #4fcbc5;\n}\n\n.fa-times {\n  color: darkred;\n}\n\n.location-search {\n  display: flex;\n  align-content: center;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.location-search i {\n  color: #4fcbc5;\n}\n\n.location-search input {\n  width: 250px;\n  margin-right: 25px;\n}\n\n.assigned-accounts {\n  font-size: 11px;\n  color: grey;\n}\n\n</style>\n"]}]}