{"remainingRequest":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/Automations.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/Automations.vue","mtime":1581270622000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7RXZlbnRTZXJ2aWNlfSBmcm9tICcuLi9tYWluLmpzJwppbXBvcnQgTG9jYXRpb25TZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2VzL0xvY2F0aW9uU2VydmljZS5qcyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImF1dG9tYXRpb25zIiwKICBjb21wb25lbnRzOiB7CgogIH0sCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBsb2NhdGlvbklkOiAnJywKICAgICAgYXV0b21hdGlvbnM6IFtdCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRMb2NhdGlvbigpOwogICAgRXZlbnRTZXJ2aWNlLiRvbignbG9jYXRpb25DaGFuZ2UnLCB0aGlzLmdldExvY2F0aW9uKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHRvZ2dsZUFjdGl2ZUF1dG9tYXRpb24oYXV0b21hdGlvbikgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBhdXRvbWF0aW9uLmFjdGl2ZSA9ICFhdXRvbWF0aW9uLmFjdGl2ZTsKICAgICAgTG9jYXRpb25TZXJ2aWNlLnNldEF1dG9tYXRpb25zKHZtLmxvY2F0aW9uSWQsIHZtLmF1dG9tYXRpb25zKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZighcmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBnZXRMb2NhdGlvbigpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgdmFyIHRvdGFsQXV0b21hdGlvbnMgPSA0OwogICAgICB2bS5sb2NhdGlvbklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImxvY2F0aW9uSWQiKTsKICAgICAgLy8gRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgInNob3ciKTsKICAgICAgaWYodm0ubG9jYXRpb25JZCkgewogICAgICAgIExvY2F0aW9uU2VydmljZS5nZXRMb2NhdGlvbkF1dG9tYXRpb25zKHZtLmxvY2F0aW9uSWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgbGV0IHJlcyA9IHJlc3BvbnNlWzBdLmF1dG9tYXRpb25zOwogICAgICAgICAgaWYocmVzcG9uc2UgJiYgcmVzcG9uc2UubGVuZ3RoID4gMCAmJiByZXMgJiYgcmVzLmxlbmd0aCA9PSB0b3RhbEF1dG9tYXRpb25zKSB7CiAgICAgICAgICAgIHZtLmF1dG9tYXRpb25zID0gcmVzOwogICAgICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAiaGlkZSIpOwogICAgICAgICAgfQogICAgICAgICAgLy8gVW5jb21tZW50IGluIHRoZSBzaXR1YXRpb24gb2YgYWRkaW5nIG5ldyBhdXRvbWF0aW9ucyBhbmQgYWRkIHRob3NlIHRvIHRoZSBvcHRpb25zIGJlbG93IChjaGFuZ2UgIlgiIHRvIGJlIHRoZSB0b3RhbCBudW1iZXIgb2YgYXZhaWxhYmxlIGF1dG9tYXRpb25zKS4gVGhpcyBmdW5jdGlvbiB3aWxsIGF1dG9tYXRpY2FsbHkgc2hvdyBhbGwgYXZhaWxhYmxlIG9wdGlvbnMgb24gdGhlIGZyb250IGVuZCwgYW5kIG9uIHRha2luZyBhbnkgYWN0aW9ucyB0byB0aGlzIHBhZ2UsIHVwZGF0ZXMgdGhlIGVudGlyZSByZWNvcmQgb24gdGhlIGJhY2sgZW5kLgogICAgICAgICAgZWxzZSBpZihyZXNwb25zZSAmJiByZXNwb25zZS5sZW5ndGggPiAwICYmIHJlcyAmJiByZXMubGVuZ3RoID4gMCAmJiByZXMubGVuZ3RoIDwgdG90YWxBdXRvbWF0aW9ucykgewogICAgICAgICAgICB2YXIgbmV3T3B0aW9ucyA9IFsKICAgICAgICAgICAgICB7bmFtZTogJ0FwcG9pbnRtZW50cycsIHR5cGU6ICdhcHBvaW50bWVudExpc3QnLCBhY3RpdmU6IGZhbHNlLCBjdXN0b21pemFibGU6IHRydWV9LAogICAgICAgICAgICBdCiAgICAgICAgICAgIHZtLmF1dG9tYXRpb25zID0gcmVzLmNvbmNhdChuZXdPcHRpb25zKQogICAgICAgICAgfQogICAgICAgICAgIGVsc2UgewogICAgICAgICAgICB2bS5hdXRvbWF0aW9ucyA9IFsKICAgICAgICAgICAgICB7bmFtZTogJ1Jldmlld3MnLCB0eXBlOiAncmV2aWV3UmVxdWVzdHNMaXN0JywgYWN0aXZlOiBmYWxzZSwgY3VzdG9taXphYmxlOiB0cnVlfSwKICAgICAgICAgICAgICAvKntuYW1lOiAnTG95YWx0eScsIHR5cGU6ICdsb3lhbHR5TGlzdCcsIGFjdGl2ZTogZmFsc2UsIGN1c3RvbWl6YWJsZTogdHJ1ZX0sCiAgICAgICAgICAgICAge25hbWU6ICdTdXJ2ZXknLCB0eXBlOiAnc3VydmV5TGlzdCcsIGFjdGl2ZTogZmFsc2UsIGN1c3RvbWl6YWJsZTogdHJ1ZX0sCiAgICAgICAgICAgICAge25hbWU6ICdBcHBvaW50bWVudHMnLCB0eXBlOiAnYXBwb2ludG1lbnRMaXN0JywgYWN0aXZlOiBmYWxzZSwgY3VzdG9taXphYmxlOiB0cnVlfSwqLwogICAgICAgICAgICBdCiAgICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIik7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSBlbHNlIHsKICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAiaGlkZSIpOwogICAgICB9CiAgICB9LAoKICB9Cn0K"},{"version":3,"sources":["Automations.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Automations.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"automations-container\">\n    <header class=\"automations-header\">\n      Automations\n    </header>\n    <div class=\"automations\" v-if=\"locationId\">\n      <div class=\"automation-box\" v-for=\"automation in automations\" >\n        <span class=\"title\">\n          {{automation.name}}\n        </span>\n        <div class=\"toggle\" v-if=\"automation.type == 'reviewRequestsList'\">\n          <label class=\"switch\">\n            <input type=\"checkbox\" v-model=\"automation.active\" @click=\"toggleActiveAutomation(automation)\">\n            <span class=\"slider round\"></span>\n          </label>\n        </div>\n        <div class=\"customize\" v-if=\"automation.type == 'reviewRequestsList'\">\n          <span class=\"customize-link\" v-if=\"automation.active\">\n            <router-link :to=\"'/' + automation.type \" >Customize</router-link>\n          </span>\n        </div>\n        <div class=\"soon-message\" v-if=\"automation.type != 'reviewRequestsList'\">\n          Coming soon!\n        </div>\n      </div>\n    </div>\n    <div class=\"no-location-display\" v-if=\"!locationId\" >\n      <span class=\"automations-missing-message\">Please Select A Location To Manage Automations</span>\n    </div>\n  </div>\n</template>\n\n\n<script>\nimport {EventService} from '../main.js'\nimport LocationService from '../services/LocationService.js';\n\nexport default {\n  name: \"automations\",\n  components: {\n\n  },\n  data: function() {\n    return {\n      locationId: '',\n      automations: []\n    }\n  },\n  created() {\n    this.getLocation();\n    EventService.$on('locationChange', this.getLocation);\n  },\n  methods: {\n    toggleActiveAutomation(automation) {\n      let vm = this;\n      automation.active = !automation.active;\n      LocationService.setAutomations(vm.locationId, vm.automations).then(response => {\n        if(!response.success) {\n          // console.log(response);\n        }\n      })\n    },\n    getLocation() {\n      let vm = this;\n      var totalAutomations = 4;\n      vm.locationId = localStorage.getItem(\"locationId\");\n      // EventService.$emit(\"loading\", \"show\");\n      if(vm.locationId) {\n        LocationService.getLocationAutomations(vm.locationId).then(response => {\n          let res = response[0].automations;\n          if(response && response.length > 0 && res && res.length == totalAutomations) {\n            vm.automations = res;\n            EventService.$emit(\"loading\", \"hide\");\n          }\n          // Uncomment in the situation of adding new automations and add those to the options below (change \"X\" to be the total number of available automations). This function will automatically show all available options on the front end, and on taking any actions to this page, updates the entire record on the back end.\n          else if(response && response.length > 0 && res && res.length > 0 && res.length < totalAutomations) {\n            var newOptions = [\n              {name: 'Appointments', type: 'appointmentList', active: false, customizable: true},\n            ]\n            vm.automations = res.concat(newOptions)\n          }\n           else {\n            vm.automations = [\n              {name: 'Reviews', type: 'reviewRequestsList', active: false, customizable: true},\n              /*{name: 'Loyalty', type: 'loyaltyList', active: false, customizable: true},\n              {name: 'Survey', type: 'surveyList', active: false, customizable: true},\n              {name: 'Appointments', type: 'appointmentList', active: false, customizable: true},*/\n            ]\n            EventService.$emit(\"loading\", \"hide\");\n          }\n        })\n      } else {\n        EventService.$emit(\"loading\", \"hide\");\n      }\n    },\n\n  }\n}\n</script>\n\n<style scoped>\n\nheader {\n  font-size: 45px;\n  text-transform: uppercase;\n  margin-left: 25px;\n}\n\n.automations {\n  display: flex;\n  flex-direction: row;\n  margin-left: 50px;\n  flex-wrap: wrap;\n}\n\n.automation-box {\n  background: white;\n  box-shadow: 2px 2px 2px rgba(0,0,0,.25);\n  min-width: 25vw;\n  width: 25vw;\n  height: 25vh;\n  margin: 25px;\n  padding: 10px;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-content: center;\n  align-items: center;\n  justify-content: center;\n}\n\n.title {\n  font-size: 40px;\n  text-transform: uppercase;\n  margin-bottom: 20px;\n}\n.switch {\n  position: relative;\n  display: inline-block;\n  width: 100px;\n  height: 54px;\n}\n\n/* Hide default HTML checkbox */\n.switch input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n/* The slider */\n.slider {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #ccc;\n  -webkit-transition: .4s;\n  transition: .4s;\n}\n\n.slider:before {\n  position: absolute;\n  content: \"\";\n  height: 46px;\n  width: 46px;\n  left: 4px;\n  bottom: 4px;\n  background-color: white;\n  -webkit-transition: .4s;\n  transition: .4s;\n}\n\ninput:checked + .slider {\n  background-color: #2196F3;\n}\n\ninput:checked + .slider:before {\n  -webkit-transform: translateX(46px);\n  -ms-transform: translateX(46px);\n  transform: translateX(46px);\n}\n\n/* Rounded sliders */\n.slider.round {\n  border-radius: 34px;\n}\n\n.slider.round:before {\n  border-radius: 50%;\n}\n\n.customize {\n  display: flex;\n  justify-content: flex-end;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  margin-right: 50px;\n  margin-bottom: 20px;\n  font-size: 18px;\n  width: 100%;\n}\n\n.customize-link {\n  cursor: pointer;\n}\n\n.no-location-display {\n  display: flex;\n  font-size: 25px;\n  justify-content: center;\n  align-content: center;\n  align-items: center;\n  margin-top: 15%;\n  background: white;\n  box-shadow: 2px 2px 2px rgba(0,0,0,.25);\n  padding: 50px;\n}\n\n.soon-message {\n  font-size: 20px;\n  color: #4fcbc5;\n}\n\n</style>\n"]}]}