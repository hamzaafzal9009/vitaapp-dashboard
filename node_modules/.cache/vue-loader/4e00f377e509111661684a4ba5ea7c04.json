{"remainingRequest":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/AppointmentsList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/AppointmentsList.vue","mtime":1581270622000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7RXZlbnRTZXJ2aWNlfSBmcm9tICcuLi9tYWluLmpzJzsKaW1wb3J0IExvY2F0aW9uU2VydmljZSBmcm9tICcuLi9zZXJ2aWNlcy9Mb2NhdGlvblNlcnZpY2UuanMnOwppbXBvcnQgQXV0b21hdGlvblNlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvQXV0b21hdGlvblNlcnZpY2UuanMnOwppbXBvcnQgQWRkQXV0b21hdGlvbiBmcm9tICcuL0FkZEF1dG9tYXRpb24nOwppbXBvcnQgQXV0b21hdGlvbkRldGFpbHMgZnJvbSAnLi9BdXRvbWF0aW9uRGV0YWlscyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImxveWFsdHlMaXN0IiwKICBjb21wb25lbnRzOiB7CiAgICBBZGRBdXRvbWF0aW9uLCBBdXRvbWF0aW9uRGV0YWlscwogIH0sCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBsb2NhdGlvbklkOiAnJywKICAgICAgbG95YWx0eUxpc3Q6IFtdLAogICAgICBzZWFyY2hUZXh0OiAnJywKICAgICAgc2VsZWN0ZWRBdXRvbWF0aW9uOiAnJywKICAgICAgYXV0b21hdGlvbk1vZGFsOiBmYWxzZSwKICAgICAgYXV0b21hdGlvbkRldGFpbHNNb2RhbDogZmFsc2UsICAgICAgCiAgICAgIGF1dG9tYXRpb25UeXBlOiAnbG95YWx0eScKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBmaWx0ZXJlZEFwcG9pbnRtZW50TWVzc2FnZXMoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmKHZtLmxveWFsdHlMaXN0ICYmIHZtLmxveWFsdHlMaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICBsZXQgZmlsdGVyZWRMaXN0ID0gdm0ubG95YWx0eUxpc3QuZmlsdGVyKGFwcG9pbnRtZW50TWVzc2FnZSA9PiB7CiAgICAgICAgICBsZXQgbWF0Y2hGaWx0ZXIgPSBmYWxzZTsKICAgICAgICAgIG1hdGNoRmlsdGVyID0gbWF0Y2hGaWx0ZXIgfHwgYXBwb2ludG1lbnRNZXNzYWdlLm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZtLnNlYXJjaFRleHQudG9Mb3dlckNhc2UoKSkgPiAtMTsKICAgICAgICAgIG1hdGNoRmlsdGVyID0gbWF0Y2hGaWx0ZXIgfHwgYXBwb2ludG1lbnRNZXNzYWdlLnR5cGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZtLnNlYXJjaFRleHQudG9Mb3dlckNhc2UoKSkgPiAtMTsKICAgICAgICAgIG1hdGNoRmlsdGVyID0gbWF0Y2hGaWx0ZXIgfHwgYXBwb2ludG1lbnRNZXNzYWdlLmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkuaW5kZXhPZih2bS5zZWFyY2hUZXh0LnRvTG93ZXJDYXNlKCkpID4gLTE7CiAgICAgICAgICByZXR1cm4gbWF0Y2hGaWx0ZXI7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGZpbHRlcmVkTGlzdDsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubG9jYXRpb25JZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJsb2NhdGlvbklkIik7CiAgICB0aGlzLmdldExveWFsdHlMaXN0KCk7CiAgICBFdmVudFNlcnZpY2UuJG9uKCdsb2NhdGlvbkNoYW5nZScsIHRoaXMuZ2V0TG95YWx0eUxpc3QpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0TG95YWx0eUxpc3QoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIHZtLmxvY2F0aW9uSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibG9jYXRpb25JZCIpOwogICAgICBBdXRvbWF0aW9uU2VydmljZS5nZXRBdXRvbWF0aW9uQnlUeXBlKHZtLmxvY2F0aW9uSWQsICdsb3lhbHR5JykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdm0ubG95YWx0eUxpc3QgPSByZXNwb25zZS5yZXN1bHRzOwogICAgICB9KQogICAgfSwKICAgIGNoYW5nZVN0YXR1cyhhdXRvbWF0aW9uSWQsIHN0YXR1cykgewogICAgICBsZXQgdm0gPSB0aGlzOyAgICAgIAogICAgICBpZihzdGF0dXMgIT0gJ2RlbGV0ZWQnKSB7CiAgICAgICAgQXV0b21hdGlvblNlcnZpY2UuY2hhbmdlQXV0b21hdGlvblN0YXR1cyhhdXRvbWF0aW9uSWQsIHN0YXR1cykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBpZihyZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgnc3VjY2Vzc01lc3NhZ2UnLCAiQXV0b21hdGlvbiBTdGF0dXMgaGFzIGJlZW4gdXBkYXRlZCEiKQogICAgICAgICAgICB2bS5nZXRSZXZpZXdzTGlzdCgpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0gZWxzZSB7ICAgICAgICAKICAgICAgICBpZiAod2luZG93LmNvbmZpcm0oJ0FyZSB5b3UgY2VydGFpbiB5b3Ugd2lzaCB0byBkZWxldGUgdGhpcyBhdXRvbWF0aW9uPycpICl7CiAgICAgICAgICBBdXRvbWF0aW9uU2VydmljZS5jaGFuZ2VBdXRvbWF0aW9uU3RhdHVzKGF1dG9tYXRpb25JZCwgc3RhdHVzKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgaWYocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgnc3VjY2Vzc01lc3NhZ2UnLCAiQXV0b21hdGlvbiBTdGF0dXMgaGFzIGJlZW4gdXBkYXRlZCEiKQogICAgICAgICAgICAgIHZtLmdldFJldmlld3NMaXN0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgYWRkTmV3KGF1dG9tYXRpb24pIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgaWYoYXV0b21hdGlvbikgewogICAgICAgIHZtLnNlbGVjdGVkQXV0b21hdGlvbiA9IGF1dG9tYXRpb247CiAgICAgIH0KICAgICAgdm0uYXV0b21hdGlvbk1vZGFsID0gdHJ1ZTsKICAgIH0sCiAgICB2aWV3RGV0YWlscyhhdXRvbWF0aW9uKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmKGF1dG9tYXRpb24pIHsKICAgICAgICB2bS5zZWxlY3RlZEF1dG9tYXRpb24gPSBhdXRvbWF0aW9uOwogICAgICAgIHZtLmF1dG9tYXRpb25EZXRhaWxzTW9kYWwgPSB0cnVlOwogICAgICB9CiAgICB9LCAgICAKICAgIGNsb3NlTW9kYWwoKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRBdXRvbWF0aW9uID0gJyc7CiAgICAgIHRoaXMuYXV0b21hdGlvbkRldGFpbHNNb2RhbCA9IGZhbHNlOyAgICAgIAogICAgICB0aGlzLmF1dG9tYXRpb25Nb2RhbCA9IGZhbHNlOwogICAgICB0aGlzLmdldExveWFsdHlMaXN0KCk7ICAgICAgCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["AppointmentsList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AppointmentsList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"reviews-request-container\">\n    <header class=\"review-requests-header\">\n      Appointments\n    </header>\n    <div class=\"review-action-container\">\n      <div class=\"button-container\">\n        <button @click=\"addNew()\">Add Appointment Automation</button>\n      </div>\n      <div class=\"search-container\">\n        <i class=\"fal fa-search\"></i><input placeholder=\"Search Automations...\" type=\"search\" class=\"search-review\" v-model=\"searchText\">\n      </div>\n    </div>\n    <div class=\"review-requests\" v-if=\"locationId\">\n      <div class=\"review-request-box\" v-for=\"appointmentMessage in filteredAppointmentMessages\">\n        <span class=\"title\">\n          <div class=\"info-header\">\n            <span class=\"request-info detail\" @click=\"viewDetails(appointmentMessage)\">{{appointmentMessage.name}} </span>\n            <span class=\"request-info\">{{appointmentMessage.type}} </span>\n          </div>\n          <div class=\"description\">\n            <span class=\"request-info\" v-for=\"action in appointmentMessage.actions\">\n              {{action.time}} hour<span v-if=\"action.time > 1 || action.time == 0\">s</span> after a customer is added, \n              <span class=\"action-line\" v-if=\"action.email.subject\"> <label>send them an email</label></span>\n              <span class=\"action-line\" v-if=\"action.sms.preview\"> <label><span v-if=\"!action.email.subject\">send them </span><span v-if=\"action.email.subject\" > and </span>a text.</label></span>\n            </span>\n          </div>\n          <div class=\"request-action-container\">\n            <span class=\"action-box\" @click=\"addNew(appointmentMessage)\"><i class=\"fal fa-edit\" title=\"Edit Workflow\"></i><span>Edit</span></span>\n            <span class=\"action-box\" v-if=\"appointmentMessage.status != 'active'\" @click=\"changeStatus(appointmentMessage.automationId, 'active')\"><i class=\"fal fa-unlock\" title=\"Activate Automation\"></i><span >Activate</span></span>\n            <span class=\"action-box\" v-if=\"appointmentMessage.status == 'active'\" @click=\"changeStatus(appointmentMessage.automationId, 'inactive')\"><i class=\"fal fa-ban\"  title=\"Deactivate Automation\"></i><span >Deactivate</span></span>\n            <span class=\"action-box\" @click=\"changeStatus(appointmentMessage.automationId, 'deleted')\"><i class=\"fal fa-times\" title=\"Delete Automation\"></i><span>Delete</span></span>\n          </div>  \n        </span>\n      </div>\n      <span class=\"title\" v-if=\"!filteredAppointmentMessages || filteredAppointmentMessages.length < 1\">\n      Sorry, there are no automations to display.\n      </span>\n    </div>\n    <add-automation v-if=\"automationModal\" :selectedAutomation=\"selectedAutomation\" :automationType=\"automationType\" v-on:closeModal=\"closeModal()\"></add-automation>\n    <automation-details v-if=\"automationDetailsModal\" :selectedAutomation=\"selectedAutomation\" v-on:closeModal=\"closeModal()\"></automation-details>\n  </div>\n</template>\n\n\n<script>\nimport {EventService} from '../main.js';\nimport LocationService from '../services/LocationService.js';\nimport AutomationService from '../services/AutomationService.js';\nimport AddAutomation from './AddAutomation';\nimport AutomationDetails from './AutomationDetails';\n\nexport default {\n  name: \"loyaltyList\",\n  components: {\n    AddAutomation, AutomationDetails\n  },\n  data: function() {\n    return {\n      locationId: '',\n      loyaltyList: [],\n      searchText: '',\n      selectedAutomation: '',\n      automationModal: false,\n      automationDetailsModal: false,      \n      automationType: 'loyalty'\n    }\n  },\n  computed: {\n    filteredAppointmentMessages() {\n      let vm = this;\n      if(vm.loyaltyList && vm.loyaltyList.length > 0) {\n        let filteredList = vm.loyaltyList.filter(appointmentMessage => {\n          let matchFilter = false;\n          matchFilter = matchFilter || appointmentMessage.name.toLowerCase().indexOf(vm.searchText.toLowerCase()) > -1;\n          matchFilter = matchFilter || appointmentMessage.type.toLowerCase().indexOf(vm.searchText.toLowerCase()) > -1;\n          matchFilter = matchFilter || appointmentMessage.description.toLowerCase().indexOf(vm.searchText.toLowerCase()) > -1;\n          return matchFilter;\n        });\n        return filteredList;\n      }\n    }\n  },\n  created() {\n    this.locationId = localStorage.getItem(\"locationId\");\n    this.getLoyaltyList();\n    EventService.$on('locationChange', this.getLoyaltyList);\n  },\n  methods: {\n    getLoyaltyList() {\n      let vm = this;\n      vm.locationId = localStorage.getItem(\"locationId\");\n      AutomationService.getAutomationByType(vm.locationId, 'loyalty').then(response => {\n        vm.loyaltyList = response.results;\n      })\n    },\n    changeStatus(automationId, status) {\n      let vm = this;      \n      if(status != 'deleted') {\n        AutomationService.changeAutomationStatus(automationId, status).then(response => {\n          if(response.success) {\n            EventService.$emit('successMessage', \"Automation Status has been updated!\")\n            vm.getReviewsList();\n          }\n        })\n      } else {        \n        if (window.confirm('Are you certain you wish to delete this automation?') ){\n          AutomationService.changeAutomationStatus(automationId, status).then(response => {\n            if(response.success) {\n              EventService.$emit('successMessage', \"Automation Status has been updated!\")\n              vm.getReviewsList();\n            }\n          })\n        }\n      }\n    },\n    addNew(automation) {\n      let vm = this;\n      if(automation) {\n        vm.selectedAutomation = automation;\n      }\n      vm.automationModal = true;\n    },\n    viewDetails(automation) {\n      let vm = this;\n      if(automation) {\n        vm.selectedAutomation = automation;\n        vm.automationDetailsModal = true;\n      }\n    },    \n    closeModal() {\n      this.selectedAutomation = '';\n      this.automationDetailsModal = false;      \n      this.automationModal = false;\n      this.getLoyaltyList();      \n    }\n  }\n}\n</script>\n\n<style scoped>\n\n.reviews-request-container {\n\n}\n\nheader {\n  font-size: 45px;\n  text-transform: uppercase;\n  margin-left: 25px;\n}\n\n\n.review-request-box {\n  width: 100%;\n  background: white;\n\n}\n\n.review-action-container {\n  background: white;\n  box-shadow: 2px 2px 2px rgba(0,0,0,.25);\n  padding: 10px 20px;\n  margin-bottom: 20px;\n  display: flex;\n  justify-content: space-between;\n  align-content: center;\n  align-items: center;\n}\n\n.search-container {\n  border: 1px solid lightgrey;\n  padding-left: 20px;\n  padding-top: 5px;\n}\n\n.search-container i {\n  margin-right: 20px;\n  margin-top: 15px;\n}\n.search-container input {\n  margin-right: 20px;\n  width: 300px;\n  border: none;\n}\n\n.button-container button {\n  background: #4fcbc5;\n  padding: 10px 20px;\n  color: white;\n  border-radius: 2px;\n  cursor: pointer;\n}\n\n.title {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  padding: 25px;\n  border-bottom: 1px solid lightgrey;\n  box-shadow: 2px 2px 2px rgba(0,0,0,.25);\n  background: white;\n  margin-bottom: 2px;\n}\n\n.info-header {\n  display: flex;\n  justify-content: space-between;\n  width: 200px;\n}\n\n.request-info {\n  max-width: 200px;\n  overflow: hidden;\n}\n\n.request-action-container i {\n  margin: 5px;\n  font-size: 18px;\n}\n\n.detail {\n  cursor: pointer;\n  color: #4fcbc5;\n}\n\n.action-box {\n  cursor: pointer;\n  border: 1px solid lightgrey;\n  padding: 10px 20px;\n}\n.description {\n  max-width: 400px;\n}\n\n\n</style>\n"]}]}