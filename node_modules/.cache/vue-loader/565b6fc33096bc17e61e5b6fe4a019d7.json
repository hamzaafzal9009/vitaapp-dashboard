{"remainingRequest":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/Reports/ReviewsBySourceReport.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/Reports/ReviewsBySourceReport.vue","mtime":1581270622000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7RXZlbnRTZXJ2aWNlfSBmcm9tICcuLi8uLi9tYWluJzsKaW1wb3J0IERvdWdobnV0Q2hhcnQgZnJvbSAnLi8uLi9DaGFydHMvRG91Z2hudXRDaGFydCcKaW1wb3J0IFJlcG9ydFNlcnZpY2UgZnJvbSAnLi8uLi8uLi9zZXJ2aWNlcy9SZXBvcnRTZXJ2aWNlJwoKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUmV2aWV3c0J5U291cmNlUmVwb3J0JywKICBjb21wb25lbnRzOiB7RG91Z2hudXRDaGFydH0sCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICByZXZpZXdEYXRhOiBudWxsLAogICAgICBzdGFydERhdGU6ICcxOTcwLTAxLTAxJywKICAgICAgZW5kRGF0ZTogJzIwNzAtMDEtMDEnLAogICAgICBzZWFyY2hlZFN0YXJ0RGF0ZTogJzE5NzAtMDEtMDEnLAogICAgICBzZWFyY2hlZEVuZERhdGU6ICcyMDcwLTAxLTAxJywKICAgICAgZXZlbnRzOiBbJ21vdXNlbW92ZSddLAogICAgICBjaGFydERhdGE6IG51bGwsCiAgICAgIGF0dGVtcHRzOiAwLAogICAgICBjaGFydE9wdGlvbnM6IHsKICAgICAgICBtYWludGFpbkFzcGVjdFJhdGlvOiBmYWxzZSwKICAgICAgICBjdXRvdXRQZXJjZW50YWdlOiA4MCwKICAgICAgICBsZWdlbmQ6IHsKICAgICAgICAgIGRpc3BsYXk6IGZhbHNlLAogICAgICAgIH0sCiAgICAgICAgdGl0bGU6IHsKICAgICAgICAgIGRpc3BsYXk6IGZhbHNlCiAgICAgICAgfSwKICAgICAgICBhbmltYXRpb246IHsKICAgICAgICAgIGFuaW1hdGVSb3RhdGU6IGZhbHNlLAogICAgICAgICAgYW5pbWF0ZVNjYWxlOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB0b29sdGlwczogewogICAgICAgICAgLy8gRGlzYWJsZSB0aGUgb24tY2FudmFzIHRvb2x0aXAKICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLAogICAgICAgICAgbW9kZTogJ2luZGV4JywKICAgICAgICAgIGludGVyc2VjdDogIHRydWUsCgogICAgICAgICAgY3VzdG9tOiBmdW5jdGlvbih0b29sdGlwTW9kZWwpIHsKICAgICAgICAgICAgICAvLyBUb29sdGlwIEVsZW1lbnQKICAgICAgICAgICAgICB2YXIgdG9vbHRpcEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXJ0anMtdG9vbHRpcCcpOwoKICAgICAgICAgICAgICAvLyBDcmVhdGUgZWxlbWVudCBvbiBmaXJzdCByZW5kZXIKICAgICAgICAgICAgICBpZiAoIXRvb2x0aXBFbCkgewogICAgICAgICAgICAgICAgICB0b29sdGlwRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgICAgdG9vbHRpcEVsLmlkID0gJ2NoYXJ0anMtdG9vbHRpcCc7CiAgICAgICAgICAgICAgICAgIHRvb2x0aXBFbC5pbm5lckhUTUwgPSAnPHRhYmxlPjwvdGFibGU+JzsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0b29sdGlwRWwpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8gSGlkZSBpZiBubyB0b29sdGlwCiAgICAgICAgICAgICAgaWYgKHRvb2x0aXBNb2RlbC5vcGFjaXR5ID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIHRvb2x0aXBFbC5zdHlsZS5vcGFjaXR5ID0gMDsKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8gU2V0IGNhcmV0IFBvc2l0aW9uCiAgICAgICAgICAgICAgdG9vbHRpcEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Fib3ZlJywgJ2JlbG93JywgJ25vLXRyYW5zZm9ybScpOwogICAgICAgICAgICAgIGlmICh0b29sdGlwTW9kZWwueUFsaWduKSB7CiAgICAgICAgICAgICAgICAgIHRvb2x0aXBFbC5jbGFzc0xpc3QuYWRkKHRvb2x0aXBNb2RlbC55QWxpZ24pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHRvb2x0aXBFbC5jbGFzc0xpc3QuYWRkKCduby10cmFuc2Zvcm0nKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGZ1bmN0aW9uIGdldEJvZHkoYm9keUl0ZW0pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGJvZHlJdGVtLmxpbmVzOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8gU2V0IFRleHQKICAgICAgICAgICAgICBpZiAodG9vbHRpcE1vZGVsLmJvZHkpIHsKICAgICAgICAgICAgICAgICAgdmFyIHRpdGxlTGluZXMgPSB0b29sdGlwTW9kZWwudGl0bGUgfHwgW107CiAgICAgICAgICAgICAgICAgIHZhciBib2R5TGluZXMgPSB0b29sdGlwTW9kZWwuYm9keS5tYXAoZ2V0Qm9keSk7CgogICAgICAgICAgICAgICAgICB2YXIgaW5uZXJIdG1sID0gJzx0Ym9keSc7CiAgICAgICAgICAgICAgICAgIHZhciB0b29sdGlwVGl0bGUgPSAiIiwgdG9vbHRpcEJvZHkgPSAiIjsKCiAgICAgICAgICAgICAgICAgIHRpdGxlTGluZXMuZm9yRWFjaChmdW5jdGlvbih0aXRsZSkgewogICAgICAgICAgICAgICAgICAgIHRvb2x0aXBUaXRsZSA9IHRpdGxlOwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGJvZHlMaW5lcy5mb3JFYWNoKGZ1bmN0aW9uKGJvZHksIGkpIHsKICAgICAgICAgICAgICAgICAgICB0b29sdGlwQm9keSA9IGJvZHlbMF07CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgdG9vbHRpcEJvZHkgPSB0b29sdGlwQm9keS5yZXBsYWNlKCI6IiwgIiAtIik7CgogICAgICAgICAgICAgICAgICBpbm5lckh0bWwgKz0gJzx0cj48dGQ+JyArIHRvb2x0aXBCb2R5ICsgJzwvdGQ+PC90cj4nOwogICAgICAgICAgICAgICAgICBpbm5lckh0bWwgKz0gJzwvdGJvZHk+JzsKCiAgICAgICAgICAgICAgICAgIHZhciB0YWJsZVJvb3QgPSB0b29sdGlwRWwucXVlcnlTZWxlY3RvcigndGFibGUnKTsKICAgICAgICAgICAgICAgICAgdGFibGVSb290LmlubmVySFRNTCA9IGlubmVySHRtbDsKICAgICAgICAgICAgICAgICAgdGFibGVSb290LnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgI2Q0ZDRkNCc7CiAgICAgICAgICAgICAgICAgIHRhYmxlUm9vdC5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNXB4JzsKICAgICAgICAgICAgICAgICAgdGFibGVSb290LnN0eWxlLnBhZGRpbmcgPSAnNXB4IDE1cHgnOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8gYHRoaXNgIHdpbGwgYmUgdGhlIG92ZXJhbGwgdG9vbHRpcAogICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuX2NoYXJ0LmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKCiAgICAgICAgICAgICAgLy8gRGlzcGxheSwgcG9zaXRpb24sIGFuZCBzZXQgc3R5bGVzIGZvciBmb250CiAgICAgICAgICAgICAgdG9vbHRpcEVsLnN0eWxlLm9wYWNpdHkgPSAxOwogICAgICAgICAgICAgIHRvb2x0aXBFbC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7CiAgICAgICAgICAgICAgLy8gdG9vbHRpcEVsLnN0eWxlLmxlZnQgPSBwb3NpdGlvbi5sZWZ0ICsgd2luZG93LnBhZ2VYT2Zmc2V0ICsgdG9vbHRpcE1vZGVsLmNhcmV0WCArICdweCc7CiAgICAgICAgICAgICAgLy8gdG9vbHRpcEVsLnN0eWxlLmxlZnQgPSAwICsgJ3B4JzsKICAgICAgICAgICAgICAvLyB0b29sdGlwRWwuc3R5bGUudG9wID0gcG9zaXRpb24udG9wICsgd2luZG93LnBhZ2VZT2Zmc2V0ICsgdG9vbHRpcE1vZGVsLmNhcmV0WSArICdweCc7CiAgICAgICAgICAgICAgdG9vbHRpcEVsLnN0eWxlLnRvcCA9IDAgKyAncHgnOwogICAgICAgICAgICAgIHRvb2x0aXBFbC5zdHlsZS5mb250RmFtaWx5ID0gdG9vbHRpcE1vZGVsLl9ib2R5Rm9udEZhbWlseTsKICAgICAgICAgICAgICB0b29sdGlwRWwuc3R5bGUuZm9udFNpemUgPSB0b29sdGlwTW9kZWwuYm9keUZvbnRTaXplICsgJ3B4JzsKICAgICAgICAgICAgICB0b29sdGlwRWwuc3R5bGUuZm9udFN0eWxlID0gdG9vbHRpcE1vZGVsLl9ib2R5Rm9udFN0eWxlOwogICAgICAgICAgICAgIC8vIHRvb2x0aXBFbC5zdHlsZS5wYWRkaW5nID0gdG9vbHRpcE1vZGVsLnlQYWRkaW5nICsgJ3B4ICcgKyB0b29sdGlwTW9kZWwueFBhZGRpbmcgKyAncHgnOwogICAgICAgICAgICAgIHRvb2x0aXBFbC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGxldCB0b2RheXNEYXRlID0gRGF0ZS5ub3coKTsKICAgIGxldCB0b2RheVBsdXNPbmUgPSB0b2RheXNEYXRlKzg2NTAwMDAwOwogICAgdmFyIHByZXZpb3VzRGF0ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gMTAwMCAqIDYwICogNjAgKiAyNCAqIDMwOwogICAgdGhpcy5zdGFydERhdGUgPSBuZXcgRGF0ZShwcmV2aW91c0RhdGUpLnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDEwKTsKICAgIHRoaXMuZW5kRGF0ZSA9IG5ldyBEYXRlKHRvZGF5UGx1c09uZSkudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApOwogICAgdGhpcy5nZXRSZXZpZXdzRGF0YSgpOwogICAgRXZlbnRTZXJ2aWNlLiRvbignbG9jYXRpb25DaGFuZ2UnLCB0aGlzLmdldFJldmlld3NEYXRhKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uICgpIHsKICAgIEV2ZW50U2VydmljZS4kb2ZmKCdsb2NhdGlvbkNoYW5nZScsIHRoaXMuZ2V0UmV2aWV3c0RhdGEpOwoKICAgIC8vIEhpZGUgdGhlIHRvb2x0aXAgaWYgaXQgaXMgdmlzaWJsZS4KICAgIHZhciB0b29sdGlwRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhcnRqcy10b29sdGlwJyk7CiAgICBpZih0b29sdGlwRWwpIHRvb2x0aXBFbC5zdHlsZS5vcGFjaXR5ID0gMDsKICB9LAogIGZpbHRlcnM6IHsKICAgIG9uZURlY2ltYWwodmFsdWUpIHsKICAgICAgcmV0dXJuICh2YWx1ZSkudG9GaXhlZCgxKTsKICAgIH0sCiAgICBjb21tYVNlcGFyYXRlKHZhbHVlKSB7CiAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpLnJlcGxhY2UoLyhcZCkoPz0oXGR7M30pKyg/IVxkKSkvZywgJyQxLCcpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0UmV2aWV3c0RhdGEoKSB7CiAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJzaG93Iik7CiAgICAgIHZhciBsb2NhdGlvbklkQXJyYXkgPSBbXTsKICAgICAgbGV0IGxvY2F0aW9uSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9jYXRpb25JZCcpOwogICAgICBpZihsb2NhdGlvbklkKSB7CiAgICAgICAgbG9jYXRpb25JZEFycmF5LnB1c2gobG9jYXRpb25JZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGV0IGxvY09wdGlvbnMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2NhdGlvbk9wdGlvbnMnKSk7CiAgICAgICAgbG9jT3B0aW9ucy5tYXAoZWwgPT4gbG9jYXRpb25JZEFycmF5LnB1c2goZWwubG9jYXRpb25JZCkpOwogICAgICB9CgogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICAvLyBJZiBzdGFydERhdGUgb3IgZW5kRGF0ZSBhcmUgbnVsbCwgb3Igc3RhcnREYXRlIGlzIGdyZWF0ZXIgdGhhbiBlbmREYXRlIHRoZW4gZG9uJ3QgZXZlbiBib3RoZXIgd2l0aCB0aGUgZGF0YSBjYWxsLgogICAgICBpZigodm0uc3RhcnREYXRlICYmIHZtLmVuZERhdGUpICYmICh2bS5zdGFydERhdGUgPCB2bS5lbmREYXRlKSkgewogICAgICAgIHZtLnJldmlld0RhdGEgPSBudWxsOwogICAgICAgIFJlcG9ydFNlcnZpY2UuZ2V0UmV2aWV3c0J5U291cmNlUmVwb3J0KG5ldyBEYXRlKHZtLnN0YXJ0RGF0ZSkuZ2V0VGltZSgpLCBuZXcgRGF0ZSh2bS5lbmREYXRlKS5nZXRUaW1lKCksIGxvY2F0aW9uSWRBcnJheSkudGhlbigKICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIHZtLnJldmlld0RhdGEgPSByZXNwb25zZTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHZtLnBvcHVsYXRlQ2hhcnREYXRhKHJlc3BvbnNlKTsKCiAgICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIC8vIFdoZXRoZXIgd2UgY2FsbGVkIHRoZSBkYXRhIG9yIG5vdCB1cGRhdGUgdGhlIHNlYXJjaGVkIGRhdGVzIGFuZCBzdG9wIHRoZSBzcGlubmVyLgogICAgICB2bS5zZWFyY2hlZFN0YXJ0RGF0ZSA9IHZtLnN0YXJ0RGF0ZTsKICAgICAgdm0uc2VhcmNoZWRFbmREYXRlID0gdm0uZW5kRGF0ZTsKICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgImhpZGUiKTsKICAgICAgCiAgICB9LAogICAgcG9wdWxhdGVDaGFydERhdGEocmVzcG9uc2UpIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdm0uY2hhcnREYXRhID0gewogICAgICAgIGxhYmVsczogW10sCiAgICAgICAgZGF0YXNldHM6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBbXSwKICAgICAgICAgICAgZGF0YTogW10sCiAgICAgICAgICAgIGF2ZXJhZ2VSYXRpbmc6IFtdCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICB9OwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNwb25zZS5sYWJlbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAocmVzcG9uc2UubGFiZWxzW2ldICE9ICJPcGluaWlvbiIgJiYgcmVzcG9uc2UubGFiZWxzW2ldICE9ICJObyByZXZpZXdzIGdlbmVyYXRlZCIpIHsKICAgICAgICAgIHZtLmNoYXJ0RGF0YS5sYWJlbHMucHVzaChyZXNwb25zZS5sYWJlbHNbaV0pOwogICAgICAgICAgdm0uY2hhcnREYXRhLmRhdGFzZXRzWzBdLmRhdGEucHVzaChyZXNwb25zZS5kYXRhc2V0c1swXS5kYXRhW2ldKTsKICAgICAgICAgIHZtLmNoYXJ0RGF0YS5kYXRhc2V0c1swXS5hdmVyYWdlUmF0aW5nLnB1c2gocmVzcG9uc2UuZGF0YXNldHNbMF0uYXZlcmFnZVJhdGluZ1tpXSk7CiAgICAgICAgICB2bS5jaGFydERhdGEuZGF0YXNldHNbMF0uYmFja2dyb3VuZENvbG9yLnB1c2gocmVzcG9uc2UuZGF0YXNldHNbMF0uYmFja2dyb3VuZENvbG9yW2ldKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgCiAgICAgIC8vIElmIGNoYXJ0RGF0YS5sZW5ndGggaXMgMCB0aGVuIHRoZXJlIHdlcmUgbm8gcHVibGljIHJldmlld3MgZ2F0aGVyZWQgc28gc3RvcCB0aGUgYnVjayBoZXJlLgogICAgICBpZiAodm0uY2hhcnREYXRhLmxhYmVscy5sZW5ndGggPiAwKSB7CiAgICAgICAgdm0ucG9wdWxhdGVMZWdlbmQodm0uY2hhcnREYXRhKTsKICAgICAgfQogICAgfSwKICAgIHBvcHVsYXRlTGVnZW5kKGRhdGEpIHsKICAgICAgdmFyIGxlZ2VuZEhvbGRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsZWdlbmQiKTsKCiAgICAgIGlmIChsZWdlbmRIb2xkZXIpIHsKICAgICAgICB2YXIgdGV4dCA9ICIiOwogICAgICAgIHRleHQgKz0gJzxzcGFuIGlkPSJyZXZpZXdzLWJ5LXNvdXJjZS1kb3VnaG51dC1sZWdlbmQiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyI+ICc7CiAgICAgICAgaWYgKGRhdGEuZGF0YXNldHMubGVuZ3RoKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuZGF0YXNldHNbMF0uZGF0YS5sZW5ndGg7ICsraSkgewogICAgICAgICAgICB0ZXh0ICs9ICc8c3BhbiBjbGFzcz0iZG91Z2hudXQtbGVnZW5kLWljb24iIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOicgKyBkYXRhLmRhdGFzZXRzWzBdLmJhY2tncm91bmRDb2xvcltpXSArICciPjwvc3Bhbj4gJzsKICAgICAgICAgICAgaWYgKGRhdGEubGFiZWxzW2ldKSB7CiAgICAgICAgICAgICAgdGV4dCArPSAnPHNwYW4gY2xhc3M9ImRvdWdobnV0LWxlZ2VuZC10ZXh0Ij48c3BhbiBzdHlsZT0iIj4nICsgZGF0YS5sYWJlbHNbaV0gKyAnPC9zcGFuPjwvc3Bhbj4nOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRleHQgKz0gJzwvc3Bhbj4gJzsKICAgICAgICAKICAgICAgICBsZWdlbmRIb2xkZXIuaW5uZXJIVE1MID0gdGV4dDsKICAgICAgICAKICAgICAgICB0aGlzLnBvcHVsYXRlVG90YWxSZXZpZXdzSW5zaWRlQ2hhcnQoZGF0YSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmF0dGVtcHRzICs9IDE7CiAgICAgICAgICBpZiAodGhpcy5hdHRlbXB0cyA8IDUpIHsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnBvcHVsYXRlTGVnZW5kKGRhdGEpOwogICAgICAgICAgICB9LCA1MDApOwogICAgICAgICAgfQogICAgICB9CiAgICAgIAogICAgfSwKICAgIHBvcHVsYXRlVG90YWxSZXZpZXdzSW5zaWRlQ2hhcnQoZGF0YSkgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICB2YXIgdG90YWxSZXZpZXdzSG9sZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNoYXJ0LXRvdGFsLXJldmlld3Mtd3JhcHBlciIpOwogICAgICB2YXIgdG90YWxSZXZpZXdzID0gMDsKICAgICAgCiAgICAgIGlmIChkYXRhLmRhdGFzZXRzLmxlbmd0aCkgewogICAgICAgIHRvdGFsUmV2aWV3cyA9IGRhdGEuZGF0YXNldHNbMF0uZGF0YS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKQogICAgICAgIAogICAgICAgIGlmICh0b3RhbFJldmlld3MgPiAwKSB7CiAgICAgICAgICB0b3RhbFJldmlld3MgPSB2bS5rRm9ybWF0dGVyKHRvdGFsUmV2aWV3cyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIAogICAgICB0b3RhbFJldmlld3NIb2xkZXIuaW5uZXJIVE1MID0gdG90YWxSZXZpZXdzICsgIjxkaXYgc3R5bGU9J2ZvbnQtc2l6ZToyMHB4Oyc+VG90YWwgUmV2aWV3czwvZGl2PiI7CiAgICB9LAogICAga0Zvcm1hdHRlcihudW0pIHsKICAgICAgcmV0dXJuIE1hdGguYWJzKG51bSkgPiA5OTkgPyBNYXRoLnNpZ24obnVtKSooKE1hdGguYWJzKG51bSkvMTAwMCkudG9GaXhlZCgxKSkgKyAnaycgOiBNYXRoLnNpZ24obnVtKSpNYXRoLmFicyhudW0pOwogICAgfSwKICAgIGdldEljb25Gb3JTb3VyY2Uoc291cmNlKSB7CiAgICAgIGlmIChzb3VyY2UgPT0gIkdvb2dsZSIpIHsKICAgICAgICByZXR1cm4gcmVxdWlyZSgiLi4vLi4vLi4vcHVibGljL2ltZy9Hb29nbGVfSWNvbi5wbmciKTsKICAgICAgfSBlbHNlIGlmIChzb3VyY2UgPT0gIlllbHAiKSB7CiAgICAgICAgcmV0dXJuIHJlcXVpcmUoIi4uLy4uLy4uL3B1YmxpYy9pbWcvWWVscF9JY29uLnBuZyIpOwogICAgICB9IGVsc2UgaWYgKHNvdXJjZSA9PSAiRmFjZWJvb2siKSB7CiAgICAgICAgcmV0dXJuIHJlcXVpcmUoIi4uLy4uLy4uL3B1YmxpYy9pbWcvRmFjZWJvb2tfSWNvbi5wbmciKTsKICAgICAgfSBlbHNlIGlmIChzb3VyY2UgPT0gIkZvdXJzcXVhcmUiKSB7CiAgICAgICAgcmV0dXJuIHJlcXVpcmUoIi4uLy4uLy4uL3B1YmxpYy9pbWcvRm91cnNxdWFyZV9JY29uLnBuZyIpOwogICAgICB9IGVsc2UgaWYgKHNvdXJjZSA9PSAiQ2l0eXNlYXJjaCIpIHsKICAgICAgICByZXR1cm4gcmVxdWlyZSgiLi4vLi4vLi4vcHVibGljL2ltZy9DaXR5c2VhcmNoX0ljb24ucG5nIik7CiAgICAgIH0gZWxzZSBpZiAoc291cmNlID09ICJZZWxsb3dwYWdlcyIpIHsKICAgICAgICByZXR1cm4gcmVxdWlyZSgiLi4vLi4vLi4vcHVibGljL2ltZy9ZUF9JY29uLnBuZyIpOwogICAgICAgIC8vIH0gZWxzZSBpZiAoc291cmNlID09ICdUcmlwQWR2aXNvcicpIHsKICAgICAgICAvLyAgIHJldHVybiByZXF1aXJlKCcuLi8uLi8uLi9wdWJsaWMvaW1nL1RyaXBBZHZpc29yX0ljb24ucG5nJyk7CiAgICAgICAgLy8gfSBlbHNlIGlmIChzb3VyY2UgPT0gJ0JCQicpIHsKICAgICAgICAvLyAgIHJldHVybiByZXF1aXJlKCcuLi8uLi8uLi9wdWJsaWMvaW1nL0JCQl9JY29uLnBuZycpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiByZXF1aXJlKCIuLi8uLi8uLi9wdWJsaWMvaW1nL09waW5paW9uX0ljb24ucG5nIik7CiAgICAgIH0KICAgIH0sCiAgICBnZXRTdGFyUmF0aW5nKHJhdGluZykgewogICAgICB2YXIgbiA9IChyYXRpbmcgKyAiIikuc3BsaXQoIi4iKTsgLy8gU3BsaXQgdGhlIHJhdGluZyBpbnRvIGFuIGFycmF5LgogICAgICB2YXIgd2hvbGVSYXRpbmcgPSBuWzBdOyAvLyBUaGUgZmlyc3QgbnVtYmVyIGluIHRoZSBhcnJheSBpcyB0aGUgd2hvbGUgbnVtYmVyIG9mIHN0YXJzLgogICAgICB2YXIgZGVjaW1hbFJhdGluZyA9IG5bMV07IC8vIFRoZSBzZWNvbmQgbnVtYmVyIGlzIHRoZSBkZWNpbWFsIG51bWJlciBvZiB0aGUgbGFzdCBzdGFyLgogICAgICB2YXIgc3RhclNpemUgPSAxNDsgLy8gVXNlIHRoaXMgdG8gdW5pdmVyc2FsbHkgYWRqdXN0IHRoZSBzaXplIG9mIHRoZSBzdGFycywgd2hpY2ggdGhyb3dzIG9mZiB0aGUgY2FsY3VsYXRpb24gb2YgdGhlIHdpZHRoIG9mIHRoZSBvdmVyZmxvdyBkaXYuCiAgICAgIHZhciBpID0gMCwKICAgICAgICAgIHRleHQgPSAiIjsKCiAgICAgIC8vIFN0ZXAgdGhyb3VnaCBhbmQgcHJpbnQgb3V0IHRoZSB3aG9sZSBzdGFycyBmaXJzdC4KICAgICAgd2hpbGUgKGkgPCB3aG9sZVJhdGluZykgewogICAgICAgIHRleHQgKz0gIjxpIHN0eWxlPSdmb250LXNpemU6IiArIHN0YXJTaXplICsgInB4O2NvbG9yOiNGRkJBMDA7JyBjbGFzcz0nZmEgZmEtc3RhciBjaGVja2VkJz48L2k+IjsKICAgICAgICBpKys7CiAgICAgIH0KCiAgICAgIC8vIElmIHRoZXJlIGlzIGEgZGVjaW1hbCByYXRpbmcgYWRkIGEgZmluYWwgc3RhciBidXQgd3JhcCBpdCBpbiBhIGNvbnRhaW5lciBhbmQgc2V0IGEgd2lkdGggd2l0aCBvdmVyZmxvdzpoaWRkZW4uCiAgICAgIGlmIChkZWNpbWFsUmF0aW5nKSB7CiAgICAgICAgLy8gSWYgZGVjaW1hbFJhdGluZyBpcyBsZXNzIHRoYW4gMTAgdGhlbiBpdCB0aHJvd3Mgb2ZmIHRoZSB3aWR0aCB3aGVuIGl0IGlzIHJvdW5kZWQgb2ZmLCBzbyB0aGlzIHdpbGwgYWRkIGEgMCB0byBpdCB0byBjb3JyZWN0IGl0LgogICAgICAgIHZhciBkZWNpbWFsUmF0aW5nQ2hlY2tlZCA9IChkZWNpbWFsUmF0aW5nIDwgMTApID8gZGVjaW1hbFJhdGluZyAqIDEwIDogZGVjaW1hbFJhdGluZzsKICAgICAgICB2YXIgcm91bmRlZFRlbnMgPSBNYXRoLnJvdW5kKGRlY2ltYWxSYXRpbmdDaGVja2VkLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDIpIC8gMTApICogMTA7IC8vIFJvdW5kIHRvIHRoZSBuZWFyZXN0IHRlbnMgcGxhY2UgdG8gZGV0ZXJtaW5lIHRoZSB3aWR0aCBvZiB0aGUgbGFzdCBzdGFyLgogICAgICAgIHRleHQgKz0gIjxkaXYgc3R5bGU9J3dpZHRoOiIgKyAocm91bmRlZFRlbnMgKiBzdGFyU2l6ZSAvIDEwMCkgKyAicHg7b3ZlcmZsb3c6aGlkZGVuO3Bvc2l0aW9uOnJlbGF0aXZlOyc+IgogICAgICAgIHRleHQgKz0gIjxpIHN0eWxlPSdmb250LXNpemU6IiArIHN0YXJTaXplICsgInB4O3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDtjb2xvcjojRkZCQTAwOycgY2xhc3M9J2ZhIGZhLXN0YXIgY2hlY2tlZCc+PC9pPiIKICAgICAgICB0ZXh0ICs9ICI8L2Rpdj4iOwogICAgICB9CgogICAgICByZXR1cm4gdGV4dDsKICAgIH0sCiAgICBwcmludFJlcG9ydCgpIHsKICAgICAgd2luZG93LnByaW50KCk7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["ReviewsBySourceReport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ReviewsBySourceReport.vue","sourceRoot":"src/components/Reports","sourcesContent":["<template>\n  <div id=\"reviews-by-source-report-wrapper\">\n    <div id=\"report-header\" class=\"box-shadow\">\n      <div id=\"report-name-wrapper\">\n        Reviews by Source\n      </div>\n      <div id=\"report-options-wrapper\">\n        <el-date-picker\n          type=\"date\"\n          v-model=\"startDate\"\n          @keyup.enter=\"getReviewsData()\"\n          placeholder=\"Start Date\"\n          value-format=\"yyyy-MM-dd\"\n          format=\"MM-dd-yyyy\"\n          required />\n        <el-date-picker\n          type=\"date\"\n          v-model=\"endDate\"\n          @keyup.enter=\"getReviewsData()\"\n          placeholder=\"End Date\"\n          value-format=\"yyyy-MM-dd\"\n          format=\"MM-dd-yyyy\"\n          required />\n        <el-button type=\"primary\" @click=\"getReviewsData()\">Apply</el-button>\n        <!-- <el-button type=\"primary\" \n          @click=\"printReport()\"\n          class=\"export-btn\">\n            Export\n            <i class=\"el-icon-download el-icon-right\"></i>\n        </el-button> -->\n        <!-- <span>Start Date</span>\n        <input style=\"margin:0 10px;cursor:pointer;\" type=\"date\" v-model=\"startDate\" @keyup.enter=\"getReviewsData()\" placeholder=\"YYYY-MM-DD\" required />\n        <span>End Date</span>\n        <input style=\"margin:0 10px;cursor:pointer;\" type=\"date\" v-model=\"endDate\" @keyup.enter=\"getReviewsData()\" placeholder=\"YYYY-MM-DD\" required />\n        <button id=\"date-button\" @click=\"getReviewsData()\">Search</button> -->\n        <!-- <div id=\"export-wrapper\" @click=\"printReport()\">\n          <i class=\"fas fa-download\"></i>\n          <div>Export Report</div>\n        </div> -->\n      </div>\n    </div>\n\n    <div id=\"report-body\">\n      <div id=\"no-reviews\" v-if=\"!searchedStartDate || !searchedEndDate\">\n        <div class=\"no-data\">Please select both dates then click 'Search' again.</div>\n      </div>\n      <div id=\"no-reviews\" v-else-if=\"searchedStartDate > searchedEndDate\">\n        <div class=\"no-data\">Please select a Start Date that is before End Date then click 'Search' again.</div>\n      </div>\n      <div id=\"no-reviews\" v-else-if=\"searchedStartDate && searchedEndDate && reviewData && reviewData.labels[0] == 'No reviews generated'\">\n        <div class=\"no-data\">You haven't received any reviews in this date range.</div>\n      </div>\n      <div v-else id=\"report-wrapper\">\n\n        <el-row :gutter=\"20\">\n          <el-col :span=\"8\" class=\"totalReviewDiv\">\n            <el-card class=\"box-card\">\n              <h3 align=\"center\">Total Review</h3>\n              <p align=\"center\">Based on all sources</p>\n              <div id=\"chart-legend-wrapper\" v-show=\"(searchedStartDate && searchedEndDate) && (chartData && chartData.labels.length > 0)\">\n                <div id=\"chartjs-tooltip\"><table></table></div>\n                <div id=\"chart-wrapper\">\n                  <doughnut-chart id=\"reviews-by-source-donut-chart\" :chart-data=\"chartData\" :options=\"chartOptions\" />\n                  \n                  <div id=\"chart-total-reviews-wrapper\"></div>\n                </div>\n                <div id=\"legend\" class=\"chart-legend\"></div>\n              </div>\n              <div v-show=\"(searchedStartDate && searchedEndDate) && (chartData && chartData.labels.length == 0)\" id=\"reviews-by-source-report-chart-no-data-wrapper\">\n                <div class=\"no-data\">You haven't received any public reviews in this date range.</div>\n              </div>\n            </el-card>\n          </el-col>\n          <el-col :span=\"8\" v-for=\"(label, index) in reviewData.labels\" :key=\"label\" style=\"padding-bottom:10px;\">\n            <el-card class=\"box-card\">\n              <el-row :gutter=\"20\">\n                <el-col :span=\"20\">\n                  <img class=\"cardIcons\" :src=\"getIconForSource(reviewData.labels[index])\" alt=\"Logo\"> <p  class=\"cardTitle\">{{ label }}</p>\n                </el-col>\n                <el-col :span=\"4\">\n                  <el-tooltip class=\"item\" effect=\"light\" v-if=\"reviewData.labels[index] == 'Opiniion'\" content=\"Opiniion Score is calculated from all private feedback given via Email And SMS\" placement=\"bottom\">\n                  <i class=\"fas fa-info-circle opiniion-icon\"></i>\n                  </el-tooltip>\n                </el-col>\n              </el-row>\n              <el-row :gutter=\"20\" class=\"scoreRow\">\n                <el-col :span=\"12\">\n                  <span class=\"scoreTitle\">Avg Rating</span>\n                  <span class=\"scoreResult\">\n                    {{reviewData.datasets[0].averageRating[index] | oneDecimal}}\n                    <div class=\"average-star-rating-wrapper\" v-html=\"getStarRating(reviewData.datasets[0].averageRating[index])\"></div>\n                  </span>\n                </el-col>\n                <el-col :span=\"12\">\n                  <p class=\"scoreTitle\">Responses</p>\n                  <p class=\"scoreResult\">\n                    {{reviewData.datasets[0].data[index] | commaSeparate}}\n                  </p>\n                </el-col>\n              </el-row>\n              <!-- <el-divider></el-divider> -->\n              <div class=\"cardFooter\">\n               <!-- <i class=\"el-icon-refresh\"></i> Updated in the last hour -->\n              </div>\n            </el-card>\n          </el-col>\n        </el-row>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {EventService} from '../../main';\nimport DoughnutChart from './../Charts/DoughnutChart'\nimport ReportService from './../../services/ReportService'\n\n\nexport default {\n  name: 'ReviewsBySourceReport',\n  components: {DoughnutChart},\n  data: function() {\n    return {\n      reviewData: null,\n      startDate: '1970-01-01',\n      endDate: '2070-01-01',\n      searchedStartDate: '1970-01-01',\n      searchedEndDate: '2070-01-01',\n      events: ['mousemove'],\n      chartData: null,\n      attempts: 0,\n      chartOptions: {\n        maintainAspectRatio: false,\n        cutoutPercentage: 80,\n        legend: {\n          display: false,\n        },\n        title: {\n          display: false\n        },\n        animation: {\n          animateRotate: false,\n          animateScale: true\n        },\n        tooltips: {\n          // Disable the on-canvas tooltip\n          enabled: false,\n          mode: 'index',\n          intersect:  true,\n\n          custom: function(tooltipModel) {\n              // Tooltip Element\n              var tooltipEl = document.getElementById('chartjs-tooltip');\n\n              // Create element on first render\n              if (!tooltipEl) {\n                  tooltipEl = document.createElement('div');\n                  tooltipEl.id = 'chartjs-tooltip';\n                  tooltipEl.innerHTML = '<table></table>';\n                  document.body.appendChild(tooltipEl);\n              }\n\n              // Hide if no tooltip\n              if (tooltipModel.opacity === 0) {\n                  tooltipEl.style.opacity = 0;\n                  return;\n              }\n\n              // Set caret Position\n              tooltipEl.classList.remove('above', 'below', 'no-transform');\n              if (tooltipModel.yAlign) {\n                  tooltipEl.classList.add(tooltipModel.yAlign);\n              } else {\n                  tooltipEl.classList.add('no-transform');\n              }\n\n              function getBody(bodyItem) {\n                  return bodyItem.lines;\n              }\n\n              // Set Text\n              if (tooltipModel.body) {\n                  var titleLines = tooltipModel.title || [];\n                  var bodyLines = tooltipModel.body.map(getBody);\n\n                  var innerHtml = '<tbody';\n                  var tooltipTitle = \"\", tooltipBody = \"\";\n\n                  titleLines.forEach(function(title) {\n                    tooltipTitle = title;\n                  });\n\n                  bodyLines.forEach(function(body, i) {\n                    tooltipBody = body[0];\n                  });\n\n                  tooltipBody = tooltipBody.replace(\":\", \" -\");\n\n                  innerHtml += '<tr><td>' + tooltipBody + '</td></tr>';\n                  innerHtml += '</tbody>';\n\n                  var tableRoot = tooltipEl.querySelector('table');\n                  tableRoot.innerHTML = innerHtml;\n                  tableRoot.style.border = '1px solid #d4d4d4';\n                  tableRoot.style.borderRadius = '5px';\n                  tableRoot.style.padding = '5px 15px';\n              }\n\n              // `this` will be the overall tooltip\n              var position = this._chart.canvas.getBoundingClientRect();\n\n              // Display, position, and set styles for font\n              tooltipEl.style.opacity = 1;\n              tooltipEl.style.position = 'absolute';\n              // tooltipEl.style.left = position.left + window.pageXOffset + tooltipModel.caretX + 'px';\n              // tooltipEl.style.left = 0 + 'px';\n              // tooltipEl.style.top = position.top + window.pageYOffset + tooltipModel.caretY + 'px';\n              tooltipEl.style.top = 0 + 'px';\n              tooltipEl.style.fontFamily = tooltipModel._bodyFontFamily;\n              tooltipEl.style.fontSize = tooltipModel.bodyFontSize + 'px';\n              tooltipEl.style.fontStyle = tooltipModel._bodyFontStyle;\n              // tooltipEl.style.padding = tooltipModel.yPadding + 'px ' + tooltipModel.xPadding + 'px';\n              tooltipEl.style.pointerEvents = 'none';\n          }\n        }\n      }\n    }\n  },\n  created() {\n    let todaysDate = Date.now();\n    let todayPlusOne = todaysDate+86500000;\n    var previousDate = new Date().getTime() - 1000 * 60 * 60 * 24 * 30;\n    this.startDate = new Date(previousDate).toISOString().substring(0, 10);\n    this.endDate = new Date(todayPlusOne).toISOString().substring(0, 10);\n    this.getReviewsData();\n    EventService.$on('locationChange', this.getReviewsData);\n  },\n  beforeDestroy: function () {\n    EventService.$off('locationChange', this.getReviewsData);\n\n    // Hide the tooltip if it is visible.\n    var tooltipEl = document.getElementById('chartjs-tooltip');\n    if(tooltipEl) tooltipEl.style.opacity = 0;\n  },\n  filters: {\n    oneDecimal(value) {\n      return (value).toFixed(1);\n    },\n    commaSeparate(value) {\n      return value.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,');\n    }\n  },\n  methods: {\n    getReviewsData() {\n      EventService.$emit(\"loading\", \"show\");\n      var locationIdArray = [];\n      let locationId = localStorage.getItem('locationId');\n      if(locationId) {\n        locationIdArray.push(locationId);\n      } else {\n        let locOptions = JSON.parse(localStorage.getItem('locationOptions'));\n        locOptions.map(el => locationIdArray.push(el.locationId));\n      }\n\n      var vm = this;\n      // If startDate or endDate are null, or startDate is greater than endDate then don't even bother with the data call.\n      if((vm.startDate && vm.endDate) && (vm.startDate < vm.endDate)) {\n        vm.reviewData = null;\n        ReportService.getReviewsBySourceReport(new Date(vm.startDate).getTime(), new Date(vm.endDate).getTime(), locationIdArray).then(\n          function(response) {\n            vm.reviewData = response;\n            \n            vm.populateChartData(response);\n\n          }, function(error) {\n            console.log(error);\n        });\n      }\n\n      // Whether we called the data or not update the searched dates and stop the spinner.\n      vm.searchedStartDate = vm.startDate;\n      vm.searchedEndDate = vm.endDate;\n      EventService.$emit(\"loading\", \"hide\");\n      \n    },\n    populateChartData(response) {\n      var vm = this;\n      vm.chartData = {\n        labels: [],\n        datasets: [\n          {\n            backgroundColor: [],\n            data: [],\n            averageRating: []\n          }\n        ]\n      };\n\n      for (var i = 0; i < response.labels.length; i++) {\n        if (response.labels[i] != \"Opiniion\" && response.labels[i] != \"No reviews generated\") {\n          vm.chartData.labels.push(response.labels[i]);\n          vm.chartData.datasets[0].data.push(response.datasets[0].data[i]);\n          vm.chartData.datasets[0].averageRating.push(response.datasets[0].averageRating[i]);\n          vm.chartData.datasets[0].backgroundColor.push(response.datasets[0].backgroundColor[i]);\n        }\n      }\n      \n      // If chartData.length is 0 then there were no public reviews gathered so stop the buck here.\n      if (vm.chartData.labels.length > 0) {\n        vm.populateLegend(vm.chartData);\n      }\n    },\n    populateLegend(data) {\n      var legendHolder = document.getElementById(\"legend\");\n\n      if (legendHolder) {\n        var text = \"\";\n        text += '<span id=\"reviews-by-source-doughnut-legend\" style=\"display: flex;\"> ';\n        if (data.datasets.length) {\n          for (var i = 0; i < data.datasets[0].data.length; ++i) {\n            text += '<span class=\"doughnut-legend-icon\" style=\"background-color:' + data.datasets[0].backgroundColor[i] + '\"></span> ';\n            if (data.labels[i]) {\n              text += '<span class=\"doughnut-legend-text\"><span style=\"\">' + data.labels[i] + '</span></span>';\n            }\n          }\n        }\n        text += '</span> ';\n        \n        legendHolder.innerHTML = text;\n        \n        this.populateTotalReviewsInsideChart(data);\n      } else {\n          this.attempts += 1;\n          if (this.attempts < 5) {\n            setTimeout(() => {\n                this.populateLegend(data);\n            }, 500);\n          }\n      }\n      \n    },\n    populateTotalReviewsInsideChart(data) {\n      var vm = this;\n      var totalReviewsHolder = document.getElementById(\"chart-total-reviews-wrapper\");\n      var totalReviews = 0;\n      \n      if (data.datasets.length) {\n        totalReviews = data.datasets[0].data.reduce((a, b) => a + b, 0)\n        \n        if (totalReviews > 0) {\n          totalReviews = vm.kFormatter(totalReviews);\n        }\n      }\n      \n      totalReviewsHolder.innerHTML = totalReviews + \"<div style='font-size:20px;'>Total Reviews</div>\";\n    },\n    kFormatter(num) {\n      return Math.abs(num) > 999 ? Math.sign(num)*((Math.abs(num)/1000).toFixed(1)) + 'k' : Math.sign(num)*Math.abs(num);\n    },\n    getIconForSource(source) {\n      if (source == \"Google\") {\n        return require(\"../../../public/img/Google_Icon.png\");\n      } else if (source == \"Yelp\") {\n        return require(\"../../../public/img/Yelp_Icon.png\");\n      } else if (source == \"Facebook\") {\n        return require(\"../../../public/img/Facebook_Icon.png\");\n      } else if (source == \"Foursquare\") {\n        return require(\"../../../public/img/Foursquare_Icon.png\");\n      } else if (source == \"Citysearch\") {\n        return require(\"../../../public/img/Citysearch_Icon.png\");\n      } else if (source == \"Yellowpages\") {\n        return require(\"../../../public/img/YP_Icon.png\");\n        // } else if (source == 'TripAdvisor') {\n        //   return require('../../../public/img/TripAdvisor_Icon.png');\n        // } else if (source == 'BBB') {\n        //   return require('../../../public/img/BBB_Icon.png');\n      } else {\n        return require(\"../../../public/img/Opiniion_Icon.png\");\n      }\n    },\n    getStarRating(rating) {\n      var n = (rating + \"\").split(\".\"); // Split the rating into an array.\n      var wholeRating = n[0]; // The first number in the array is the whole number of stars.\n      var decimalRating = n[1]; // The second number is the decimal number of the last star.\n      var starSize = 14; // Use this to universally adjust the size of the stars, which throws off the calculation of the width of the overflow div.\n      var i = 0,\n          text = \"\";\n\n      // Step through and print out the whole stars first.\n      while (i < wholeRating) {\n        text += \"<i style='font-size:\" + starSize + \"px;color:#FFBA00;' class='fa fa-star checked'></i>\";\n        i++;\n      }\n\n      // If there is a decimal rating add a final star but wrap it in a container and set a width with overflow:hidden.\n      if (decimalRating) {\n        // If decimalRating is less than 10 then it throws off the width when it is rounded off, so this will add a 0 to it to correct it.\n        var decimalRatingChecked = (decimalRating < 10) ? decimalRating * 10 : decimalRating;\n        var roundedTens = Math.round(decimalRatingChecked.toString().substring(0, 2) / 10) * 10; // Round to the nearest tens place to determine the width of the last star.\n        text += \"<div style='width:\" + (roundedTens * starSize / 100) + \"px;overflow:hidden;position:relative;'>\"\n        text += \"<i style='font-size:\" + starSize + \"px;position:absolute;left:0;color:#FFBA00;' class='fa fa-star checked'></i>\"\n        text += \"</div>\";\n      }\n\n      return text;\n    },\n    printReport() {\n      window.print();\n    }\n  }\n}\n</script>\n\n\n<style scoped>\n  .average-star-rating-wrapper {\n    display: flex;\n    width: min-content;\n    margin: 0 auto;\n  }\n  #legend {\n    width: 100%;\n  }\n  .dropdown-list {\n    display: flex;\n    align-items: center;\n  }\n  .dropdown-list img {\n    margin-right: 20px;\n  }\n  .dropdown-list span {\n    color: #757575;\n    font-weight: 400;\n  }\n  #report-header {\n    background: transparent;\n    display: flex;\n    justify-content: space-between;\n    margin-left: 2px;\n    height: 66px;\n    box-shadow: transparent;\n    color: #545454;\n  }\n\n  #report-content-wrapper {\n    width: 100%;\n  }\n\n  #report-name-wrapper {\n    font-size: 24px;\n    padding: 20px 0 20px 20px;\n    font-weight: 500;\n  }\n\n  #report-options-wrapper {\n    font-size: 20px;\n    padding: 20px 20px 10px 0;\n    display: flex;\n    align-items: baseline;\n  }\n\n  #report-options-wrapper > div {\n    margin-right: 20px;\n  }\n\n  #export-wrapper {\n    margin-left: 23px;\n    text-align: center;\n    cursor: pointer;\n  }\n\n  #export-wrapper > i {\n    color: #4FCBC6;\n    font-size: 20px;\n  }\n\n  #export-wrapper > div{\n    font-size: 14px;\n    color: #545454;\n    font-weight: bold;\n  }\n\n  .card-wrapper {\n    display: flex;\n    flex-wrap: wrap;\n  }\n\n  .card {\n    width: 20vw;\n    background: white;\n    margin: 5px;\n  }\n\n  .card-header-wrapper,\n  .reviews-by-source-report-chart-header-wrapper {\n    width: auto;\n    display: flex;\n    padding: 10px 5px;\n    border-bottom: .5px solid lightgray;\n    align-items: center;\n    font-weight: bold;\n    font-size: 16px;\n    justify-content: space-between;\n  }\n\n  .card-title-wrapper {\n    display: flex;\n    align-items: center;\n  }\n\n  .info-tooltip-wrapper {\n    font-size: 13px;\n    padding-right: 5px;\n    cursor: pointer;\n  }\n\n  .card-body {\n    display: flex;\n    justify-content: space-evenly;\n    padding: 10px 0 36px;\n    align-items: flex-end;\n  }\n\n  .total-reviews-wrapper,\n  .average-rating-wrapper {\n    text-align: center;\n    display: flex;\n    flex-direction: column;\n    margin: 7px 0;\n  }\n\n  .total-reviews-header,\n  .average-rating-header {\n    font-size: 12px;\n    font-weight: bold;\n  }\n\n  .total-reviews-body,\n  .average-rating-body {\n    border: 1px solid black;\n    font-size: 30px;\n    font-weight: bold;\n    align-self: center;\n    margin-top: 5px;\n  }\n\n  .total-reviews-body {\n    padding: 20px;\n  }\n\n  .average-rating-body {\n    padding: 15px;\n  }\n\n  #date-button {\n    background-color: #4fcbc5;\n    color: white;\n    font-size: 15px;\n    padding: 3px 5px;\n    border-radius: 3px;\n    font-weight: 600;\n  }\n\n  #date-button:hover {\n    filter: brightness(120%);\n  }\n\n  #reviews-by-source-report-chart-wrapper {\n    width: 35vw;\n    background: white;\n    float: left;\n    margin: 5px 5px 0 0;\n  }\n\n  #reviews-by-source-report-chart-wrapper > div {\n    padding: 5px;\n    margin: 0;\n  }\n\n  a.tip {\n    border-bottom: 1px dashed;\n    text-decoration: none;\n    color: transparent;\n  }\n\n  a.tip:hover {\n    cursor: help;\n    position: relative;\n    filter: brightness(100%);\n  }\n\n  a.tip span {\n    display: none;\n  }\n\n  a.tip:hover span {\n    padding: 5px;\n    display: block;\n    z-index: 100;\n    left: -15rem;\n    margin: 10px;\n    width: 250px;\n    position: absolute;\n    top: -20px;\n    text-decoration: none;\n    color: #545454;\n    font-size: 11px;\n    background: white;\n  }\n\n\n  #chart-legend-wrapper {\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n    position: relative;\n    justify-content: center;\n  }\n\n  #chart-wrapper {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  #chart-total-reviews-wrapper {\n    position: absolute;\n    text-align: center;\n    font-size: 44px;\n    color: #545454;\n  }\n\n  #report-wrapper {\n    margin: 70px 100px 0px 30px\n\n    /* margin: 30px;\n    margin-top: 70px; */\n  }\n\n  #reviews-by-source-donut-chart {\n    width: 15vw;\n    padding: 0;\n    margin: 0;\n    max-height: 387px;\n  }\n  .export-btn{\n    margin-top: -10px;\n    margin-left: 20px;\n    background-color: #66615B;\n    border: none\n  }\n  .export-btn:hover {\n\n    background-color: #66615B\n  }\n  .el-icon-download{\n    font-size: 20px;\n    font-weight: bold\n  }\n  .datepicks{\n    cursor: pointer;\n    padding-left: 35px;\n    background-color: #FAFAFA;\n    border: 1px solid #d8d7d7;\n    height: 18px\n  }\n\n  #input_img {\n      position:absolute;\n      bottom:20px;\n      padding-left:5px; \n      width:24px;\n      height:24px;\n  }\n  .cardIcons{\n    float: left;\n    height: 25px;\n  }\n  .cardTitle{\n    float: left;\n    margin-top: 4px;\n    margin-left: 10px\n  }\n  .opiniion-icon {\n    cursor: pointer;\n    color: #9a9a9a;\n  }\n  .opiniion-icon:hover {\n    color: #4fcbc5;\n  }\n  .scoreRow{\n    padding-left: 20px;\n      padding-right: 20px\n  }\n  .scoreTitle{\n    display: block;\n    margin: 10px auto;\n    text-align: center\n  }\n  .scoreResult{\n    font-size: 24px;\n    display: block;\n    margin: auto;\n    text-align: center\n  }\n  .cardFooter{\n    font-size: 14px;\n    padding-top: 20px;\n  }\n  .el-divider .el-divider--horizontal{\n  margin: 0\n  }\n\n  /* FireFox Only CSS */\n  @-moz-document url-prefix() {\n    #reviews-by-source-donut-chart {\n      max-height: 391px !important;\n    }\n  }\n\n\n</style>\n"]}]}