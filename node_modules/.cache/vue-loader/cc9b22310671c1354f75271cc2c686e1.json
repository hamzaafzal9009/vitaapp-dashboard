{"remainingRequest":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/LeaveFeedback.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/LeaveFeedback.vue","mtime":1581270622000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBGZWVkYmFja1NlcnZpY2UgZnJvbSAnLi8uLi9zZXJ2aWNlcy9GZWVkYmFja1NlcnZpY2UnCmltcG9ydCBMb2NhdGlvblNlcnZpY2UgZnJvbSAnLi8uLi9zZXJ2aWNlcy9Mb2NhdGlvblNlcnZpY2UnCmltcG9ydCB7RXZlbnRTZXJ2aWNlfSBmcm9tICcuLi9tYWluJwppbXBvcnQgQ2FtcGFpZ25TZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2VzL0NhbXBhaWduU2VydmljZScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnbGVhdmVGZWVkYmFjaycsCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBzdWJtaXR0aW5nRmVlZGJhY2s6IGZhbHNlLAogICAgICBsb2NhdGlvbjogeyBsb2NhdGlvblN0eWxlOiB7fSwgbGFuZGluZ1BhZ2U6IHt9LCB1bmxvYWRlZDogdHJ1ZSB9LAogICAgICBycEhlYWRlcjogJycsCiAgICAgIHJwTGluZTI6ICcnLAogICAgICBycExpbmUzOiAnJwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TG9jYXRpb24oKTsKICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuc3JjID09ICdTTVMnKSB7CiAgICAgIEZlZWRiYWNrU2VydmljZS5sb2dMaW5rQ2xpY2sodGhpcy4kcm91dGUucGFyYW1zLmNpZCkudGhlbigKICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgLy8gU3VjY2VzcyEKICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldENhbXBhaWduKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBDYW1wYWlnblNlcnZpY2UuZ2V0Q2FtcGFpZ24odm0uJHJvdXRlLnBhcmFtcy50ZW1wbGF0ZSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgbGV0IGxhbmRpbmcgPSByZXNwb25zZS5sYW5kaW5nUGFnZTsKICAgICAgICBsZXQgc3ViamVjdCA9IHJlc3BvbnNlLmVtYWlsRGV0YWlscy5zdWJqZWN0OwogICAgICAgIHZtLnJwSGVhZGVyID0gc3ViamVjdDsKICAgICAgICB2bS5ycDMgPSBsYW5kaW5nLmVtYWlsTm90RGlzcGxheWVkOwogICAgICB9KQogICAgfSwKICAgIGdldEF1dG9tYXRpb24oKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIGxldCBhdXRvID0gdm0uJHJvdXRlLnBhcmFtcy50ZW1wbGF0ZTsKICAgICAgaWYoYXV0byAmJiBhdXRvLmluY2x1ZGVzKCc6JykpIHsKICAgICAgICBsZXQgYXV0b09iaiA9IGF1dG8uc3BsaXQoJzonKTsKICAgICAgICBBdXRvbWF0aW9uU2VydmljZS5nZXRSZWRpcmVjdEF1dG9tYXRpb24oYXV0b09ialswXSwgYXV0b09ialsxXSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBsZXQgbGFuZGluZyA9IHJlc3BvbnNlLmFjdGlvbi5sYW5kaW5nUGFnZTsKICAgICAgICAgIHZtLnJwSGVhZGVyID0gbGFuZGluZy5scDE7CiAgICAgICAgICB2bS5ycExpbmUyID0gbGFuZGluZy5scDI7CiAgICAgICAgICB2bS5ycExpbmUzID0gbGFuZGluZy5scDM7CiAgICAgICAgfSkKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgdGFyZ2V0VGVtcGxhdGUgPSBudWxsOwogICAgICAgIGlmIChhdXRvICYmIHZtLmxvY2F0aW9uLnF1ZXN0aW9uVGVtcGxhdGUgJiYgdm0ubG9jYXRpb24ucXVlc3Rpb25UZW1wbGF0ZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8dm0ubG9jYXRpb24ucXVlc3Rpb25UZW1wbGF0ZS5sZW5ndGggJiYgIXRhcmdldFRlbXBsYXRlOyBpKyspIHsKICAgICAgICAgICAgaWYgKHZtLmxvY2F0aW9uLnF1ZXN0aW9uVGVtcGxhdGVbaV0udGl0bGUgPT0gYXV0bykKICAgICAgICAgICAgICB0YXJnZXRUZW1wbGF0ZSA9IHZtLmxvY2F0aW9uLnF1ZXN0aW9uVGVtcGxhdGVbaV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHZtLnJwSGVhZGVyID0gdGFyZ2V0VGVtcGxhdGUgPyB0YXJnZXRUZW1wbGF0ZS5ycDEgOiB2bS5sb2NhdGlvbi5sb2NhdGlvbkVtYWlscyA/IHZtLmxvY2F0aW9uLmxvY2F0aW9uRW1haWxzWzBdLnN1YmplY3QgOiAiSG93IEFyZSBXZSBEb2luZz8iOwogICAgICAgIHZtLnJwTGluZTIgPSB0YXJnZXRUZW1wbGF0ZSA/IHRhcmdldFRlbXBsYXRlLnJwMiA6IHZtLmxvY2F0aW9uLmxvY2F0aW9uRW1haWxzID8gdm0ubG9jYXRpb24ubG9jYXRpb25FbWFpbHNbMF0uYm9keSA6ICJZb3VyIHNhdGlzZmFjdGlvbiBpcyBvdXIgdG9wIHByaW9yaXR5LCBhbmQgd2UnZCBsb3ZlIHRvIGhlYXIgZnJvbSB5b3UuIFBsZWFzZSB0YWtlIGEgZmV3IHNlY29uZHMgdG8gbGV0IHVzIGtub3cgaG93IHdlJ3JlIGRvaW5nLiI7CiAgICAgICAgdm0ucnBMaW5lMyA9IHRhcmdldFRlbXBsYXRlID8gdGFyZ2V0VGVtcGxhdGUucnAzIDogJyc7CiAgICAgIH0KICAgIH0sCiAgICBnZXRMb2NhdGlvbigpIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgTG9jYXRpb25TZXJ2aWNlLmdldEFub255bW91c0xvY2F0aW9uKHRoaXMuJHJvdXRlLnBhcmFtcy5sb2MpLnRoZW4oCiAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgIHZtLmxvY2F0aW9uID0gcmVzcG9uc2U7CiAgICAgICAgICBpZih2bS4kcm91dGUucGFyYW1zICYmIHZtLiRyb3V0ZS5wYXJhbXMudGVtcGxhdGUgJiYgdm0uJHJvdXRlLnBhcmFtcy50ZW1wbGF0ZS5pbmNsdWRlcygnQ0EnKSkgewogICAgICAgICAgICB2bS5nZXRDYW1wYWlnbigpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdm0uZ2V0QXV0b21hdGlvbigpOwogICAgICAgICAgfQogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RpdGxlJylbMF0udGV4dCA9IHJlc3BvbnNlLm5hbWUgKyAnIC0gSG93IGFyZSB3ZSBkb2luZz8nOwogICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfSwKICAgIHN1Ym1pdEZlZWRiYWNrKHJhdGluZykgewogICAgICBpZiAoIXRoaXMuc3VibWl0dGluZ0ZlZWRiYWNrKSB7CiAgICAgICAgdGhpcy5zdWJtaXR0aW5nRmVlZGJhY2sgPSB0cnVlOwogICAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgICAgRmVlZGJhY2tTZXJ2aWNlLmxlYXZlUHJpdmF0ZUZlZWRiYWNrKHRoaXMuJHJvdXRlLnBhcmFtcy5sb2MsIHRoaXMuJHJvdXRlLnBhcmFtcy5jaWQsIHJhdGluZywgdGhpcy4kcm91dGUucGFyYW1zLnNyYywgdm0uJHJvdXRlLnBhcmFtcy50ZW1wbGF0ZSkudGhlbigKICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5yb3RhdG9ySW5kZXggIT0gJ25vbmUnKSB7CiAgICAgICAgICAgICAgdmFyIHJlcGxhY2VtZW50VXJsID0gJy9yZXZpZXdSZWRpcmVjdC8nICsgdm0uJHJvdXRlLnBhcmFtcy5sb2MgKyAnLycgKyB2bS4kcm91dGUucGFyYW1zLmNpZCArICcvJyArIHJlc3BvbnNlLnJvdGF0b3JJbmRleCArICcvJyArIHJlc3BvbnNlLmRhdGU7CiAgICAgICAgICAgICAgaWYgKHZtLiRyb3V0ZS5wYXJhbXMudGVtcGxhdGUgJiYgdm0uJHJvdXRlLnBhcmFtcy50ZW1wbGF0ZSAhPSAndW5kZWZpbmVkJykgcmVwbGFjZW1lbnRVcmwgKz0gJy8nICsgdm0uJHJvdXRlLnBhcmFtcy50ZW1wbGF0ZTsKICAgICAgICAgICAgICByZXBsYWNlbWVudFVybCArPSAnP3I9JyArIHJhdGluZzsKICAgICAgICAgICAgICB2bS4kcm91dGVyLnB1c2gocmVwbGFjZW1lbnRVcmwpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhciByZXBsYWNlbWVudFVybCA9ICcvbGVhdmVSZXZpZXcvJyArIHZtLiRyb3V0ZS5wYXJhbXMubG9jICsgJy8nICsgdm0uJHJvdXRlLnBhcmFtcy5jaWQgKyAnLycgKyB2bS4kcm91dGUucGFyYW1zLnJhdGluZyArICcvJyAKICAgICAgICAgICAgICBpZiAodm0uJHJvdXRlLnBhcmFtcy50ZW1wbGF0ZSAmJiB2bS4kcm91dGUucGFyYW1zLnRlbXBsYXRlICE9ICd1bmRlZmluZWQnKSByZXBsYWNlbWVudFVybCArPSAnLycgKyB2bS4kcm91dGUucGFyYW1zLnRlbXBsYXRlOwogICAgICAgICAgICAgIHJlcGxhY2VtZW50VXJsICs9ICcvJyArIHJlc3BvbnNlLmRhdGU7CiAgICAgICAgICAgICAgdm0uJHJvdXRlci5yZXBsYWNlKHJlcGxhY2VtZW50VXJsKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIHZtLnN1Ym1pdHRpbmdGZWVkYmFjayA9IGZhbHNlOwogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["LeaveFeedback.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LeaveFeedback.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"feedback-page\">\n    <div class=\"feedback-card\">\n      <div class=\"feedback-logo\">\n        <span v-if=\"location.locationStyle && location.locationStyle.logo\">\n          <img class=\"feedback-logo-img\" :src=\"'data:image/png;base64,' + location.locationStyle.logo\"/>\n        </span>\n        <span v-if=\"!location.locationStyle.logo && !location.unloaded\" style=\"color: #4fcbc5\"><i class=\"far fa-building fa-7x\"></i></span>\n      </div>\n      <div class=\"feedback-text\">\n        <div class=\"feedback-text-header\">{{rpHeader}}</div>\n        <div class=\"feedback-text-line2\">{{rpLine2}}</div>\n        <div class=\"feedback-text-line3\">{{rpLine3}}</div>\n      </div>\n      <div class=\"feedback-options\">\n        <el-button circle @click.once=\"submitFeedback(1)\" :style=\"{'background-color': location.locationStyle.buttonColor}\">1</el-button>\n        <el-button circle @click.once=\"submitFeedback(2)\" :style=\"{'background-color': location.locationStyle.buttonColor}\">2</el-button>\n        <el-button circle @click.once=\"submitFeedback(3)\" :style=\"{'background-color': location.locationStyle.buttonColor}\">3</el-button>\n        <el-button circle @click.once=\"submitFeedback(4)\" :style=\"{'background-color': location.locationStyle.buttonColor}\">4</el-button>\n        <el-button circle @click.once=\"submitFeedback(5)\" :style=\"{'background-color': location.locationStyle.buttonColor}\">5</el-button>\n      </div>\n      <div class=\"feedback-undertext\">\n        <span>Terrible</span>\n        <span>Excellent</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport FeedbackService from './../services/FeedbackService'\nimport LocationService from './../services/LocationService'\nimport {EventService} from '../main'\nimport CampaignService from '../services/CampaignService'\n\nexport default {\n  name: 'leaveFeedback',\n  data: function() {\n    return {\n      submittingFeedback: false,\n      location: { locationStyle: {}, landingPage: {}, unloaded: true },\n      rpHeader: '',\n      rpLine2: '',\n      rpLine3: ''\n    }\n  },\n  created() {\n    this.getLocation();\n    if (this.$route.params.src == 'SMS') {\n      FeedbackService.logLinkClick(this.$route.params.cid).then(\n        function(response) {\n          // Success!\n        }, function(error) {\n          console.log(error);\n      });\n    }\n  },\n  methods: {\n    getCampaign() {\n      let vm = this;\n      CampaignService.getCampaign(vm.$route.params.template).then(response => {\n        let landing = response.landingPage;\n        let subject = response.emailDetails.subject;\n        vm.rpHeader = subject;\n        vm.rp3 = landing.emailNotDisplayed;\n      })\n    },\n    getAutomation() {\n      var vm = this;\n      let auto = vm.$route.params.template;\n      if(auto && auto.includes(':')) {\n        let autoObj = auto.split(':');\n        AutomationService.getRedirectAutomation(autoObj[0], autoObj[1]).then(response => {\n          let landing = response.action.landingPage;\n          vm.rpHeader = landing.lp1;\n          vm.rpLine2 = landing.lp2;\n          vm.rpLine3 = landing.lp3;\n        })\n      } else {\n        var targetTemplate = null;\n        if (auto && vm.location.questionTemplate && vm.location.questionTemplate.length > 0) {\n          for (var i=0; i<vm.location.questionTemplate.length && !targetTemplate; i++) {\n            if (vm.location.questionTemplate[i].title == auto)\n              targetTemplate = vm.location.questionTemplate[i];\n          }\n        }\n        vm.rpHeader = targetTemplate ? targetTemplate.rp1 : vm.location.locationEmails ? vm.location.locationEmails[0].subject : \"How Are We Doing?\";\n        vm.rpLine2 = targetTemplate ? targetTemplate.rp2 : vm.location.locationEmails ? vm.location.locationEmails[0].body : \"Your satisfaction is our top priority, and we'd love to hear from you. Please take a few seconds to let us know how we're doing.\";\n        vm.rpLine3 = targetTemplate ? targetTemplate.rp3 : '';\n      }\n    },\n    getLocation() {\n      var vm = this;\n      LocationService.getAnonymousLocation(this.$route.params.loc).then(\n        function(response) {\n          vm.location = response;\n          if(vm.$route.params && vm.$route.params.template && vm.$route.params.template.includes('CA')) {\n            vm.getCampaign();\n          } else {\n            vm.getAutomation();\n          }\n          document.getElementsByTagName('title')[0].text = response.name + ' - How are we doing?';\n        }, function(error) {\n          console.log(error);\n      });\n    },\n    submitFeedback(rating) {\n      if (!this.submittingFeedback) {\n        this.submittingFeedback = true;\n        var vm = this;\n        FeedbackService.leavePrivateFeedback(this.$route.params.loc, this.$route.params.cid, rating, this.$route.params.src, vm.$route.params.template).then(\n          function(response) {\n            if (response.rotatorIndex != 'none') {\n              var replacementUrl = '/reviewRedirect/' + vm.$route.params.loc + '/' + vm.$route.params.cid + '/' + response.rotatorIndex + '/' + response.date;\n              if (vm.$route.params.template && vm.$route.params.template != 'undefined') replacementUrl += '/' + vm.$route.params.template;\n              replacementUrl += '?r=' + rating;\n              vm.$router.push(replacementUrl);\n            } else {\n              var replacementUrl = '/leaveReview/' + vm.$route.params.loc + '/' + vm.$route.params.cid + '/' + vm.$route.params.rating + '/' \n              if (vm.$route.params.template && vm.$route.params.template != 'undefined') replacementUrl += '/' + vm.$route.params.template;\n              replacementUrl += '/' + response.date;\n              vm.$router.replace(replacementUrl);\n            }\n          }, function (error) {\n            vm.submittingFeedback = false;\n            console.log(error);\n        });\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.feedback-card {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  width: 700px;\n  max-width: 100%;\n  height: auto;\n  box-shadow: 0 6px 12px rgba(0, 0, 0, .15);\n  border-radius: 12px;\n  background: white;\n  padding: 20px;\n  box-sizing: border-box;\n  text-align: center;\n}\n.feedback-page {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 20px;\n  box-sizing: border-box;\n  height: 100vh;\n  background: #f2f2f2;\n}\n\n.feedback-logo {\n  max-width: 90%;\n  width: 360px;\n  min-width: 150px;\n  padding-bottom: 20px;\n  padding-top: 20px;\n}\n\n.feedback-logo-img {\n  width: 100%;\n  max-width: 100%;\n}\n.feedback-text::before {\n  content: '';\n  display: block;\n  width: 60%;\n  height: 1px;\n  margin: auto;\n  background: #9a9a9a35;\n  margin-bottom: 40px;\n}\n\n.feedback-text {\n  font-size: 14px;\n  line-height: 24px;\n}\n\n.feedback-text-header {\n  padding-bottom: 30px;\n  box-sizing: border-box;\n  font-size: 35px;\n  font-family: 'Montserrat',-apple-system,BlinkMacSystemFont,Gudea,Roboto,Helvetica Neue,Segoe UI,Helvetica,Arial,sans-serif;\n  color: #424242;\n}\n\n.feedback-text-line2 {\n  font-size: 16px;\n  font-family: 'Montserrat',-apple-system,BlinkMacSystemFont,Gudea,Roboto,Helvetica Neue,Segoe UI,Helvetica,Arial,sans-serif;\n  color: #757575;\n  line-height: 30px;\n  padding-left: 20px;\n  padding-right: 20px;\n}\n\n.feedback-text-line3 {\n  padding: 10px;\n  font-size: 22px;\n  line-height: 28px;\n  color: #757575;\n  margin-bottom: 10px;\n}\n\n.feedback-options {\n  display: flex;\n  justify-content: space-between;\n  width: 360px;\n  max-width: 100%;\n  margin-bottom: 10px;\n}\n.feedback-options button {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 60px;\n  height: 60px;\n  min-width: 48px;\n  min-height: 48px;\n  font-size: 28px;\n  color: white;\n  font-weight: 600;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, .16);\n}\n\n.feedback-undertext {\n  display: flex;\n  justify-content: space-between;\n  width: 360px;\n  max-width: 100%;\n  color: #757575;\n}\n\n.feedback-undertext span {\n  text-align: center;\n  display: inline-block;\n  font-size: 14px;\n}\n\n.feedback-undertext-spacer {\n  width: calc(85% - 75px);\n  max-width: 420px;\n}\n\n@media only screen and (max-width: 420px) {\n  .feedback-text-header {\n    font-size: 24px;\n  }\n  .feedback-page {\n    width: 100%;\n    padding: 0;\n    max-width: 100%;\n  }\n  .feedback-card {\n    width: 100%;\n    max-width: 100%;\n  }\n  .feedback-options button {\n\n    font-size: 24px;\n  }\n  .feedback-undertext {\n    width: 100%;\n    max-width: 100%;\n  }\n}\n</style>\n"]}]}