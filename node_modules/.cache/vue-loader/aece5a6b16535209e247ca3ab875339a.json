{"remainingRequest":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/Reports/FlowReport.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/Reports/FlowReport.vue","mtime":1581270622000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMaW5lQ2hhcnQgZnJvbSAnLi8uLi9DaGFydHMvTGluZUNoYXJ0JwppbXBvcnQgQmFyQ2hhcnQgZnJvbSAnLi8uLi9DaGFydHMvQmFyQ2hhcnQnCmltcG9ydCBSZXBvcnRTZXJ2aWNlIGZyb20gJy4vLi4vLi4vc2VydmljZXMvUmVwb3J0U2VydmljZScKaW1wb3J0IFVzZXJTZXJ2aWNlIGZyb20gJy4vLi4vLi4vc2VydmljZXMvVXNlclNlcnZpY2UnCmltcG9ydCB7RXZlbnRTZXJ2aWNlfSBmcm9tICcuLi8uLi9tYWluJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdmbG93UmVwb3J0JywKICBjb21wb25lbnRzOiB7TGluZUNoYXJ0LCBCYXJDaGFydH0sCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBzdGFydERhdGU6ICcxOTcwLTAxLTAxJywKICAgICAgZW5kRGF0ZTogJzIwNzAtMDEtMDEnLAogICAgICByZXBvcnREYXRhOiB7fSwKICAgICAgZG93bmxvYWRDb250ZW50OiAnJywKICAgICAgbGluZUNoYXJ0T3B0aW9uczogewogICAgICAgIG1haW50YWluQXNwZWN0UmF0aW86IGZhbHNlLAogICAgICAgIHNjYWxlczogewogICAgICAgICAgeUF4ZXM6IFt7CiAgICAgICAgICAgIHRpY2tzOiB7CiAgICAgICAgICAgICAgbWluOiAwLyosCiAgICAgICAgICAgICAgbWF4OiAxMDAsCiAgICAgICAgICAgICAgc3RlcFNpemU6IDI1LAogICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIHZhbHVlcykgewogICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlICsgJyUnOwogICAgICAgICAgICAgIH0qLwogICAgICAgICAgICB9CiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHRpY2tzOiB7CiAgICAgICAgICAgICAgbWluOiAwLAogICAgICAgICAgICAgIG1heDogMTAwLAogICAgICAgICAgICAgIHN0ZXBTaXplOiAyNSwKICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24odmFsdWUsIGluZGV4LCB2YWx1ZXMpIHsKICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSArICclJzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGlkOiAncGVyY2VudC1heGlzJwogICAgICAgICAgfV0KICAgICAgICB9LAogICAgICAgIGxlZ2VuZDogewogICAgICAgICAgZGlzcGxheTogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgdGl0bGU6IHsKICAgICAgICAgIGRpc3BsYXk6IGZhbHNlCiAgICAgICAgfSwKICAgICAgICBjdWJpY0ludGVycG9sYXRpb25Nb2RlOiAnbW9ub3RvbmUnCiAgICAgIH0sCiAgICAgIGJhckNoYXJ0T3B0aW9uczogewogICAgICAgIG1haW50YWluQXNwZWN0UmF0aW86IGZhbHNlLAogICAgICAgIGJhclBlcmNlbnRhZ2U6IDAuOCwKICAgICAgICBzY2FsZXM6IHsKICAgICAgICAgIHlBeGVzOiBbewogICAgICAgICAgICB0aWNrczogewogICAgICAgICAgICAgIG1pbjogMAogICAgICAgICAgICB9CiAgICAgICAgICB9XQogICAgICAgIH0sCiAgICAgICAgbGVnZW5kOiB7CiAgICAgICAgICBkaXNwbGF5OiBmYWxzZQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIFVzZXJTZXJ2aWNlLmxvZ1BhZ2VWaXNpdCgnZmxvd1JlcG9ydCcpOwogICAgbGV0IHRvZGF5c0RhdGUgPSBEYXRlLm5vdygpOwogICAgbGV0IHRvZGF5UGx1c09uZSA9IHRvZGF5c0RhdGUrODY1MDAwMDA7CiAgICB2YXIgc2l4TW9udGhzQWdvID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSAxMDAwICogNjAgKiA2MCAqIDI0ICogMTgwOwogICAgdGhpcy5zdGFydERhdGUgPSBuZXcgRGF0ZShzaXhNb250aHNBZ28pLnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDEwKTsKICAgIHRoaXMuZW5kRGF0ZSA9IG5ldyBEYXRlKHRvZGF5UGx1c09uZSkudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApOwogICAgdGhpcy5nZXRGbG93UmVwb3J0RGF0YSgpOwogICAgRXZlbnRTZXJ2aWNlLiRvbigibG9jYXRpb25DaGFuZ2UiLCB0aGlzLmdldEZsb3dSZXBvcnREYXRhKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uKCkgewogICAgRXZlbnRTZXJ2aWNlLiRvZmYoImxvY2F0aW9uQ2hhbmdlIiwgdGhpcy5nZXRGbG93UmVwb3J0RGF0YSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRGbG93UmVwb3J0RGF0YSgpIHsKICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgInNob3ciKTsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdmFyIGxvY2F0aW9uSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9jYXRpb25JZCcpOwogICAgICBSZXBvcnRTZXJ2aWNlLmdldEZsb3dSZXBvcnREYXRhKG5ldyBEYXRlKHRoaXMuc3RhcnREYXRlKS5nZXRUaW1lKCksIG5ldyBEYXRlKHRoaXMuZW5kRGF0ZSkuZ2V0VGltZSgpLCBsb2NhdGlvbklkKQogICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgT2JqZWN0LmtleXMocmVzcG9uc2UpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdm0ucmVwb3J0RGF0YSA9IHJlc3BvbnNlOwoKICAgICAgICAgICAgdmFyIGxhYmVsQXJyYXkgPSBbXTsKICAgICAgICAgICAgbGFiZWxBcnJheS5wdXNoKCdDdXN0b21lcnMgU3VibWl0dGVkJyk7CiAgICAgICAgICAgIGxhYmVsQXJyYXkucHVzaCgnQ3VzdG9tZXJzIENvbnRhY3RlZCcpOwogICAgICAgICAgICBsYWJlbEFycmF5LnB1c2goJ0N1c3RvbWVycyBPcGVuZWQvQ2xpY2tlZCcpOwogICAgICAgICAgICBsYWJlbEFycmF5LnB1c2goJ0N1c3RvbWVycyBSZXNwb25kZWQnKTsKICAgICAgICAgICAgbGFiZWxBcnJheS5wdXNoKCdDdXN0b21lcnMgUm91dGVkJyk7CiAgICAgICAgICAgIGxhYmVsQXJyYXkucHVzaCgnQ3VzdG9tZXJzIExlZnQgUmV2aWV3Jyk7CiAgICAgICAgICAgIHZtLnJlcG9ydERhdGEuZmxvd0NoYXJ0RGF0YSA9IHsKICAgICAgICAgICAgICBsYWJlbHM6IGxhYmVsQXJyYXksCiAgICAgICAgICAgICAgZGF0YXNldHM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgbGFiZWw6ICdSYXcgQ3VzdG9tZXIgTnVtYmVycycsCiAgICAgICAgICAgICAgICAgIGRhdGE6IFtyZXNwb25zZS5jdXN0b21lcnNTdWJtaXR0ZWQsIHJlc3BvbnNlLmN1c3RvbWVyc0NvbnRhY3RlZCwgcmVzcG9uc2UuY3VzdG9tZXJzRW5nYWdlZCwgcmVzcG9uc2UuY3VzdG9tZXJzUmVzcG9uZGVkLCByZXNwb25zZS5jdXN0b21lcnNSb3V0ZWQsIHJlc3BvbnNlLmN1c3RvbWVyc1Jldmlld2VkXSwKICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSg4NCwgODQsIDg0LCAwLjUpJwogICAgICAgICAgICAgICAgfSx7CiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ29udmVyc2lvbiBSYXRlIGJ5IFN0ZXAnLAogICAgICAgICAgICAgICAgICBkYXRhOiBbMTAwLCBNYXRoLnJvdW5kKHJlc3BvbnNlLmNvbnRhY3RlZFN0ZXBSYXRlICogMTAwKSwgTWF0aC5yb3VuZChyZXNwb25zZS5lbmdhZ2VkU3RlcFJhdGUgKiAxMDApLCBNYXRoLnJvdW5kKHJlc3BvbnNlLnJlc3BvbmRlZFN0ZXBSYXRlICogMTAwKSwgTWF0aC5yb3VuZChyZXNwb25zZS5yb3V0ZWRTdGVwUmF0ZSAqIDEwMCksIE1hdGgucm91bmQocmVzcG9uc2UucmV2aWV3ZWRTdGVwUmF0ZSAqIDEwMCldLAogICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDc5LCAyMDMsIDE5NywgMC41KScsCiAgICAgICAgICAgICAgICAgIHlBeGlzSUQ6ICdwZXJjZW50LWF4aXMnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXQogICAgICAgICAgICB9OwogICAgICAgICAgICB2bS5yZXBvcnREYXRhLnJhdGluZ3NCcmVha2Rvd24gPSB7CiAgICAgICAgICAgICAgbGFiZWxzOiBbMSwyLDMsNCw1XSwKICAgICAgICAgICAgICBkYXRhc2V0czogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBkYXRhOiBbdm0ucmVwb3J0RGF0YS5jdXN0b21lcnNSZXNwb25kZWQxLCB2bS5yZXBvcnREYXRhLmN1c3RvbWVyc1Jlc3BvbmRlZDIsIHZtLnJlcG9ydERhdGEuY3VzdG9tZXJzUmVzcG9uZGVkMywgdm0ucmVwb3J0RGF0YS5jdXN0b21lcnNSZXNwb25kZWQ0LCB2bS5yZXBvcnREYXRhLmN1c3RvbWVyc1Jlc3BvbmRlZDVdLAogICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDc5LCAyMDMsIDE5NywgMSknLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF0KICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIik7CiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIik7CiAgICAgIH0pOwogICAgfSwKICAgIGRhdGVDaGFuZ2UoKSB7CiAgICAgIHRoaXMuZ2V0Rmxvd1JlcG9ydERhdGEoKTsKICAgIH0sCiAgICBkb3dubG9hZERhdGEoKSB7CiAgICAgIHZhciBjc3ZEb3dubG9hZCA9ICcsJyArCiAgICAgICAgJ0lucHV0cywnICsKICAgICAgICAnQ29udmVydGVkLCcgKwogICAgICAgICdDb252ZXJzaW9uIFJhdGVcblxuJzsKICAgICAgY3N2RG93bmxvYWQgKz0gJ0N1c3RvbWVycywnICsKICAgICAgICB0aGlzLnJlcG9ydERhdGEuY3VzdG9tZXJzU3VibWl0dGVkICsgJywnICsKICAgICAgICB0aGlzLnJlcG9ydERhdGEuY3VzdG9tZXJzU3VibWl0dGVkICsgJywnICsKICAgICAgICAnMTAwJVxuJzsKICAgICAgY3N2RG93bmxvYWQgKz0gJ0NvbnRhY3RlZCwnICsKICAgICAgICB0aGlzLnJlcG9ydERhdGEuY3VzdG9tZXJzU3VibWl0dGVkICsgJywnICsKICAgICAgICB0aGlzLnJlcG9ydERhdGEuY3VzdG9tZXJzQ29udGFjdGVkICsgJywnICsKICAgICAgICB0aGlzLnJlcG9ydERhdGEuY29udGFjdGVkUmF0ZSArICdcbic7CiAgICAgIGNzdkRvd25sb2FkICs9ICdPcGVuZWQvQ2xpY2tlZCwnICsKICAgICAgICB0aGlzLnJlcG9ydERhdGEuY3VzdG9tZXJzQ29udGFjdGVkICsgJywnICsKICAgICAgICB0aGlzLnJlcG9ydERhdGEuY3VzdG9tZXJzRW5nYWdlZCArICcsJyArCiAgICAgICAgdGhpcy5yZXBvcnREYXRhLmVuZ2FnZWRSYXRlICsgJ1xuJzsKICAgICAgY3N2RG93bmxvYWQgKz0gJ1JlcG9uZGVkLCcgKwogICAgICAgIHRoaXMucmVwb3J0RGF0YS5jdXN0b21lcnNFbmdhZ2VkICsgJywnICsKICAgICAgICB0aGlzLnJlcG9ydERhdGEuY3VzdG9tZXJzUmVzcG9uZGVkICsgJywnICsKICAgICAgICB0aGlzLnJlcG9ydERhdGEucmVzcG9uZGVkUmF0ZSArICdcbic7CiAgICAgIGNzdkRvd25sb2FkICs9ICdSb3V0ZWQsJyArCiAgICAgICAgdGhpcy5yZXBvcnREYXRhLmN1c3RvbWVyc1Jlc3BvbmRlZCArICcsJyArCiAgICAgICAgdGhpcy5yZXBvcnREYXRhLmN1c3RvbWVyc1JvdXRlZCArICcsJyArCiAgICAgICAgdGhpcy5yZXBvcnREYXRhLnJvdXRlZFJhdGUgKyAnXG4nOwogICAgICBjc3ZEb3dubG9hZCArPSAnUmV2aWV3ZWQsJyArCiAgICAgICAgdGhpcy5yZXBvcnREYXRhLmN1c3RvbWVyc1JvdXRlZCArICcsJyArCiAgICAgICAgdGhpcy5yZXBvcnREYXRhLmN1c3RvbWVyc1Jldmlld2VkICsgJywnICsKICAgICAgICB0aGlzLnJlcG9ydERhdGEucmV2aWV3ZWRSYXRlICsgJ1xuJzsKCiAgICAgIHZhciBNSU1FX1RZUEUgPSAidGV4dC9jc3YiOwogICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3ZEb3dubG9hZF0sIHt0eXBlOiBNSU1FX1RZUEV9KTsKICAgICAgdmFyIGNzdlVSTCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICB2YXIgdGVtcExpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgIHRlbXBMaW5rLmhyZWYgPSBjc3ZVUkw7CiAgICAgIHRlbXBMaW5rLnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLCAncmVwb3J0LmNzdicpOwogICAgICB0ZW1wTGluay5jbGljaygpOwogICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRlbXBMaW5rKTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["FlowReport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkJA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FlowReport.vue","sourceRoot":"src/components/Reports","sourcesContent":["<template>\n  <div class=\"flowreport-container\">\n    <div class=\"report-header\"></div>\n    <div class=\"report-body\">\n      <div class=\"report-controls\">\n        <div class=\"title\" style=\"font-family: FuturaPTDemi;font-weight: bolder;\">Opiniion Report</div>\n        <div class=\"report-controls-right\">\n          <div class=\"report-date-range\">\n            <span>From <input  placeholder=\"YYYY-MM-DD\" v-model=\"startDate\"/> to <input type=\"date\"  placeholder=\"YYYY-MM-DD\" v-model=\"endDate\"/> <button class=\"date-button\" @click=\"dateChange()\">Refresh</button> </span>\n          </div>\n          <div class=\"report-download\">\n            <button @click=\"downloadData()\">Download data</button>\n          </div>\n        </div>\n      </div>\n      <div v-if=\"this.reportData\" class=\"review-numbers\">\n        <div style=\"font-family: FuturaPTDemi; font-weight: bolder;\">Reviews</div>\n        <div class=\"review-numbers-tiles\">\n          <div class=\"review-numbers-tile\">\n            <div class=\"review-numbers-tile-header\">Google Rating Change</div>\n            <div>\n              <div class=\"review-numbers-data\">\n                <div>{{reportData.googleStart || 0}} initial rating</div>\n                <div>{{reportData.googleCurrent || 0}} current rating</div>\n              </div>\n              <div v-if=\"reportData.ratingChange > 0\" class=\"review-numbers-change\" v-bind:class=\"{success: (reportData.ratingChange > 0)}\">\n                +{{reportData.ratingChange || 0}} change\n              </div>\n            </div>\n          </div>\n          <div class=\"review-numbers-tile\">\n            <div class=\"review-numbers-tile-header\">Google Review Count Change</div>\n            <div>\n              <div class=\"review-numbers-data\">\n                <div>{{reportData.reviewStart || 0}} initial reviews</div>\n                <div>{{reportData.customersReviewed || 0}} current reviews</div>\n                <div>{{reportData.reviewChange || 0}} added by Opiniion</div>\n              </div>\n              <div v-if=\"reportData.reviewChangePercent > 0\" class=\"review-numbers-change\" v-bind:class=\"{success: (reportData.reviewChangePercent > .1)}\">\n                +{{Math.round(reportData.reviewChangePercent * 100)}}% change\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div v-if=\"this.reportData\">\n        <div class=\"flowreport-line-chart\">\n          <div style=\"font-family: FuturaPTDemi; font-weight: bolder;\">Conversion Rates</div>\n          <line-chart :chart-data=\"reportData.flowChartData\" :options=\"lineChartOptions\" />\n        </div>\n        <div class=\"flowreport-tiles\">\n          <div class=\"flowreport-conversion-table\" style=\"flex: 1 0 200px;\">\n            <div class=\"flowreport-tile-header\">Overall Conversion Numbers</div>\n            <div>\n              <div>Submitted</div>\n              <div class=\"flowreport-floatr\">{{reportData.customersSubmitted}}</div>\n            </div>\n            <div>\n              <div>Contacted</div>\n              <div class=\"flowreport-floatr\">{{reportData.customersContacted}}</div>\n            </div>\n            <div>\n              <div>Opened/Clicked</div>\n              <div class=\"flowreport-floatr\">{{reportData.customersEngaged}}</div>\n            </div>\n            <div>\n              <div>Responded</div>\n              <div class=\"flowreport-floatr\">{{reportData.customersResponded}}</div>\n            </div>\n            <div>\n              <div>Routed</div>\n              <div class=\"flowreport-floatr\">{{reportData.customersRouted}}</div>\n            </div>\n            <div>\n              <div>Left Review</div>\n              <div class=\"flowreport-floatr\">{{reportData.reviewsInPeriod}}</div>\n            </div>\n          </div>\n          <div class=\"flowreport-conversion-table\" style=\"flex: 1 0 200px;\">\n            <div class=\"flowreport-tile-header\">Conversion Rates</div>\n            <div>\n              <div>Submitted</div>\n              <div class=\"flowreport-floatr\">{{ reportData.customersSubmitted ? '100%' : '-'}}</div>\n            </div>\n            <div v-bind:class=\"{success: (reportData.contactedRate > .9)}\">\n              <div>Contacted</div>\n              <div class=\"flowreport-floatr\">{{reportData.customersSubmitted ? (Math.round(reportData.contactedRate * 10000)/100) + '%' : '-'}}</div>\n            </div>\n            <div v-bind:class=\"{success: (reportData.engagedRate > .5)}\">\n              <div>Opened/Clicked</div>\n              <div class=\"flowreport-floatr\">{{reportData.customersSubmitted ? (Math.round(reportData.engagedRate * 10000)/100) + '%' : '-'}}</div>\n            </div>\n            <div v-bind:class=\"{success: (reportData.respondedRate > .4)}\">\n              <div>Responded</div>\n              <div class=\"flowreport-floatr\">{{reportData.customersSubmitted ? (Math.round(reportData.respondedRate * 10000)/100) + '%' : '-'}}</div>\n            </div>\n            <div v-bind:class=\"{success: (reportData.routedRate > .2)}\">\n              <div>Routed</div>\n              <div class=\"flowreport-floatr\">{{reportData.customersSubmitted ? (Math.round(reportData.routedRate * 10000)/100) + '%' : '-'}}</div>\n            </div>\n            <div v-bind:class=\"{success: (reportData.reviewedRate > .2)}\">\n              <div>Left Review</div>\n              <div class=\"flowreport-floatr\">{{reportData.customersSubmitted ? Math.min(100, (Math.round(reportData.reviewedRate * 10000)/100)) + '%' : '-'}}</div>\n            </div>\n          </div>\n          <div v-if=\"this.reportData.customersContactedEmail > 0 && this.reportData.customersContactedSMS > 0\" style=\"flex: 1 0 200px;\">\n            <div class=\"flowreport-tile-header\">Email vs. SMS</div>\n            <div style=\"display: flex; justify-content: space-evenly;\">\n              <div style=\"padding-right: 10px;\">\n                <div style=\"font-weight: bold; margin-bottom: 10px;\">Email</div>\n                <div>{{reportData.customersContactedEmail}} sent</div>\n                <div>{{reportData.customersEngagedEmail}} opened</div>\n                <div>{{reportData.customersRespondedEmail}} responded</div>\n              </div>\n              <div>\n                <div style=\"font-weight: bold; margin-bottom: 10px;\">SMS</div>\n                <div>{{reportData.customersContactedSMS}} sent</div>\n                <div>{{reportData.customersEngagedSMS}} clicked</div>\n                <div>{{reportData.customersRespondedSMS}} responded</div>\n              </div>\n            </div>\n          </div>\n          <div v-if=\"this.reportData.customersContactedEmail > 0 && this.reportData.customersContactedSMS == 0\" style=\"flex: 1 0 200px;\">\n            <div class=\"flowreport-tile-header\">Email</div>\n            <div>{{reportData.customersContactedEmail}} sent</div>\n            <div>{{reportData.customersEngagedEmail}} opened</div>\n            <div>{{reportData.customersRespondedEmail}} responded</div>\n          </div>\n          <div v-if=\"this.reportData.customersContactedEmail == 0 && this.reportData.customersContactedSMS > 0\" style=\"flex: 1 0 200px;\">\n            <div class=\"flowreport-tile-header\">SMS</div>\n            <div>{{reportData.customersContactedSMS}} sent</div>\n            <div>{{reportData.customersEngagedSMS}} clicked</div>\n            <div>{{reportData.customersRespondedSMS}} responded</div>\n          </div>\n          <div style=\"flex: 1 0 400px;\">\n            <div class=\"flowreport-tile-header\">Response Breakdown</div>\n            <bar-chart :chart-data=\"reportData.ratingsBreakdown\" :options=\"barChartOptions\" :height=\"110\" style=\"padding: 0; margin: 0;\" />\n          </div>\n        </div>\n      </div>\n    </div>\n    <iframe id=\"invisible\" style=\"display:none;\" src=\"downloadContent\"></iframe>\n  </div>\n</template>\n\n<script>\nimport LineChart from './../Charts/LineChart'\nimport BarChart from './../Charts/BarChart'\nimport ReportService from './../../services/ReportService'\nimport UserService from './../../services/UserService'\nimport {EventService} from '../../main'\n\nexport default {\n  name: 'flowReport',\n  components: {LineChart, BarChart},\n  data: function() {\n    return {\n      startDate: '1970-01-01',\n      endDate: '2070-01-01',\n      reportData: {},\n      downloadContent: '',\n      lineChartOptions: {\n        maintainAspectRatio: false,\n        scales: {\n          yAxes: [{\n            ticks: {\n              min: 0/*,\n              max: 100,\n              stepSize: 25,\n              callback: function(value, index, values) {\n                return value + '%';\n              }*/\n            }\n          }, {\n            ticks: {\n              min: 0,\n              max: 100,\n              stepSize: 25,\n              callback: function(value, index, values) {\n                return value + '%';\n              }\n            },\n            id: 'percent-axis'\n          }]\n        },\n        legend: {\n          display: true\n        },\n        title: {\n          display: false\n        },\n        cubicInterpolationMode: 'monotone'\n      },\n      barChartOptions: {\n        maintainAspectRatio: false,\n        barPercentage: 0.8,\n        scales: {\n          yAxes: [{\n            ticks: {\n              min: 0\n            }\n          }]\n        },\n        legend: {\n          display: false\n        }\n      }\n    }\n  },\n  created() {\n    UserService.logPageVisit('flowReport');\n    let todaysDate = Date.now();\n    let todayPlusOne = todaysDate+86500000;\n    var sixMonthsAgo = new Date().getTime() - 1000 * 60 * 60 * 24 * 180;\n    this.startDate = new Date(sixMonthsAgo).toISOString().substring(0, 10);\n    this.endDate = new Date(todayPlusOne).toISOString().substring(0, 10);\n    this.getFlowReportData();\n    EventService.$on(\"locationChange\", this.getFlowReportData);\n  },\n  beforeDestroy: function() {\n    EventService.$off(\"locationChange\", this.getFlowReportData);\n  },\n  methods: {\n    getFlowReportData() {\n      EventService.$emit(\"loading\", \"show\");\n      var vm = this;\n      var locationId = localStorage.getItem('locationId');\n      ReportService.getFlowReportData(new Date(this.startDate).getTime(), new Date(this.endDate).getTime(), locationId)\n        .then(function(response) {\n          if (response && Object.keys(response).length > 0) {\n            vm.reportData = response;\n\n            var labelArray = [];\n            labelArray.push('Customers Submitted');\n            labelArray.push('Customers Contacted');\n            labelArray.push('Customers Opened/Clicked');\n            labelArray.push('Customers Responded');\n            labelArray.push('Customers Routed');\n            labelArray.push('Customers Left Review');\n            vm.reportData.flowChartData = {\n              labels: labelArray,\n              datasets: [\n                {\n                  label: 'Raw Customer Numbers',\n                  data: [response.customersSubmitted, response.customersContacted, response.customersEngaged, response.customersResponded, response.customersRouted, response.customersReviewed],\n                  backgroundColor: 'rgba(84, 84, 84, 0.5)'\n                },{\n                  label: 'Conversion Rate by Step',\n                  data: [100, Math.round(response.contactedStepRate * 100), Math.round(response.engagedStepRate * 100), Math.round(response.respondedStepRate * 100), Math.round(response.routedStepRate * 100), Math.round(response.reviewedStepRate * 100)],\n                  backgroundColor: 'rgba(79, 203, 197, 0.5)',\n                  yAxisID: 'percent-axis'\n                }\n              ]\n            };\n            vm.reportData.ratingsBreakdown = {\n              labels: [1,2,3,4,5],\n              datasets: [\n                {\n                  data: [vm.reportData.customersResponded1, vm.reportData.customersResponded2, vm.reportData.customersResponded3, vm.reportData.customersResponded4, vm.reportData.customersResponded5],\n                  backgroundColor: 'rgba(79, 203, 197, 1)',\n                }\n              ]\n            };\n          }\n          EventService.$emit(\"loading\", \"hide\");\n        }, function(error) {\n          console.log(error);\n          EventService.$emit(\"loading\", \"hide\");\n      });\n    },\n    dateChange() {\n      this.getFlowReportData();\n    },\n    downloadData() {\n      var csvDownload = ',' +\n        'Inputs,' +\n        'Converted,' +\n        'Conversion Rate\\n\\n';\n      csvDownload += 'Customers,' +\n        this.reportData.customersSubmitted + ',' +\n        this.reportData.customersSubmitted + ',' +\n        '100%\\n';\n      csvDownload += 'Contacted,' +\n        this.reportData.customersSubmitted + ',' +\n        this.reportData.customersContacted + ',' +\n        this.reportData.contactedRate + '\\n';\n      csvDownload += 'Opened/Clicked,' +\n        this.reportData.customersContacted + ',' +\n        this.reportData.customersEngaged + ',' +\n        this.reportData.engagedRate + '\\n';\n      csvDownload += 'Reponded,' +\n        this.reportData.customersEngaged + ',' +\n        this.reportData.customersResponded + ',' +\n        this.reportData.respondedRate + '\\n';\n      csvDownload += 'Routed,' +\n        this.reportData.customersResponded + ',' +\n        this.reportData.customersRouted + ',' +\n        this.reportData.routedRate + '\\n';\n      csvDownload += 'Reviewed,' +\n        this.reportData.customersRouted + ',' +\n        this.reportData.customersReviewed + ',' +\n        this.reportData.reviewedRate + '\\n';\n\n      var MIME_TYPE = \"text/csv\";\n      var blob = new Blob([csvDownload], {type: MIME_TYPE});\n      var csvURL = window.URL.createObjectURL(blob);\n      var tempLink = document.createElement('a');\n      tempLink.href = csvURL;\n      tempLink.setAttribute('download', 'report.csv');\n      tempLink.click();\n      document.body.removeChild(tempLink);\n    }\n  }\n}\n</script>\n\n<style scoped>\n.report-controls {\n  width: 100%;\n  background: white;\n  border-radius: 1px;\n  box-shadow: 0px 2px 4px rgba(0,0,0,.25);\n  padding: 5px 0;\n  margin-bottom: 10px;\n  justify-content: space-between;\n  align-content: center;\n  align-items: center;\n}\n\n.title {\n  margin-left: 20px;\n  font-weight: bold;\n  font-size: 16px;\n}\n\n.success {\n  background: #4fcbc5;\n}\n\n.failure {\n  background: #f48d46;\n}\n\n.report-controls-right {\n  display: flex;\n}\n\n.report-controls button {\n  background: #4fcbc5;\n  margin: 10px 20px;\n  border-radius: 1px;\n  color: white;\n}\n\n.review-numbers {\n  background: white;\n  border-radius: 1px;\n  box-shadow: 0px 2px 4px rgba(0,0,0,.25);\n  padding: 10px;\n  margin-bottom: 10px;\n  align-content: center;\n  align-items: center;\n}\n\n.review-numbers-tiles {\n  padding: 10px;\n  background: white;\n  display: flex;\n  cursor: default;\n  flex-flow: wrap;\n  justify-content: space-evenly;\n}\n\n.review-numbers-tile {\n  font-size: 20px;\n  padding: 10px 20px;\n  text-align: center;\n}\n\n.review-numbers-tile-header {\n  font-size: 24px;\n  margin-bottom: 15px;\n  border-bottom: 1px solid #ccc;\n}\n\n.review-numbers-data {\n  float: left;\n}\n\n.review-numbers-change {\n  font-size: 40px;\n  float: right;\n  margin: 0 10px;\n  padding: 5px 10px;\n}\n\n.flowreport-line-chart {\n  padding: 10px;\n  background: white;\n}\n\n.flowreport-tiles {\n  padding: 10px;\n  background: white;\n  display: flex;\n  cursor: default;\n  flex-flow: wrap;\n}\n\n.flowreport-tiles>div {\n  width: 25%;\n  padding: 10px;\n  margin: 10px;\n  border: 1px solid #ccc;\n}\n\n.flowreport-conversion-table {\n}\n\n.flowreport-tile-header {\n  font-weight: bold;\n  font-size: 16px;\n  text-align: center;\n  margin-bottom: 10px;\n  min-height: 36px;\n}\n\n.flowreport-conversion-table div div{\n  display: inline-block;\n}\n\n.flowreport-floatr {\n  float: right;\n}\n</style>\n"]}]}