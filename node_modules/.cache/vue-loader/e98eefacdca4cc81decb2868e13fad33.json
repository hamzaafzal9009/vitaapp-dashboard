{"remainingRequest":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/RequestReview.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/RequestReview.vue","mtime":1581270622000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDdXN0b21lclNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvQ3VzdG9tZXJTZXJ2aWNlLmpzIjsKaW1wb3J0IExvY2F0aW9uU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9Mb2NhdGlvblNlcnZpY2UuanMiOwppbXBvcnQgQXV0b21hdGlvblNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvQXV0b21hdGlvblNlcnZpY2UuanMiOwppbXBvcnQgeyBFdmVudFNlcnZpY2UgfSBmcm9tICIuLi9tYWluIjsKaW1wb3J0IENhbXBhaWduU2VydmljZSBmcm9tICcuLi9zZXJ2aWNlcy9DYW1wYWlnblNlcnZpY2UnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJyZXF1ZXN0UmV2aWV3IiwKICBwcm9wczogWyJjdXN0b21lciIsICJjdXN0b21lckxpc3QiLCAibG9jYXRpb25TZWxlY3RlZCJdLAogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsgICAgICAKICAgICAgc291cmNlczogWydEZWZhdWx0J10sCiAgICAgIHRlbXBsYXRlT3B0aW9uczogW10sCiAgICAgIHJlcXVlc3RNb2RhbDogdHJ1ZSwKICAgICAgc2VsZWN0ZWRUZW1wbGF0ZToge30sCiAgICAgIGxvY0lkOiAnJywKICAgICAgdGhpc0N1c3RvbWVyTGlzdDogW10sCiAgICAgIGRlbGl2ZXJ5TWV0aG9kOiBbXQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy5jdXN0b21lcikgewogICAgICB0aGlzLnRoaXNDdXN0b21lckxpc3QgPSBbdGhpcy5jdXN0b21lcl07CiAgICAgIHRoaXMubG9jSWQgPSB0aGlzLmN1c3RvbWVyLmxvY2F0aW9uSWQ7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmxvY0lkID0gdGhpcy5sb2NhdGlvblNlbGVjdGVkOwogICAgICB0aGlzLnRoaXNDdXN0b21lckxpc3QgPSB0aGlzLmN1c3RvbWVyTGlzdDsKICAgIH0KICAgIHRoaXMuZ2V0TG9jYXRpb25PcHRpb25zKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjbG9zZU1vZGFsICgpIHsKICAgICAgdGhpcy4kZW1pdCgnY2xvc2UnKTsKICAgICAgdGhpcy5yZXF1ZXN0TW9kYWwgPSB0cnVlOwogICAgfSwKICAgIHRlc3RDaGFuZ2UoZXZlbnQpewogICAgICBjb25zb2xlLmxvZyhldmVudCk7CiAgICAgIHRoaXMuZGVsaXZlcnlNZXRob2QgPSB0aGlzLnNlbGVjdGVkVGVtcGxhdGUuY29udGFjdE1ldGhvZDsKICAgIH0sCiAgICBnZXRMb2NhdGlvbk9wdGlvbnMoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIENhbXBhaWduU2VydmljZS5nZXRDYW1wYWlnbnNCeUxvY2F0aW9uKHZtLmxvY0lkKS50aGVuKHJlc3BvbnNlID0+IHsgICAgICAgIAogICAgICAgIHZtLnRlbXBsYXRlT3B0aW9ucyA9IHJlc3BvbnNlLnJlc3VsdC5zb3J0KChhLCBiKSA9PiAoYS5uYW1lID4gYi5uYW1lKSA/IDEgOiAtMSk7CiAgICAgICAgdm0udGVtcGxhdGVPcHRpb25zID0gdm0udGVtcGxhdGVPcHRpb25zLmZpbHRlcihlID0+IGUuc3RhdHVzID09PSAnYWN0aXZlJyk7CiAgICAgICAgLy8gdm0uc2VsZWN0ZWRUZW1wbGF0ZSA9IHZtLnRlbXBsYXRlT3B0aW9uc1swXTsKICAgICAgICAvLyB2bS5kZWxpdmVyeU1ldGhvZCA9IHZtLnNlbGVjdGVkVGVtcGxhdGUuY29udGFjdE1ldGhvZDsKICAgICAgfSkKICAgIH0sCiAgICByZVJlcXVlc3QoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmKHZtLnNlbGVjdGVkVGVtcGxhdGUpIHsKICAgICAgICBDdXN0b21lclNlcnZpY2UucmVSZXF1ZXN0KCB2bS5sb2NJZCwgdm0udGhpc0N1c3RvbWVyTGlzdCwgdm0uc2VsZWN0ZWRUZW1wbGF0ZS5jYW1wYWlnbklkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIik7CiAgICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoCiAgICAgICAgICAgICJzdWNjZXNzTWVzc2FnZSIsCiAgICAgICAgICAgICJTdWNjZXNzISBUaGUgY3VzdG9tZXJzIHNlbGVjdGVkIHdpbGwgYmUgcmVjZWl2aW5nIHRoZWlyIHJlLXJlcXVlc3QgbWVzc2FnZSBzaG9ydGx5LiIKICAgICAgICAgICk7CiAgICAgICAgICB2bS4kZW1pdCgnY2xvc2UnKQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy8gY2xvc2VNb2RhbCgpIHsKICAgIC8vICAgdGhpcy4kZW1pdCgiY2xvc2VNb2RhbCIpOwogICAgLy8gICB0aGlzLnRlbXBsYXRlT3B0aW9ucyA9IFtdOwogICAgLy8gICB0aGlzLnNlbGVjdGVkVGVtcGxhdGUgPSAnJzsKICAgIC8vICAgdGhpcy50aGlzQ3VzdG9tZXJMaXN0ID0gW107CiAgICAvLyB9CiAgfQp9Owo="},{"version":3,"sources":["RequestReview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RequestReview.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-dialog class=\"request-review-modal\" title=\"Send a request to review\" width=\"600px\" center :show-close=\"false\" :visible.sync=\"requestModal\" :before-close=\"closeModal\">\n    <div class=\"dialog-body\">\n      <span>Select a template to send</span>\n      <el-select v-model=\"selectedTemplate\" @change=\"testChange($event)\" class=\"input-selector\" placeholder=\"Select One\">\n        <el-option v-for=\"(option, optionIndex) in templateOptions\" :key=\"optionIndex\" :value-key=\"option.campaignId\" :value=\"option\" :label=\"selectedTemplate.name\">\n          {{option.name}}\n        </el-option>\n      </el-select>\n      <div class=\"delivery-methods\" v-if=\"selectedTemplate && selectedTemplate.contactMethod && selectedTemplate.contactMethod.length > 1 \">\n        <span>Select delivery method(s)</span>\n        <el-select v-model=\"deliveryMethod\" class=\"input-selector\" multiple placeholder=\"Select Multiple\">\n          <el-option v-for=\"(method, deliveryIndex) in selectedTemplate.contactMethod\" :key=\"deliveryIndex\" :label=\"method\" :value=\"method\"></el-option>\n        </el-select>\n      </div>\n    </div>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button type=\"text\" @click=\"$emit('close')\">Cancel</el-button>\n      <el-button type=\"primary\" @click.once=\"reRequest()\">Send Request</el-button>\n    </span>\n  </el-dialog>\n  <!-- <div class=\"modal-mask\" @click=\"$emit('close')\">\n    <div class=\"modal-container\" @click.stop>\n      <div class=\"request-container\">\n          <div class=\"request-header\">\n              <div class=\"request-selection\">\n                <label>Select Template to Send:</label><br/>\n                  <select v-model=\"selectedTemplate\">\n                      <option v-if=\"templateOptions.length > 0\" v-for=\"option in templateOptions\" :value=\"option.data\">{{option.value}}</option>\n                  </select>\n              </div>\n              <div class=\"button-container\">\n                <span @click=\"$emit('close')\">Cancel</span>\n                <button @click.once=\"reRequest()\">Re-request</button>\n              </div>\n          </div>\n      </div>\n    </div>\n  </div> -->\n</template>\n\n<script>\nimport CustomerService from \"../services/CustomerService.js\";\nimport LocationService from \"../services/LocationService.js\";\nimport AutomationService from \"../services/AutomationService.js\";\nimport { EventService } from \"../main\";\nimport CampaignService from '../services/CampaignService';\n\nexport default {\n  name: \"requestReview\",\n  props: [\"customer\", \"customerList\", \"locationSelected\"],\n  data: function() {\n    return {      \n      sources: ['Default'],\n      templateOptions: [],\n      requestModal: true,\n      selectedTemplate: {},\n      locId: '',\n      thisCustomerList: [],\n      deliveryMethod: []\n    };\n  },\n  created() {\n    if (this.customer) {\n      this.thisCustomerList = [this.customer];\n      this.locId = this.customer.locationId;\n    } else {\n      this.locId = this.locationSelected;\n      this.thisCustomerList = this.customerList;\n    }\n    this.getLocationOptions();\n  },\n  methods: {\n    closeModal () {\n      this.$emit('close');\n      this.requestModal = true;\n    },\n    testChange(event){\n      console.log(event);\n      this.deliveryMethod = this.selectedTemplate.contactMethod;\n    },\n    getLocationOptions() {\n      let vm = this;\n      CampaignService.getCampaignsByLocation(vm.locId).then(response => {        \n        vm.templateOptions = response.result.sort((a, b) => (a.name > b.name) ? 1 : -1);\n        vm.templateOptions = vm.templateOptions.filter(e => e.status === 'active');\n        // vm.selectedTemplate = vm.templateOptions[0];\n        // vm.deliveryMethod = vm.selectedTemplate.contactMethod;\n      })\n    },\n    reRequest() {\n      let vm = this;\n      if(vm.selectedTemplate) {\n        CustomerService.reRequest( vm.locId, vm.thisCustomerList, vm.selectedTemplate.campaignId).then(response => {\n          EventService.$emit(\"loading\", \"hide\");\n          EventService.$emit(\n            \"successMessage\",\n            \"Success! The customers selected will be receiving their re-request message shortly.\"\n          );\n          vm.$emit('close')\n        });\n      }\n    },\n    // closeModal() {\n    //   this.$emit(\"closeModal\");\n    //   this.templateOptions = [];\n    //   this.selectedTemplate = '';\n    //   this.thisCustomerList = [];\n    // }\n  }\n};\n</script>\n\n<style scoped>\n\n.request-review-modal {\n  \n}\n.dialog-body, .delivery-methods span {\n  font-size: 14px;\n  text-transform: uppercase;\n  color: #757575;\n  font-weight: bold;\n  text-align: center;\n}\n.dialog-body :nth-child(3) {\n  margin-top: 40px;\n}\n.dialog-body {\n  display: flex;\n  flex-direction: column;\n  width: 320px;\n  margin: 40px auto;\n}\n.dialog-footer button {\n  width: 260px;\n}\n\n.input-selector {\n  width: 100%;\n  margin-top: 30px;\n}\n</style>\n"]}]}