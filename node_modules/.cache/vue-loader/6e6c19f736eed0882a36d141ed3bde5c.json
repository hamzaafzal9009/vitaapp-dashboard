{"remainingRequest":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/Reports/TotalUsers.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/Reports/TotalUsers.vue","mtime":1581270622000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMaW5lQ2hhcnQgZnJvbSAnLi8uLi9DaGFydHMvTGluZUNoYXJ0JwppbXBvcnQgUmVwb3J0U2VydmljZSBmcm9tICcuLy4uLy4uL3NlcnZpY2VzL1JlcG9ydFNlcnZpY2UnCmltcG9ydCB7RXZlbnRTZXJ2aWNlfSBmcm9tICcuLi8uLi9tYWluJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICd0b3RhbFVzZXJzUmVwb3J0JywKICBjb21wb25lbnRzOiB7TGluZUNoYXJ0fSwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIHN0YXJ0VGltZTogJzE5NzAtMDEtMDEnLAogICAgICBlbmRUaW1lOiAnMjA3MC0wMS0wMScsCiAgICAgIGNoYXJ0RGF0YToge30sCiAgICAgIGNoYXJ0T3B0aW9uczogewogICAgICAgIG1haW50YWluQXNwZWN0UmF0aW86IGZhbHNlLAogICAgICAgIHNjYWxlczogewogICAgICAgICAgeUF4ZXM6IFt7CiAgICAgICAgICAgIHRpY2tzOiB7CiAgICAgICAgICAgICAgbWluOiAwLAogICAgICAgICAgICAgIG1heDogNSwKICAgICAgICAgICAgICBzdGVwU2l6ZTogMQogICAgICAgICAgICB9CiAgICAgICAgICB9XQogICAgICAgIH0sCiAgICAgICAgbGVnZW5kOiB7CiAgICAgICAgICBkaXNwbGF5OiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgdGl0bGU6IHsKICAgICAgICAgIGRpc3BsYXk6IGZhbHNlCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRUb3RhbFVzZXJEYXRhKCk7CiAgICB2YXIgc2l4TW9udGhzQWdvID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSAxMDAwICogNjAgKiA2MCAqIDI0ICogMTgwOwogICAgdGhpcy5zdGFydFRpbWUgPSBuZXcgRGF0ZShzaXhNb250aHNBZ28pLnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDEwKTsKICAgIHRoaXMuZW5kVGltZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0VG90YWxVc2VyRGF0YSgpIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgUmVwb3J0U2VydmljZS5nZXRUb3RhbFVzZXJEYXRhKCkKICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgdm0uY2hhcnREYXRhID0gcmVzcG9uc2U7CiAgICAgICAgICB2YXIgbWF4ID0gMCwgc3RlcCA9IDE7CiAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8cmVzcG9uc2UuZGF0YXNldHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgZm9yICh2YXIgaj0wOyBqPHJlc3BvbnNlLmRhdGFzZXRzW2ldLmRhdGEubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YXNldHNbaV0uZGF0YVtqXSA+IG1heCkgbWF4ID0gcmVzcG9uc2UuZGF0YXNldHNbaV0uZGF0YVtqXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdm0uY2hhcnRPcHRpb25zLnNjYWxlcy55QXhlc1swXS50aWNrcy5tYXggPSBtYXggKyAoMTAgLSBtYXggJSAxMCk7CiAgICAgICAgICB2bS5jaGFydE9wdGlvbnMuc2NhbGVzLnlBeGVzWzBdLnRpY2tzLnN0ZXBTaXplID0gTWF0aC5jZWlsKG1heCAvIDEwKTsKICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBkYXRlQ2hhbmdlKCkgewogICAgfSwKICAgIGRvd25sb2FkRGF0YSgpIHsKICAgICAgdmFyIGRvd25sb2FkU3RyaW5nID0gJ2RhdGE6dGV4dC9jc3Y7Y2hhcnNldD11dGYtOCwnOwoKICAgICAgZm9yICh2YXIgaj0wOyBqPHRoaXMuY2hhcnREYXRhLmxhYmVscy5sZW5ndGg7IGorKykgewogICAgICAgIGRvd25sb2FkU3RyaW5nICs9IHRoaXMuY2hhcnREYXRhLmxhYmVsc1tqXSArICcsJzsKICAgICAgfQogICAgICBkb3dubG9hZFN0cmluZyA9IGRvd25sb2FkU3RyaW5nLnN1YnN0cmluZygwLCBkb3dubG9hZFN0cmluZy5sZW5ndGggLSAxKSArICdcbic7CgogICAgICBmb3IgKHZhciBpPTA7IGk8dGhpcy5jaGFydERhdGEuZGF0YXNldHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKHZhciBqPTA7IGo8dGhpcy5jaGFydERhdGEuZGF0YXNldHNbaV0uZGF0YS5sZW5ndGg7IGorKykgewogICAgICAgICAgZG93bmxvYWRTdHJpbmcgKz0gdGhpcy5jaGFydERhdGEuZGF0YXNldHNbaV0uZGF0YVtqXSArICcsJzsKICAgICAgICB9CiAgICAgICAgZG93bmxvYWRTdHJpbmcgKz0gJ1xuJzsKICAgICAgfQoKICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgZG93bmxvYWRTdHJpbmcpOwogICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLCAnVG90YWxVc2Vycy5jc3YnKTsKICAgICAgbGluay5jbGljaygpOwogICAgfQogIH0KfQo="},{"version":3,"sources":["TotalUsers.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TotalUsers.vue","sourceRoot":"src/components/Reports","sourcesContent":["<template>\n  <div class=\"report-container\">\n    <div class=\"report-header\">Total Users Submitted</div>\n    <div class=\"report-body\">\n      <div class=\"report-controls\">\n        <div class=\"report-date-range\">\n          <span>From <input type=\"date\" placeholder=\"YYYY-MM-DD\" v-model=\"startTime\" @change=\"dateChange()\"/> to <input type=\"date\" placeholder=\"YYYY-MM-DD\" v-model=\"endTime\" @change=\"dateChange()\"/></span>\n        </div>\n        <div class=\"report-download\">\n          <button @click=\"downloadData()\">Download data</button>\n        </div>\n      </div>\n      <div class=\"report-chart\">\n        <line-chart :chart-data=\"chartData\" :options=\"chartOptions\"/>\n      </div>\n      <div class=\"report-table\">\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport LineChart from './../Charts/LineChart'\nimport ReportService from './../../services/ReportService'\nimport {EventService} from '../../main'\n\nexport default {\n  name: 'totalUsersReport',\n  components: {LineChart},\n  data: function() {\n    return {\n      startTime: '1970-01-01',\n      endTime: '2070-01-01',\n      chartData: {},\n      chartOptions: {\n        maintainAspectRatio: false,\n        scales: {\n          yAxes: [{\n            ticks: {\n              min: 0,\n              max: 5,\n              stepSize: 1\n            }\n          }]\n        },\n        legend: {\n          display: false\n        },\n        title: {\n          display: false\n        }\n      }\n    }\n  },\n  created() {\n    this.getTotalUserData();\n    var sixMonthsAgo = new Date().getTime() - 1000 * 60 * 60 * 24 * 180;\n    this.startTime = new Date(sixMonthsAgo).toISOString().substring(0, 10);\n    this.endTime = new Date().toISOString().substring(0, 10);\n  },\n  methods: {\n    getTotalUserData() {\n      var vm = this;\n      ReportService.getTotalUserData()\n        .then(function(response) {\n          vm.chartData = response;\n          var max = 0, step = 1;\n          for (var i=0; i<response.datasets.length; i++) {\n            for (var j=0; j<response.datasets[i].data.length; j++) {\n              if (response.datasets[i].data[j] > max) max = response.datasets[i].data[j];\n            }\n          }\n          vm.chartOptions.scales.yAxes[0].ticks.max = max + (10 - max % 10);\n          vm.chartOptions.scales.yAxes[0].ticks.stepSize = Math.ceil(max / 10);\n        }, function(error) {\n          console.log(error);\n      });\n    },\n    dateChange() {\n    },\n    downloadData() {\n      var downloadString = 'data:text/csv;charset=utf-8,';\n\n      for (var j=0; j<this.chartData.labels.length; j++) {\n        downloadString += this.chartData.labels[j] + ',';\n      }\n      downloadString = downloadString.substring(0, downloadString.length - 1) + '\\n';\n\n      for (var i=0; i<this.chartData.datasets.length; i++) {\n        for (var j=0; j<this.chartData.datasets[i].data.length; j++) {\n          downloadString += this.chartData.datasets[i].data[j] + ',';\n        }\n        downloadString += '\\n';\n      }\n\n      var link = document.createElement('a');\n      link.setAttribute('href', downloadString);\n      link.setAttribute('download', 'TotalUsers.csv');\n      link.click();\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n"]}]}