{"remainingRequest":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/Dashboard.vue?vue&type=style&index=0&id=aae30ed8&scoped=true&lang=css&","dependencies":[{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/Dashboard.vue","mtime":1581270622000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojZGFzaGJvYXJkLWNvbnRhaW5lciB7CiAgaGVpZ2h0OiBhdXRvOwogIG1hcmdpbjogYXV0bzsKICBtYXgtd2lkdGg6IDE5MjBweDsKICBtaW4taGVpZ2h0OiAxNTAwcHg7IC8qIFRoaXMgaXMgYSB0ZW1wb3JhcnkgZml4IHRvIGRhc2hib2FyZCBmb290ZXIgZ29pbmcgYmVoaW5kL2luLWZyb250IG9mIGNhcmRzICovCn0KCi5lbC1tYWluIHsKICBwYWRkaW5nOiAwOwp9Ci5kYXNoYm9hcmQtY29udGFpbmVyIHsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtd3JhcDogd3JhcDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Cn0KCgouZGFzaGJvYXJkLWdyb3VwIHsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtd3JhcDogbm93cmFwOwogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKfQoKQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAxMDAwcHgpIHsKICAuZGFzaGJvYXJkLWdyb3VwIHsKICAgIGZsZXgtd3JhcDogd3JhcDsKICB9Cn0KCg=="},{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmOA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Dashboard.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"dashboard-container\">\n    <!-- <g-m-b-link-banner class=\"banner-position\" />     -->\n    <div class=\"not-assigned\" v-if=\"userRole == 'none'\" ><h3>You have not been assigned a location yet, please check back in a few minutes.</h3></div>\n    <el-container>\n      <el-main>\n        <el-row v-if=\"userRole !== 'none' && ['agent', 'manager', 'owner', 'admin'].indexOf(userRole) > -1\">\n          <el-col :xs=\"24\" :sm=\"12\" :lg=\"6\">\n            <new-customers />\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"12\" :lg=\"6\">\n            <total-customers />\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"12\" :lg=\"6\">\n            <active-campaigns />\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"12\" :lg=\"6\">\n            <opiniion-rating />\n          </el-col>\n        </el-row>\n        <el-row v-if=\"userRole !== 'none' && ['agent', 'manager', 'owner', 'admin'].indexOf(userRole) > -1\">\n          <el-col :xs=\"24\" :sm=\"8\">\n            <public-rating />\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"8\">\n            <active-campaign-summary />\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"8\">\n            <private-feedback />\n          </el-col>\n        </el-row>\n        <el-row v-if=\"userRole !== 'none' && ['agent', 'manager', 'owner', 'admin'].indexOf(userRole) > -1\">\n          <el-col :xs=\"24\" :sm=\"12\">\n            <recent-public-reviews />\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"12\">\n            <recent-private-feedback />\n          </el-col>\n        </el-row>\n        <el-row v-if=\"userRole !== 'none' && ['agent', 'manager', 'owner', 'admin'].indexOf(userRole) > -1\">\n          <el-col :xs=\"24\" :sm=\"12\">\n            <word-cloud />\n          </el-col>\n          <el-col :xs=\"24\" :sm=\"12\">\n            <interaction-feed />\n          </el-col>\n        </el-row>\n      </el-main>\n    </el-container>\n    <FirstLoginModal v-if=\"firstLoginModalOpen\" @close=\"closeModal\"/>\n    <!-- <recent-private-feedback style=\"flex: 1; min-width: 40%; box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25);\" v-if=\"['agent', 'manager', 'owner'].indexOf(userRole) > -1\"/>\n    <recent-public-reviews style=\"flex: 1; min-width: 40%;box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25);\" v-if=\"['agent', 'manager', 'owner'].indexOf(userRole) > -1\"/>\n    <word-cloud style=\"flex: 1; min-width: 40%;box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25);\" v-if=\"['agent', 'manager', 'owner'].indexOf(userRole) > -1\"/>\n    <interaction-feed style=\"flex: 1; min-width: 40%;box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25);\" v-if=\"['agent', 'manager', 'owner'].indexOf(userRole) > -1\"/> -->\n    <!-- <dedupe-customers style=\"flex: 1; max-width: 40%;box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25);\" v-if=\"['admin'].indexOf(userRole) > -1\"/> -->\n  </div>\n</template>\n\n<script>\nimport LineChart from './Charts/LineChart'\nimport DoughnutChart from './Charts/DoughnutChart'\nimport DashboardTile from './DashboardComponents/DashboardTile'\nimport GMBLinkBanner from './DashboardComponents/GMBLinkBanner'\n\nimport RecentPrivateFeedback from './DashboardComponents/RecentPrivateFeedback'\nimport RecentPositiveFeedback from './DashboardComponents/RecentPositiveFeedback'\nimport RecentPublicReviews from './DashboardComponents/RecentPublicReviews'\nimport WordCloud from './DashboardComponents/WordCloud'\nimport InteractionFeed from './DashboardComponents/InteractionFeed'\nimport NewCustomers from './DashboardComponents/NewCustomers'\nimport TotalCustomers from './DashboardComponents/TotalCustomers'\nimport ActiveCampaigns from './DashboardComponents/ActiveCampaigns'\nimport OpiniionRating from './DashboardComponents/OpiniionRating'\nimport PublicRating from './DashboardComponents/PublicRating'\nimport ActiveCampaignSummary from './DashboardComponents/ActiveCampaignSummary'\nimport PrivateFeedback from './DashboardComponents/PrivateFeedback'\nimport BusinessInfo from './DashboardComponents/BusinessInfo'\nimport OpiniionAggregate from './DashboardComponents/OpiniionAggregate'\nimport ReviewsBySource from './DashboardComponents/ReviewsBySource'\nimport DedupeCustomers from './DashboardComponents/DedupeCustomers'\n\n// Modals\nimport FirstLoginModal from './FirstLoginModal';\n// Modals End\n\nimport DashboardService from './../services/DashboardService'\nimport UserService from './../services/UserService'\nimport config from '../config.js';\nimport {EventService} from '../main'\n\nexport default {\n  name: 'dashboard',\n  components: {\n    LineChart,\n    DoughnutChart,\n    DashboardTile,\n    RecentPrivateFeedback,\n    RecentPositiveFeedback,\n    RecentPublicReviews,\n    GMBLinkBanner,\n    WordCloud,\n    NewCustomers,\n    TotalCustomers,\n    ActiveCampaigns,\n    OpiniionRating,\n    PublicRating,\n    ActiveCampaignSummary,\n    PrivateFeedback,\n    InteractionFeed,\n    BusinessInfo,\n    OpiniionAggregate,\n    ReviewsBySource,\n    DedupeCustomers,\n    FirstLoginModal\n  },\n  showCustomerServiceContactBox: true,\n  data: function() {\n    return {\n      dashboardData: {},\n      firstLoginModalOpen: false,\n      userRole: null,\n      searchText: '',\n      userId: '',\n      gmbUrl: ''\n    }\n  },\n  mounted() {\n    },\n  created() {\n    this.gmbUrl = config.gmbUrl;\n    this.currentUser = JSON.parse(localStorage.getItem('currentUser'));\n    this.userId = this.currentUser.userId;\n    this.showFirstLoginModal();\n    this.getDashboardData();\n    this.checkLocationsForGMB();\n    EventService.$on('locationChange', this.setNewLocation);\n  },\n  beforeDestroy: function () {\n    EventService.$off('locationChange', this.setNewLocation);\n  },\n  methods: {\n    showFirstLoginModal () {\n      var vm = this;\n      UserService.getCurrentUser().then(\n        function(response) {\n          if (response.viewedWalkthrough) {\n            vm.firstLoginModalOpen = false;\n          } else {\n            vm.firstLoginModalOpen = true;\n            UserService.markViewedWalkthrough(response.email);\n          }\n        },\n        function(error) {\n          console.log(error);\n        }\n      );\n    },\n    closeModal () {\n      var vm = this;\n      vm.firstLoginModalOpen = false;\n    },\n    showBanner() {\n      let vm = this;\n      let checkForServed = localStorage.getItem('GMBShown');\n      if(!checkForServed && vm.displayed && !vm.currentUser.isSuperAdmin) {\n        this.$notify.closeAll()\n        this.$notify({\n          title: 'Link Google Business to Opiniion',\n          type: 'info',\n          dangerouslyUseHTMLString: true,\n          message: `<p>It looks like you have locations that aren't linked up to your Google My Business pages!<br /><a class=\"hvr-underline-from-center\" href=\"${vm.gmbUrl}/${vm.userId}\">Click here</a> to link them up and get access to more advanced features.</p>`\n        });\n        localStorage.setItem('GMBShown', true);\n      }\n    },\n    checkLocationsForGMB() {\n      let vm = this;\n      let businesses = JSON.parse(localStorage.getItem('locationOptions'));\n      if(businesses) {\n        vm.displayed = businesses.some((e) => {\n          return !e.gmb\n        })\n        vm.showBanner();\n      }\n    },\n    getDashboardData() {\n      var vm = this;\n      UserService.getUserRole().then(\n        function(response) {\n          vm.userRole = response.role;\n          /*if (vm.userRole == 'admin') {\n            DashboardService.getAdminDashboardData()\n              .then(function(response) {\n                vm.adminData = response;\n              }, function(error) {\n                console.log(error);\n              });\n          } else {*/\n            DashboardService.getDashboardData()\n              .then(function(response) {\n                vm.dashboardData = response;\n\n              }, function(error) {\n                console.log(error);\n              });\n          /*}*/\n        }, function(error) {\n          console.log(error);\n      });\n    },\n    setNewLocation() {\n      this.getDashboardData();\n    },\n    spoofUser(user) {\n      var vm = this;\n      UserService.spoofUser(user._id).then(\n        function(response) {\n          EventService.$emit('spoofingUser');\n        }, function(error) {\n          console.log(error);\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n#dashboard-container {\n  height: auto;\n  margin: auto;\n  max-width: 1920px;\n  min-height: 1500px; /* This is a temporary fix to dashboard footer going behind/in-front of cards */\n}\n\n.el-main {\n  padding: 0;\n}\n.dashboard-container {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n}\n\n\n.dashboard-group {\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n}\n\n@media only screen and (max-width: 1000px) {\n  .dashboard-group {\n    flex-wrap: wrap;\n  }\n}\n\n</style>\n"]}]}