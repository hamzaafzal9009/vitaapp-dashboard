{"remainingRequest":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/AddUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/AddUser.vue","mtime":1581270622000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBVc2VyU2VydmljZSBmcm9tICIuLy4uL3NlcnZpY2VzL1VzZXJTZXJ2aWNlIjsKaW1wb3J0IHsgRXZlbnRTZXJ2aWNlIH0gZnJvbSAiLi4vbWFpbiI7CmltcG9ydCBpbWFnZUZpbGUgZnJvbSAiLi4vYXNzZXRzL2ltYWdlRmlsZS5qcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImFkZFVzZXIiLAogIHByb3BzOiBbInNlbGVjdGVkVXNlciIsICJhc3NpZ25Vc2VyIl0sCgogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgdmFyIGNoZWNrVXNlckVtYWlsID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBVc2VyU2VydmljZS5maW5kVXNlckJ5RW1haWwodmFsdWUpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmKHJlc3BvbnNlICYmIHJlc3BvbnNlLmZvdW5kKSB7CiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdVc2VyIGVtYWlsIGFscmVhZHkgZm91bmQsIHBsZWFzZSBlbnRlciBhbm90aGVyIHZhbGlkIGVtYWlsLicpKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgIH0KICAgICAgfSkKICAgIH07CiAgICByZXR1cm4gewogICAgICBwYWdlQWN0aW9uOiAiQ3JlYXRlIE5ldyIsCiAgICAgIHN0ZXA6IDEsCiAgICAgIGlzU3VwZXJBZG1pbjogIiIsCiAgICAgIHVzZXI6IHsKICAgICAgICBpc1N1cGVyQWRtaW46IGZhbHNlLAogICAgICAgIGZpcnN0TmFtZTogIiIsCiAgICAgICAgbGFzdE5hbWU6ICIiLAogICAgICAgIGVtYWlsOiAiIgogICAgICB9LAogICAgICB1c2VyTG9jYXRpb25zOiBbXSwKICAgICAgbmV3VXNlckxvY2F0aW9uOiB7CiAgICAgICAgdXNlcklkOiAiIiwKICAgICAgICBsb2NhdGlvbklkOiAiIiwKICAgICAgICByb2xlOiAiIiwKICAgICAgICBnZXRFbWFpbDogdHJ1ZSwKICAgICAgICBjb21tdW5pY2F0aW9uczogW10KICAgICAgfSwKICAgICAgbG9jYXRpb25PcHRpb25zOiBbXSwKICAgICAgcm9sZXM6IFsKICAgICAgICB7IGxhYmVsOiAiT3duZXIiLCB2YWx1ZTogIm93bmVyIiB9LAogICAgICAgIHsgbGFiZWw6ICJNYW5hZ2VyIiwgdmFsdWU6ICJtYW5hZ2VyIiB9LAogICAgICAgIHsgbGFiZWw6ICJBZ2VudCIsIHZhbHVlOiAiYWdlbnQiIH0sCiAgICAgICAgeyBsYWJlbDogIk5vbmUiLCB2YWx1ZTogIm5vbmUiIH0KICAgICAgXSwKICAgICAgY29tbXVuaWNhdGlvbnNPcHRpb25zOiBbCiAgICAgICAgIk5ldyBSZXZpZXciLAogICAgICAgICJQb3RlbnRpYWwgTmVnYXRpdmUgUmV2aWV3IiwKICAgICAgICAiTmV3IEN1c3RvbWVyIE1lc3NhZ2UiCiAgICAgIF0sCiAgICAgIG9wZW5lZE1vZGFsOiB0cnVlLAogICAgICBzaG93TG9nb1NpemVFcnJvcjogZmFsc2UsCiAgICAgIHVzZXJJbWFnZUJhY2tncm91bmQ6ICIiLAogICAgICB1c2VyUnVsZXM6IHsKICAgICAgICBmaXJzdE5hbWU6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICJQbGVhc2UgaW5wdXQgZmlyc3QgbmFtZSIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgbGFzdE5hbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICJQbGVhc2UgaW5wdXQgbGFzdCBuYW1lIiwgdHJpZ2dlcjogImJsdXIiIH0KICAgICAgICBdLAogICAgICAgIGVtYWlsOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0eXBlOiAiZW1haWwiLAogICAgICAgICAgICBtZXNzYWdlOiAiUGxlYXNlIGlucHV0IHZhbGlkIGVtYWlsIiwKICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB2YWxpZGF0b3I6IGNoZWNrVXNlckVtYWlsLAogICAgICAgICAgICBtZXNzYWdlOiAiVXNlciBlbWFpbCBhbHJlYWR5IGZvdW5kLCBwbGVhc2UgZW50ZXIgYW5vdGhlciB2YWxpZCBlbWFpbC4iLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgaXNEaXNhYmxlZCgpIHsKICAgICAgaWYgKHRoaXMudXNlci5lbWFpbCkgcmV0dXJuIHRoaXMudXNlci5lbWFpbC5pbmRleE9mKCIgIikgPj0gMDsKICAgIH0sCiAgICBjdXJyZW50VGl0bGUoKSB7CiAgICAgIGlmICh0aGlzLnN0ZXAgPT0gMSkgewogICAgICAgIHJldHVybiAiQWRkIE5ldyBVc2VyIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gIkFzc2lnbiBVc2VyIFJvbGVzICYgTG9jYXRpb25zIjsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLnNlbGVjdGVkVXNlcikgewogICAgICB0aGlzLnBhZ2VBY3Rpb24gPSAiVXBkYXRlIjsKICAgICAgdGhpcy51c2VyID0gdGhpcy5zZWxlY3RlZFVzZXI7CiAgICAgIGlmICh0aGlzLnVzZXIudXNlckltYWdlICYmIHRoaXMudXNlci51c2VySW1hZ2VbMF0gIT09ICIsIikgewogICAgICAgIHRoaXMuc2V0VXNlckltYWdlQmFja2dyb3VuZCgKICAgICAgICAgICJkYXRhOmltYWdlL3BuZztiYXNlNjQsIiArIHRoaXMudXNlci51c2VySW1hZ2UKICAgICAgICApOwogICAgICB9IGVsc2UgaWYgKHRoaXMudXNlci51c2VySW1hZ2UgJiYgdGhpcy51c2VyLnVzZXJJbWFnZVswXSA9PSAiLCIpIHsKICAgICAgICB0aGlzLnNldFVzZXJJbWFnZUJhY2tncm91bmQoCiAgICAgICAgICAiZGF0YTppbWFnZS9wbmc7YmFzZTY0IiArIHRoaXMudXNlci51c2VySW1hZ2UKICAgICAgICApOwogICAgICB9CiAgICB9CiAgICB2YXIgdm0gPSB0aGlzOwogICAgdm0uaXNTdXBlckFkbWluID0gSlNPTi5wYXJzZSgKICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImN1cnJlbnRVc2VyIikKICAgICkuaXNTdXBlckFkbWluOwogICAgdm0ubG9jYXRpb25PcHRpb25zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibG9jYXRpb25PcHRpb25zIikpOwogICAgdm0udXNlckxvY2F0aW9ucy5wdXNoKHZtLm5ld1VzZXJMb2NhdGlvbik7CiAgICBsZXQgaW1nVGV4dCA9IGltYWdlRmlsZS5pbWdCbG9jaygpOwogICAgdGhpcy51c2VySW1hZ2VCYWNrZ3JvdW5kID0gJ3VybCgiZGF0YTppbWFnZS9wbmc7YmFzZTY0LCcgKyBpbWdUZXh0OwogIH0sCiAgbWV0aG9kczogewogICAgb25DaGFuZ2UoKSB7CiAgICAgIHRoaXMudXNlci5lbWFpbCA9IHRoaXMudXNlci5lbWFpbC50cmltKCk7CiAgICAgIHRoaXMudXNlci5lbWFpbCA9IHRoaXMudXNlci5lbWFpbC5yZXBsYWNlKCIgIiwgIiIpOwogICAgfSwKICAgIHZhbGlkYXRlVXNlcihydWxlRm9ybSkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICB2bS4kcmVmc1tydWxlRm9ybV0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdm0uc3RlcCA9IDI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmVVc2VyKCkgewogICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAic2hvdyIpOwogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICBVc2VyU2VydmljZS5zYXZlVXNlcih0aGlzLnVzZXIpLnRoZW4oCiAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZSkgewogICAgICAgICAgICB2bS51c2VyID0gcmVzcG9uc2U7CiAgICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIik7CiAgICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgic3VjY2Vzc01lc3NhZ2UiLCAiSG9vcmF5ISBVc2VyIFNhdmVkLiIpOwogICAgICAgICAgICB2bS5zYXZlVXNlckxvY2F0aW9ucyhyZXNwb25zZSk7ICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHZtLmNsb3NlTW9kYWwoKTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICBpZiAoZXJyb3IgPT0gIlVzZXIgYWxyZWFkeSBleGlzdHMuIikgewogICAgICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAiaGlkZSIpOwogICAgICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoCiAgICAgICAgICAgICAgIndhcm5pbmdNZXNzYWdlIiwKICAgICAgICAgICAgICAiVXNlciBhbHJlYWR5IGV4aXN0cywgcGxlYXNlIGNvbnRhY3QgYW4gYWRtaW5pc3RyYXRvciBpZiB5b3UgYmVsaWV2ZSB0aGlzIG1lc3NhZ2UgaXMgaW4gZXJyb3IuIgogICAgICAgICAgICApOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgImhpZGUiKTsKICAgICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KAogICAgICAgICAgICAgICJlcnJvck1lc3NhZ2UiLAogICAgICAgICAgICAgICJTb3JyeSwgc29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4uIgogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgKTsKICAgIH0sCiAgICBzYXZlVXNlckxvY2F0aW9ucyh1c2VyKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZtLnVzZXJMb2NhdGlvbnMubWFwKGxvY2F0aW9uID0+IHsKICAgICAgICBpZiAobG9jYXRpb24ucm9sZSA9PSAiIiB8fCBsb2NhdGlvbi5yb2xlID09ICJOb25lIikgewogICAgICAgICAgbG9jYXRpb24uZ2V0c0VtYWlsID0gZmFsc2U7CiAgICAgICAgICBVc2VyU2VydmljZS5zYXZlVXNlckxvY2F0aW9uKAogICAgICAgICAgICB1c2VyLnVzZXJJZCwKICAgICAgICAgICAgbG9jYXRpb24ubG9jYXRpb25JZCwKICAgICAgICAgICAgbG9jYXRpb24ucm9sZSwKICAgICAgICAgICAgbG9jYXRpb24uY29tbXVuaWNhdGlvbnMKICAgICAgICAgICkudGhlbigKICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgICAgICB2bS5jbG9zZU1vZGFsKCkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICk7CiAgICAgICAgICB0aGlzLnVuYXNzaWduVXNlcihsb2NhdGlvbik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIFVzZXJTZXJ2aWNlLnNhdmVVc2VyTG9jYXRpb24oCiAgICAgICAgICAgIHVzZXIudXNlcklkLAogICAgICAgICAgICBsb2NhdGlvbi5sb2NhdGlvbklkLAogICAgICAgICAgICBsb2NhdGlvbi5yb2xlLAogICAgICAgICAgICBsb2NhdGlvbi5jb21tdW5pY2F0aW9ucwogICAgICAgICAgKS50aGVuKAogICAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkgeyAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgdm0uY2xvc2VNb2RhbCgpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgdm0uY2xvc2VNb2RhbCgpOwogICAgICB9KTsKICAgIH0sCiAgICB1bmFzc2lnblVzZXI6IGZ1bmN0aW9uKGxvY2F0aW9uKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIFVzZXJTZXJ2aWNlLnJlbW92ZVVzZXJMb2NhdGlvbih2bS51c2VyLnVzZXJJZCwgbG9jYXRpb24ubG9jYXRpb25JZCkudGhlbigKICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge30sCiAgICAgICAgZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9CiAgICAgICk7CiAgICB9LAogICAgYWRkVXNlckxvY2F0aW9uKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICB2bS51c2VyTG9jYXRpb25zLnB1c2goSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2bS5uZXdVc2VyTG9jYXRpb24pKSk7CiAgICB9LAogICAgY2xvc2VNb2RhbDogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuJGVtaXQoImNsb3NlTW9kYWwiKTsKICAgICAgdGhpcy51c2VyID0ge307CiAgICAgIHRoaXMub3BlbmVkTW9kYWwgPSBmYWxzZTsKICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgImhpZGUiKTsKICAgIH0sCiAgICBzd2l0Y2hNb2RhbChldmVudCwgdXNlcikgewogICAgICB0aGlzLiRlbWl0KCJzd2l0Y2hNb2RhbCIsIHRoaXMudXNlcik7CiAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIik7CiAgICB9LAogICAgdXNlckltYWdlQ2hhbmdlOiBmdW5jdGlvbigpIHsKICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLiRyZWZzLmltYWdlVXBsb2FkOwogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICB0aGlzLnNob3dMb2dvU2l6ZUVycm9yID0gZmFsc2U7CiAgICAgIHRoaXMudXNlckltYWdlQmFja2dyb3VuZCA9IHt9OwogICAgICBpZiAoZWxlbWVudC5maWxlcyAmJiBlbGVtZW50LmZpbGVzWzBdKSB7CiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgaWYgKHJlYWRlci5yZXN1bHQubGVuZ3RoID4gNTAwMDAwICogMS4zNikgewogICAgICAgICAgICB2bS5zaG93TG9nb1NpemVFcnJvciA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2bS51c2VyLnVzZXJJbWFnZSA9IHJlYWRlci5yZXN1bHQuc3Vic3RyaW5nKDIyKTsKICAgICAgICAgICAgdm0uc2V0VXNlckltYWdlQmFja2dyb3VuZChyZWFkZXIucmVzdWx0KTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGVsZW1lbnQuZmlsZXNbMF0pOwogICAgICB9CiAgICB9LAogICAgc2V0VXNlckltYWdlQmFja2dyb3VuZDogZnVuY3Rpb24ocmF3RGF0YSkgewogICAgICB0aGlzLnVzZXJJbWFnZUJhY2tncm91bmQgPSAidXJsKCciICsgcmF3RGF0YSArICInKSI7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["AddUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddUser.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-dialog\n    :title=\"currentTitle\"\n    :width=\"step == 1 ? '600px' : '1000px'\"\n    center\n    :show-close=\"false\"\n    :visible.sync=\"openedModal\"\n    :before-close=\"closeModal\"\n  >\n    <div\n      v-show=\"step == 2\"\n      class=\"user-info\"\n    >{{user.firstName + ' ' + user.lastName + ' - ' + user.email}}</div>\n    <div class=\"user-inputs\" v-if=\"step == 1\">\n      <el-form :model=\"user\" ref=\"userForm\" :rules=\"userRules\">\n        <el-row :gutter=\"20\" type=\"flex\" class=\"row-bg\">\n          <el-col :span=\"12\">\n            <label class=\"input-label\">First Name</label>\n            <el-form-item prop=\"firstName\">\n              <el-input v-model=\"user.firstName\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <label class=\"input-label\">Last Name</label>\n            <el-form-item prop=\"lastName\">\n              <el-input v-model=\"user.lastName\"></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row type=\"flex\" class=\"row-bg\">\n          <el-col :span=\"24\">\n            <label class=\"input-label\">Email</label>\n            <el-form-item prop=\"email\">\n              <el-input type=\"email\" v-model=\"user.email\"></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n    </div>\n    <div class=\"content-container\">\n      <div class=\"user-inputs\" :class=\"{'scrolled': step == 2}\" v-if=\"step == 2\">\n        <!-- <span slot=\"title\" class=\"dialog-title\">Assign User Roles & Locations</span> -->\n        <!-- <span class=\"user-info\">{{user.firstName}} {{user.lastName}} - {{user.email}}</span> -->\n        <el-row :gutter=\"20\">\n          <el-col :span=\"6\">\n            <label class=\"select-label\">LOCATION</label>\n          </el-col>\n          <el-col :span=\"6\">\n            <label class=\"select-label\">ROLE</label>\n          </el-col>\n          <el-col :span=\"12\">\n            <label class=\"select-label\">COMMUNICATION PREFERENCE</label>\n          </el-col>\n          <div v-for=\"userLocation in userLocations\">\n            <el-col :span=\"6\">\n              <el-select placeholder=\"Select Location\" v-model=\"userLocation.locationId\" filterable >\n                <el-option\n                  v-for=\"location in locationOptions\"\n                  :key=\"location.locationId\"\n                  :value=\"location.locationId\"\n                  :label=\"location.name\"\n                ></el-option>\n              </el-select>\n            </el-col>\n            <el-col :span=\"6\">\n              <el-select placeholder=\"Select Role\" v-model=\"userLocation.role\">\n                <el-option v-for=\"role in roles\" :value=\"role.value\" :label=\"role.label\"></el-option>\n              </el-select>\n            </el-col>\n            <el-col :span=\"10\">\n              <el-select\n                placeholder=\"Select Multiple Types\"\n                :collapse-tags=\"true\"\n                multiple\n                v-model=\"userLocation.communications\"\n              >\n                <el-option v-for=\"option in communicationsOptions\" :value=\"option\" :label=\"option\"></el-option>\n              </el-select>\n            </el-col>\n          </div>\n        </el-row>\n      </div>\n      <el-row :gutter=\"20\" v-if=\"step == 2\">\n        <div class=\"add-item\" @click=\"addUserLocation()\">\n          <el-col v-if=\"userLocations.length == 0\" :span=\"20\">Add New</el-col>\n          <el-col v-else :span=\"20\">Add Another</el-col>\n          <!-- <el-button type=\"primary\" @click=\"addUserLocation()\">Add User Location</el-button> -->\n        </div>\n      </el-row>\n    </div>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\n        <el-col :span=\"step == 1 ? 12 : 7\">\n          <el-button type=\"text\" v-if=\"step == 1\" @click=\"closeModal\">Cancel</el-button>\n          <el-button type=\"text\" v-else @click=\"step = 1\">Go Back</el-button>\n        </el-col>\n        <el-col :span=\"step == 1 ? 12 : 7\">\n          <el-button\n            type=\"primary\"\n            v-if=\"step == 1\"\n            @click=\"validateUser('userForm')\"\n            class=\"btn-next\"\n          >Next Step</el-button>\n          <el-button type=\"primary\" v-else @click=\"saveUser()\" class=\"btn-next\">ADD USER</el-button>\n        </el-col>\n      </el-row>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport UserService from \"./../services/UserService\";\nimport { EventService } from \"../main\";\nimport imageFile from \"../assets/imageFile.js\";\n\nexport default {\n  name: \"addUser\",\n  props: [\"selectedUser\", \"assignUser\"],\n\n  data: function() {\n    var checkUserEmail = (rule, value, callback) => {\n      UserService.findUserByEmail(value).then(response => {\n        if(response && response.found) {\n          return callback(new Error('User email already found, please enter another valid email.'))\n        } else {\n          callback();\n        }\n      })\n    };\n    return {\n      pageAction: \"Create New\",\n      step: 1,\n      isSuperAdmin: \"\",\n      user: {\n        isSuperAdmin: false,\n        firstName: \"\",\n        lastName: \"\",\n        email: \"\"\n      },\n      userLocations: [],\n      newUserLocation: {\n        userId: \"\",\n        locationId: \"\",\n        role: \"\",\n        getEmail: true,\n        communications: []\n      },\n      locationOptions: [],\n      roles: [\n        { label: \"Owner\", value: \"owner\" },\n        { label: \"Manager\", value: \"manager\" },\n        { label: \"Agent\", value: \"agent\" },\n        { label: \"None\", value: \"none\" }\n      ],\n      communicationsOptions: [\n        \"New Review\",\n        \"Potential Negative Review\",\n        \"New Customer Message\"\n      ],\n      openedModal: true,\n      showLogoSizeError: false,\n      userImageBackground: \"\",\n      userRules: {\n        firstName: [\n          {\n            required: true,\n            message: \"Please input first name\",\n            trigger: \"blur\"\n          }\n        ],\n        lastName: [\n          { required: true, message: \"Please input last name\", trigger: \"blur\" }\n        ],\n        email: [\n          {\n            required: true,\n            type: \"email\",\n            message: \"Please input valid email\",\n            trigger: \"blur\"\n          },\n          {\n            validator: checkUserEmail,\n            message: \"User email already found, please enter another valid email.\",\n            trigger: \"blur\"\n          }\n        ]\n      }\n    };\n  },\n  computed: {\n    isDisabled() {\n      if (this.user.email) return this.user.email.indexOf(\" \") >= 0;\n    },\n    currentTitle() {\n      if (this.step == 1) {\n        return \"Add New User\";\n      } else {\n        return \"Assign User Roles & Locations\";\n      }\n    }\n  },\n  created() {\n    if (this.selectedUser) {\n      this.pageAction = \"Update\";\n      this.user = this.selectedUser;\n      if (this.user.userImage && this.user.userImage[0] !== \",\") {\n        this.setUserImageBackground(\n          \"data:image/png;base64,\" + this.user.userImage\n        );\n      } else if (this.user.userImage && this.user.userImage[0] == \",\") {\n        this.setUserImageBackground(\n          \"data:image/png;base64\" + this.user.userImage\n        );\n      }\n    }\n    var vm = this;\n    vm.isSuperAdmin = JSON.parse(\n      localStorage.getItem(\"currentUser\")\n    ).isSuperAdmin;\n    vm.locationOptions = JSON.parse(localStorage.getItem(\"locationOptions\"));\n    vm.userLocations.push(vm.newUserLocation);\n    let imgText = imageFile.imgBlock();\n    this.userImageBackground = 'url(\"data:image/png;base64,' + imgText;\n  },\n  methods: {\n    onChange() {\n      this.user.email = this.user.email.trim();\n      this.user.email = this.user.email.replace(\" \", \"\");\n    },\n    validateUser(ruleForm) {\n      let vm = this;\n      vm.$refs[ruleForm].validate(valid => {\n        if (valid) {\n          vm.step = 2;\n        } else {\n          return false;\n        }\n      });\n    },\n    saveUser() {\n      EventService.$emit(\"loading\", \"show\");\n      var vm = this;\n      UserService.saveUser(this.user).then(\n        function(response) {\n          if (response) {\n            vm.user = response;\n            EventService.$emit(\"loading\", \"hide\");\n            EventService.$emit(\"successMessage\", \"Hooray! User Saved.\");\n            vm.saveUserLocations(response);                        \n            vm.closeModal();\n          }\n        },\n        function(error) {\n          if (error == \"User already exists.\") {\n            EventService.$emit(\"loading\", \"hide\");\n            EventService.$emit(\n              \"warningMessage\",\n              \"User already exists, please contact an administrator if you believe this message is in error.\"\n            );\n          } else {\n            EventService.$emit(\"loading\", \"hide\");\n            EventService.$emit(\n              \"errorMessage\",\n              \"Sorry, something went wrong. Please try again.\"\n            );\n          }\n        }\n      );\n    },\n    saveUserLocations(user) {\n      var vm = this;\n      vm.userLocations.map(location => {\n        if (location.role == \"\" || location.role == \"None\") {\n          location.getsEmail = false;\n          UserService.saveUserLocation(\n            user.userId,\n            location.locationId,\n            location.role,\n            location.communications\n          ).then(\n            function(response) {\n              vm.closeModal()\n            },\n            function(error) {\n              console.log(error);\n            }\n          );\n          this.unassignUser(location);\n        } else {\n          UserService.saveUserLocation(\n            user.userId,\n            location.locationId,\n            location.role,\n            location.communications\n          ).then(\n            function(response) {              \n              vm.closeModal()\n            },\n            function(error) {\n              console.log(error);\n            }\n          );\n        }\n      vm.closeModal();\n      });\n    },\n    unassignUser: function(location) {\n      var vm = this;\n      UserService.removeUserLocation(vm.user.userId, location.locationId).then(\n        function(response) {},\n        function(error) {\n          console.log(error);\n        }\n      );\n    },\n    addUserLocation() {\n      let vm = this;\n      vm.userLocations.push(JSON.parse(JSON.stringify(vm.newUserLocation)));\n    },\n    closeModal: function() {\n      this.$emit(\"closeModal\");\n      this.user = {};\n      this.openedModal = false;\n      EventService.$emit(\"loading\", \"hide\");\n    },\n    switchModal(event, user) {\n      this.$emit(\"switchModal\", this.user);\n      EventService.$emit(\"loading\", \"hide\");\n    },\n    userImageChange: function() {\n      var element = this.$refs.imageUpload;\n      var vm = this;\n      this.showLogoSizeError = false;\n      this.userImageBackground = {};\n      if (element.files && element.files[0]) {\n        var reader = new FileReader();\n        reader.onloadend = function() {\n          if (reader.result.length > 500000 * 1.36) {\n            vm.showLogoSizeError = true;\n          } else {\n            vm.user.userImage = reader.result.substring(22);\n            vm.setUserImageBackground(reader.result);\n          }\n        };\n        reader.readAsDataURL(element.files[0]);\n      }\n    },\n    setUserImageBackground: function(rawData) {\n      this.userImageBackground = \"url('\" + rawData + \"')\";\n    }\n  }\n};\n</script>\n\n<style scoped>\n.content-container {\n  margin: auto;\n  width: 100%;\n}\n.user-inputs {\n  margin-top: 20px;\n  max-height: 400px;\n}\n.el-button {\n  width: 260px;\n}\n.select-label {\n  padding-left: 10px;\n}\n\n.scrolled {\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.el-dialog__body {\n  width: 300px;\n  margin: auto;\n}\n.el-dialog .el-dialog__header {\n  padding: 0;\n}\n.user-info {\n  transform: translateY(-100%);\n  text-align: center;\n  color: #9a9a9a;\n}\n.add-item {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: #fafafa;\n  height: 40px;\n  border: 1px solid #9a9a9a35;\n  border-radius: 12px;\n  margin-top: 20px;\n  transition: all 0.2s ease;\n  -webkit-transition: all 0.2s ease;\n  cursor: pointer;\n}\n.add-item:hover {\n  background: #f2f2f2;\n}\n.add-item > div {\n  display: flex;\n  justify-content: center;\n  text-transform: uppercase;\n}\n/* .dialog-title {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  margin-bottom: 20px;\n  margin-top: 0;\n  font-size: 25px;\n} */\n\n.user-inputs .input-label {\n  font-size: 14px;\n  color: #9a9a9a;\n}\n\n.user-inputs .el-input {\n  margin-top: 5px;\n}\n.el-input__inner {\n  background: red !important;\n}\n.user-info {\n  margin: 0 auto;\n}\n\n.select-label {\n  margin-bottom: 10px;\n  font-weight: 600;\n}\n\n.user-inputs .el-select {\n  margin: 15px 5px 0px 5px;\n  width: 100%;\n}\n\n.add-button .el-button {\n  margin-top: 10px;\n  width: 100%;\n}\n\n.dialog-footer {\n  width: 100%;\n}\n</style>\n"]}]}