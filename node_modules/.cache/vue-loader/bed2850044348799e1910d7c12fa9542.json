{"remainingRequest":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/MasterClientList.vue?vue&type=style&index=0&id=69f9b9bb&scoped=true&lang=css&","dependencies":[{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/MasterClientList.vue","mtime":1581270622000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZGFzaGJvYXJkLWNvbnRhaW5lciB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LXdyYXA6IHdyYXA7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwp9CgouZGFzaGJvYXJkLWdyb3VwIHsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtd3JhcDogbm93cmFwOwogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKfQoKLmRhc2hib2FyZC1jb250cm9scyB7CiAgZmxvYXQ6IHJpZ2h0OwogIGNvbG9yOiAjNTQ1NDU0OwogIGZvbnQtc2l6ZTogMjBweDsKfQoKLmRhc2hib2FyZC1jb250cm9scy1zZWFyY2ggewogIGJhY2tncm91bmQ6IHdoaXRlOwogIGZsb2F0OiBsZWZ0OwogIHBhZGRpbmc6IDVweCA1cHggMCA1cHg7CiAgbWFyZ2luOiAwIDAgMTBweCAwOwp9CgouZGFzaGJvYXJkLWNvbnRyb2xzLXNlYXJjaC1pY29uIHsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIG1hcmdpbi1yaWdodDogMTBweDsKfQoKLmRhc2hib2FyZC10YWJsZSB7CiAgYmFja2dyb3VuZDogd2hpdGU7CiAgZm9udC1zaXplOiAxNHB4OwogIGNsZWFyOiBib3RoOwp9CgouZGFzaGJvYXJkLW93bmVyIHsKICBmb250LXdlaWdodDogYm9sZDsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KCi5kYXNoYm9hcmQtaGVhZGVyLXJvdyB7CiAgd2lkdGg6IGNhbGMoMTAwJSAtIDQwcHgpOwogIHBhZGRpbmc6IDE1cHggMjBweDsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VmZWZlZjsKfQoKLmRhc2hib2FyZC1yb3cgewogIHdpZHRoOiAxMDAlOwogIGNsZWFyOiBib3RoOwogIGJhY2tncm91bmQ6ICNmN2Y3Zjc7CiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZmVmZWY7CiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2VmZWZlZjsKICBoZWlnaHQ6IGF1dG87CiAgZGlzcGxheTogZmxleDsKICBmbGV4LXdyYXA6IG5vd3JhcDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Cn0KCi5kYXNoYm9hcmQtcm93IHNwYW4gewogIGJvcmRlci1sZWZ0OiAxcHggc29saWQgI2VmZWZlZjsKICBwYWRkaW5nOiAxMHB4Owp9CgouZGFzaGJvYXJkLXJvdyBzcGFuOm50aC1jaGlsZCgxKSB7CiAgZmxleDogMCAwIDUwcHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9CgouZGFzaGJvYXJkLXJvdyBzcGFuOm50aC1jaGlsZCgyKSB7CiAgZmxleDogMCAwIDEwMHB4Owp9CgouZGFzaGJvYXJkLXJvdyBzcGFuOm50aC1jaGlsZCgzKSB7CiAgZmxleDogMiAyIDIwMHB4Owp9CgouZGFzaGJvYXJkLXJvdyBzcGFuOm50aC1jaGlsZCg0KSB7CiAgZmxleDogMiAyIDIwMHB4Owp9CgouZGFzaGJvYXJkLXJvdyBzcGFuOm50aC1jaGlsZCg1KSB7CiAgZmxleDogMCAwIDE1MHB4Owp9CgouZGFzaGJvYXJkLXJvdyBzcGFuOm50aC1jaGlsZCg1KSB7CiAgZmxleDogMCAwIDUwcHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9CgouZGFzaGJvYXJkLXJvdyBzcGFuOm50aC1jaGlsZCg2KSB7CiAgZmxleDogMCAwIDUwcHg7Cn0KCi5kYXNoYm9hcmQtcm93Om50aC1jaGlsZCgyKSB7CiAgbWFyZ2luLXRvcDogMTBweDsKfQoKLmRhc2hib2FyZC1yb3c6bGFzdC1jaGlsZCB7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZmVmZWY7Cn0KCi5sb2NhdGlvbi1leHBhbmQtdG9nZ2xlIHsKICBmbG9hdDpyaWdodDsKICBmb250LXNpemU6IDIwcHg7CiAgbWFyZ2luLXRvcDogLTVweDsKfQoKLmxvY2F0aW9uLWV4cGFuZC10b2dnbGUtZmxpcHBlZCB7CiAgdHJhbnNmb3JtOiByb3RhdGUoMTgwZGVnKTsKfQo="},{"version":3,"sources":["MasterClientList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"MasterClientList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"dashboard-controls\">\n      <span class=\"dashboard-controls-search-icon\">\n        <i class=\"fas fa-search\"></i>\n      </span>\n      <input v-model=\"searchText\" style=\"width: 200px;\" placeholder=\"Filter Users and Locations...\"/>\n    </div>\n    <div class=\"dashboard-table\">\n      <div class=\"dashboard-header-row\" v-for=\"owner in filteredOwners\">\n        <div class=\"dashboard-owner\" @click=\"toggleLocations(owner)\">\n          <span @click=\"spoofUser(owner)\" style=\"margin-right: 10px\" title=\"Login as User\"><i class=\"fas fa-user-secret\"></i></span><span>{{owner._id}} - {{owner.firstName}} {{owner.lastName}} ({{owner.email}}) - {{owner.locations.length}} location<span v-if=\"owner.locations.length != 1\">s</span></span>\n          <span class=\"location-expand-toggle quick-transition\" :class=\"{'location-expand-toggle-flipped': owner.expandLocations}\"><i class=\"fas fa-angle-up\"></i></span>\n        </div>\n        <div class=\"dashboard-row\" v-show=\"owner.expandLocations\">\n          <span></span>\n          <span>Location Id</span>\n          <span>Location Name</span>\n          <span>Location Address</span>\n          <!--<span>Location Phone</span>-->\n          <span>GMB?</span>\n          <!-- <span></span> -->\n        </div>\n        <div class=\"dashboard-row\" v-for=\"location in owner.locations\" v-show=\"owner.expandLocations\">\n          <span v-if=\"location.locationStyle.logo\">\n            <img style=\"width: 40px\" :src=\"appendImageHeader(location.locationStyle.logo)\"/>\n          </span>\n          <span v-if=\"!location.locationStyle.logo\" style=\"color: #4fcbc5\"><i class=\"far fa-building fa-2x\"></i></span>\n          <span>{{location.locationId}}</span>\n          <span>{{location.locationName}}</span>\n          <span>{{location.locationAddress.street1}} {{location.locationAddress.city}}, {{location.locationAddress.state}} {{location.locationAddress.zip}}</span>\n          <!--<span>{{location.locationPhone}}</span>-->\n          <span><i class=\"fas fa-check\" v-if=\"location.gmb\"></i><i class=\"fas fa-times\" v-if=\"!location.gmb\"></i></span>\n          <!-- <span style=\"color: #4fcbc5\"><i class=\"fas fa-pencil-alt\"></i></span> -->\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport DashboardService from './../services/DashboardService'\nimport UserService from './../services/UserService'\nimport {EventService} from '../main'\n\nexport default {\n  name: 'dashboard',\n  data: function() {\n    return {\n      adminData: [],\n      userRole: null,\n      searchText: ''\n    }\n  },\n  computed: {\n    filteredOwners: function() {\n      var vm = this;\n      if (this.userRole == 'admin') {\n        var filteredList = this.adminData.filter(function(owner) {\n          var ownerMatch = false;\n          ownerMatch = ownerMatch || owner.firstName.toLowerCase().indexOf(vm.searchText.toLowerCase()) > -1;\n          ownerMatch = ownerMatch || owner.lastName.toLowerCase().indexOf(vm.searchText.toLowerCase()) > -1;\n          ownerMatch = ownerMatch || owner.email.toLowerCase().indexOf(vm.searchText.toLowerCase()) > -1;\n          ownerMatch = ownerMatch || owner._id.toLowerCase().indexOf(vm.searchText.toLowerCase()) > -1;\n\n          for (var i=0; i<owner.locations.length && !ownerMatch; i++) {\n            ownerMatch = ownerMatch || owner.locations[i].locationId.toLowerCase().indexOf(vm.searchText.toLowerCase()) > -1;\n            ownerMatch = ownerMatch || owner.locations[i].locationName.toLowerCase().indexOf(vm.searchText.toLowerCase()) > -1;\n            if (owner.locations[i].locationAddress) {\n              if (owner.locations[i].locationAddress.street1) ownerMatch = ownerMatch || owner.locations[i].locationAddress.street1.toLowerCase().indexOf(vm.searchText.toLowerCase()) > -1;\n              if (owner.locations[i].locationAddress.city) ownerMatch = ownerMatch || owner.locations[i].locationAddress.city.toLowerCase().indexOf(vm.searchText.toLowerCase()) > -1;\n              if (owner.locations[i].locationAddress.state) ownerMatch = ownerMatch || owner.locations[i].locationAddress.state.toLowerCase().indexOf(vm.searchText.toLowerCase()) > -1;\n              if (owner.locations[i].locationAddress.zip) ownerMatch = ownerMatch || owner.locations[i].locationAddress.zip.toLowerCase().indexOf(vm.searchText.toLowerCase()) > -1;\n            }\n            //ownerMatch = ownerMatch || owner.locations[i].locationPhone.toLowerCase().indexOf(vm.searchText.toLowerCase()) > -1;\n\n            if (ownerMatch) owner.expandLocations = true;\n          }\n\n          return ownerMatch;\n        });\n\n        return filteredList;\n      } else {\n        return this.dashboardData;\n      }\n    }\n  },\n  created() {\n    this.getDashboardData();\n    EventService.$on('locationChange', this.setNewLocation);\n  },\n  beforeDestroy: function () {\n    EventService.$off('locationChange', this.setNewLocation);\n  },\n  methods: {\n    getDashboardData() {\n      EventService.$emit(\"loading\", \"show\");      \n      var vm = this;\n      UserService.getUserRole().then(\n        function(response) {\n          vm.userRole = response.role;\n          if (vm.userRole != 'admin') {\n            this.$router.replace('dashboard');\n          } else {\n            DashboardService.getAdminDashboardData()\n              .then(function(response) {\n                vm.adminData = response;\n                EventService.$emit(\"loading\", \"hide\");\n              }, function(error) {\n                console.log(error);\n                EventService.$emit(\"loading\", \"hide\");\n              });;\n          }\n        }, function(error) {\n          console.log(error);\n          EventService.$emit(\"loading\", \"hide\");\n      });\n    },\n    setNewLocation() {\n      this.getDashboardData();\n    },\n    toggleLocations(owner) {\n      owner.expandLocations = owner.expandLocations ? false : true;\n    },\n    appendImageHeader(imgText) {\n      if (!imgText) imgText = 'iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAA7CAAAOwgEVKEqAAAAAGXRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjIx8SBplQAAAl5JREFUWEftl09r1EAYxtv6D8GzIuhF8FDEjyBeLBRskt3iguCpl+JJv4CwIkjxJuhJvXlbvCiyJ0uVdCbtTNJKWb+AKKh4EmzR2o5P6ltZuy/t7sxkU3Af+LEkO3neJzPJzGTov1Gt0ThQa7WO5Uyn6SE6XaKMGY60PB9lye1IiwR8D1P5awstfuK4FWXyfpTOX6gbM0JX9UfBYnwuSmUTYTbwa3ZFi038LoVKXqLLi1O9Xh9B79wAPzqC7MGfmxEPaq3GYbLzLAwpgt2lHmFDdAM8Xow3m0fI1Z9CLa+jgFO4bRDyMdn60WUVnwlTscoVs0dUyN5Zw3h+nvFFnHjn5e2uLiycsnkpuiHI5DiVsVdFiWnO3AtaPqIy9sKz94Q19wBGZoXK2AsmrzlzP4hPF+fmDlIpO6EHF3lzD2j5BWu328QNo+cdxp7A7PA+XwColJ1wlzOcuQ8w+b+iMvYKdDLGmfsAz/ctKmOvK1IeRS9+5Aq4sDW3KnWayrgJL8pNrogLCPiU7N2V75ZhmHKFbIDX16p+c5Ls/WhSKWwY5GeuYC8g3Gqo4mI2r5UsGcV+8ANXuEu+4TMgILtiVH0rjkd6/mWvG1f0/nL+DUM2BQuTa6DjMRScxZDt+l2C/5cR7przkmarYCU5ESpxFZPuHQR+mFNJk3thJqYml5Kz1Mxexph9TccJDMsEiMHa9jD1gbxWXnNiZ55/DtCgsHW3B2baM7WHy3uOu6AM/vZke8C8i7nGZRBzAfv5zO3FGheQa1gag4CuDAK6MgjoChdwfWejElnnAu7DlcQM/QalOOAtx5m5XwAAAABJRU5ErkJggg==';\n      return 'data:image/png;base64,' + imgText;\n    },\n    spoofUser(user) {\n      var vm = this;\n      UserService.spoofUser(user._id).then(\n        function(response) {\n          EventService.$emit('spoofingUser');\n        }, function(error) {\n          console.log(error);\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n.dashboard-container {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n}\n\n.dashboard-group {\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n}\n\n.dashboard-controls {\n  float: right;\n  color: #545454;\n  font-size: 20px;\n}\n\n.dashboard-controls-search {\n  background: white;\n  float: left;\n  padding: 5px 5px 0 5px;\n  margin: 0 0 10px 0;\n}\n\n.dashboard-controls-search-icon {\n  vertical-align: middle;\n  margin-right: 10px;\n}\n\n.dashboard-table {\n  background: white;\n  font-size: 14px;\n  clear: both;\n}\n\n.dashboard-owner {\n  font-weight: bold;\n  cursor: pointer;\n}\n\n.dashboard-header-row {\n  width: calc(100% - 40px);\n  padding: 15px 20px;\n  border-bottom: 1px solid #efefef;\n}\n\n.dashboard-row {\n  width: 100%;\n  clear: both;\n  background: #f7f7f7;\n  border-top: 1px solid #efefef;\n  border-right: 1px solid #efefef;\n  height: auto;\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n}\n\n.dashboard-row span {\n  border-left: 1px solid #efefef;\n  padding: 10px;\n}\n\n.dashboard-row span:nth-child(1) {\n  flex: 0 0 50px;\n  text-align: center;\n}\n\n.dashboard-row span:nth-child(2) {\n  flex: 0 0 100px;\n}\n\n.dashboard-row span:nth-child(3) {\n  flex: 2 2 200px;\n}\n\n.dashboard-row span:nth-child(4) {\n  flex: 2 2 200px;\n}\n\n.dashboard-row span:nth-child(5) {\n  flex: 0 0 150px;\n}\n\n.dashboard-row span:nth-child(5) {\n  flex: 0 0 50px;\n  text-align: center;\n}\n\n.dashboard-row span:nth-child(6) {\n  flex: 0 0 50px;\n}\n\n.dashboard-row:nth-child(2) {\n  margin-top: 10px;\n}\n\n.dashboard-row:last-child {\n  border-bottom: 1px solid #efefef;\n}\n\n.location-expand-toggle {\n  float:right;\n  font-size: 20px;\n  margin-top: -5px;\n}\n\n.location-expand-toggle-flipped {\n  transform: rotate(180deg);\n}\n</style>\n"]}]}