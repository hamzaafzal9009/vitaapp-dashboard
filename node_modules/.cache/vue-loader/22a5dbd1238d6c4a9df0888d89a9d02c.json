{"remainingRequest":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/DashboardComponents/OpiniionAggregate.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/DashboardComponents/OpiniionAggregate.vue","mtime":1581270622000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCYXJDaGFydCBmcm9tICcuLy4uL0NoYXJ0cy9CYXJDaGFydCcKaW1wb3J0IERhc2hib2FyZFNlcnZpY2UgZnJvbSAnLi8uLi8uLi9zZXJ2aWNlcy9EYXNoYm9hcmRTZXJ2aWNlJwppbXBvcnQgVXNlclNlcnZpY2UgZnJvbSAnLi8uLi8uLi9zZXJ2aWNlcy9Vc2VyU2VydmljZScKaW1wb3J0IHtFdmVudFNlcnZpY2V9IGZyb20gJy4uLy4uL21haW4nCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ29waW5paW9uQWdncmVnYXRlJywKICBjb21wb25lbnRzOiB7QmFyQ2hhcnR9LAogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlclJvbGU6IG51bGwsCiAgICAgIHNob3dMb2FkaW5nOiB0cnVlLAogICAgICBjaGFydERhdGE6IG51bGwsCiAgICAgIGNoYXJ0T3B0aW9uczogewogICAgICAgIG1haW50YWluQXNwZWN0UmF0aW86IGZhbHNlLAogICAgICAgIGxlZ2VuZDogewogICAgICAgICAgZGlzcGxheTogZmFsc2UKICAgICAgICB9LAogICAgICAgIGhvdmVyOiB7CiAgICAgICAgICBtb2RlOiAnaW5kZXgnLAogICAgICAgICAgaW50ZXJzZWN0OiBmYWxzZSwKICAgICAgICAgIG9uSG92ZXI6IGZ1bmN0aW9uKGUsIGVsKSB7CiAgICAgICAgICAgIC8vIEdyYWIgdGhlIGNoYXJ0IGVsZW1lbnQuCiAgICAgICAgICAgIHZhciBwb2ludCA9IHRoaXMuZ2V0RWxlbWVudEF0RXZlbnQoZSk7CgogICAgICAgICAgICAvLyBTZXQgdGhlIGN1cnNvciBzdHlsZSB0byBwb2ludGVyIHdoZW4gaG92ZXJpbmcuCiAgICAgICAgICAgIGlmIChwb2ludC5sZW5ndGgpIGUudGFyZ2V0LnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJzsKICAgICAgICAgICAgZWxzZSBlLnRhcmdldC5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzY2FsZXM6IHsKICAgICAgICAgIHhBeGVzOiBbewogICAgICAgICAgICBncmlkTGluZXM6IHsKICAgICAgICAgICAgICBkcmF3Qm9yZGVyOiBmYWxzZSwKICAgICAgICAgICAgICBkaXNwbGF5OiBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICB9XSwKICAgICAgICAgIHlBeGVzOiBbewogICAgICAgICAgICBtaW5CYXJMZW5ndGg6IDEsCiAgICAgICAgICAgIHRpY2tzOiB7CiAgICAgICAgICAgICAgYmVnaW5BdFplcm86IHRydWUsCiAgICAgICAgICAgICAgZGlzcGxheTogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ3JpZExpbmVzOiB7CiAgICAgICAgICAgICAgZHJhd0JvcmRlcjogZmFsc2UsCiAgICAgICAgICAgICAgZGlzcGxheTogZmFsc2UKICAgICAgICAgICAgfQogICAgICAgICAgfV0KICAgICAgICB9LAogICAgICAgIHRvb2x0aXBzOiB7CiAgICAgICAgICAvLyBEaXNhYmxlIHRoZSBvbi1jYW52YXMgdG9vbHRpcAogICAgICAgICAgZW5hYmxlZDogZmFsc2UsCiAgICAgICAgICBtb2RlOiAnaW5kZXgnLAogICAgICAgICAgaW50ZXJzZWN0OiAgZmFsc2UsCgogICAgICAgICAgY3VzdG9tOiBmdW5jdGlvbih0b29sdGlwTW9kZWwpIHsKICAgICAgICAgICAgICAvLyBUb29sdGlwIEVsZW1lbnQKICAgICAgICAgICAgICB2YXIgdG9vbHRpcEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29waW5paW9uLWFnZ3JlZ2F0ZS1jaGFydGpzLXRvb2x0aXAnKTsKCiAgICAgICAgICAgICAgLy8gQ3JlYXRlIGVsZW1lbnQgb24gZmlyc3QgcmVuZGVyCiAgICAgICAgICAgICAgaWYgKCF0b29sdGlwRWwpIHsKICAgICAgICAgICAgICAgICAgdG9vbHRpcEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICAgIHRvb2x0aXBFbC5pZCA9ICdvcGluaWlvbi1hZ2dyZWdhdGUtY2hhcnRqcy10b29sdGlwJzsKICAgICAgICAgICAgICAgICAgdG9vbHRpcEVsLmlubmVySFRNTCA9ICc8dGFibGU+PC90YWJsZT4nOwogICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRvb2x0aXBFbCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLyBIaWRlIGlmIG5vIHRvb2x0aXAKICAgICAgICAgICAgICBpZiAodG9vbHRpcE1vZGVsLm9wYWNpdHkgPT09IDApIHsKICAgICAgICAgICAgICAgICAgdG9vbHRpcEVsLnN0eWxlLm9wYWNpdHkgPSAwOwogICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLyBTZXQgY2FyZXQgUG9zaXRpb24KICAgICAgICAgICAgICB0b29sdGlwRWwuY2xhc3NMaXN0LnJlbW92ZSgnYWJvdmUnLCAnYmVsb3cnLCAnbm8tdHJhbnNmb3JtJyk7CiAgICAgICAgICAgICAgaWYgKHRvb2x0aXBNb2RlbC55QWxpZ24pIHsKICAgICAgICAgICAgICAgICAgdG9vbHRpcEVsLmNsYXNzTGlzdC5hZGQodG9vbHRpcE1vZGVsLnlBbGlnbik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdG9vbHRpcEVsLmNsYXNzTGlzdC5hZGQoJ25vLXRyYW5zZm9ybScpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Qm9keShib2R5SXRlbSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gYm9keUl0ZW0ubGluZXM7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLyBTZXQgVGV4dAogICAgICAgICAgICAgIGlmICh0b29sdGlwTW9kZWwuYm9keSkgewogICAgICAgICAgICAgICAgICB2YXIgdGl0bGVMaW5lcyA9IHRvb2x0aXBNb2RlbC50aXRsZSB8fCBbXTsKICAgICAgICAgICAgICAgICAgdmFyIGJvZHlMaW5lcyA9IHRvb2x0aXBNb2RlbC5ib2R5Lm1hcChnZXRCb2R5KTsKCiAgICAgICAgICAgICAgICAgIHZhciBpbm5lckh0bWwgPSAnPHRib2R5JzsKICAgICAgICAgICAgICAgICAgdmFyIHRvb2x0aXBUaXRsZSA9ICIiLCB0b29sdGlwQm9keSA9ICIiOwoKICAgICAgICAgICAgICAgICAgdGl0bGVMaW5lcy5mb3JFYWNoKGZ1bmN0aW9uKHRpdGxlKSB7CiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcFRpdGxlID0gdGl0bGU7CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgYm9keUxpbmVzLmZvckVhY2goZnVuY3Rpb24oYm9keSwgaSkgewogICAgICAgICAgICAgICAgICAgIHRvb2x0aXBCb2R5ID0gYm9keVswXTsKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICB0b29sdGlwQm9keSA9IHRvb2x0aXBCb2R5LnJlcGxhY2UoIk5ldyBDdXN0b21lcnM6ICIsICIiKTsKCiAgICAgICAgICAgICAgICAgIGlubmVySHRtbCArPSAnPHRyPjx0ZD4nICsgdG9vbHRpcFRpdGxlICsgJyAtICcgKyB0b29sdGlwQm9keSArICc8L3RkPjwvdHI+JzsKICAgICAgICAgICAgICAgICAgaW5uZXJIdG1sICs9ICc8L3Rib2R5Pic7CgogICAgICAgICAgICAgICAgICB2YXIgdGFibGVSb290ID0gdG9vbHRpcEVsLnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJyk7CiAgICAgICAgICAgICAgICAgIHRhYmxlUm9vdC5pbm5lckhUTUwgPSBpbm5lckh0bWw7CiAgICAgICAgICAgICAgICAgIHRhYmxlUm9vdC5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkICNkNGQ0ZDQnOwogICAgICAgICAgICAgICAgICB0YWJsZVJvb3Quc3R5bGUuYm9yZGVyUmFkaXVzID0gJzVweCc7CiAgICAgICAgICAgICAgICAgIHRhYmxlUm9vdC5zdHlsZS5wYWRkaW5nID0gJzVweCAxNXB4JzsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIC8vIGB0aGlzYCB3aWxsIGJlIHRoZSBvdmVyYWxsIHRvb2x0aXAKICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSB0aGlzLl9jaGFydC5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CgogICAgICAgICAgICAgIC8vIERpc3BsYXksIHBvc2l0aW9uLCBhbmQgc2V0IHN0eWxlcyBmb3IgZm9udAogICAgICAgICAgICAgIHRvb2x0aXBFbC5zdHlsZS5vcGFjaXR5ID0gMTsKICAgICAgICAgICAgICB0b29sdGlwRWwuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnOwogICAgICAgICAgICAgIC8vIHRvb2x0aXBFbC5zdHlsZS5sZWZ0ID0gcG9zaXRpb24ubGVmdCArIHdpbmRvdy5wYWdlWE9mZnNldCArIHRvb2x0aXBNb2RlbC5jYXJldFggKyAncHgnOwogICAgICAgICAgICAgICB0b29sdGlwRWwuc3R5bGUubGVmdCA9IHBvc2l0aW9uLndpZHRoIC8gMiArIHBvc2l0aW9uLmxlZnQgLSAzNSArICdweCc7CiAgICAgICAgICAgICAgLy8gdG9vbHRpcEVsLnN0eWxlLnRvcCA9IHBvc2l0aW9uLnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldCArIHRvb2x0aXBNb2RlbC5jYXJldFkgKyAncHgnOwogICAgICAgICAgICAgIC8vLy90b29sdGlwRWwuc3R5bGUudG9wID0gMjEwICsgJ3B4JzsKICAgICAgICAgICAgICB0b29sdGlwRWwuc3R5bGUuZm9udEZhbWlseSA9IHRvb2x0aXBNb2RlbC5fYm9keUZvbnRGYW1pbHk7CiAgICAgICAgICAgICAgdG9vbHRpcEVsLnN0eWxlLmZvbnRTaXplID0gdG9vbHRpcE1vZGVsLmJvZHlGb250U2l6ZSArICdweCc7CiAgICAgICAgICAgICAgdG9vbHRpcEVsLnN0eWxlLmZvbnRTdHlsZSA9IHRvb2x0aXBNb2RlbC5fYm9keUZvbnRTdHlsZTsKICAgICAgICAgICAgICB0b29sdGlwRWwuc3R5bGUucGFkZGluZyA9IHRvb2x0aXBNb2RlbC55UGFkZGluZyArICdweCAnICsgdG9vbHRpcE1vZGVsLnhQYWRkaW5nICsgJ3B4JzsKICAgICAgICAgICAgICB0b29sdGlwRWwuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJzsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgICdvbkNsaWNrJyA6IChldnQsIGl0ZW0pID0+IHsKICAgICAgICAgIHZhciBzb3VyY2UgPSBpdGVtWzBdWydfbW9kZWwnXS5sYWJlbDsKICAgICAgICAgIC8vIEhpZGUgdGhlIHRvb2x0aXAgYWZ0ZXIgdGhlIHVzZXIgY2xpY2tzIHRoZSBjaGFydC4KICAgICAgICAgIHZhciB0b29sdGlwRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3Bpbmlpb24tYWdncmVnYXRlLWNoYXJ0anMtdG9vbHRpcCcpOwogICAgICAgICAgdG9vbHRpcEVsLnN0eWxlLm9wYWNpdHkgPSAwOwoKICAgICAgICAgIHRoaXMuZm9sbG93TGluaygnL2ZlZWRiYWNrLycgKyBzb3VyY2UpOwogICAgICAgIH0sCiAgICAgICAgbGVnZW5kOiB7CiAgICAgICAgICBkaXNwbGF5OiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgdGl0bGU6IHsKICAgICAgICAgIGRpc3BsYXk6IGZhbHNlCiAgICAgICAgfSwKICAgICAgICBjdWJpY0ludGVycG9sYXRpb25Nb2RlOiAnbW9ub3RvbmUnCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldEFnZ3JlZ2F0ZURhdGEoKTsKICAgIEV2ZW50U2VydmljZS4kb24oJ2xvY2F0aW9uQ2hhbmdlJywgdGhpcy5nZXRBZ2dyZWdhdGVEYXRhKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uICgpIHsKICAgIEV2ZW50U2VydmljZS4kb2ZmKCdsb2NhdGlvbkNoYW5nZScsIHRoaXMuZ2V0QWdncmVnYXRlRGF0YSk7CgogICAgLy8gSGlkZSB0aGUgdG9vbHRpcCBpZiBpdCBpcyB2aXNpYmxlLgogICAgdmFyIHRvb2x0aXBFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGluaWlvbi1hZ2dyZWdhdGUtY2hhcnRqcy10b29sdGlwJyk7CiAgICBpZih0b29sdGlwRWwpIHRvb2x0aXBFbC5zdHlsZS5vcGFjaXR5ID0gMDsKICB9LAogIG1ldGhvZHM6IHsKICAgIGZvbGxvd0xpbmsodGFyZ2V0UGFnZSkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh0YXJnZXRQYWdlKTsKICAgIH0sCiAgICBnZXRBZ2dyZWdhdGVEYXRhKCkgewogICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgLy8gR2V0IHRoZSB1c2VycyByb2xlLgogICAgICBVc2VyU2VydmljZS5nZXRVc2VyUm9sZSgpLnRoZW4oCiAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgIHZtLnVzZXJSb2xlID0gcmVzcG9uc2Uucm9sZTsKICAgICAgICAgIC8vIERvbid0IG1ha2UgdGhlIGRhdGEgY2FsbCBpZiB0aGV5IGFyZSBhbiBhZG1pbi4KICAgICAgICAgIGlmICh2bS51c2VyUm9sZSAhPSAnYWRtaW4nKSB7CiAgICAgICAgICAgIERhc2hib2FyZFNlcnZpY2UuZ2V0T3Bpbmlpb25BZ2dyZWdhdGUoKS50aGVuKAogICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICB2bS5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdm0uY2hhcnREYXRhID0gewogICAgICAgICAgICAgICAgICBsYWJlbHM6IFsxLCAyLCAzLCA0LCA1XSwKICAgICAgICAgICAgICAgICAgZGF0YXNldHM6IFt7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICcnLAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogInJnYmEoNzksIDIwMywgMTk4LCAwLjc1KSIsCiAgICAgICAgICAgICAgICAgICAgaG92ZXJCYWNrZ3JvdW5kQ29sb3I6ICIjNGZjYmM2IiwKICAgICAgICAgICAgICAgICAgICBkYXRhOiByZXNwb25zZQogICAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZtLnBvcHVsYXRlT3Bpbmlpb25BZ2dyZWdhdGVSYXRpbmcocmVzcG9uc2UpOwogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIHBvcHVsYXRlT3Bpbmlpb25BZ2dyZWdhdGVSYXRpbmcoZGF0YSkgewogICAgICB2YXIgcmF0aW5nSG9sZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm9waW5paW9uLWFnZ3JlZ2F0ZS1yYXRpbmciKTsKICAgICAgdmFyIHRvdGFsTnVtT2ZSYXRpbmdzID0gZGF0YS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKTsKICAgICAgdmFyIHRvdGFsTnVtT2ZTdGFycyA9IDA7CiAgICAgIHZhciByYXRpbmcgPSAwOwoKICAgICAgaWYodG90YWxOdW1PZlJhdGluZ3MgPiAwKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZihkYXRhW2ldID4gMCkgewogICAgICAgICAgICB0b3RhbE51bU9mU3RhcnMgKz0gZGF0YVtpXSAqIChpICsgMSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByYXRpbmcgPSB0b3RhbE51bU9mU3RhcnMgLyB0b3RhbE51bU9mUmF0aW5nczsKICAgICAgfQoKICAgICAgcmF0aW5nSG9sZGVyLmlubmVySFRNTCA9IHRoaXMucm91bmQocmF0aW5nLCAxKS50b0ZpeGVkKDEpOwogICAgfSwKICAgIHJvdW5kKHZhbHVlLCBwcmVjaXNpb24pIHsKICAgICAgdmFyIG11bHRpcGxpZXIgPSBNYXRoLnBvdygxMCwgcHJlY2lzaW9uIHx8IDApOwogICAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAqIG11bHRpcGxpZXIpIC8gbXVsdGlwbGllcjsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["OpiniionAggregate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"OpiniionAggregate.vue","sourceRoot":"src/components/DashboardComponents","sourcesContent":["<template>\n  <div class=\"dashboard-tile\">\n    <div class=\"dashboard-tile-header cursor-default\" style=\"font-weight: bolder;\">Opiniion Aggregate Score</div>\n    <div class=\"dashboard-tile-body\">\n      <div class=\"dashboard-row dashboard-loader\" v-if=\"showLoading\"><i class=\"far fa-hourglass fa-spin\"></i></div>\n      <div id=\"opiniion-aggregate-wrapper\" class=\"dashboard-tile-body\" v-show=\"!showLoading && chartData\">\n        <bar-chart height=\"125\" width=\"200\" :chart-data=\"chartData\" :options=\"chartOptions\"/>\n        <div id=\"opiniion-aggregate-rating-wrapper\">\n          <div id=\"opiniion-aggregate-rating\"></div>\n          <div id=\"opiniion-aggregate-rating-title\">Opiniion Rating</div>\n        </div>\n      </div>\n      <div class=\"no-data\" v-show=\"!showLoading && !chartData\" style=\"position: relative; display: flex; align-items: center; justify-content: space-evenly;\">\n        No reviews generated.\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport BarChart from './../Charts/BarChart'\nimport DashboardService from './../../services/DashboardService'\nimport UserService from './../../services/UserService'\nimport {EventService} from '../../main'\n\nexport default {\n  name: 'opiniionAggregate',\n  components: {BarChart},\n  data: function() {\n    return {\n      userRole: null,\n      showLoading: true,\n      chartData: null,\n      chartOptions: {\n        maintainAspectRatio: false,\n        legend: {\n          display: false\n        },\n        hover: {\n          mode: 'index',\n          intersect: false,\n          onHover: function(e, el) {\n            // Grab the chart element.\n            var point = this.getElementAtEvent(e);\n\n            // Set the cursor style to pointer when hovering.\n            if (point.length) e.target.style.cursor = 'pointer';\n            else e.target.style.cursor = 'default';\n          }\n        },\n        scales: {\n          xAxes: [{\n            gridLines: {\n              drawBorder: false,\n              display: false\n            }\n          }],\n          yAxes: [{\n            minBarLength: 1,\n            ticks: {\n              beginAtZero: true,\n              display: false\n            },\n            gridLines: {\n              drawBorder: false,\n              display: false\n            }\n          }]\n        },\n        tooltips: {\n          // Disable the on-canvas tooltip\n          enabled: false,\n          mode: 'index',\n          intersect:  false,\n\n          custom: function(tooltipModel) {\n              // Tooltip Element\n              var tooltipEl = document.getElementById('opiniion-aggregate-chartjs-tooltip');\n\n              // Create element on first render\n              if (!tooltipEl) {\n                  tooltipEl = document.createElement('div');\n                  tooltipEl.id = 'opiniion-aggregate-chartjs-tooltip';\n                  tooltipEl.innerHTML = '<table></table>';\n                  document.body.appendChild(tooltipEl);\n              }\n\n              // Hide if no tooltip\n              if (tooltipModel.opacity === 0) {\n                  tooltipEl.style.opacity = 0;\n                  return;\n              }\n\n              // Set caret Position\n              tooltipEl.classList.remove('above', 'below', 'no-transform');\n              if (tooltipModel.yAlign) {\n                  tooltipEl.classList.add(tooltipModel.yAlign);\n              } else {\n                  tooltipEl.classList.add('no-transform');\n              }\n\n              function getBody(bodyItem) {\n                  return bodyItem.lines;\n              }\n\n              // Set Text\n              if (tooltipModel.body) {\n                  var titleLines = tooltipModel.title || [];\n                  var bodyLines = tooltipModel.body.map(getBody);\n\n                  var innerHtml = '<tbody';\n                  var tooltipTitle = \"\", tooltipBody = \"\";\n\n                  titleLines.forEach(function(title) {\n                    tooltipTitle = title;\n                  });\n\n                  bodyLines.forEach(function(body, i) {\n                    tooltipBody = body[0];\n                  });\n\n                  tooltipBody = tooltipBody.replace(\"New Customers: \", \"\");\n\n                  innerHtml += '<tr><td>' + tooltipTitle + ' - ' + tooltipBody + '</td></tr>';\n                  innerHtml += '</tbody>';\n\n                  var tableRoot = tooltipEl.querySelector('table');\n                  tableRoot.innerHTML = innerHtml;\n                  tableRoot.style.border = '1px solid #d4d4d4';\n                  tableRoot.style.borderRadius = '5px';\n                  tableRoot.style.padding = '5px 15px';\n              }\n\n              // `this` will be the overall tooltip\n              var position = this._chart.canvas.getBoundingClientRect();\n\n              // Display, position, and set styles for font\n              tooltipEl.style.opacity = 1;\n              tooltipEl.style.position = 'absolute';\n              // tooltipEl.style.left = position.left + window.pageXOffset + tooltipModel.caretX + 'px';\n               tooltipEl.style.left = position.width / 2 + position.left - 35 + 'px';\n              // tooltipEl.style.top = position.top + window.pageYOffset + tooltipModel.caretY + 'px';\n              ////tooltipEl.style.top = 210 + 'px';\n              tooltipEl.style.fontFamily = tooltipModel._bodyFontFamily;\n              tooltipEl.style.fontSize = tooltipModel.bodyFontSize + 'px';\n              tooltipEl.style.fontStyle = tooltipModel._bodyFontStyle;\n              tooltipEl.style.padding = tooltipModel.yPadding + 'px ' + tooltipModel.xPadding + 'px';\n              tooltipEl.style.pointerEvents = 'none';\n          }\n        },\n        'onClick' : (evt, item) => {\n          var source = item[0]['_model'].label;\n          // Hide the tooltip after the user clicks the chart.\n          var tooltipEl = document.getElementById('opiniion-aggregate-chartjs-tooltip');\n          tooltipEl.style.opacity = 0;\n\n          this.followLink('/feedback/' + source);\n        },\n        legend: {\n          display: false\n        },\n        title: {\n          display: false\n        },\n        cubicInterpolationMode: 'monotone'\n      }\n    }\n  },\n  created() {\n    this.getAggregateData();\n    EventService.$on('locationChange', this.getAggregateData);\n  },\n  beforeDestroy: function () {\n    EventService.$off('locationChange', this.getAggregateData);\n\n    // Hide the tooltip if it is visible.\n    var tooltipEl = document.getElementById('opiniion-aggregate-chartjs-tooltip');\n    if(tooltipEl) tooltipEl.style.opacity = 0;\n  },\n  methods: {\n    followLink(targetPage) {\n      this.$router.push(targetPage);\n    },\n    getAggregateData() {\n      this.showLoading = true;\n      var vm = this;\n      // Get the users role.\n      UserService.getUserRole().then(\n        function(response) {\n          vm.userRole = response.role;\n          // Don't make the data call if they are an admin.\n          if (vm.userRole != 'admin') {\n            DashboardService.getOpiniionAggregate().then(\n              function(response) {\n                vm.showLoading = false;\n                vm.chartData = {\n                  labels: [1, 2, 3, 4, 5],\n                  datasets: [{\n                    label: '',\n                    backgroundColor: \"rgba(79, 203, 198, 0.75)\",\n                    hoverBackgroundColor: \"#4fcbc6\",\n                    data: response\n                  }]\n                };\n                vm.populateOpiniionAggregateRating(response);\n              }, function(error) {\n                console.log(error);\n            });\n          }\n      })\n    },\n    populateOpiniionAggregateRating(data) {\n      var ratingHolder = document.getElementById(\"opiniion-aggregate-rating\");\n      var totalNumOfRatings = data.reduce((a, b) => a + b, 0);\n      var totalNumOfStars = 0;\n      var rating = 0;\n\n      if(totalNumOfRatings > 0) {\n        for (var i = 0; i < data.length; i++) {\n          if(data[i] > 0) {\n            totalNumOfStars += data[i] * (i + 1);\n          }\n        }\n\n        rating = totalNumOfStars / totalNumOfRatings;\n      }\n\n      ratingHolder.innerHTML = this.round(rating, 1).toFixed(1);\n    },\n    round(value, precision) {\n      var multiplier = Math.pow(10, precision || 0);\n      return Math.round(value * multiplier) / multiplier;\n    }\n  }\n}\n</script>\n\n<style>\n#opiniion-aggregate-rating {\n  font-size: 51px;\n  font-weight: bold;\n  border: 1px solid #545454;\n  padding: 9px;\n}\n\n#opiniion-aggregate-rating-title {\n  padding-top: 7px;\n  font-size: 14px;\n  font-weight: 600;\n  text-align: center;\n}\n\n#opiniion-aggregate-wrapper {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: space-evenly;\n  padding: 0;\n}\n\n#opiniion-aggregate-rating-wrapper {\n  display: flex;\n  flex-direction: column;\n}\n\n#opiniion-aggregate-rating {\n  font-size: 51px;\n  font-weight: bold;\n  border: 1px solid #545454;\n  padding: 9px;\n}\n\n#opiniion-aggregate-rating-title {\n  padding-top: 7px;\n  font-size: 14px;\n  font-weight: 600;\n  text-align: center;\n}\n\n\n@media (min-width: 1200px) {\n  #opiniion-aggregate-wrapper {\n    margin: auto 0;\n  }\n\n  #opiniion-aggregate-chartjs-tooltip {\n    top: 115px;\n  }\n}\n\n@media (min-width: 1700px) {\n  #opiniion-aggregate-wrapper {\n    flex-direction: row;\n    margin: auto;\n  }\n\n  #opiniion-aggregate-chartjs-tooltip {\n    top: 152px;\n  }\n}\n</style>\n"]}]}