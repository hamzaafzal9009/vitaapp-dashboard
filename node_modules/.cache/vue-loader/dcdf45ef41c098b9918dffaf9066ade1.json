{"remainingRequest":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/AddAutomation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/AddAutomation.vue","mtime":1581270622000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEV2ZW50U2VydmljZSB9IGZyb20gIi4uL21haW4iOwppbXBvcnQgQXV0b21hdGlvblNlcnZpY2UgZnJvbSAiLi8uLi9zZXJ2aWNlcy9BdXRvbWF0aW9uU2VydmljZSI7CmltcG9ydCBjb25maWcgZnJvbSAiLi4vY29uZmlnLmpzIjsKaW1wb3J0IExvY2F0aW9uU2VydmljZSBmcm9tICIuLy4uL3NlcnZpY2VzL0xvY2F0aW9uU2VydmljZS5qcyI7CmltcG9ydCBQcmV2aWV3TGFuZGluZyBmcm9tICIuL1ByZXZpZXdMYW5kaW5nIjsKaW1wb3J0IFRDUEFDb21wbGlhbmNlIGZyb20gIi4vVENQQUNvbXBsaWFuY2UiOwppbXBvcnQgVXNlclNlcnZpY2UgZnJvbSAnLi8uLi9zZXJ2aWNlcy9Vc2VyU2VydmljZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImFkZEF1dG9tYXRpb24iLAogIHByb3BzOiBbInNlbGVjdGVkQXV0b21hdGlvbiIsICJhdXRvbWF0aW9uVHlwZSJdLAogIGNvbXBvbmVudHM6IHsKICAgIFByZXZpZXdMYW5kaW5nLCBUQ1BBQ29tcGxpYW5jZQogIH0sCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBwYWdlQWN0aW9uOiAiQWRkIE5ldyIsCiAgICAgIGRpc3BsYXlOYW1lOiAiIiwKICAgICAgbG9jYXRpb25JZDogIiIsCiAgICAgIGF1dG9tYXRpb25Mb2NhdGlvbk5hbWU6ICcnLAogICAgICB1c2VyRGF0YTogJycsCiAgICAgIG5ld09wdGlvbjogJycsCiAgICAgIGxhbmRpbmdNZXNzYWdlOiAnRWRpdCBMYW5kaW5nIFBhZ2UnLAogICAgICBlbWFpbFByZXZpZXc6IGZhbHNlLAogICAgICBzbXNQcmV2aWV3OiBmYWxzZSwKICAgICAgZHVwbGljYXRlSWQ6IGZhbHNlLAogICAgICBkdXBsaWNhdGVLZXk6IGZhbHNlLAogICAgICBlZGl0aW5nVGltZUNvbmRpdGlvbjogZmFsc2UsCiAgICAgIGVkaXRpbmdMYW5kaW5nUGFnZTogZmFsc2UsCiAgICAgIGVkaXRpbmdTdXJ2ZXk6IGZhbHNlLAogICAgICBhZGRpbmdMb3lhbHR5Q291cG9uOiBmYWxzZSwKICAgICAgb3BlblByZXZpZXdDYW1wYWlnbjogZmFsc2UsCiAgICAgIHRjcGFDb21wbGlhbmNlT3BlbjogZmFsc2UsCiAgICAgIGFncmVlbWVudDogZmFsc2UsCiAgICAgIGluaXRpYWxpemVkVW5sYXllcjogZmFsc2UsCiAgICAgIHN0YXJ0UG9zaXRpb246IG51bGwsCiAgICAgIGVuZFBvc2l0aW9uOiBudWxsLAogICAgICBkcmFnZ2luZzogZmFsc2UsCiAgICAgIHRlbXBsYXRlVHlwZTogIiIsCiAgICAgIHNlbGVjdGVkSW5kZXg6IG51bGwsCiAgICAgIHNlbGVjdGVkQWN0aW9uOiB7CiAgICAgICAgdGltZTogMCwKICAgICAgICBlbWFpbDogewogICAgICAgICAgc3ViamVjdDogIiIsCiAgICAgICAgICBkZXNpZ246IHsKICAgICAgICAgICAgZGF0YTogIiIsCiAgICAgICAgICAgIGRlc2lnbjogIiIKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHNtczogewogICAgICAgICAgcHJldmlldzogIiIsCiAgICAgICAgICBtZXNzYWdlOiAiIgogICAgICAgIH0sCiAgICAgICAgc3VydmV5UXVlc3Rpb25zOiBbXQogICAgICAgIC8vIHJlc3RyaWN0aW9uOiAnJwogICAgICB9LAogICAgICBhdXRvbWF0aW9uOiB7CiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgYXV0b21hdGlvbklkOiAnJywKICAgICAgICBsb2NhdGlvbklkOiAnJywKICAgICAgICB0eXBlOiAiIiwKICAgICAgICBsYW5ndWFnZTogJ2VuJywKICAgICAgICBpZGVudGlmaWVyOiAnJywKICAgICAgICB0cmlnZ2VyRXZlbnQ6ICIiLAogICAgICAgIGF1dG9SZXNlbmQ6ICcxNTcyNDgwMDAwMCcsCiAgICAgICAga2V5d29yZDogJycsCiAgICAgICAgYWN0aW9uczogWwogICAgICAgICAgewogICAgICAgICAgICB0aW1lOiAwLAogICAgICAgICAgICBlbWFpbDogewogICAgICAgICAgICAgIHN1YmplY3Q6ICIiLAogICAgICAgICAgICAgIGRlc2lnbjogewogICAgICAgICAgICAgICAgZGF0YTogIiIsCiAgICAgICAgICAgICAgICBkZXNpZ246ICIiCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBzbXM6IHsKICAgICAgICAgICAgICBwcmV2aWV3OiAiIiwKICAgICAgICAgICAgICBtZXNzYWdlOgogICAgICAgICAgICAgICAgIiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVzdHJpY3Rpb246ICIiCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuc2V0SW5pdGlhbERhdGEoKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBkaXNwbGF5T3ZlcnZpZXcoKSB7CiAgICAgIGlmKCB0aGlzLmVtYWlsUHJldmlldyA9PSBmYWxzZSAmJgogICAgICAgICAgdGhpcy5zbXNQcmV2aWV3ID09IGZhbHNlICYmCiAgICAgICAgICB0aGlzLmVkaXRpbmdUaW1lQ29uZGl0aW9uID09IGZhbHNlICYmCiAgICAgICAgICB0aGlzLmVkaXRpbmdMYW5kaW5nUGFnZSA9PSBmYWxzZSAmJgogICAgICAgICAgdGhpcy5lZGl0aW5nU3VydmV5ID09IGZhbHNlICYmCiAgICAgICAgICB0aGlzLmFkZGluZ0xveWFsdHlDb3Vwb24gPT0gZmFsc2UgJiYKICAgICAgICAgIHRoaXMub3BlblByZXZpZXdDYW1wYWlnbiA9PSBmYWxzZSAmJgogICAgICAgICAgdGhpcy5pbml0aWFsaXplZFVubGF5ZXIgPT0gZmFsc2UgKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LAogICAgc2F2ZVN1cnZleURpc2FibGVkKCkgewogICAgICAvLyBOZWVkcyBzb21lIHNvcnQgb2YgdHJpZ2dlciBpbiBvcmRlciB0byByZWZyZXNoIHRoZSByZXN1bHQgYWZ0ZXIgb25lIG9mIGl0cyBkZXBlbmRlbnRzIGlzIGNoYW5nZWQuLi4gdW5zdXJlIGF0IHRoaXMgdGltZSBob3cgdG8gdHJpZ2dlciB0aGF0LgogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBsZXQgdGVzdCA9IHZtLnNlbGVjdGVkQWN0aW9uLnN1cnZleVF1ZXN0aW9uczsKICAgICAgIHJldHVybih0ZXN0Lm1hcChlID0+IHsKICAgICAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoZSkubWFwKHggPT4gewogICAgICAgICAgcmV0dXJuICh4WzFdLmxlbmd0aCA9PSAwICYmICh0eXBlb2YgeFsxXSAhPSAnYm9vbGVhbicgfHwgdHlwZW9mIHhbMV0gIT0gJ251bWJlcicpICk7CiAgICAgICAgfSkKICAgICAgfSkpLm1hcChoID0+IHsKICAgICAgICByZXR1cm4gaC5pbmNsdWRlcyh0cnVlKQogICAgICB9KQogICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2V0SW5pdGlhbERhdGEoKSB7CiAgICAgIHRoaXMubG9jYXRpb25JZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJsb2NhdGlvbklkIik7CiAgICAgIHRoaXMuYXV0b21hdGlvbi5sb2NhdGlvbklkID0gdGhpcy5sb2NhdGlvbklkOwogICAgICB0aGlzLmRpc3BsYXlOYW1lID0gdGhpcy5hdXRvbWF0aW9uVHlwZTsKICAgICAgdGhpcy5hdXRvbWF0aW9uLnR5cGUgPSB0aGlzLmF1dG9tYXRpb25UeXBlOwogICAgICB0aGlzLmFkZExhbmRpbmdQYWdlRGF0YSgpOwogICAgICB0aGlzLmFkZFN1cnZleURhdGEoKTsKICAgICAgdGhpcy5hZGRMb3lhbHR5Q291cG9uKCk7CiAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSB0aGlzLnNwbGl0QW5kQ29udmVydE5hbWUodGhpcy5kaXNwbGF5TmFtZSk7CiAgICAgIGlmKHRoaXMuc2VsZWN0ZWRBdXRvbWF0aW9uKSB7CiAgICAgICAgdGhpcy5wYWdlQWN0aW9uID0gJ1VwZGF0ZSc7CiAgICAgICAgdGhpcy5hdXRvbWF0aW9uID0gdGhpcy5zZWxlY3RlZEF1dG9tYXRpb247CiAgICAgIH0KICAgICAgdGhpcy5nZXRVc2VyRGF0YSgpOwogICAgICB0aGlzLmNoZWNrQWdyZWVtZW50KCk7CiAgICB9LAogICAgY2hlY2tBZ3JlZW1lbnQoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmKHZtLmxvY2F0aW9uSWQpIHsKICAgICAgICBMb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb24odm0ubG9jYXRpb25JZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBpZihyZXNwb25zZS50Y3BhQWdyZWVtZW50KSB7CiAgICAgICAgICAgIHRoaXMuYWdyZWVtZW50ID0gcmVzcG9uc2UudGNwYUFncmVlbWVudC5jb25zZW50OwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICBjb252ZXJ0VG9DYXBzKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBpZih2bS5hdXRvbWF0aW9uICYmIHZtLmF1dG9tYXRpb24ua2V5d29yZCkgdm0uYXV0b21hdGlvbi5rZXl3b3JkID0gdm0uYXV0b21hdGlvbi5rZXl3b3JkLnRvVXBwZXJDYXNlKCkucmVwbGFjZSgvXHMrL2csICcnKTsKICAgICAgbGV0IGFsbEtleXMgPSBbXQogICAgICBBdXRvbWF0aW9uU2VydmljZS5nZXRBdXRvbWF0aW9uQnlUeXBlKG51bGwsICdsb3lhbHR5JykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgcmVzcG9uc2UucmVzdWx0cy5tYXAoYXV0byA9PiB7CiAgICAgICAgICBhbGxLZXlzLnB1c2goYXV0by5rZXl3b3JkKQogICAgICAgIH0pCiAgICAgICAgdm0uZHVwbGljYXRlS2V5ID0gYWxsS2V5cy5pbmNsdWRlcyh2bS5hdXRvbWF0aW9uLmtleXdvcmQpID8gdHJ1ZSA6IGZhbHNlOwogICAgICB9KQogICAgfSwKICAgIGdldFVzZXJEYXRhKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICB2bS51c2VyRGF0YSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRVc2VyJykpOwogICAgfSwKICAgIHZhbGlkYXRlSUQoaWQpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgQXV0b21hdGlvblNlcnZpY2UuZ2V0QXV0b21hdGlvbnNCeUxvY2F0aW9uKHZtLmxvY2F0aW9uSWQsIHZtLmF1dG9tYXRpb24udHlwZSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgbGV0IGxvY2F0aW9uQXV0b3MgPSByZXNwb25zZS5yZXN1bHQKICAgICAgICBsZXQgYWxsSWRzID0gW10KICAgICAgICBsb2NhdGlvbkF1dG9zLm1hcChhdXRvID0+IHsKICAgICAgICAgIGlmKGF1dG8uc3RhdHVzICE9ICdkZWxldGVkJykgewogICAgICAgICAgICBpZih0eXBlb2YgYXV0by5pZGVudGlmaWVyICE9ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgYWxsSWRzLnB1c2goSlNPTi5zdHJpbmdpZnkoYXV0by5pZGVudGlmaWVyKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgYWxsSWRzLnB1c2goYXV0by5pZGVudGlmaWVyKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgdm0uZHVwbGljYXRlSWQgPSBhbGxJZHMuaW5jbHVkZXMoaWQpOwogICAgICB9KQogICAgfSwKICAgIHNhdmVBdXRvbWF0aW9uKCkgewogICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAic2hvdyIpOwogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBpZih2bS5wYWdlQWN0aW9uID09ICdBZGQgTmV3JykgewogICAgICAgIEF1dG9tYXRpb25TZXJ2aWNlLnNhdmVBdXRvbWF0aW9uKHZtLmF1dG9tYXRpb24pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgaWYocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAiaGlkZSIpOwogICAgICAgICAgICBFdmVudFNlcnZpY2UuJGVtaXQoCiAgICAgICAgICAgICAgInN1Y2Nlc3NNZXNzYWdlIiwKICAgICAgICAgICAgICAiSG9vcmF5ISBBdXRvbWF0aW9uIFNhdmVkLiIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgdm0uY2xvc2VNb2RhbCgnU2F2ZWQnKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIik7CiAgICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgKICAgICAgICAgICAgICAiZXJyb3JNZXNzYWdlIiwKICAgICAgICAgICAgICAiU29ycnksIHNvbWV0aGluZyB3ZW50IHdyb25nLiBQbGVhc2UgdHJ5IGFnYWluLiIKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9IGVsc2UgewogICAgICAgIEF1dG9tYXRpb25TZXJ2aWNlLnVwZGF0ZUF1dG9tYXRpb24odm0uYXV0b21hdGlvbikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBpZihyZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIik7CiAgICAgICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgKICAgICAgICAgICAgICAic3VjY2Vzc01lc3NhZ2UiLAogICAgICAgICAgICAgICJIb29yYXkhIEF1dG9tYXRpb24gU2F2ZWQuIgogICAgICAgICAgICApOwogICAgICAgICAgICB2bS5jbG9zZU1vZGFsKCdTYXZlZCcpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgImhpZGUiKTsKICAgICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KAogICAgICAgICAgICAgICJlcnJvck1lc3NhZ2UiLAogICAgICAgICAgICAgICJTb3JyeSwgc29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4uIgogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICBzcGxpdEFuZENvbnZlcnROYW1lKGRhdGEpIHsKICAgICAgcmV0dXJuIChkYXRhLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZGF0YS5zdWJzdHIoMSkpLnJlcGxhY2UoLyhbQS1aXSkvZywgIiAkMSIpLnRyaW0oKTsKICAgIH0sCgogICAgLy8gTG9naWMgYmVsb3cgYWxsb3dpbmcgYW4gYWN0aW9uIHRvIGNvbnRhaW4gYSBuZXcgc21zIG1lc3NhZ2UsIGFkanVzdCB0aGUgPiA3IGluIG9yZGVyIHRvIGNoYW5nZSB0aW1lIGZyYW1lIGRpZmZlcmVuY2UgdG8gYWxsb3cgbW9yZSBvciBsZXNzIHRpbWUgdG8gcGFzcyBiZXR3ZWVuIHRleHRzLgoKICAgIGNoZWNrVGltZSh0aW1lLCBpbmRleCkgewogICAgICBsZXQgbmV3QXJyYXkgPSBbXTsKICAgICAgdGhpcy5hdXRvbWF0aW9uLmFjdGlvbnMubWFwKGUgPT4gewogICAgICAgIG5ld0FycmF5LnB1c2goZS50aW1lKTsKICAgICAgfSkKICAgICAgbGV0IG5ld1RpbWVzID0gbmV3QXJyYXkuc29ydCggKCBhLCBiICkgPT4gYSAtIGIgKTsKICAgICAgaWYoaW5kZXggPT0gMCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgaWYgKGluZGV4ID4gMCAmJiB0aW1lID09IDApewogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9IGVsc2UgewogICAgICAgIGlmKG5ld1RpbWVzLmluZGV4T2YodGltZSkgPiAwKSB7CiAgICAgICAgICBpZihNYXRoLmFicyh0aW1lIC0gbmV3VGltZXNbbmV3VGltZXMuaW5kZXhPZih0aW1lKS0xXSkgPiA3KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSAgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgY2hlY2tNaW5UaW1lcyhhY3Rpb24pewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBsZXQgaW5kZXggPSB2bS5zZWxlY3RlZEluZGV4OwogICAgICBpZihpbmRleCA9PSAwICkgewogICAgICAgIHJldHVybiAwOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB2bS5hdXRvbWF0aW9uLmFjdGlvbnNbaW5kZXgtMV0udGltZTsKICAgICAgfQogICAgfSwKICAgIGFkZEFjdGlvbihsb2NhdGlvbiwgaW5kZXgpIHsKICAgICAgaWYgKHRoaXMuYXV0b21hdGlvblR5cGUgPT0gInJldmlld1JlcXVlc3QiKSB7CiAgICAgICAgdmFyIG5ld0FjdGlvbiA9IHsKICAgICAgICAgIHRpbWU6IDAsCiAgICAgICAgICBlbWFpbDogewogICAgICAgICAgICBzdWJqZWN0OiAiIiwKICAgICAgICAgICAgZGVzaWduOiB7CiAgICAgICAgICAgICAgZGF0YTogIiIsCiAgICAgICAgICAgICAgZGVzaWduOiAiIgogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgc21zOiB7CiAgICAgICAgICAgIHByZXZpZXc6ICIiLAogICAgICAgICAgICBtZXNzYWdlOiAiIgogICAgICAgICAgfSwKICAgICAgICAgIG5vdGljZTogewogICAgICAgICAgICBwb3RlbnRpYWxOZWdSZXY6IHRydWUsCiAgICAgICAgICAgIGFjdHVhbE5lZ1JldjogdHJ1ZSwKICAgICAgICAgICAgcG9zaXRpdmVSZXY6IHRydWUsCiAgICAgICAgICAgIHByaXZhdGVSZXY6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICBsYW5kaW5nUGFnZTogewogICAgICAgICAgICBscDE6ICJIb3cgQXJlIFdlIERvaW5nPyIsCiAgICAgICAgICAgIGxwMjogIlBsZWFzZSBSYXRlIFlvdXIgRXhwZXJpZW5jZSIsCiAgICAgICAgICAgIGxwMzogIkF0ICIgKyB0aGlzLmF1dG9tYXRpb25Mb2NhdGlvbk5hbWUgKyAiLCB3ZSBjYXJlIGFib3V0IHlvdXIgZXhwZXJpZW5jZSBhbmQgd2FudCB0byBoZWFyIGFib3V0IGl0LiBQbGVhc2UgdGFrZSBhIG1vbWVudCB0byBsZXQgdXMga25vdyBob3cgd2UncmUgZG9pbmchIiwKICAgICAgICAgICAgcnAxOiAiV2UncmUgU29ycnkgVG8gSGVhciBUaGF0IiwKICAgICAgICAgICAgcnAyOiAiUGxlYXNlIFRlbGwgVXMgTW9yZSIsCiAgICAgICAgICAgIHJwMzoKICAgICAgICAgICAgICAiV2UgdGFrZSBvdXIgY3VzdG9tZXIgZmVlZGJhY2sgdmVyeSBzZXJpb3VzbHkgLSBwbGVhc2UgbGV0IHVzIGtub3cgaG93IHlvdXIgZXhwZXJpZW5jZSB3YXMgbGVzcyB0aGFuIGlkZWFsIHNvIHdlIGNhbiBpbXByb3ZlIGluIHRoZSBmdXR1cmUuIEluIG9yZGVyIHRvIGJldHRlciBhZGRyZXNzIHRoZSBpc3N1ZSwgcGxlYXNlIHByb3ZpZGUgc3BlY2lmaWNzLiBXZSBhcHByZWNpYXRlIHlvdXIgZmVlZGJhY2shIgogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0gZWxzZSBpZiAodGhpcy5hdXRvbWF0aW9uVHlwZSA9PSAic3VydmV5IikgewogICAgICAgIHZhciBuZXdBY3Rpb24gPSB7CiAgICAgICAgICB0aW1lOiAwLAogICAgICAgICAgZW1haWw6IHsKICAgICAgICAgICAgc3ViamVjdDogIiIsCiAgICAgICAgICAgIGRlc2lnbjogewogICAgICAgICAgICAgIGRhdGE6ICIiLAogICAgICAgICAgICAgIGRlc2lnbjogIiIKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHNtczogewogICAgICAgICAgICBwcmV2aWV3OiAiIiwKICAgICAgICAgICAgbWVzc2FnZTogIiIKICAgICAgICAgIH0sCiAgICAgICAgICBzdXJ2ZXlRdWVzdGlvbnM6IFtdCiAgICAgICAgfTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmF1dG9tYXRpb250eXBlID09ICJsb3lhbHR5IikgewogICAgICAgIHZhciBuZXdBY3Rpb24gPSB7CiAgICAgICAgICB0aW1lOiAwLAogICAgICAgICAgZW1haWw6IHsKICAgICAgICAgICAgc3ViamVjdDogIiIsCiAgICAgICAgICAgIGRlc2lnbjogewogICAgICAgICAgICAgIGRhdGE6ICIiLAogICAgICAgICAgICAgIGRlc2lnbjogIiIKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHNtczogewogICAgICAgICAgICBwcmV2aWV3OiAiIiwKICAgICAgICAgICAgbWVzc2FnZTogIiIKICAgICAgICAgIH0sCiAgICAgICAgICBsb3lhbHR5Q291cG9uOiB7CiAgICAgICAgICAgIGltYWdlOiAnJywKICAgICAgICAgICAgaW1hZ2VUeXBlOiAnJwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIG5ld0FjdGlvbiA9IHsKICAgICAgICAgIHRpbWU6IDAsCiAgICAgICAgICBlbWFpbDogewogICAgICAgICAgICBzdWJqZWN0OiAiIiwKICAgICAgICAgICAgZGVzaWduOiB7CiAgICAgICAgICAgICAgZGF0YTogIiIsCiAgICAgICAgICAgICAgZGVzaWduOiAiIgogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgc21zOiB7CiAgICAgICAgICAgIHByZXZpZXc6ICIiLAogICAgICAgICAgICBtZXNzYWdlOiAiIgogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgICAgaWYgKGxvY2F0aW9uID09ICJiZWxvdyIpIHsKICAgICAgICB0aGlzLmF1dG9tYXRpb24uYWN0aW9ucy5zcGxpY2UoaW5kZXggKyAxLCAwLCBuZXdBY3Rpb24pOwogICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uID09ICJhYm92ZSIpIHsKICAgICAgICB0aGlzLmF1dG9tYXRpb24uYWN0aW9ucy5zcGxpY2UoaW5kZXgsIDAsIG5ld0FjdGlvbik7CiAgICAgIH0KICAgIH0sCiAgICBhZGRMYW5kaW5nUGFnZURhdGEoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmICh2bS5hdXRvbWF0aW9uVHlwZSA9PSAicmV2aWV3UmVxdWVzdCIpIHsKICAgICAgICB2bS5hdXRvbWF0aW9uLmFjdGlvbnNbMF0ubm90aWNlID0gewogICAgICAgICAgcG90ZW50aWFsTmVnUmV2OiB0cnVlLAogICAgICAgICAgYWN0dWFsTmVnUmV2OiB0cnVlLAogICAgICAgICAgcG9zaXRpdmVSZXY6IHRydWUsCiAgICAgICAgICBwcml2YXRlUmV2OiB0cnVlCiAgICAgICAgfSwKICAgICAgICB2bS5hdXRvbWF0aW9uLmFjdGlvbnNbMF0ubGFuZGluZ1BhZ2UgPSB7CiAgICAgICAgICBscDE6ICJIb3cgQXJlIFdlIERvaW5nPyIsCiAgICAgICAgICBscDI6ICJQbGVhc2UgUmF0ZSBZb3VyIEV4cGVyaWVuY2UiLAogICAgICAgICAgbHAzOiAiQXQgIiArIHRoaXMuYXV0b21hdGlvbkxvY2F0aW9uTmFtZSArICIsIHdlIGNhcmUgYWJvdXQgeW91ciBleHBlcmllbmNlIGFuZCB3YW50IHRvIGhlYXIgYWJvdXQgaXQuIFBsZWFzZSB0YWtlIGEgbW9tZW50IHRvIGxldCB1cyBrbm93IGhvdyB3ZSdyZSBkb2luZyEiLAogICAgICAgICAgcnAxOiAiV2UncmUgU29ycnkgVG8gSGVhciBUaGF0IiwKICAgICAgICAgIHJwMjogIlBsZWFzZSBUZWxsIFVzIE1vcmUiLAogICAgICAgICAgcnAzOgogICAgICAgICAgICAiV2UgdGFrZSBvdXIgY3VzdG9tZXIgZmVlZGJhY2sgdmVyeSBzZXJpb3VzbHkgLSBwbGVhc2UgbGV0IHVzIGtub3cgaG93IHlvdXIgZXhwZXJpZW5jZSB3YXMgbGVzcyB0aGFuIGlkZWFsIHNvIHdlIGNhbiBpbXByb3ZlIGluIHRoZSBmdXR1cmUuIEluIG9yZGVyIHRvIGJldHRlciBhZGRyZXNzIHRoZSBpc3N1ZSwgcGxlYXNlIHByb3ZpZGUgc3BlY2lmaWNzLiBXZSBhcHByZWNpYXRlIHlvdXIgZmVlZGJhY2shIgogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBhZGRTdXJ2ZXlEYXRhKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBpZiAodm0uYXV0b21hdGlvblR5cGUgPT0gInN1cnZleSIpIHsKICAgICAgICB2bS5hdXRvbWF0aW9uLmFjdGlvbnNbMF0uc3VydmV5UXVlc3Rpb25zID0gW107CiAgICAgIH0KICAgIH0sCiAgICBhZGRMb3lhbHR5Q291cG9uKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBpZih2bS5hdXRvbWF0aW9uVHlwZSA9PSAnbG95YWx0eScpIHsKICAgICAgICB2bS5hdXRvbWF0aW9uLmFjdGlvbnNbMF0ubG95YWx0eUNvdXBvbiA9IHsKICAgICAgICAgIGltYWdlOiAnJywKICAgICAgICAgIGltYWdlVHlwZTogJycsCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcmVtb3ZlQWN0aW9uKGluZGV4KSB7CiAgICAgIHRoaXMuYXV0b21hdGlvbi5hY3Rpb25zLnNwbGljZShpbmRleCwgMSk7CiAgICB9LAoKICAgIHByZXZpZXdFbWFpbChhY3Rpb24pIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgLy8gUmVtb3ZlcyBhbnkgb3RoZXIgZWRpdGluZyBzbyB0aGF0IG90aGVyIGVtYWlsIHByZXZpZXdzIGRvbid0IGludGVyZmVyZS4KICAgICAgdm0uY2xvc2VBbGxFZGl0aW5nKCk7CiAgICAgIHZtLnNlbGVjdGVkQWN0aW9uID0gYWN0aW9uOwogICAgICB2bS5lbWFpbFByZXZpZXcgPSB0cnVlOwogICAgICAvLyBDaGVja3MgZm9yIHByb3BlciBpbmZvcm1hdGlvbiBpbiBvcmRlciB0byBwYXNzIGNvcnJlY3QgZGF0YSB0byBtYWlsY2hpbXAgZm9yIHRlc3RpbmcuCiAgICAgIGlmIChjb25maWcuc3ViRG9tYWluKSB7CiAgICAgICAgdmFyIHN1YkRvbWFpbiA9IGNvbmZpZy5zdWJEb21haW47CiAgICAgIH0KICAgICAgaWYgKGNvbmZpZy5iYXNlVXJsKSB7CiAgICAgICAgdmFyIGJhc2VVcmwgPSBjb25maWcuYmFzZVVybDsKICAgICAgfQogICAgICAvLyBUaW1lb3V0IGlzIHNldCB0byBiZSBtYW5pcHVsYXRlZCBpZiB3ZSBuZWVkIG1vcmUgdGltZSBsYXRlciBpbiBhIHNpbmdsZSB2YXJpYWJsZS4KICAgICAgdmFyIHRpbWVPdXQgPSA1MDA7CiAgICAgIC8vIENoZWNrIGlmIHRoZSBhY3Rpb24gcGFzc2VkIGludG8gdGhlIGZ1bmN0aW9uIGFscmVhZHkgaGFzIGJlZW4gc2F2ZWQsIHNvIHRoYXQgaXQgaXMgbm90IG92ZXJ3cml0dGVuIGlmIGl0IGlzLgogICAgICBpZiAoYWN0aW9uLmVtYWlsLmRlc2lnbi5kZXNpZ24pIHsKICAgICAgICAvLyBDcmVhdGUgdGhlIHNjcmlwdCBhbmQgaWZyYW1lIHRvIGJlIHVzZWQgdG8gZWRpdCB0aGUgZW1haWwuCiAgICAgICAgdm0uJHVubGF5ZXJTY3JpcHQgPSB7CiAgICAgICAgICBpZDogImVtYWlsLWVkaXRvciIsCiAgICAgICAgICBwcm9qZWN0SWQ6IDE3NzcsCiAgICAgICAgICBkaXNwbGF5TW9kZTogImVtYWlsIgogICAgICAgIH07CgogICAgICAgIHZhciBkID0gZG9jdW1lbnQ7CiAgICAgICAgdmFyIHMgPSBkLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOwogICAgICAgIHMudHlwZSA9ICJ0ZXh0L2phdmFzY3JpcHQiOwogICAgICAgIHMuZGVmZXIgPSB0cnVlOwogICAgICAgIHMuc3JjID0gIi8vZWRpdG9yLnVubGF5ZXIuY29tL2VtYmVkLmpzIjsKICAgICAgICB2YXIgdCA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpWzBdOwogICAgICAgIHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUocywgdCk7CiAgICAgICAgLy8gQWN0dWFsbHkgbG9hZCB0aGUgZXhpc3RpbmcgZGVzaWduIGluIHRoZSBhY3Rpb24sIGNoZWNrIGZvciBpbml0aWFsaXplZFVubGF5ZXIgZXhpc3RzIGFzIGZhaWxzYWZlIGZvciB0aGUgaWZyYW1lIG5vdCBiZWluZyByZXNldCBwcm9wZXJseS4KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIGlmICghdm0uaW5pdGlhbGl6ZWRVbmxheWVyKSB7CiAgICAgICAgICAgIHVubGF5ZXIuaW5pdCh2bS4kdW5sYXllclNjcmlwdCk7CiAgICAgICAgICAgIHZtLmluaXRpYWxpemVkVW5sYXllciA9IHRydWU7CiAgICAgICAgICAgIHVubGF5ZXIubG9hZERlc2lnbihhY3Rpb24uZW1haWwuZGVzaWduLmRlc2lnbik7CiAgICAgICAgICB9CiAgICAgICAgfSwgdGltZU91dCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gSWYgZW1haWwgZGVzaWduIGRvZW5zJ3QgZXhpc3QgZm9yIHRoZSBzZWxlY3RlZCBhY3Rpb24sIGNyZWF0ZSBhbGwgbmVjZXNzYXJ5IGZpZWxkcyB0byBwYXNzIGFzIGRlc2lnblRhZ3MgYW5kIHNldCB0aGUgaW5pdGlhbCBkZXNpZ24uCiAgICAgICAgTG9jYXRpb25TZXJ2aWNlLmdldExvY2F0aW9uKHZtLmxvY2F0aW9uSWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRpc3BsYXlOYW1lKSB7CiAgICAgICAgICAgIHZtLmF1dG9tYXRpb25Mb2NhdGlvbk5hbWUgPSByZXNwb25zZS5kaXNwbGF5TmFtZTsKICAgICAgICAgICAgdm0uYWRkTGFuZGluZ1BhZ2VEYXRhKCk7CiAgICAgICAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSByZXNwb25zZS5kaXNwbGF5TmFtZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSByZXNwb25zZS5uYW1lOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHN0eWxlID0gcmVzcG9uc2UubG9jYXRpb25TdHlsZTsKICAgICAgICAgIHZhciBsb2dvID0gc3R5bGUubG9nbzsKICAgICAgICAgIHZhciBjb2xvcnMgPSBzdHlsZS5idXR0b25Db2xvciB8fCAiIzRmY2JjNSI7CiAgICAgICAgICB2YXIgYnV0dG9uQ29sb3JzID0gdm0uZ2VuZXJhdGVCdXR0b25Db2xvcnMoY29sb3JzKTsKICAgICAgICAgIHZhciBhdXRvbWF0aW9uSWQgPSAnQVUnICsgdm0uZ2VuZXJhdGVBdXRvSWQoJzAnLCAxMSk7CiAgICAgICAgICB2bS5hdXRvbWF0aW9uLmF1dG9tYXRpb25JZCA9IGF1dG9tYXRpb25JZDsKCiAgICAgICAgICB2bS4kdW5sYXllclNjcmlwdCA9IHsKICAgICAgICAgICAgaWQ6ICJlbWFpbC1lZGl0b3IiLAogICAgICAgICAgICBwcm9qZWN0SWQ6IDE3NzcsCiAgICAgICAgICAgIGRpc3BsYXlNb2RlOiAiZW1haWwiLAogICAgICAgICAgICBkZXNpZ25UYWdzOiB7CiAgICAgICAgICAgICAgbG9jYXRpb25fbmFtZTogbG9jYXRpb25OYW1lLAogICAgICAgICAgICAgIC8vIFVwZGF0ZSB3aGVuIGF1dG9tYXRpb24gaWRlbnRpZmllciBpcyBjcmVhdGVkLgogICAgICAgICAgICAgIC8vIHRlbXBsYXRlX2lkOiB2bS5hdXRvbWF0aW9uLm5hbWUsCiAgICAgICAgICAgICAgcmV2aWV3X3VybDogImh0dHBzOi8vIiArIHN1YkRvbWFpbiArICIub3Bpbmlpb24uY29tL2F1dG9tYXRpb25SZXZpZXdFbWFpbC8iICsgdm0ubG9jYXRpb25JZCArICcvJyArIGF1dG9tYXRpb25JZCsgJzonICsgJyp8YWlkfCovKnxjaWR8KicsCiAgICAgICAgICAgICAgZGlzcGxheV91cmw6ICJodHRwczovLyIgKyBzdWJEb21haW4gKyAiLm9waW5paW9uLmNvbS9sZWF2ZUZlZWRiYWNrLyIgKyB2bS5sb2NhdGlvbklkICsgJy8qfGNpZHwqL0VtYWlsJywKICAgICAgICAgICAgICB1bnN1YnNjcmliZV91cmw6ICJodHRwczovLyIgKyBzdWJEb21haW4gKyAiLm9waW5paW9uLmNvbS91bnN1YnNjcmliZT9jaWQ9KnxjaWR8KiIsCiAgICAgICAgICAgICAgaW1hZ2VfdXJsOiBiYXNlVXJsICsgYGxvY2F0aW9uXC9zaG93SW1hZ2VcL2AgKyB2bS5sb2NhdGlvbklkLAogICAgICAgICAgICAgIHN1cnZleV91cmw6IGJhc2VVcmwgKyAnc3VydmV5UmVzcG9uc2UvJywKICAgICAgICAgICAgICBidXR0b25fY29sb3JfMDogYnV0dG9uQ29sb3JzWzBdLAogICAgICAgICAgICAgIGJ1dHRvbl9jb2xvcl8xOiBidXR0b25Db2xvcnNbMV0sCiAgICAgICAgICAgICAgYnV0dG9uX2NvbG9yXzI6IGJ1dHRvbkNvbG9yc1syXSwKICAgICAgICAgICAgICBidXR0b25fY29sb3JfMzogYnV0dG9uQ29sb3JzWzNdLAogICAgICAgICAgICAgIGJ1dHRvbl9jb2xvcl80OiBidXR0b25Db2xvcnNbNF0sCiAgICAgICAgICAgICAgZm9vdGVyX2NvbG9yOiBzdHlsZS5mb290ZXJDb2xvciB8fCAibGlnaHRncmV5IgogICAgICAgICAgICB9CiAgICAgICAgICB9OwoKICAgICAgICAgIGlmICh2bS5hdXRvbWF0aW9uVHlwZSA9PSAiY2FtcGFpZ24iKSB7CiAgICAgICAgICAgIHZtLiR1bmxheWVyU2NyaXB0LnRlbXBsYXRlSWQgPSA0OTc3OwogICAgICAgICAgfSBlbHNlIGlmICh2bS5hdXRvbWF0aW9uVHlwZSA9PSAic3VydmV5IikgewogICAgICAgICAgICB2bS4kdW5sYXllclNjcmlwdC50ZW1wbGF0ZUlkID0gNDk3NjsKICAgICAgICAgIH0gZWxzZSBpZiAodm0uYXV0b21hdGlvblR5cGUgPT0gImxveWFsdHkiKSB7CiAgICAgICAgICAgIHZtLiR1bmxheWVyU2NyaXB0LnRlbXBsYXRlSWQgPSA1Mjg0OwogICAgICAgICAgfSBlbHNlIGlmICh2bS5hdXRvbWF0aW9uVHlwZSA9PSAicmV2aWV3UmVxdWVzdCIpIHsKICAgICAgICAgICAgdm0uJHVubGF5ZXJTY3JpcHQudGVtcGxhdGVJZCA9IDUzMDc7CiAgICAgICAgICAgIGlmICh2bS50ZW1wbGF0ZVR5cGUgPT0gInN0YW5kYXJkIiB8fCAhdm0udGVtcGxhdGVUeXBlKSB7CiAgICAgICAgICAgICAgdm0uJHVubGF5ZXJTY3JpcHQuZGVzaWduVGFncy5tZXNzYWdlX2Jsb2NrID0KICAgICAgICAgICAgICAgICJUaGFuayB5b3Ugc28gbXVjaCBmb3IgY2hvb3NpbmcgIiArCiAgICAgICAgICAgICAgICBsb2NhdGlvbk5hbWUgKwogICAgICAgICAgICAgICAgIiEgWW91ciBzYXRpc2ZhY3Rpb24gaXMgb3VyIHRvcCBwcmlvcml0eSwgYW5kIHdlJ2QgbG92ZSB0byBoZWFyIGZyb20geW91LiBQbGVhc2UgdGFrZSBhIGZldyBzZWNvbmRzIHRvIGxldCB1cyBrbm93IGhvdyB3ZSdyZSBkb2luZy4iOwogICAgICAgICAgICB9IGVsc2UgaWYgKHZtLnRlbXBsYXRlVHlwZSA9PSAicHJvcGVydHkiKSB7CiAgICAgICAgICAgICAgdm0uJHVubGF5ZXJTY3JpcHQuZGVzaWduVGFncy5tZXNzYWdlX2Jsb2NrID0KICAgICAgICAgICAgICAgICJUaGFua3MgZm9yIGpvaW5pbmcgdXMhIFlvdXIgc2F0aXNmYWN0aW9uIGlzIG91ciB0b3AgcHJpb3JpdHksIGFuZCB3ZSdkIGxvdmUgdG8gaGVhciBmcm9tIHlvdS4gUGxlYXNlIHRha2UgYSBmZXcgc2Vjb25kcyB0byByYXRlIHlvdXIgZXhwZXJpZW5jZS4iOwogICAgICAgICAgICB9IGVsc2UgaWYgKHZtLnRlbXBsYXRlVHlwZSA9PSAic2VydmljZSIpIHsKICAgICAgICAgICAgICB2bS4kdW5sYXllclNjcmlwdC5kZXNpZ25UYWdzLm1lc3NhZ2VfYmxvY2sgPQogICAgICAgICAgICAgICAgIlRoYW5rIHlvdSBzbyBtdWNoIGZvciBjaG9vc2luZyAiICsKICAgICAgICAgICAgICAgIGxvY2F0aW9uTmFtZSArCiAgICAgICAgICAgICAgICAiISBZb3VyIHNhdGlzZmFjdGlvbiBpcyBvdXIgdG9wIHByaW9yaXR5LCBhbmQgd2UnZCBsb3ZlIHRvIGhlYXIgZnJvbSB5b3UuIFBsZWFzZSB0YWtlIGEgZmV3IHNlY29uZHMgdG8gbGV0IHVzIGtub3cgaG93IHdlJ3JlIGRvaW5nLiI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdm0uJHVubGF5ZXJTY3JpcHQuZGVzaWduVGFncy5tZXNzYWdlX2Jsb2NrID0KICAgICAgICAgICAgICAgICJUaGFuayB5b3Ugc28gbXVjaCBmb3IgY2hvb3NpbmcgIiArCiAgICAgICAgICAgICAgICBsb2NhdGlvbk5hbWUgKwogICAgICAgICAgICAgICAgIiEgWW91ciBzYXRpc2ZhY3Rpb24gaXMgb3VyIHRvcCBwcmlvcml0eSwgYW5kIHdlJ2QgbG92ZSB0byBoZWFyIGZyb20geW91LiBQbGVhc2UgdGFrZSBhIGZldyBzZWNvbmRzIHRvIGxldCB1cyBrbm93IGhvdyB3ZSdyZSBkb2luZy4iOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGQgPSBkb2N1bWVudDsKICAgICAgICAgIHZhciBzID0gZC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKICAgICAgICAgIHMudHlwZSA9ICJ0ZXh0L2phdmFzY3JpcHQiOwogICAgICAgICAgcy5kZWZlciA9IHRydWU7CiAgICAgICAgICBzLnNyYyA9ICIvL2VkaXRvci51bmxheWVyLmNvbS9lbWJlZC5qcyI7CiAgICAgICAgICB2YXIgdCA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpWzBdOwogICAgICAgICAgdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzLCB0KTsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBpZiAoIXZtLmluaXRpYWxpemVkVW5sYXllcikgewogICAgICAgICAgICAgIHZtLmluaXRpYWxpemVkVW5sYXllciA9IHRydWU7CiAgICAgICAgICAgICAgdW5sYXllci5pbml0KHZtLiR1bmxheWVyU2NyaXB0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgdGltZU91dCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBzYXZlRW1haWxEZXNpZ24oKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmICh2bS5pbml0aWFsaXplZFVubGF5ZXIpIHsKICAgICAgICB1bmxheWVyLmV4cG9ydEh0bWwoZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgdm0uc2VsZWN0ZWRBY3Rpb24uZW1haWwuZGVzaWduID0gewogICAgICAgICAgICBkYXRhOiBkYXRhLmh0bWwsCiAgICAgICAgICAgIGRlc2lnbjogZGF0YS5kZXNpZ24KICAgICAgICAgIH07CiAgICAgICAgICB2bS5yZW1vdmVJZnJhbWUoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgICAvLyBjb25zb2xlLmxvZyh2bS5zZWxlY3RlZEFjdGlvbi5lbWFpbCk7CiAgICB9LAogICAgcHJldmlld1NNUyhhY3Rpb24sIGkpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgdm0uc2VsZWN0ZWRBY3Rpb24gPSBhY3Rpb247CiAgICAgIC8vIEFkZCBsb2dpYyBmb3Igb3BlbmluZyBvbmx5IGlmIGluZGV4ID09IDAgb3IgZGlzcGxheSBhZ3JlZW1lbnQuCiAgICAgIGlmKCjCoGkgPT0gMCAmJiB2bS5hdXRvbWF0aW9uLmFjdGlvbnMubGVuZ3RoICYmIHZtLmF1dG9tYXRpb24uYWN0aW9ucy5sZW5ndGggPT0gMSkgfHwgdm0uYWdyZWVtZW50KSB7CiAgICAgICAgdm0uY2xvc2VBbGxFZGl0aW5nKCk7CiAgICAgICAgdm0uc21zUHJldmlldyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdm0udGNwYUNvbXBsaWFuY2VPcGVuID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIGNoYW5nZUFncmVlbWVudCgpIHsKICAgICAgdGhpcy5hZ3JlZW1lbnQgPSB0cnVlOwogICAgICAvLyBBY3RpdmF0ZSB0aGlzIGxpbmUgb2YgY29kZSBvbmNlIGJhY2sgZW5kIGlzIHB1c2hlZC4KICAgICAgTG9jYXRpb25TZXJ2aWNlLnNldFRDUEFBZ3JlZW1lbnQodGhpcy5sb2NhdGlvbklkLCB0aGlzLnVzZXJEYXRhKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgIH0pCiAgICAgIHRoaXMudGNwYUNvbXBsaWFuY2VPcGVuID0gZmFsc2U7CiAgICAgIHRoaXMucHJldmlld1NNUyh0aGlzLnNlbGVjdGVkQWN0aW9uKTsKICAgIH0sCiAgICBjYW5jZWxTTVMoKSB7CiAgICAgIHRoaXMudGNwYUNvbXBsaWFuY2VPcGVuID0gZmFsc2U7CiAgICAgIHRoaXMuc2VsZWN0ZWRBY3Rpb24gPSB7CiAgICAgICAgdGltZTogMCwKICAgICAgICBlbWFpbDogewogICAgICAgICAgc3ViamVjdDogIiIsCiAgICAgICAgICBkZXNpZ246IHsKICAgICAgICAgICAgZGF0YTogIiIsCiAgICAgICAgICAgIGRlc2lnbjogIiIKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHNtczogewogICAgICAgICAgcHJldmlldzogIiIsCiAgICAgICAgICBtZXNzYWdlOiAiIgogICAgICAgIH0sCiAgICAgICAgc3VydmV5UXVlc3Rpb25zOiBbXQogICAgICAgIC8vIHJlc3RyaWN0aW9uOiAnJwogICAgICB9CiAgICB9LAogICAgZ2VuZXJhdGVBdXRvSWQocG9zc0l0ZW1zLCBsZW5ndGgpIHsKICAgICAgdmFyIHRleHQgPSAnJzsKICAgICAgdmFyIG9wdGlvbnMgPSAnJzsKICAgICAgaWYgKHBvc3NJdGVtcy5pbmRleE9mKCcwJykgPiAtMSkgb3B0aW9ucyArPSAnMDEyMzQ1Njc4OSc7CiAgICAgIGlmIChwb3NzSXRlbXMuaW5kZXhPZignYScpID4gLTEpIG9wdGlvbnMgKz0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JzsKICAgICAgaWYgKHBvc3NJdGVtcy5pbmRleE9mKCdBJykgPiAtMSkgb3B0aW9ucyArPSAnQUJDREVGR0hJa0xNTk9QUVJTVFVWV1hZWic7CiAgICAgIGZvciAodmFyIGk9MDsgaTxsZW5ndGggJiYgb3B0aW9ucy5sZW5ndGg+MDsgaSsrKSB7CiAgICAgICAgdGV4dCArPSBvcHRpb25zLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBvcHRpb25zLmxlbmd0aCkpOwogICAgICB9CiAgICAgIHJldHVybiB0ZXh0OwogICAgfSwKICAgIGVkaXRUaW1lQ29uZGl0aW9uKGFjdGlvbiwgaW5kZXgpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgdm0uY2xvc2VBbGxFZGl0aW5nKCk7CiAgICAgIHZtLnNlbGVjdGVkQWN0aW9uID0gYWN0aW9uOwogICAgICB2bS5zZWxlY3RlZEluZGV4ID0gaW5kZXg7CiAgICAgIHZtLmVkaXRpbmdUaW1lQ29uZGl0aW9uID0gdHJ1ZTsKICAgIH0sCiAgICBlZGl0TGFuZGluZ1BhZ2UoYWN0aW9uKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmKGFjdGlvbi5lbWFpbC5zdWJqZWN0KSB7CiAgICAgICAgdm0uY2xvc2VBbGxFZGl0aW5nKCk7CiAgICAgICAgdm0uc2VsZWN0ZWRBY3Rpb24gPSBhY3Rpb247CiAgICAgICAgdm0uZWRpdGluZ0xhbmRpbmdQYWdlID0gdHJ1ZTsKICAgICAgICB2bS5sYW5kaW5nTWVzc2FnZSA9ICdFZGl0IExhbmRpbmcgUGFnZSBEZXRhaWxzJwogICAgICB9IGVsc2UgewogICAgICAgIHZtLmxhbmRpbmdNZXNzYWdlID0gJ1BsZWFzZSBjcmVhdGUgYW4gZW1haWwgYmVmb3JlIGRlc2lnbmluZyB0aGUgbGFuZGluZyBwYWdlLicKICAgICAgfQogICAgfSwKICAgIGVkaXRTdXJ2ZXkoYWN0aW9uKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIHZtLmNsb3NlQWxsRWRpdGluZygpOwogICAgICB2bS5zZWxlY3RlZEFjdGlvbiA9IGFjdGlvbjsKICAgICAgdm0uZWRpdGluZ1N1cnZleSA9IHRydWU7CiAgICB9LAogICAgZWRpdExveWFsdHlDb3Vwb24oYWN0aW9uKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIHZtLmNsb3NlQWxsRWRpdGluZygpOwogICAgICB2bS5zZWxlY3RlZEFjdGlvbiA9IGFjdGlvbjsKICAgICAgdm0uYWRkaW5nTG95YWx0eUNvdXBvbiA9IHRydWU7CiAgICB9LAogICAgb3BlblByZXZpZXdNb2RhbCgpIHsKICAgICAgdGhpcy5vcGVuUHJldmlld0NhbXBhaWduID0gdHJ1ZTsKICAgIH0sCiAgICBjbG9zZUFsbEVkaXRpbmcoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIHZtLnNhdmVFbWFpbERlc2lnbigpOwogICAgICB2bS5lbWFpbFByZXZpZXcgPSBmYWxzZTsKICAgICAgdm0uc21zUHJldmlldyA9IGZhbHNlOwogICAgICB2bS5lZGl0aW5nVGltZUNvbmRpdGlvbiA9IGZhbHNlOwogICAgICB2bS5lZGl0aW5nTGFuZGluZ1BhZ2UgPSBmYWxzZTsKICAgICAgdm0uZWRpdGluZ1N1cnZleSA9IGZhbHNlOwogICAgICB2bS5hZGRpbmdMb3lhbHR5Q291cG9uID0gZmFsc2U7CiAgICAgIHZtLnNlbGVjdGVkSW5kZXggPSBudWxsOwogICAgfSwKICAgIGNhbmNlbEVtYWlsRWRpdCgpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgdm0ucmVtb3ZlSWZyYW1lKCk7CiAgICAgIHZtLmVtYWlsUHJldmlldyA9IGZhbHNlOwogICAgICB2bS5zbXNQcmV2aWV3ID0gZmFsc2U7CiAgICAgIHZtLmVkaXRpbmdUaW1lQ29uZGl0aW9uID0gZmFsc2U7CiAgICAgIHZtLmVkaXRpbmdMYW5kaW5nUGFnZSA9IGZhbHNlOwogICAgICB2bS5lZGl0aW5nU3VydmV5ID0gZmFsc2U7CiAgICAgIHZtLmFkZGluZ0xveWFsdHlDb3Vwb24gPSBmYWxzZTsKICAgIH0sCiAgICByZW1vdmVJZnJhbWUoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmICh2bS5pbml0aWFsaXplZFVubGF5ZXIpIHsKICAgICAgICB2YXIgeCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpZnJhbWUiKVswXTsKICAgICAgICB2YXIgZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKVswXTsKICAgICAgICBpZiAoeCkgewogICAgICAgICAgeC5yZW1vdmUoKTsKICAgICAgICB9CiAgICAgICAgaWYgKGQpIHsKICAgICAgICAgIGQucmVtb3ZlKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHZtLmluaXRpYWxpemVkVW5sYXllciA9IGZhbHNlOwogICAgfSwKICAgIGFkZEFuc3dlcihxdWVzdGlvbikgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBxdWVzdGlvbi5hbnN3ZXJPcHRpb25zLnB1c2gocXVlc3Rpb24ubmV3T3B0aW9uKTsKICAgICAgcXVlc3Rpb24ubmV3T3B0aW9uID0gJyc7CiAgICAgIHZtLnJlZnJlc2hRdWVzdGlvbnMoKTsKICAgIH0sCiAgICByZW1vdmVBbnN3ZXIocXVlc3Rpb24sIGFuc3dlcikgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBxdWVzdGlvbi5hbnN3ZXJPcHRpb25zLnNwbGljZShxdWVzdGlvbi5hbnN3ZXJPcHRpb25zLmluZGV4T2YoYW5zd2VyKSwgMSk7CiAgICAgIHZtLnJlZnJlc2hRdWVzdGlvbnMoKTsKICAgIH0sCiAgICBjbG9zZVByZXZpZXdNb2RhbCgpIHsKICAgICAgdGhpcy5vcGVuUHJldmlld0NhbXBhaWduID0gZmFsc2U7CiAgICB9LAogICAgY2hhbmdlUXVlc3Rpb25zKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBpZiAodm0uc2VsZWN0ZWRBY3Rpb24uc3VydmV5VGVtcGxhdGUgPT0gIm5vbmUiKSB7CiAgICAgICAgdm0uc2VsZWN0ZWRBY3Rpb24uc3VydmV5UXVlc3Rpb25zID0gW107CiAgICAgIH0gZWxzZSBpZiAodm0uc2VsZWN0ZWRBY3Rpb24uc3VydmV5VGVtcGxhdGUgPT0gIjEiKSB7CiAgICAgICAgdm0uc2VsZWN0ZWRBY3Rpb24uc3VydmV5UXVlc3Rpb25zID0gWwogICAgICAgICAgeyBvcmRlcjogMSwgdHlwZTogIjF0bzUiLCBleHBsYWluOiB0cnVlLCB0aXRsZTogIldpdGggMSBiZWluZyBsb3dlc3QgYW5kIDUgYmVpbmcgaGlnaGVzdDogIiwgcXVlc3Rpb246ICJIb3cgd291bGQgeW91IHJhdGUgb3VyIHdvcmsgY3VsdHVyZT8iIH0sCiAgICAgICAgICB7IG9yZGVyOiAyLCB0eXBlOiAic2VsZWN0QW55IiwgZXhwbGFpbjogdHJ1ZSwgdGl0bGU6ICJTZWxlY3QgQWxsIFRoYXQgQXBwbHk6IiwgcXVlc3Rpb246ICJXaGF0IGRvIHlvdSBlbmpveSBtb3N0IGFib3V0IHdvcmtpbmcgaGVyZT8iLCBhbnN3ZXJPcHRpb25zOltdIH0sCiAgICAgICAgICB7IG9yZGVyOiAzLCB0eXBlOiAic2VsZWN0QW55IiwgZXhwbGFpbjogdHJ1ZSwgdGl0bGU6ICJTZWxlY3QgQWxsIFRoYXQgQXBwbHk6IiwgcXVlc3Rpb246ICJXaGF0IGRvIHlvdSBlbmpveSBsZWFzdCBhYm91dCB3b3JraW5nIGhlcmU/IiwgYW5zd2VyT3B0aW9uczpbXSB9LAogICAgICAgIF07CiAgICAgIH0gZWxzZSBpZiAodm0uc2VsZWN0ZWRBY3Rpb24uc3VydmV5VGVtcGxhdGUgPT0gIjIiKSB7CiAgICAgICAgdm0uc2VsZWN0ZWRBY3Rpb24uc3VydmV5UXVlc3Rpb25zID0gWwogICAgICAgICAgeyBvcmRlcjogMSwgdHlwZTogIjF0bzUiLCBleHBsYWluOiB0cnVlLCB0aXRsZTogIldpdGggMSBiZWluZyBsb3dlc3QgYW5kIDUgYmVpbmcgaGlnaGVzdDogIiwgcXVlc3Rpb246ICJIb3cgd291bGQgeW91IHJhdGUgb3VyIGZhY2lsdGllcz8iIH0sCiAgICAgICAgICB7IG9yZGVyOiAyLCB0eXBlOiAic2VsZWN0QW55IiwgZXhwbGFpbjogdHJ1ZSwgdGl0bGU6ICJTZWxlY3QgQWxsIFRoYXQgQXBwbHk6IiwgcXVlc3Rpb246ICJXaGF0IGRvIHlvdSBlbmpveSBtb3N0IGFib3V0IGxpdmluZyBoZXJlPyIsIGFuc3dlck9wdGlvbnM6W10gfSwKICAgICAgICAgIHsgb3JkZXI6IDMsIHR5cGU6ICJzZWxlY3RBbnkiLCBleHBsYWluOiB0cnVlLCB0aXRsZTogIlNlbGVjdCBBbGwgVGhhdCBBcHBseToiLCBxdWVzdGlvbjogIldoYXQgZG8geW91IGVuam95IGxlYXN0IGFib3V0IGxpdmluZyBoZXJlPyIsIGFuc3dlck9wdGlvbnM6W10gfSwKICAgICAgICBdOwogICAgICB9IGVsc2UgaWYgKHZtLnNlbGVjdGVkQWN0aW9uLnN1cnZleVRlbXBsYXRlID09ICIzIikgewogICAgICAgIHZtLnNlbGVjdGVkQWN0aW9uLnN1cnZleVF1ZXN0aW9ucyA9IFsKICAgICAgICAgIHsgb3JkZXI6IDEsIHR5cGU6ICIxdG81IiwgZXhwbGFpbjogdHJ1ZSwgdGl0bGU6ICJXaXRoIDEgYmVpbmcgbG93ZXN0IGFuZCA1IGJlaW5nIGhpZ2hlc3Q6ICIsIHF1ZXN0aW9uOiAiSG93IHdvdWxkIHlvdSByYXRlIG91ciBzZXJ2aWNlPyIgfSwKICAgICAgICAgIHsgb3JkZXI6IDIsIHR5cGU6ICJzZWxlY3RBbnkiLCBleHBsYWluOiB0cnVlLCB0aXRsZTogIlNlbGVjdCBBbGwgVGhhdCBBcHBseToiLCBxdWVzdGlvbjogIldoYXQgZG8gd2UgZG8gd2VsbD8iLCBhbnN3ZXJPcHRpb25zOltdIH0sCiAgICAgICAgICB7IG9yZGVyOiAzLCB0eXBlOiAic2VsZWN0QW55IiwgZXhwbGFpbjogdHJ1ZSwgdGl0bGU6ICJTZWxlY3QgQWxsIFRoYXQgQXBwbHk6IiwgcXVlc3Rpb246ICJXaGF0IGNvdWxkIHdlIGltcHJvdmUgb24/IiwgYW5zd2VyT3B0aW9uczpbXSB9LAogICAgICAgIF07CiAgICAgIH0KICAgIH0sCiAgICBlbmNvZGVJbWFnZUZpbGVBc1VSTChldmVudCkgewogICAgICBsZXQgZmlsZXNMaXN0ID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdOwogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKCkgewogICAgICAgIGlmIChyZWFkZXIucmVzdWx0Lmxlbmd0aCA+IDUwMDAwMCAqIDEuMzYpIHsKICAgICAgICAgIHZtLnNob3dMb2dvU2l6ZUVycm9yID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdm0uc2VsZWN0ZWRBY3Rpb24ubG95YWx0eUNvdXBvbi5pbWFnZSA9IHJlYWRlci5yZXN1bHQ7CiAgICAgICAgICBsZXQgc2VsZWN0aW9uID0gcmVhZGVyLnJlc3VsdC5zdWJzdHIoMCwgMjUpOwogICAgICAgICAgdm0uc2VsZWN0ZWRBY3Rpb24ubG95YWx0eUNvdXBvbi5pbWFnZVR5cGUgPSBzZWxlY3Rpb24uc3Vic3RyKChzZWxlY3Rpb24uaW5kZXhPZigiLyIpKzEpLCAoc2VsZWN0aW9uLmluZGV4T2YoJzsnKS0xIC0gc2VsZWN0aW9uLmluZGV4T2YoIi8iKSkpOwogICAgICAgICAgdm0uYWRkaW5nTG95YWx0eUNvdXBvbiA9IGZhbHNlOwogICAgICAgICAgdm0uYWRkaW5nTG95YWx0eUNvdXBvbiA9IHRydWU7CiAgICAgICAgfQogICAgICB9OwogICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlc0xpc3QpOwogICAgfSwKICAgIGFwcGVuZEltYWdlSGVhZGVyKGltZ1RleHQpIHsKICAgICAgaWYgKGltZ1RleHQpIHsKICAgICAgICByZXR1cm4gaW1nVGV4dDsKICAgICAgfQogICAgfSwKICAgIGdlbmVyYXRlQnV0dG9uQ29sb3JzKGluaXRpYWxDb2xvcikgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICByZXR1cm4gWwogICAgICAgIHZtLmxpZ2h0ZW5Db2xvcihpbml0aWFsQ29sb3IsIDQwKSwKICAgICAgICB2bS5saWdodGVuQ29sb3IoaW5pdGlhbENvbG9yLCAzMCksCiAgICAgICAgdm0ubGlnaHRlbkNvbG9yKGluaXRpYWxDb2xvciwgMjApLAogICAgICAgIHZtLmxpZ2h0ZW5Db2xvcihpbml0aWFsQ29sb3IsIDEwKSwKICAgICAgICBpbml0aWFsQ29sb3IKICAgICAgXTsKICAgIH0sCiAgICBsaWdodGVuQ29sb3IoaW5pdGlhbENvbG9yLCBhbXQpIHsKICAgICAgdmFyIGNvbCA9IGluaXRpYWxDb2xvci5zbGljZSgxKTsKCiAgICAgIHZhciBudW0gPSBwYXJzZUludChjb2wsIDE2KTsKCiAgICAgIHZhciByID0gKG51bSA+PiAxNikgKyBhbXQ7CgogICAgICBpZiAociA+IDI1NSkgciA9IDI1NTsKICAgICAgZWxzZSBpZiAociA8IDApIHIgPSAwOwoKICAgICAgdmFyIGIgPSAoKG51bSA+PiA4KSAmIDB4MDBmZikgKyBhbXQ7CgogICAgICBpZiAoYiA+IDI1NSkgYiA9IDI1NTsKICAgICAgZWxzZSBpZiAoYiA8IDApIGIgPSAwOwoKICAgICAgdmFyIGcgPSAobnVtICYgMHgwMDAwZmYpICsgYW10OwoKICAgICAgaWYgKGcgPiAyNTUpIGcgPSAyNTU7CiAgICAgIGVsc2UgaWYgKGcgPCAwKSBnID0gMDsKCiAgICAgIHJldHVybiAoCiAgICAgICAgIiMiICsKICAgICAgICBTdHJpbmcoIjAwMDAwMCIgKyAoZyB8IChiIDw8IDgpIHwgKHIgPDwgMTYpKS50b1N0cmluZygxNikpLnNsaWNlKC02KQogICAgICApOwogICAgfSwKICAgIGFkZFN1cnZleVF1ZXN0aW9uKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBsZXQgbmV3T3JkZXIgPSB2bS5zZWxlY3RlZEFjdGlvbi5zdXJ2ZXlRdWVzdGlvbnMubGVuZ3RoICsgMTsKICAgICAgdm0uc2VsZWN0ZWRBY3Rpb24uc3VydmV5UXVlc3Rpb25zLnB1c2goewogICAgICAgIG9yZGVyOiBuZXdPcmRlciwKICAgICAgICB0eXBlOiAiIiwKICAgICAgICB0aXRsZTogIiIsCiAgICAgICAgcXVlc3Rpb246ICIiCiAgICAgIH0pOwogICAgICB2bS5yZWZyZXNoUXVlc3Rpb25zKCk7CiAgICB9LAogICAgcmVmcmVzaFF1ZXN0aW9ucygpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgdm0uZWRpdGluZ1N1cnZleSA9IGZhbHNlOwogICAgICB2bS5lZGl0aW5nU3VydmV5ID0gdHJ1ZTsKICAgIH0sCiAgICByZW1vdmVTdXJ2ZXlRdWVzdGlvbihpbmRleCkgewogICAgICB0aGlzLnNlbGVjdGVkQWN0aW9uLnN1cnZleVF1ZXN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnJlZnJlc2hRdWVzdGlvbnMoKTsKICAgIH0sCiAgICBkcmFnU3RhcnQoZXZlbnQpIHsKICAgICAgdGhpcy5kcmFnZ2luZyA9IHRydWU7CiAgICAgIGxldCBkdCA9IGV2ZW50LmRhdGFUcmFuc2ZlcjsKICAgICAgZHQuc2V0RGF0YSgidGV4dC9wbGFpbiIsIGV2ZW50LnRhcmdldC5pZCk7CiAgICAgIHZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImRpc2FibGUtb24tZHJhZyIpOwogICAgICB2YXIgaTsKICAgICAgZm9yIChpID0gMDsgaSA8IGVsLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZWxbaV0uZGlzYWJsZWQgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgZHJhZ092ZXIoZXZlbnQpIHsKICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAibW92ZSI7CiAgICB9LAogICAgZHJvcFF1ZXN0aW9uKGV2ZW50KSB7CiAgICAgIGxldCBkdCA9IGV2ZW50LmRhdGFUcmFuc2ZlcjsKICAgICAgdmFyIGRhdGEgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgidGV4dC9wbGFpbiIpOwogICAgICB0aGlzLnN0YXJ0UG9zaXRpb24gPSBkYXRhOwogICAgICB0aGlzLmVuZFBvc2l0aW9uID0gZXZlbnQudGFyZ2V0LmlkOwogICAgfSwKICAgIGRyYWdFbmQoZXZlbnQpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5zdGFydFBvc2l0aW9uOwogICAgICBsZXQgZW5kID0gdGhpcy5lbmRQb3NpdGlvbjsKICAgICAgdmFyIG5ld0FycmF5ID0gW107CiAgICAgIGlmICgoc3RhcnQgJiYgZW5kKSAmJiBzdGFydCAhPSBlbmQpIHsKICAgICAgICB2bS5zZWxlY3RlZEFjdGlvbi5zdXJ2ZXlRdWVzdGlvbnMubWFwKChxdWVzdGlvbiwgaSkgPT4gewogICAgICAgICAgaWYgKGkgPT0gc3RhcnQpIHsKICAgICAgICAgICAgaSA9IGVuZDsKICAgICAgICAgICAgbmV3QXJyYXlbaV0gPSBxdWVzdGlvbjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChlbmQgPiBzdGFydCkgewogICAgICAgICAgICAgIGlmIChpID4gc3RhcnQgJiYgaSA8PSBlbmQpIHsKICAgICAgICAgICAgICAgIGkgPSBpIC0gMTsKICAgICAgICAgICAgICAgIG5ld0FycmF5W2ldID0gcXVlc3Rpb247CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG5ld0FycmF5W2ldID0gcXVlc3Rpb247CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKGVuZCA8IHN0YXJ0KSB7CiAgICAgICAgICAgICAgaWYgKGkgPCBzdGFydCAmJiBpID49IGVuZCkgewogICAgICAgICAgICAgICAgaSA9IGkgKyAxOwogICAgICAgICAgICAgICAgbmV3QXJyYXlbaV0gPSBxdWVzdGlvbjsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbmV3QXJyYXlbaV0gPSBxdWVzdGlvbjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2bS5zZWxlY3RlZEFjdGlvbi5zdXJ2ZXlRdWVzdGlvbnMgPSBuZXdBcnJheTsKICAgICAgfQogICAgICB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJkaXNhYmxlLW9uLWRyYWciKTsKICAgICAgdmFyIGk7CiAgICAgIGZvciAoaSA9IDA7IGkgPCBlbC5sZW5ndGg7IGkrKykgewogICAgICAgIGVsW2ldLmRpc2FibGVkID0gZmFsc2U7CiAgICAgIH0KICAgICAgdm0uZHJhZ2dpbmcgPSBmYWxzZTsKICAgIH0sCiAgICBjbG9zZU1vZGFsKG1zZykgewogICAgICBpZihtc2cpIHsKICAgICAgICB0aGlzLiRlbWl0KCJjbG9zZU1vZGFsIik7CiAgICAgICAgdGhpcy5hdXRvbWF0aW9uID0ge307CiAgICAgICAgdGhpcy5zZWxlY3RlZEFjdGlvbiA9IHt9OwogICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYoY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3b3VsZCBsaWtlIHRvIGV4aXQgd2l0aG91dCBzYXZpbmc/JykpIHsKICAgICAgICB0aGlzLiRlbWl0KCJjbG9zZU1vZGFsIik7CiAgICAgICAgdGhpcy5hdXRvbWF0aW9uID0ge307CiAgICAgICAgdGhpcy5zZWxlY3RlZEFjdGlvbiA9IHt9OwogICAgICAgIEV2ZW50U2VydmljZS4kZW1pdCgibG9hZGluZyIsICJoaWRlIik7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["AddAutomation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4TA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddAutomation.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <transition name=\"modal\">\n    <div class=\"modal-mask\" @click=\"closeModal()\">\n      <div class=\"automation-container\" @click.stop>\n        <header>\n          <span>{{pageAction}} {{displayName}}</span>\n          <i class=\"fal fa-times\" @click=\"closeModal()\"></i>\n        </header>\n        <div class=\"automations-style-container\">\n          <div class=\"automation-action-container\">\n            <span class=\"initial-trigger\"> Automation Name: </span>\n            <input class=\"input-name\" type=\"text\" v-model=\"automation.name\" placeholder=\"\">\n            <!-- ******** Identifier for using this automation that can be passed to the general api for customers. -->\n            <span class=\"initial-trigger\"> Automation Identifier: <i class=\"fal fa-info-circle\" title=\"Custom Identifier for Adding Customers to this Automation\"></i></span>\n            <input class=\"input-name\" type=\"text\" :class=\"{'duplicate':duplicateId}\" v-model=\"automation.identifier\" @change=\"validateID(automation.identifier)\" placeholder=\"Example: 1, 2, 3 will be passed as q=1, q=2, q=3\">\n            <span v-if=\"duplicateId\" class=\"dupe-message\">Identifier Already Exists for This Location</span>\n            <span class=\"initial-trigger\">Language:\n              <select class=\"trigger-select\" v-model=\"automation.language\">\n                <option value=\"en\">English</option>\n                <option value=\"sp\">Spanish</option>\n              </select>\n            </span>\n            <span class=\"initial-trigger\"> Start this automation when this trigger takes place: </span>\n            <select class=\"trigger-select\" v-model=\"automation.triggerEvent\">\n              <option value=\"customerAdd\">New Customer Added</option>\n              <option value=\"customerAddedAgain\">Customer Added Again</option>\n              <option v-if=\"automation.type == 'loyalty'\" value=\"keyword\">Keyword Received</option>\n              <option v-if=\"automation.type == 'survey'\" value=\"negativeResponse\"> Negative Feedback Received</option>\n            </select>\n            <input v-if=\"automation.type == 'loyalty'\" type=\"text\" :class=\"{'duplicate':duplicateKey}\" style=\"text-align: center;\" placeholder=\"KEYWORD\" @change=\"convertToCaps()\" v-model=\"automation.keyword\" maxlength=\"20\">\n            <span v-if=\"duplicateKey\" class=\"dupe-message\">Keyword Already Exists</span>\n            <div class=\"modal-follow-up-details\">\n              <div class=\"modal-column-resend\">\n                <label>Allow Resend When Customer Is Re-Added: </label>\n                <select v-model=\"automation.autoResend\">\n                  <option value=\"never\">Never</option>\n                  <option value=\"2592000000\">1 Month</option>\n                  <option value=\"7776000000\">3 Months</option>\n                  <option value=\"15724800000\">6 Months</option>\n                  <option value=\"31536000000\">1 Year</option>\n                  <option value=\"always\">Always</option>\n                </select>\n              </div>\n            </div>\n            <div class=\"horizontal-divider\"></div>\n            <div class=\"scroll-area\">\n              <div class=\"automation-actions-list\" v-for=\"(action, i) in automation.actions\">\n                <div>Interaction {{i+1}} </div>\n                <i class=\"fal fa-plus-circle top\" @click=\"addAction('above', i)\" title=\"Add Action Above\"></i>\n                <div class=\"automation-action\">\n\n                  <!-- Segment displaying current automation actions for Time -->\n\n                  <div class=\"automation-action-holder\">\n                    <span class=\"action-box\" v-if=\"action.time || i == 0\"> <i class=\"far fa-clock\"></i> After {{action.time}} hour<span v-if=\"action.time > 1 || action.time == 0\">s</span> </span>\n                    <i class=\"fal fa-pencil\" v-if=\"(action.time || i == 0) && !initializedUnlayer\" @click=\"editTimeCondition(action, i)\" title=\"Edit Action Time Condition\"></i>\n                    <i class=\"fal fa-pencil unavailable\" v-if=\"action.time && initializedUnlayer\" title=\"Save Email Prior to Editing Further Messages.\"></i>\n                  </div>\n                  <span v-if=\"!action.time && i != 0\"> <i class=\"fal fa-plus-circle\" @click=\"editTimeCondition(action, i)\" title=\"Add Action Time Condition\"></i> </span>\n                  <div class=\"vertical-divider-line\"></div>\n\n                  <!-- Segment displaying current automation actions for Email -->\n\n                  <div class=\"automation-action-holder\">\n                    <span class=\"action-box message\" v-if=\"action.email && action.email.subject\"> <i class=\"fas fa-envelope\"></i>Send Email \"{{action.email.subject}}\"\n                    </span>\n                    <i class=\"fal fa-pencil\" v-if=\"action.email && action.email.subject && !initializedUnlayer\" @click=\"previewEmail(action)\" title=\"Edit Action Email Details\"></i>\n                    <i class=\"fal fa-pencil unavailable\" v-if=\"action.email && action.email.subject && initializedUnlayer\" title=\"Save Email Prior to Editing Further Messages.\"></i>\n                  </div>\n                  <span v-if=\"!action.email || !action.email.subject\"> <i class=\"fal fa-plus-circle\" @click=\"previewEmail(action)\" title=\"Add Action Email\"></i> </span>\n                  <div class=\"vertical-divider-line\" v-if=\"checkTime(action.time, i)\"></div>\n\n                  <!-- Segment displaying current automation actions for SMS -->\n\n                  <div class=\"automation-action-holder\" v-if=\"checkTime(action.time, i)\">\n                    <span class=\"action-box message\" v-if=\"action.sms && action.sms.preview\"> <i class=\"fal fa-mobile-android\"></i>Send SMS \"{{action.sms.preview}}\" </span>\n                    <i class=\"fal fa-pencil\" v-if=\"action.sms && action.sms.message && !initializedUnlayer\" @click=\"previewSMS(action)\" title=\"Edit Action SMS Details\"></i>\n                    <i class=\"fal fa-pencil unavailable\" v-if=\"action.sms && action.sms.message && initializedUnlayer\" title=\"Save Email Prior to Editing Further Messages.\"></i>\n                  </div>\n                  <span v-if=\"(!action.sms || !action.sms.preview) && checkTime(action.time, i)\"> <i class=\"fal fa-plus-circle\" @click=\"previewSMS(action, i)\" title=\"Add Action SMS Message\"></i> </span>\n                  <span v-if=\"automation.actions.length > 1 || i != 0\"> <i class=\"fal fa-times-circle\" @click=\"removeAction(i)\" title=\"Remove Action\"></i> </span>\n                  <div class=\"vertical-divider-line\" v-if=\"automationType == 'reviewRequest' || 'survey'\"></div>\n\n                  <!-- Segment displaying current automation actions for Landing Page info in the case of review requests -->\n\n                  <div class=\"automation-action-holder\" v-if=\"automationType == 'reviewRequest' && action.email && action.email.subject\">\n                    <span class=\"action-box message\" v-if=\"action.landingPage\"> <i class=\"fas fa-columns\"></i>Landing Page Details </span>\n                    <i class=\"fal fa-pencil\" v-if=\"action.landingPage && !initializedUnlayer\" @click=\"editLandingPage(action)\" title=\"Edit Landing Page Details\"></i>\n                    <i class=\"fal fa-pencil unavailable\" v-if=\"action.landingPage && initializedUnlayer\" title=\"Save Email Prior to Editing Further Messages.\"></i>\n                  </div>\n                  <span v-if=\"(!action.landingPage || !action.email || !action.email.subject ) && automationType == 'reviewRequest'\"> <i class=\"fal fa-plus-circle\" :class=\"{'inactive': !action.email.subject}\" @click=\"editLandingPage(action)\" :title=\"landingMessage\"></i> </span>\n\n                  <!-- Segment displaying current automation actions for an image in the case of loyalty emails -->\n\n                  <div class=\"automation-action-holder\" v-if=\"automationType == 'loyalty'\">\n                    <span class=\"action-box message\" v-if=\"action.loyaltyCoupon\"> <i class=\"fas fa-columns\"></i>Loyalty Coupon </span>\n                    <i class=\"fal fa-pencil\" v-if=\"action.loyaltyCoupon && !initializedUnlayer\" @click=\"editLoyaltyCoupon(action)\" title=\"Edit Loyalty Coupon\"></i>\n                    <i class=\"fal fa-pencil unavailable\" v-if=\"action.loyaltyCoupon && initializedUnlayer\" title=\"Save Email Prior to Editing Further Messages.\"></i>\n                  </div>\n                  <span v-if=\"!action.loyaltyCoupon && automationType == 'loyalty'\"> <i class=\"fal fa-plus-circle\" @click=\"editLoyaltyCoupon(action)\" title=\"Add Loyalty Coupon\"></i> </span>\n\n                  <!-- Segment displaying current automation actions for survey page info for surveys -->\n\n                  <div class=\"automation-action-holder\" v-if=\"automationType == 'survey'\">\n                    <span class=\"action-box message\" v-if=\"action.surveyQuestions\"> <i class=\"fas fa-columns\"></i>Survey Page Active </span>\n                    <i class=\"fal fa-pencil\" v-if=\"action.surveyQuestions && !initializedUnlayer\" @click=\"editSurvey(action)\" title=\"Edit Survey Page Details\"></i>\n                    <i class=\"fal fa-pencil unavailable\" v-if=\"action.surveyQuestions && initializedUnlayer\" title=\"Save Email Prior to Editing Further Messages.\"></i>\n                  </div>\n                  <span v-if=\"!action.surveyQuestions && automationType == 'survey'\"> <i class=\"fal fa-plus-circle\" @click=\"editSurvey(action)\" title=\"Edit Survey Page\"></i> </span>\n                  <span v-if=\"automation.actions.length > 1 || i != 0\"> <i class=\"fal fa-times-circle\" @click=\"removeAction(i)\" title=\"Remove Action\"></i> </span>\n                  <!-- Below is for adding restrictions beyond having received the email before. At this time it isn't certain whether it will be necessary. -->\n                  <!-- <div class=\"vertical-divider-line\"></div>\n                  <div class=\"automation-action-holder\">\n                    <span class=\"action-box\" v-if=\"action.restriction\"> <i class=\"far fa-ban\"></i> {{action.restriction}} </span>\n                    <i class=\"fal fa-pencil\" v-if=\"action.restriction\"></i>\n                  </div>\n                  <span v-if=\"!action.restriction\"> <i class=\"fal fa-plus-circle\"></i> </span>  -->\n                </div>\n                <i class=\"fal fa-plus-circle bottom\" @click=\"addAction('below', i)\" title=\"Add Action Below\"></i>\n                <div class=\"vertical-divider-line\" v-if=\"automation.actions.length !== i+1\"></div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Display Overview Details of the automation if no other editors are displaying. -->\n\n          <div class=\"message-editor-container\" v-if=\"displayOverview\">\n            <div class=\"overview\">\n              <div class=\"header-save-container\">\n                <button :disabled=\"duplicateId || duplicateKey || !automation.name || !automation.locationId || !automation.identifier || !automation.triggerEvent || !automation.type\" @click.once=\"saveAutomation()\">Save Automation</button>\n              </div>\n              <span class=\"message-editor-header\">\n                <div class=\"display-info\"> <label>Name: </label><span>{{automation.name}}</span> </div>\n                <div class=\"display-info\"> <label>Type: </label><span>{{splitAndConvertName(automation.type)}}</span> </div>\n                <div class=\"display-info\"> <label>Trigger: </label><span>{{splitAndConvertName(automation.triggerEvent)}}</span> </div>\n                <div class=\"display-info\"> <label>Actions: </label>\n                <span class=\"action-container\" v-for=\"action in automation.actions\">\n                  <span class=\"action-line\"><label>After a customer exists for</label> {{action.time}} hour<span v-if=\"action.time > 1 || action.time == 0\">s</span></span>\n                  <span class=\"action-line\" v-if=\"action.email && action.email.subject\"> <label>Send them this email:  </label> \"{{action.email.subject}}\"</span>\n                  <span class=\"action-line\" v-if=\"action.email && action.sms.preview\"> <label><span v-if=\"!action.email.subject\">Send them </span><span v-if=\"action.email.subject\" >And</span> a text with this preview:</label> {{action.sms.preview}}</span>\n                  <span class=\"action-line\" v-if=\"action.sms && action.sms.message\"> <label>And this message: </label> {{action.sms.message}}</span>\n                  <span class=\"action-line\" v-if=\"action.sms && action.sms.preview && !action.sms.message\"> <label class=\"warning\">But it seems you've forgotten a message!</label></span>\n                  </span>\n                </div>\n              </span>\n            </div>\n          </div>\n\n          <!-- Editor container for Changing the action Time -->\n\n          <div class=\"message-editor-container\" v-if=\"editingTimeCondition\">\n            <div class=\"header-container\">\n              <span class=\"message-editor-header\"> <label>Time Delay: </label>After <input class=\"delay-input\" type=\"number\" :min=\"checkMinTimes(selectedAction)\" v-model=\"selectedAction.time\"> hour<span v-if=\"selectedAction.time > 1 || selectedAction.time == 0\">s</span>. </span>\n              <span><button @click=\"closeAllEditing()\">Save Delay</button></span>\n            </div>\n            <div id=\"time-editor\"></div>\n          </div>\n\n          <!-- Editor container for editing the email subject and design -->\n\n          <div class=\"message-editor-container\" v-show=\"emailPreview\" >\n            <div class=\"header-container\">\n              <span class=\"message-editor-header\"> <label>Email Subject: </label> <input type=\"text\" v-model=\"selectedAction.email.subject\"> </span>\n              <span><button @click=\"closeAllEditing()\">Save Email</button><span class=\"close-command\" @click=\"cancelEmailEdit()\">Cancel</span></span>\n            </div>\n            <div class=\"campaign-email-editor\" id=\"email-editor\"></div>\n          </div>\n\n          <!-- Editor container for editing the sms preview and design -->\n\n          <div class=\"message-editor-container\" v-if=\"smsPreview\">\n            <div class=\"header-container\">\n              <span class=\"message-editor-header\"> <label>SMS Preview: </label> <input type=\"text\" v-model=\"selectedAction.sms.preview\"> </span>\n              <span><button @click=\"closeAllEditing()\">Save SMS</button></span>\n            </div>\n            <div class=\"sms-message-container\">\n              <label>SMS Message: </label>\n              <textarea v-model=\"selectedAction.sms.message\" maxlength=\"118\" />\n              <span v-if=\"selectedAction.sms.message && selectedAction.sms.message.length > 1\" @change=\"selectedAction.sms.message = selectedAction.sms.message.trim()\">{{selectedAction.sms.message.length}} / 118</span>\n            </div>\n            <div id=\"sms-editor\">\n              <div class=\"sms-preview-display\">\n                <img src='../assets/img/phoneImage.png' style=\"height: 550px;\" />\n                <div class=\"divider-line\">888-555-1234</div>\n                  <div class=\"sms-message-preview\" v-if=\"selectedAction.sms.message\">\n                    <span v-if=\"selectedAction.sms.message\">{{selectedAction.sms.message}}</span><br/><br/>\n                    <span v-if=\"selectedAction.sms.message\">Click Here: opin.in/exmpl</span>\n                    <!-- <span v-if=\"selectedAction.sms.message && automation.type != 'survey'\">Click Here: opin.in/exmpl</span> -->\n                  </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Editor container for editing the landing page in the case of review requests -->\n\n          <div class=\"message-editor-container\" v-if=\"editingLandingPage\">\n            <div class=\"header-container\">\n              <span><button @click=\"openPreviewModal()\">Preview Landing Page</button></span>\n              <span><button @click=\"closeAllEditing()\">Save Landing Page</button></span>\n            </div>\n            <div id=\"landing-editor\">\n              <!-- <h4>Receive Notifications For: </h4>\n              <div class=\"landing-detail\">\n                <label>Potential Negative Reviews</label><input type=\"checkbox\" v-model=\"selectedAction.notice.potentialNegRev\">\n              </div>\n              <div class=\"landing-detail\">\n                <label>Actual Negative Reviews</label><input type=\"checkbox\" v-model=\"selectedAction.notice.actualNegRev\">\n              </div>\n              <div class=\"landing-detail\">\n                <label>Positive Reviews</label><input type=\"checkbox\" v-model=\"selectedAction.notice.positiveRev\">\n              </div>\n              <div class=\"landing-detail\">\n                <label>Private Feedback</label><input type=\"checkbox\" v-model=\"selectedAction.notice.privateRev\">\n              </div> -->\n              <div class=\"landing-page-details-container\">\n                <div>Landing Page:</div>\n                <br/>\n                <div class=\"modal-landing-page-details\">\n                  <div class=\"landing-detail\"><label>Header </label><input v-model=\"selectedAction.landingPage.lp1\" placeholder=\"Landing Page Title\" /></div><br />\n                  <div class=\"landing-detail\"><label>Sub Header </label><input v-model=\"selectedAction.landingPage.lp2\" placeholder=\"Landing Page Subtitle\" /></div><br />\n                  <div class=\"landing-textarea\"><label>Message </label><textarea v-model=\"selectedAction.landingPage.lp3\" placeholder=\"Landing Page Message\" ></textarea> </div><br />\n                Feedback Page: <br/><br/>\n                  <div class=\"landing-detail\"><label>Header </label><input v-model=\"selectedAction.landingPage.rp1\" placeholder=\"Review Page Title\" /></div><br />\n                  <div class=\"landing-detail\"><label>Sub Header </label><input v-model=\"selectedAction.landingPage.rp2\" placeholder=\"Review Page Subtitle\" /></div><br />\n                  <div class=\"landing-textarea\"><label>Message </label><textarea v-model=\"selectedAction.landingPage.rp3\" placeholder=\"Neg Feedback Content\" ></textarea></div><br/>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Editor container for adding loyalty coupon -->\n\n          <div class=\"message-editor-container\" v-if=\"addingLoyaltyCoupon\">\n            <div class=\"header-container\">\n              <span><button @click=\"closeAllEditing()\">Save Loyalty Coupon</button></span>\n            </div>\n            <div id=\"coupon-editor\">\n              <div class=\"loyalty-coupon-image-container\">\n              </div>\n              <div class=\"coupon-add\">\n                <div class=\"modal-file-import\">\n                  <label>Coupon Image: </label><input type=\"file\" accept=\"image/*\" placeholder=\"Coupon\" @change=\"encodeImageFileAsURL($event)\" required />\n                </div>\n                <div class=\"modal-image-container\">\n                  <img class=\"modal-image-div\" ref=\"locationImageDiv\" v-if=\"selectedAction.loyaltyCoupon\" :style=\"{height: selectedAction.loyaltyCoupon.image.naturalHeight + 'px', width: selectedAction.loyaltyCoupon.image.naturalWidth + 'px'} \"\n                  :src=\"appendImageHeader(selectedAction.loyaltyCoupon.image)\"/>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Editor container for editing the survey in the case of survey automations -->\n\n          <div class=\"message-editor-container full-width\" v-if=\"editingSurvey\">\n            <div class=\"header-container centered\">\n              <span><button @click=\"openPreviewModal()\">Preview Survey Page</button></span>\n              <span><button @click=\"closeAllEditing()\" :disabled=\"saveSurveyDisabled\">Save Survey</button></span>\n            </div>\n            <div id=\"survey-editor\">\n              <div class=\"modal-landing-page-details spacing\">\n                Survey Questions:\n                <div class=\"template-container\">\n                  Survey Templates\n                  <select @change=\"changeQuestions()\" v-model=\"selectedAction.surveyTemplate\">\n                    <option value=\"1\">Internal Questionaire</option>\n                    <option value=\"2\">External Property Management</option>\n                    <option value=\"3\">External Location Survey</option>\n                  </select>\n                </div>\n                <div v-for=\"(question, i) in selectedAction.surveyQuestions\" :key=\"question.order\">\n                  <div class=\"survey-question\" :id=\"i\" v-on:dragstart.stop=\"dragStart($event)\" v-on:dragover.stop=\"dragOver($event)\" draggable=\"true\" v-on:drop.stop=\"dropQuestion($event)\" v-on:dragend.stop=\"dragEnd($event)\">\n                    <div class=\"q-select\" v-if=\"!dragging\">\n                      <select :id=\"i\" v-model=\"question.type\" @change=\"refreshQuestions()\">\n                        <option value=\"1to5\">1 Through 5</option>\n                        <option value=\"disagreeToAgree\">Agree Through Disagree (scale)</option>\n                        <option value=\"yesOrNo\">Yes or No</option>\n                        <option value=\"trueOrFalse\">True or False</option>\n                        <option value=\"selectAny\">Select All that Apply</option>\n                        <option value=\"freeResponse\">Free Form Reply</option>\n                      </select>\n                      <input type=\"checkbox\" v-model=\"question.explain\" v-if=\"question.type != 'freeResponse'\" /><label>Add \"Please Explain\" Follow Up</label>\n                    </div>\n                    <input class=\"title-input\" placeholder=\"Question Title or Qualifier\" v-if=\"!dragging\" :id=\"i\" v-model=\"question.title\" />\n                    <input class=\"question-input\" placeholder=\"Question Body\" v-if=\"!dragging\" :id=\"i\" v-model=\"question.question\" />\n                    <input class=\"drop-box\" v-if=\"dragging\" :id=\"i\" :placeholder=\"question.question\" />\n                    <div class=\"answers\" v-if=\"!dragging && question.type == 'selectAny'\">\n                      <div class=\"adding-answers\">\n                        <label>Add Unique Answers</label>\n                        <div>\n                          <i class=\"fal fa-plus\" title=\"Add To Answers\" @click=\"addAnswer(question)\"></i>\n                          <input type=\"text\" @keydown.enter=\"addAnswer(question)\" v-model=\"question.newOption\">\n                        </div>\n                      </div>\n                      <div class=\"display-survey-answer\" v-for=\"answer in question.answerOptions\">\n                        <span class=\"answer-tag\" >{{answer}} <i class=\"fal fa-times\" title=\"Remove Answer\" @click=\"removeAnswer(question, answer)\"> </i></span>\n                      </div>\n                    </div>\n                    <!-- <i :id=\"i\" class=\"fas fa-expand-arrows-alt\" v-if=\"!dragging\" draggable=\"true\" ></i>\n                    <i :id=\"i\" class=\"fal fa-square\"  v-if=\"dragging\" draggable=\"true\" v-on:dragover.stop=\"dragOver($event)\" v-on:drop.stop=\"dropQuestion($event)\" v-on:dragend.stop=\"dragEnd($event)\" ></i> -->\n                    <i class=\"fal fa-minus\" v-if=\"!dragging\" :class=\"{'middled': question.type == 'selectAny'}\" @click=\"removeSurveyQuestion(i)\"></i>\n                  </div>\n                </div>\n                <span class=\"add-new-survey\" @click=\"addSurveyQuestion()\">ADD NEW <i class=\"fal fa-plus\"></i></span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- The preview landing will need to be tweaked to reflect the new setup. -->\n      <preview-landing class=\"double-modal\" :surveyQs=\"selectedAction.surveyQuestions\" :landingPage=\"selectedAction.landingPage\" :outreachType=\"automationType\" v-if=\"openPreviewCampaign\" v-on:closePreviewModal=\"closePreviewModal()\"></preview-landing>\n      <t-c-p-a-compliance v-if=\"tcpaComplianceOpen\" :user=\"userData\" v-on:closeTCPAModal=\"changeAgreement()\" v-on:cancelSMS=\"cancelSMS()\"></t-c-p-a-compliance>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport { EventService } from \"../main\";\nimport AutomationService from \"./../services/AutomationService\";\nimport config from \"../config.js\";\nimport LocationService from \"./../services/LocationService.js\";\nimport PreviewLanding from \"./PreviewLanding\";\nimport TCPACompliance from \"./TCPACompliance\";\nimport UserService from './../services/UserService';\n\nexport default {\n  name: \"addAutomation\",\n  props: [\"selectedAutomation\", \"automationType\"],\n  components: {\n    PreviewLanding, TCPACompliance\n  },\n  data: function() {\n    return {\n      pageAction: \"Add New\",\n      displayName: \"\",\n      locationId: \"\",\n      automationLocationName: '',\n      userData: '',\n      newOption: '',\n      landingMessage: 'Edit Landing Page',\n      emailPreview: false,\n      smsPreview: false,\n      duplicateId: false,\n      duplicateKey: false,\n      editingTimeCondition: false,\n      editingLandingPage: false,\n      editingSurvey: false,\n      addingLoyaltyCoupon: false,\n      openPreviewCampaign: false,\n      tcpaComplianceOpen: false,\n      agreement: false,\n      initializedUnlayer: false,\n      startPosition: null,\n      endPosition: null,\n      dragging: false,\n      templateType: \"\",\n      selectedIndex: null,\n      selectedAction: {\n        time: 0,\n        email: {\n          subject: \"\",\n          design: {\n            data: \"\",\n            design: \"\"\n          }\n        },\n        sms: {\n          preview: \"\",\n          message: \"\"\n        },\n        surveyQuestions: []\n        // restriction: ''\n      },\n      automation: {\n        name: \"\",\n        automationId: '',\n        locationId: '',\n        type: \"\",\n        language: 'en',\n        identifier: '',\n        triggerEvent: \"\",\n        autoResend: '15724800000',\n        keyword: '',\n        actions: [\n          {\n            time: 0,\n            email: {\n              subject: \"\",\n              design: {\n                data: \"\",\n                design: \"\"\n              }\n            },\n            sms: {\n              preview: \"\",\n              message:\n                \"\"\n            },\n            restriction: \"\"\n          }\n        ]\n      }\n    };\n  },\n  created() {\n    this.setInitialData();\n  },\n  computed: {\n    displayOverview() {\n      if( this.emailPreview == false &&\n          this.smsPreview == false &&\n          this.editingTimeCondition == false &&\n          this.editingLandingPage == false &&\n          this.editingSurvey == false &&\n          this.addingLoyaltyCoupon == false &&\n          this.openPreviewCampaign == false &&\n          this.initializedUnlayer == false ) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    saveSurveyDisabled() {\n      // Needs some sort of trigger in order to refresh the result after one of its dependents is changed... unsure at this time how to trigger that.\n      let vm = this;\n      let test = vm.selectedAction.surveyQuestions;\n       return(test.map(e => {\n        return Object.entries(e).map(x => {\n          return (x[1].length == 0 && (typeof x[1] != 'boolean' || typeof x[1] != 'number') );\n        })\n      })).map(h => {\n        return h.includes(true)\n      })\n      this.$forceUpdate();\n    }\n  },\n  methods: {\n    setInitialData() {\n      this.locationId = localStorage.getItem(\"locationId\");\n      this.automation.locationId = this.locationId;\n      this.displayName = this.automationType;\n      this.automation.type = this.automationType;\n      this.addLandingPageData();\n      this.addSurveyData();\n      this.addLoyaltyCoupon();\n      this.displayName = this.splitAndConvertName(this.displayName);\n      if(this.selectedAutomation) {\n        this.pageAction = 'Update';\n        this.automation = this.selectedAutomation;\n      }\n      this.getUserData();\n      this.checkAgreement();\n    },\n    checkAgreement() {\n      let vm = this;\n      if(vm.locationId) {\n        LocationService.getLocation(vm.locationId).then(response => {\n          if(response.tcpaAgreement) {\n            this.agreement = response.tcpaAgreement.consent;\n          }\n        })\n      }\n    },\n    convertToCaps() {\n      let vm = this;\n      if(vm.automation && vm.automation.keyword) vm.automation.keyword = vm.automation.keyword.toUpperCase().replace(/\\s+/g, '');\n      let allKeys = []\n      AutomationService.getAutomationByType(null, 'loyalty').then(response => {\n        response.results.map(auto => {\n          allKeys.push(auto.keyword)\n        })\n        vm.duplicateKey = allKeys.includes(vm.automation.keyword) ? true : false;\n      })\n    },\n    getUserData() {\n      let vm = this;\n      vm.userData = JSON.parse(localStorage.getItem('currentUser'));\n    },\n    validateID(id) {\n      let vm = this;\n      AutomationService.getAutomationsByLocation(vm.locationId, vm.automation.type).then(response => {\n        let locationAutos = response.result\n        let allIds = []\n        locationAutos.map(auto => {\n          if(auto.status != 'deleted') {\n            if(typeof auto.identifier != 'string') {\n              allIds.push(JSON.stringify(auto.identifier));\n            } else {\n              allIds.push(auto.identifier);\n            }\n          }\n        })\n        vm.duplicateId = allIds.includes(id);\n      })\n    },\n    saveAutomation() {\n      EventService.$emit(\"loading\", \"show\");\n      let vm = this;\n      if(vm.pageAction == 'Add New') {\n        AutomationService.saveAutomation(vm.automation).then(response => {\n          if(response.success) {\n            EventService.$emit(\"loading\", \"hide\");\n            EventService.$emit(\n              \"successMessage\",\n              \"Hooray! Automation Saved.\"\n            );\n            vm.closeModal('Saved');\n          } else {\n            EventService.$emit(\"loading\", \"hide\");\n            EventService.$emit(\n              \"errorMessage\",\n              \"Sorry, something went wrong. Please try again.\"\n            );\n          }\n        })\n      } else {\n        AutomationService.updateAutomation(vm.automation).then(response => {\n          if(response.success) {\n            EventService.$emit(\"loading\", \"hide\");\n            EventService.$emit(\n              \"successMessage\",\n              \"Hooray! Automation Saved.\"\n            );\n            vm.closeModal('Saved');\n          } else {\n            EventService.$emit(\"loading\", \"hide\");\n            EventService.$emit(\n              \"errorMessage\",\n              \"Sorry, something went wrong. Please try again.\"\n            );\n          }\n        })\n      }\n    },\n    splitAndConvertName(data) {\n      return (data.charAt(0).toUpperCase() + data.substr(1)).replace(/([A-Z])/g, \" $1\").trim();\n    },\n\n    // Logic below allowing an action to contain a new sms message, adjust the > 7 in order to change time frame difference to allow more or less time to pass between texts.\n\n    checkTime(time, index) {\n      let newArray = [];\n      this.automation.actions.map(e => {\n        newArray.push(e.time);\n      })\n      let newTimes = newArray.sort( ( a, b ) => a - b );\n      if(index == 0) {\n        return true;\n      } else if (index > 0 && time == 0){\n        return false\n      } else {\n        if(newTimes.indexOf(time) > 0) {\n          if(Math.abs(time - newTimes[newTimes.indexOf(time)-1]) > 7) {\n            return true;\n          } else {\n            return false;\n          }\n        } else  {\n          return true;\n        }\n      }\n    },\n    checkMinTimes(action){\n      let vm = this;\n      let index = vm.selectedIndex;\n      if(index == 0 ) {\n        return 0;\n      } else {\n        return vm.automation.actions[index-1].time;\n      }\n    },\n    addAction(location, index) {\n      if (this.automationType == \"reviewRequest\") {\n        var newAction = {\n          time: 0,\n          email: {\n            subject: \"\",\n            design: {\n              data: \"\",\n              design: \"\"\n            }\n          },\n          sms: {\n            preview: \"\",\n            message: \"\"\n          },\n          notice: {\n            potentialNegRev: true,\n            actualNegRev: true,\n            positiveRev: true,\n            privateRev: true\n          },\n          landingPage: {\n            lp1: \"How Are We Doing?\",\n            lp2: \"Please Rate Your Experience\",\n            lp3: \"At \" + this.automationLocationName + \", we care about your experience and want to hear about it. Please take a moment to let us know how we're doing!\",\n            rp1: \"We're Sorry To Hear That\",\n            rp2: \"Please Tell Us More\",\n            rp3:\n              \"We take our customer feedback very seriously - please let us know how your experience was less than ideal so we can improve in the future. In order to better address the issue, please provide specifics. We appreciate your feedback!\"\n          }\n        };\n      } else if (this.automationType == \"survey\") {\n        var newAction = {\n          time: 0,\n          email: {\n            subject: \"\",\n            design: {\n              data: \"\",\n              design: \"\"\n            }\n          },\n          sms: {\n            preview: \"\",\n            message: \"\"\n          },\n          surveyQuestions: []\n        };\n      } else if (this.automationtype == \"loyalty\") {\n        var newAction = {\n          time: 0,\n          email: {\n            subject: \"\",\n            design: {\n              data: \"\",\n              design: \"\"\n            }\n          },\n          sms: {\n            preview: \"\",\n            message: \"\"\n          },\n          loyaltyCoupon: {\n            image: '',\n            imageType: ''\n          }\n        };\n      } else {\n        var newAction = {\n          time: 0,\n          email: {\n            subject: \"\",\n            design: {\n              data: \"\",\n              design: \"\"\n            }\n          },\n          sms: {\n            preview: \"\",\n            message: \"\"\n          }\n        };\n      }\n      if (location == \"below\") {\n        this.automation.actions.splice(index + 1, 0, newAction);\n      } else if (location == \"above\") {\n        this.automation.actions.splice(index, 0, newAction);\n      }\n    },\n    addLandingPageData() {\n      let vm = this;\n      if (vm.automationType == \"reviewRequest\") {\n        vm.automation.actions[0].notice = {\n          potentialNegRev: true,\n          actualNegRev: true,\n          positiveRev: true,\n          privateRev: true\n        },\n        vm.automation.actions[0].landingPage = {\n          lp1: \"How Are We Doing?\",\n          lp2: \"Please Rate Your Experience\",\n          lp3: \"At \" + this.automationLocationName + \", we care about your experience and want to hear about it. Please take a moment to let us know how we're doing!\",\n          rp1: \"We're Sorry To Hear That\",\n          rp2: \"Please Tell Us More\",\n          rp3:\n            \"We take our customer feedback very seriously - please let us know how your experience was less than ideal so we can improve in the future. In order to better address the issue, please provide specifics. We appreciate your feedback!\"\n        };\n      }\n    },\n    addSurveyData() {\n      let vm = this;\n      if (vm.automationType == \"survey\") {\n        vm.automation.actions[0].surveyQuestions = [];\n      }\n    },\n    addLoyaltyCoupon() {\n      let vm = this;\n      if(vm.automationType == 'loyalty') {\n        vm.automation.actions[0].loyaltyCoupon = {\n          image: '',\n          imageType: '',\n        }\n      }\n    },\n    removeAction(index) {\n      this.automation.actions.splice(index, 1);\n    },\n\n    previewEmail(action) {\n      let vm = this;\n      // Removes any other editing so that other email previews don't interfere.\n      vm.closeAllEditing();\n      vm.selectedAction = action;\n      vm.emailPreview = true;\n      // Checks for proper information in order to pass correct data to mailchimp for testing.\n      if (config.subDomain) {\n        var subDomain = config.subDomain;\n      }\n      if (config.baseUrl) {\n        var baseUrl = config.baseUrl;\n      }\n      // Timeout is set to be manipulated if we need more time later in a single variable.\n      var timeOut = 500;\n      // Check if the action passed into the function already has been saved, so that it is not overwritten if it is.\n      if (action.email.design.design) {\n        // Create the script and iframe to be used to edit the email.\n        vm.$unlayerScript = {\n          id: \"email-editor\",\n          projectId: 1777,\n          displayMode: \"email\"\n        };\n\n        var d = document;\n        var s = d.createElement(\"script\");\n        s.type = \"text/javascript\";\n        s.defer = true;\n        s.src = \"//editor.unlayer.com/embed.js\";\n        var t = d.getElementsByTagName(\"script\")[0];\n        t.parentNode.insertBefore(s, t);\n        // Actually load the existing design in the action, check for initializedUnlayer exists as failsafe for the iframe not being reset properly.\n        setTimeout(() => {\n          if (!vm.initializedUnlayer) {\n            unlayer.init(vm.$unlayerScript);\n            vm.initializedUnlayer = true;\n            unlayer.loadDesign(action.email.design.design);\n          }\n        }, timeOut);\n      } else {\n        // If email design doens't exist for the selected action, create all necessary fields to pass as designTags and set the initial design.\n        LocationService.getLocation(vm.locationId).then(response => {\n          if (response.displayName) {\n            vm.automationLocationName = response.displayName;\n            vm.addLandingPageData();\n            var locationName = response.displayName;\n          } else {\n            var locationName = response.name;\n          }\n          var style = response.locationStyle;\n          var logo = style.logo;\n          var colors = style.buttonColor || \"#4fcbc5\";\n          var buttonColors = vm.generateButtonColors(colors);\n          var automationId = 'AU' + vm.generateAutoId('0', 11);\n          vm.automation.automationId = automationId;\n\n          vm.$unlayerScript = {\n            id: \"email-editor\",\n            projectId: 1777,\n            displayMode: \"email\",\n            designTags: {\n              location_name: locationName,\n              // Update when automation identifier is created.\n              // template_id: vm.automation.name,\n              review_url: \"https://\" + subDomain + \".opiniion.com/automationReviewEmail/\" + vm.locationId + '/' + automationId+ ':' + '*|aid|*/*|cid|*',\n              display_url: \"https://\" + subDomain + \".opiniion.com/leaveFeedback/\" + vm.locationId + '/*|cid|*/Email',\n              unsubscribe_url: \"https://\" + subDomain + \".opiniion.com/unsubscribe?cid=*|cid|*\",\n              image_url: baseUrl + `location\\/showImage\\/` + vm.locationId,\n              survey_url: baseUrl + 'surveyResponse/',\n              button_color_0: buttonColors[0],\n              button_color_1: buttonColors[1],\n              button_color_2: buttonColors[2],\n              button_color_3: buttonColors[3],\n              button_color_4: buttonColors[4],\n              footer_color: style.footerColor || \"lightgrey\"\n            }\n          };\n\n          if (vm.automationType == \"campaign\") {\n            vm.$unlayerScript.templateId = 4977;\n          } else if (vm.automationType == \"survey\") {\n            vm.$unlayerScript.templateId = 4976;\n          } else if (vm.automationType == \"loyalty\") {\n            vm.$unlayerScript.templateId = 5284;\n          } else if (vm.automationType == \"reviewRequest\") {\n            vm.$unlayerScript.templateId = 5307;\n            if (vm.templateType == \"standard\" || !vm.templateType) {\n              vm.$unlayerScript.designTags.message_block =\n                \"Thank you so much for choosing \" +\n                locationName +\n                \"! Your satisfaction is our top priority, and we'd love to hear from you. Please take a few seconds to let us know how we're doing.\";\n            } else if (vm.templateType == \"property\") {\n              vm.$unlayerScript.designTags.message_block =\n                \"Thanks for joining us! Your satisfaction is our top priority, and we'd love to hear from you. Please take a few seconds to rate your experience.\";\n            } else if (vm.templateType == \"service\") {\n              vm.$unlayerScript.designTags.message_block =\n                \"Thank you so much for choosing \" +\n                locationName +\n                \"! Your satisfaction is our top priority, and we'd love to hear from you. Please take a few seconds to let us know how we're doing.\";\n            } else {\n              vm.$unlayerScript.designTags.message_block =\n                \"Thank you so much for choosing \" +\n                locationName +\n                \"! Your satisfaction is our top priority, and we'd love to hear from you. Please take a few seconds to let us know how we're doing.\";\n            }\n          }\n\n          var d = document;\n          var s = d.createElement(\"script\");\n          s.type = \"text/javascript\";\n          s.defer = true;\n          s.src = \"//editor.unlayer.com/embed.js\";\n          var t = d.getElementsByTagName(\"script\")[0];\n          t.parentNode.insertBefore(s, t);\n          setTimeout(() => {\n            if (!vm.initializedUnlayer) {\n              vm.initializedUnlayer = true;\n              unlayer.init(vm.$unlayerScript);\n            }\n          }, timeOut);\n        });\n      }\n    },\n    saveEmailDesign() {\n      let vm = this;\n      if (vm.initializedUnlayer) {\n        unlayer.exportHtml(function(data) {\n          vm.selectedAction.email.design = {\n            data: data.html,\n            design: data.design\n          };\n          vm.removeIframe();\n        });\n      }\n      // console.log(vm.selectedAction.email);\n    },\n    previewSMS(action, i) {\n      let vm = this;\n      vm.selectedAction = action;\n      // Add logic for opening only if index == 0 or display agreement.\n      if(( i == 0 && vm.automation.actions.length && vm.automation.actions.length == 1) || vm.agreement) {\n        vm.closeAllEditing();\n        vm.smsPreview = true;\n      } else {\n        vm.tcpaComplianceOpen = true;\n      }\n    },\n    changeAgreement() {\n      this.agreement = true;\n      // Activate this line of code once back end is pushed.\n      LocationService.setTCPAAgreement(this.locationId, this.userData).then(response => {\n        console.log(response);\n      })\n      this.tcpaComplianceOpen = false;\n      this.previewSMS(this.selectedAction);\n    },\n    cancelSMS() {\n      this.tcpaComplianceOpen = false;\n      this.selectedAction = {\n        time: 0,\n        email: {\n          subject: \"\",\n          design: {\n            data: \"\",\n            design: \"\"\n          }\n        },\n        sms: {\n          preview: \"\",\n          message: \"\"\n        },\n        surveyQuestions: []\n        // restriction: ''\n      }\n    },\n    generateAutoId(possItems, length) {\n      var text = '';\n      var options = '';\n      if (possItems.indexOf('0') > -1) options += '0123456789';\n      if (possItems.indexOf('a') > -1) options += 'abcdefghijklmnopqrstuvwxyz';\n      if (possItems.indexOf('A') > -1) options += 'ABCDEFGHIkLMNOPQRSTUVWXYZ';\n      for (var i=0; i<length && options.length>0; i++) {\n        text += options.charAt(Math.floor(Math.random() * options.length));\n      }\n      return text;\n    },\n    editTimeCondition(action, index) {\n      let vm = this;\n      vm.closeAllEditing();\n      vm.selectedAction = action;\n      vm.selectedIndex = index;\n      vm.editingTimeCondition = true;\n    },\n    editLandingPage(action) {\n      let vm = this;\n      if(action.email.subject) {\n        vm.closeAllEditing();\n        vm.selectedAction = action;\n        vm.editingLandingPage = true;\n        vm.landingMessage = 'Edit Landing Page Details'\n      } else {\n        vm.landingMessage = 'Please create an email before designing the landing page.'\n      }\n    },\n    editSurvey(action) {\n      let vm = this;\n      vm.closeAllEditing();\n      vm.selectedAction = action;\n      vm.editingSurvey = true;\n    },\n    editLoyaltyCoupon(action) {\n      let vm = this;\n      vm.closeAllEditing();\n      vm.selectedAction = action;\n      vm.addingLoyaltyCoupon = true;\n    },\n    openPreviewModal() {\n      this.openPreviewCampaign = true;\n    },\n    closeAllEditing() {\n      let vm = this;\n      vm.saveEmailDesign();\n      vm.emailPreview = false;\n      vm.smsPreview = false;\n      vm.editingTimeCondition = false;\n      vm.editingLandingPage = false;\n      vm.editingSurvey = false;\n      vm.addingLoyaltyCoupon = false;\n      vm.selectedIndex = null;\n    },\n    cancelEmailEdit() {\n      let vm = this;\n      vm.removeIframe();\n      vm.emailPreview = false;\n      vm.smsPreview = false;\n      vm.editingTimeCondition = false;\n      vm.editingLandingPage = false;\n      vm.editingSurvey = false;\n      vm.addingLoyaltyCoupon = false;\n    },\n    removeIframe() {\n      let vm = this;\n      if (vm.initializedUnlayer) {\n        var x = document.getElementsByTagName(\"iframe\")[0];\n        var d = document.getElementsByTagName(\"script\")[0];\n        if (x) {\n          x.remove();\n        }\n        if (d) {\n          d.remove();\n        }\n      }\n      vm.initializedUnlayer = false;\n    },\n    addAnswer(question) {\n      let vm = this;\n      question.answerOptions.push(question.newOption);\n      question.newOption = '';\n      vm.refreshQuestions();\n    },\n    removeAnswer(question, answer) {\n      let vm = this;\n      question.answerOptions.splice(question.answerOptions.indexOf(answer), 1);\n      vm.refreshQuestions();\n    },\n    closePreviewModal() {\n      this.openPreviewCampaign = false;\n    },\n    changeQuestions() {\n      let vm = this;\n      if (vm.selectedAction.surveyTemplate == \"none\") {\n        vm.selectedAction.surveyQuestions = [];\n      } else if (vm.selectedAction.surveyTemplate == \"1\") {\n        vm.selectedAction.surveyQuestions = [\n          { order: 1, type: \"1to5\", explain: true, title: \"With 1 being lowest and 5 being highest: \", question: \"How would you rate our work culture?\" },\n          { order: 2, type: \"selectAny\", explain: true, title: \"Select All That Apply:\", question: \"What do you enjoy most about working here?\", answerOptions:[] },\n          { order: 3, type: \"selectAny\", explain: true, title: \"Select All That Apply:\", question: \"What do you enjoy least about working here?\", answerOptions:[] },\n        ];\n      } else if (vm.selectedAction.surveyTemplate == \"2\") {\n        vm.selectedAction.surveyQuestions = [\n          { order: 1, type: \"1to5\", explain: true, title: \"With 1 being lowest and 5 being highest: \", question: \"How would you rate our facilties?\" },\n          { order: 2, type: \"selectAny\", explain: true, title: \"Select All That Apply:\", question: \"What do you enjoy most about living here?\", answerOptions:[] },\n          { order: 3, type: \"selectAny\", explain: true, title: \"Select All That Apply:\", question: \"What do you enjoy least about living here?\", answerOptions:[] },\n        ];\n      } else if (vm.selectedAction.surveyTemplate == \"3\") {\n        vm.selectedAction.surveyQuestions = [\n          { order: 1, type: \"1to5\", explain: true, title: \"With 1 being lowest and 5 being highest: \", question: \"How would you rate our service?\" },\n          { order: 2, type: \"selectAny\", explain: true, title: \"Select All That Apply:\", question: \"What do we do well?\", answerOptions:[] },\n          { order: 3, type: \"selectAny\", explain: true, title: \"Select All That Apply:\", question: \"What could we improve on?\", answerOptions:[] },\n        ];\n      }\n    },\n    encodeImageFileAsURL(event) {\n      let filesList = event.target.files[0];\n      let vm = this;\n      let reader = new FileReader();\n      reader.onloadend = function() {\n        if (reader.result.length > 500000 * 1.36) {\n          vm.showLogoSizeError = true;\n        } else {\n          vm.selectedAction.loyaltyCoupon.image = reader.result;\n          let selection = reader.result.substr(0, 25);\n          vm.selectedAction.loyaltyCoupon.imageType = selection.substr((selection.indexOf(\"/\")+1), (selection.indexOf(';')-1 - selection.indexOf(\"/\")));\n          vm.addingLoyaltyCoupon = false;\n          vm.addingLoyaltyCoupon = true;\n        }\n      };\n      reader.readAsDataURL(filesList);\n    },\n    appendImageHeader(imgText) {\n      if (imgText) {\n        return imgText;\n      }\n    },\n    generateButtonColors(initialColor) {\n      let vm = this;\n      return [\n        vm.lightenColor(initialColor, 40),\n        vm.lightenColor(initialColor, 30),\n        vm.lightenColor(initialColor, 20),\n        vm.lightenColor(initialColor, 10),\n        initialColor\n      ];\n    },\n    lightenColor(initialColor, amt) {\n      var col = initialColor.slice(1);\n\n      var num = parseInt(col, 16);\n\n      var r = (num >> 16) + amt;\n\n      if (r > 255) r = 255;\n      else if (r < 0) r = 0;\n\n      var b = ((num >> 8) & 0x00ff) + amt;\n\n      if (b > 255) b = 255;\n      else if (b < 0) b = 0;\n\n      var g = (num & 0x0000ff) + amt;\n\n      if (g > 255) g = 255;\n      else if (g < 0) g = 0;\n\n      return (\n        \"#\" +\n        String(\"000000\" + (g | (b << 8) | (r << 16)).toString(16)).slice(-6)\n      );\n    },\n    addSurveyQuestion() {\n      let vm = this;\n      let newOrder = vm.selectedAction.surveyQuestions.length + 1;\n      vm.selectedAction.surveyQuestions.push({\n        order: newOrder,\n        type: \"\",\n        title: \"\",\n        question: \"\"\n      });\n      vm.refreshQuestions();\n    },\n    refreshQuestions() {\n      let vm = this;\n      vm.editingSurvey = false;\n      vm.editingSurvey = true;\n    },\n    removeSurveyQuestion(index) {\n      this.selectedAction.surveyQuestions.splice(index, 1);\n      this.refreshQuestions();\n    },\n    dragStart(event) {\n      this.dragging = true;\n      let dt = event.dataTransfer;\n      dt.setData(\"text/plain\", event.target.id);\n      var el = document.getElementsByClassName(\"disable-on-drag\");\n      var i;\n      for (i = 0; i < el.length; i++) {\n        el[i].disabled = true;\n      }\n    },\n    dragOver(event) {\n      event.dataTransfer.dropEffect = \"move\";\n    },\n    dropQuestion(event) {\n      let dt = event.dataTransfer;\n      var data = event.dataTransfer.getData(\"text/plain\");\n      this.startPosition = data;\n      this.endPosition = event.target.id;\n    },\n    dragEnd(event) {\n      let vm = this;\n      let start = this.startPosition;\n      let end = this.endPosition;\n      var newArray = [];\n      if ((start && end) && start != end) {\n        vm.selectedAction.surveyQuestions.map((question, i) => {\n          if (i == start) {\n            i = end;\n            newArray[i] = question;\n          } else {\n            if (end > start) {\n              if (i > start && i <= end) {\n                i = i - 1;\n                newArray[i] = question;\n              } else {\n                newArray[i] = question;\n              }\n            } else if (end < start) {\n              if (i < start && i >= end) {\n                i = i + 1;\n                newArray[i] = question;\n              } else {\n                newArray[i] = question;\n              }\n            }\n          }\n        });\n        vm.selectedAction.surveyQuestions = newArray;\n      }\n      var el = document.getElementsByClassName(\"disable-on-drag\");\n      var i;\n      for (i = 0; i < el.length; i++) {\n        el[i].disabled = false;\n      }\n      vm.dragging = false;\n    },\n    closeModal(msg) {\n      if(msg) {\n        this.$emit(\"closeModal\");\n        this.automation = {};\n        this.selectedAction = {};\n        EventService.$emit(\"loading\", \"hide\");\n      } else {\n        if(confirm('Are you sure you would like to exit without saving?')) {\n        this.$emit(\"closeModal\");\n        this.automation = {};\n        this.selectedAction = {};\n        EventService.$emit(\"loading\", \"hide\");\n        }\n      }\n    }\n  }\n};\n</script>\n\n\n<style scoped>\n.modal-mask {\n  height: auto;\n}\n\n.automation-container {\n  width: calc(100% - 75px);\n  min-width: 1430px;\n  min-height: calc(100% - 100px);\n  margin: 55px 0 0 55px;\n  background: white;\n}\n\nheader {\n  border-bottom: 2px solid lightgrey;\n  display: flex;\n  justify-content: space-between;\n  align-content: center;\n  align-items: center;\n  font-size: 25px;\n  text-transform: capitalize;\n}\n\nheader span {\n  margin-left: 25px;\n}\n\nheader i {\n  margin-right: 25px;\n}\n\n.automations-style-container {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.automation-action-container {\n  width: 28%;\n  border: 1px solid lightgrey;\n  border-radius: 5px;\n  min-height: 800px;\n  margin: 25px 0 0 25px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  /* overflow-y: scroll; */\n}\n\n.initial-trigger {\n  margin-top: 10px;\n}\n\n.trigger-select {\n  margin: 20px 0 20px 0;\n}\n\n.action-container {\n  display: flex;\n  flex-direction: column;\n  border-bottom: 1px solid grey;\n  padding-bottom: 10px;\n  margin-bottom: 10px;\n  margin-top: 10px;\n}\n\n.horizontal-divider {\n  border-bottom: 1px solid lightgrey;\n  width: 300px;\n  /* margin-top: 10px; */\n}\n\n.scroll-area {\n  height: 650px;\n  width: 90%;\n  padding: 20px;\n  overflow-y: scroll;\n  scroll-behavior: smooth;\n}\n\n.automation-actions-list {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.top {\n  font-size: 25px;\n  transform: translateY(13px);\n  background: white;\n  z-index: 999;\n}\n\n.bottom {\n  font-size: 25px;\n  transform: translateY(-13px);\n  background: white;\n}\n\n.automation-action {\n  display: flex;\n  flex-direction: column;\n  border: 1px solid grey;\n  align-items: center;\n  width: 93%;\n  font-size: 20px;\n  padding: 20px 10px;\n  position: relative;\n}\n\n.vertical-divider-line {\n  margin-top: 2px;\n  margin-bottom: 2px;\n  transform: translateY(1px);\n  width: 1px;\n  height: 13px;\n  background: black;\n  /* border-right: 1px solid black; */\n}\n\n.action-box {\n  padding: 0px 10px;\n  border: 1px solid grey;\n  box-shadow: 2px 2px 1px rgba(0, 0, 0, 0.25);\n  border-radius: 5px;\n  font-size: 15px;\n}\n\n.message {\n  color: white;\n  background: grey;\n}\n\n.fa-plus-circle {\n  cursor: pointer;\n}\n\n.fa-pencil {\n  font-size: 15px;\n  cursor: pointer;\n  margin-left: 10px;\n}\n\n.fa-envelope {\n  margin-right: 20px;\n  transform: translateY(1px);\n}\n\n.fa-mobile-android {\n  margin-right: 20px;\n  transform: translateY(1px);\n}\n\n.fa-times-circle {\n  position: absolute;\n  right: 0;\n  margin-right: 5px;\n  margin-bottom: 5px;\n  bottom: 0;\n  cursor: pointer;\n}\n\n.fa-times {\n  cursor: pointer;\n}\n\n.fa-columns {\n  margin-right: 20px;\n}\n\n.fa-info-circle {\n  font-size: 14px;\n  margin-left: 10px;\n}\n\n.message-editor-container {\n  border: 2px solid lightgrey;\n  width: 68%;\n  margin-left: 20px;\n  min-height: 700px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 18px;\n}\n\n.delay-input {\n  width: 30px;\n}\n\n.header-container button {\n  background: #4fcbc5;\n  color: white;\n  padding: 10px 20px;\n  margin-left: 40px;\n  margin-top: 10px;\n  border-radius: 2px;\n  cursor: pointer;\n}\n\n.overview {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  align-content: center;\n  justify-content: center;\n}\n\n.sms-message-container {\n  margin-top: 50px;\n  display: flex;\n  flex-direction: column;\n}\n\n.sms-message-container textarea {\n  width: 500px;\n  max-width: 600px;\n  height: 50px;\n  max-height: 75px;\n}\n\n.sms-message-container span {\n  font-size: 14px;\n}\n\n.sms-preview-display {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  align-content: center;\n  margin-top: 20px;\n}\n\n.divider-line {\n  position: absolute;\n  border-bottom: 1px solid black;\n  transform: translateY(-130px);\n  padding: 0 0 10px 20px;\n  width: 200px;\n  font-size: 18px;\n  font-weight: bolder;\n}\n\n.sms-message-preview {\n  background: lightskyblue;\n  max-width: 185px;\n  position: absolute;\n  border-radius: 10px;\n  transform: translateY(-20px);\n  padding: 5px 10px;\n}\n\n.landing-page-details-container {\n  width: 500px;\n  margin-top: 30px;\n}\n.landing-page-details-container input {\n  width: 300px;\n}\n.landing-page-details-container textarea {\n  width: 500px;\n  height: 80px;\n  min-width: 500px;\n  min-height: 80px;\n  max-width: 550px;\n  max-height: 200px;\n}\n\n.landing-detail {\n  display: flex;\n  justify-content: space-between;\n}\n\n.landing-textarea textarea {\n  margin-top: 10px;\n}\n\n.survey-question {\n  padding: 10px 10px;\n  border: 1px solid darkgrey;\n  border-radius: 1px;\n  margin-bottom: 20px;\n  width: 100%;\n  min-height: 80px;\n}\n\n.survey-question input {\n  margin: 5px;\n}\n\n.fa-minus {\n  margin-bottom: 35px;\n  margin-right: 15px;\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  cursor: pointer;\n}\n\n.add-new-survey {\n  float: right;\n  background: #4fcbc5;\n  padding: 5px 10px;\n  margin-top: 10px;\n  cursor: pointer;\n  color: white;\n}\n\n.fa-plus {\n  margin-left: 10px;\n  cursor: pointer;\n}\n\n.drop-box {\n  width: 80%;\n  transform: translateX(70px) translateY(15px);\n  border: 1px solid grey;\n  background: lightgrey;\n  text-align: center;\n\n}\n\n.drop-box:hover {\n  background: rgb(231, 231, 231);\n}\n\n.campaign-email-editor {\n  width: 100%;\n  height: 100%;\n  border: 1px solid lightgrey;\n}\n\n.unavailable {\n  color: #a9a9a9;\n}\n\n.close-command {\n  margin-left: 15px;\n  font-size: 15px;\n  color: #4fcbc5;\n  cursor: pointer;\n}\n\n.modal-image-div {\n  background-size: cover;\n  background-repeat: no-repeat;\n}\n\n.warning {\n  color: red;\n}\n\n.answers {\n  display: flex;\n  flex-direction: row;\n}\n\n.adding-answers {\n  display: flex;\n  flex-direction: column;\n}\n\n.answers input {\n  width: 200px;\n}\n\n.survey-question {\n  position: relative;\n}\n\n.display-survey-answer {\n  margin: 20px 0 0 10px;\n}\n\n.middled {\n  margin-bottom: 70px;\n}\n\n.inactive {\n  color: grey;\n}\n\n.input-name {\n  width: 90%;\n  text-align: center;\n}\n\n.header-save-container {\n  margin-bottom: 20px;\n}\n\n.header-save-container button {\n  background: #4fcbc5;\n  color: white;\n  padding: 10px 20px;\n  /* margin-left: 40px; */\n  margin-top: 10px;\n  border-radius: 2px;\n  cursor: pointer;\n}\n\n.display-info {\n  margin-bottom: 10px;\n}\n\n.spacing {\n  margin: 15px 0 0 20px;\n  width: 95%;\n}\n\n.template-container {\n  margin-top: 15px;\n  margin-bottom: 15px;\n}\n\n.template-container select {\n  margin-left: 20px\n}\n\n.q-select input {\n  margin-left: 20px;\n}\n\n.q-select label{\n  font-size: 14px;\n}\n\n.survey-editor {\n  width: 100%;\n}\n\n.title-input {\n  width: 200px;\n}\n\n.question-input {\n  width: 400px;\n}\n\n.answer-tag {\n  border: 1px solid grey;\n  padding: 5px 10px;\n  border-radius: 20px;\n}\n\n.answer-tag i{\n  transform: translateY(2px);\n  margin-left: 5px;\n}\n\n.full-width {\n  align-items: unset;\n}\n\n.centered {\n  margin-left: 50%;\n  transform: translateX(-50%);\n}\n\n.dupe-message {\n  color: red;\n  font-size: 14px;\n}\n\n.modal-follow-up-details {\n  margin-bottom: 5px;\n}\n\n</style>"]}]}