{"remainingRequest":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/ParsingRules.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/ParsingRules.vue","mtime":1581270622000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBjb25maWcgZnJvbSAiLi4vY29uZmlnLmpzIjsKaW1wb3J0IHsgRXZlbnRTZXJ2aWNlIH0gZnJvbSAiLi4vbWFpbiI7CmltcG9ydCBQYXBhIGZyb20gIi4uLy4uL25vZGVfbW9kdWxlcy9wYXBhcGFyc2UvcGFwYXBhcnNlLmpzIjsKaW1wb3J0IFBhcnNpbmdTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL1BhcnNpbmdTZXJ2aWNlLmpzIjsKaW1wb3J0IFVzZXJTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL1VzZXJTZXJ2aWNlLmpzIjsKaW1wb3J0IExvY2F0aW9uU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9Mb2NhdGlvblNlcnZpY2UuanMiOwppbXBvcnQgWExTWCBmcm9tICJ4bHN4IjsKaW1wb3J0IGNvbnZlcnRGcm9tWE1MIGZyb20gInhtbC1qcyI7CmltcG9ydCB2U2VsZWN0IGZyb20gIi4uLy4uL25vZGVfbW9kdWxlcy92dWUtc2VsZWN0L3NyYy9jb21wb25lbnRzL1NlbGVjdC52dWUiOwppbXBvcnQgQXV0b21hdGlvblNlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvQXV0b21hdGlvblNlcnZpY2UnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJjc3ZQcmV2aWV3IiwKICBjb21wb25lbnRzOiB7CiAgICB2U2VsZWN0CiAgfSwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIGNzdjogW10sCiAgICAgIHhtbDogW10sCiAgICAgIHNhbXBsZUVtYWlsczogW10sCiAgICAgIGZpbGVPcHRpb25zOiBbImNzdiIsICJ4bWwiLCAieGxzIiwgInhsc3giLCAidHh0Il0sCiAgICAgIGluZGljYXRvcnM6IFsic3ViamVjdCIsICJmcm9tTmFtZSIsICJib2R5Il0sCiAgICAgIGZpbGVOYW1lOiAiIiwKICAgICAgZmlsZUV4aXN0czogZmFsc2UsCiAgICAgIGRpc3BsYXlTYW1wbGVzOiBmYWxzZSwKICAgICAgbmV3RmlsZTogIiIsCiAgICAgIHRyaWdnZXI6ICIiLAogICAgICBwYXJzZUZpbGVUeXBlOiAiIiwKICAgICAgcGFyc2VGaWxlTmFtZTogIiIsCiAgICAgIHNlbGVjdGVkRmlsZTogJycsCiAgICAgIG1haWxib3g6ICIiLAogICAgICBqc29uOiAiIiwKICAgICAgZG9tYWluOiAiIiwKICAgICAgYWN0aXZlTG9jYXRpb246ICIiLAogICAgICBsb2NhdGlvbk9wdGlvbnM6IFtdLAogICAgICBydWxlTmFtZTogIiIsCiAgICAgIHJ1bGVzOiBbeyBkYXRhOiAiIiwgb3B0aW9uOiAiaW50aWFsRGF0YSIgfV0sCiAgICAgIHFTZWxlY3Rpb246IFsnZGVmYXVsdCcsIDEsIDIsIDNdLAogICAgICBhbGxSdWxlTmFtZXM6IFtdLAogICAgICBkdXBlTmFtZTogZmFsc2UsCiAgICAgIGluY2x1ZGVzRGFzaDogZmFsc2UsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGRhdGEoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmICh2bS5qc29uKSB7CiAgICAgICAgcmV0dXJuIHZtLmpzb24uc3BsaWNlKDEsIDExKTsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGlmKHRoaXMuJHJvdXRlLnBhcmFtcy5wYXJzZXIpIHsKICAgICAgdGhpcy5nZXRQYXJzaW5nUnVsZSgpOwogICAgfQogICAgdGhpcy5zZWxlY3RlZExvY2F0aW9uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImxvY2F0aW9uSWQiKTsKICAgIHRoaXMuZ2V0QWxsUGFyc2luZ1J1bGVOYW1lcygpOwogICAgdGhpcy5nZXRMb2NhdGlvbk9wdGlvbnMoKTsKICAgIHRoaXMuZ2V0U2FtcGxlTWFpbCgpOwogICAgdGhpcy5kb21haW4gPSBjb25maWcuc3ViRG9tYWluOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0QWxsUGFyc2luZ1J1bGVOYW1lcygpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgUGFyc2luZ1NlcnZpY2UuZ2V0UGFyc2luZ1J1bGVzKCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgcmVzcG9uc2UucmVzcG9uc2UubWFwKHJ1bGUgPT4gewogICAgICAgICAgdm0uYWxsUnVsZU5hbWVzLnB1c2gocnVsZS5wYXJzaW5nUnVsZXMubmFtZSk7CiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICAvLyBldmFsdWF0ZURhdGEoZGF0YSkgewogICAgLy8gICBkYXRhLm1hcChsaW5lID0+IHsKICAgIC8vICAgICBjb25zb2xlLmxvZyhsaW5lLmxlbmd0aCk7CiAgICAvLyAgIH0pCiAgICAvLyAgIHJldHVybiBkYXRhWzBdCiAgICAvLyB9LAogICAgZXZhbE5hbWUoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmKHZtLmFsbFJ1bGVOYW1lcy5pbmNsdWRlcyh2bS5ydWxlTmFtZSkpIHsKICAgICAgICB2bS5kdXBlTmFtZSA9IHRydWU7CiAgICAgIH0gZWxzZSBpZih2bS5ydWxlTmFtZS5pbmNsdWRlcygiLSIpKSB7CiAgICAgICAgdm0uaW5jbHVkZXNEYXNoID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2bS5pbmNsdWRlc0Rhc2ggPSBmYWxzZTsKICAgICAgICB2bS5kdXBlTmFtZSA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgbWF4Q29sdW1uKGRhdGEsIGNvbmNhdCkgewogICAgICBsZXQgbGluZUxlbmd0aCA9IDA7CiAgICAgIGRhdGEubWFwKGxpbmUgPT4gewogICAgICAgIGlmKGxpbmUubGVuZ3RoID4gbGluZUxlbmd0aCkgbGluZUxlbmd0aCA9IGxpbmUubGVuZ3RoCiAgICAgIH0pCiAgICAgIGlmKGNvbmNhdCkgewogICAgICAgIHJldHVybiBBcnJheS5mcm9tKG5ldyBBcnJheShsaW5lTGVuZ3RoKSwodmFsLGluZGV4KT0+aW5kZXgpLmNvbmNhdChjb25jYXQpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBBcnJheS5mcm9tKG5ldyBBcnJheShsaW5lTGVuZ3RoKSwodmFsLGluZGV4KT0+aW5kZXgpOwogICAgICB9CiAgICB9LAogICAgZ2V0UGFyc2luZ1J1bGUoKXsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgUGFyc2luZ1NlcnZpY2UuZ2V0UGFyc2luZ1J1bGUodGhpcy4kcm91dGUucGFyYW1zLnBhcnNlcikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdm0uc2VsZWN0ZWRSdWxlID0gcmVzcG9uc2UucmVzdWx0WzBdOwogICAgICAgIGlmKCF0aGlzLiRyb3V0ZS5wYXJhbXMuYWN0aW9uKSB7CgogICAgICAgICAgdm0ucnVsZU5hbWUgPSB2bS5zZWxlY3RlZFJ1bGUucGFyc2luZ1J1bGVzLm5hbWU7CiAgICAgICAgICB2bS5tYWlsYm94ID0gdm0uc2VsZWN0ZWRSdWxlLm1haWxib3guc3Vic3RyKDAsIHZtLnNlbGVjdGVkUnVsZS5tYWlsYm94LmluZGV4T2YoJ0AnKSk7CiAgICAgICAgfQogICAgICAgIHZtLnJ1bGVzID0gdm0uc2VsZWN0ZWRSdWxlLnBhcnNpbmdSdWxlcy5ydWxlczsKICAgICAgICB2bS50cmlnZ2VyID0gdm0uc2VsZWN0ZWRSdWxlLnBhcnNpbmdSdWxlcy50cmlnZ2VyOwogICAgICAgIHZtLnBhcnNlRmlsZVR5cGUgPSB2bS5zZWxlY3RlZFJ1bGUucGFyc2luZ1J1bGVzLmZpbGVUeXBlOwogICAgICAgIHZtLmZpbGVFeGlzdHMgPSB0cnVlOwogICAgICAgIGlmKHZtLnRyaWdnZXIgPT0gJ3N1YmplY3QnKSB7CiAgICAgICAgICB2bS5maWxlTmFtZSA9IHZtLnNlbGVjdGVkUnVsZS5wYXJzaW5nUnVsZXMudmFsdWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZtLnBhcnNlRmlsZU5hbWUgPSB2bS5zZWxlY3RlZFJ1bGUucGFyc2luZ1J1bGVzLnBhcnNlRmlsZU5hbWU7CiAgICAgICAgfQogICAgICAgIHZtLnJ1bGVzLm1hcChydWxlID0+IHsKICAgICAgICAgIGlmKHJ1bGUuY2hlY2sgJiYgcnVsZS5jaGVjayA9PSAnY3VzdG9tZXJDcmVhdGUnKSB7CiAgICAgICAgICAgIHJ1bGUuYWN0aXZlTG9jYXRpb24gPSBydWxlLmlucHV0LmxvY2F0aW9uOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgZ2V0TG9jYXRpb25PcHRpb25zKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBVc2VyU2VydmljZS5nZXRBbGxVc2VyTG9jYXRpb25zKCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgcmVzcG9uc2UubWFwKGUgPT4gewogICAgICAgICAgbGV0IHNpbmdsZUxvY2F0aW9uID0gewogICAgICAgICAgICBsYWJlbDogZS5uYW1lLAogICAgICAgICAgICB2YWx1ZTogZS5sb2NhdGlvbklkLAogICAgICAgICAgICBhcGk6IGUuYXBpS2V5LAogICAgICAgICAgICBxc0VuYWJsZWQ6IGUucHJvcAogICAgICAgICAgfTsKICAgICAgICAgIHZtLmxvY2F0aW9uT3B0aW9ucy5wdXNoKHNpbmdsZUxvY2F0aW9uKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0U2FtcGxlTWFpbCgpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgUGFyc2luZ1NlcnZpY2UuZ2V0U2FtcGxlTWFpbCgpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHZtLnNhbXBsZUVtYWlscyA9IHJlc3BvbnNlLnJlc3BvbnNlOwogICAgICAgIC8vIGNvbnNvbGUubG9nKHZtLnNhbXBsZUVtYWlscyk7CiAgICAgIH0pOwogICAgfSwKICAgIGFkZEZpbGUoZmlsZSkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICAvLyBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAic2hvdyIpOwogICAgICBpZiAoZmlsZSkgewogICAgICAgIHZtLmZpbGVFeGlzdHMgPSB0cnVlOwogICAgICAgIHZtLmRpc3BsYXlTYW1wbGVzID0gZmFsc2U7CiAgICAgICAgdm0uc2VsZWN0ZWRGaWxlID0gZmlsZTsKICAgICAgICBsZXQgZXhhbXBsZUZpbGUgPSBmaWxlOwogICAgICAgIGxldCBmaWxlTmFtZTsKICAgICAgICBpZihleGFtcGxlRmlsZS5maWxlbmFtZS5pbmNsdWRlcygnLnppcCcpKSB7CiAgICAgICAgICBmaWxlTmFtZSA9IGV4YW1wbGVGaWxlLmZpbGVuYW1lLnN1YnN0cigwLGV4YW1wbGVGaWxlLmZpbGVuYW1lLmxhc3RJbmRleE9mKCcuJykpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZpbGVOYW1lID0gZXhhbXBsZUZpbGUuZmlsZW5hbWU7CiAgICAgICAgfQogICAgICAgIGxldCBmaWxlVHlwZSA9IGZpbGVOYW1lLnN1YnN0cihmaWxlTmFtZS5sYXN0SW5kZXhPZigiLiIpICsgMSk7CiAgICAgICAgaWYgKGZpbGVUeXBlID09ICJ4bHN4IiB8fCBmaWxlVHlwZSA9PSAieGxzIikgewogICAgICAgICAgdmFyIHJBQlMgPSB0cnVlOwogICAgICAgICAgdmFyIGRhdGEgPSBhdG9iKGV4YW1wbGVGaWxlLmNvbnRlbnQpOwogICAgICAgICAgaWYgKCFyQUJTKSBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7CiAgICAgICAgICB2YXIgd29ya2Jvb2sgPSBYTFNYLnJlYWQoZGF0YSwgeyB0eXBlOiByQUJTID8gImJpbmFyeSIgOiAiYXJyYXkiIH0pOwogICAgICAgICAgbGV0IHByb2Nlc3NlZFhMUyA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbigKICAgICAgICAgICAgd29ya2Jvb2suU2hlZXRzW3dvcmtib29rLlNoZWV0TmFtZXNbMF1dLAogICAgICAgICAgICB7IGhlYWRlcjogMSB9CiAgICAgICAgICApLmZpbHRlcihyb3cgPT4gewogICAgICAgICAgICByZXR1cm4gcm93Lmxlbmd0aCA+IDA7CiAgICAgICAgICB9KTsKICAgICAgICAgIGxldCBtYXhTaXplID0gMDsKICAgICAgICAgIHByb2Nlc3NlZFhMUy5tYXAoZSA9PiB7CiAgICAgICAgICAgIGlmKGUubGVuZ3RoID4gbWF4U2l6ZSkgbWF4U2l6ZSA9IGUubGVuZ3RoOwogICAgICAgICAgfSkKICAgICAgICAgIGxldCBkaWZmID0gbWF4U2l6ZSAtIHByb2Nlc3NlZFhMU1swXS5sZW5ndGg7CiAgICAgICAgICB3aGlsZSAoZGlmZiA+IDApIHsKICAgICAgICAgICAgcHJvY2Vzc2VkWExTWzBdLnB1c2goJy0nKTsKICAgICAgICAgICAgZGlmZiA9IG1heFNpemUgLSBwcm9jZXNzZWRYTFNbMF0ubGVuZ3RoOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHByb2Nlc3NlZFhMUy5sZW5ndGggPiAyMCkgewogICAgICAgICAgICB2bS5ydWxlc1swXS5kYXRhID0gcHJvY2Vzc2VkWExTCiAgICAgICAgICAgICAgLnNwbGljZSgwLCAxMSkKICAgICAgICAgICAgICAuY29uY2F0KHByb2Nlc3NlZFhMUy5zcGxpY2UoLTEwKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2bS5ydWxlc1swXS5kYXRhID0gcHJvY2Vzc2VkWExTOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZmlsZVR5cGUgPT0gImNzdiIpIHsKICAgICAgICAgIGxldCBwcm9jZXNzZWRDU1Y7CiAgICAgICAgICBQYXBhLnBhcnNlKGF0b2IoZXhhbXBsZUZpbGUuY29udGVudCksIHsKICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlc3VsdHMpIHsKICAgICAgICAgICAgICBwcm9jZXNzZWRDU1YgPSByZXN1bHRzLmRhdGE7CiAgICAgICAgICAgICAgaWYgKHByb2Nlc3NlZENTVi5sZW5ndGggPiAyMCkgewogICAgICAgICAgICAgICAgdm0ucnVsZXNbMF0uZGF0YSA9IHByb2Nlc3NlZENTVgogICAgICAgICAgICAgICAgICAuc3BsaWNlKDAsIDExKQogICAgICAgICAgICAgICAgICAuY29uY2F0KHByb2Nlc3NlZENTVi5zcGxpY2UoLTEwKSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZtLnJ1bGVzWzBdLmRhdGEgPSBwcm9jZXNzZWRDU1Y7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKGZpbGVUeXBlID09ICJ4bWwiKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IGF0b2IoZXhhbXBsZUZpbGUuY29udGVudCk7CiAgICAgICAgICB2bS5jb252ZXJ0WE1MKGRhdGEpOwogICAgICAgIH0gZWxzZSBpZiAoZmlsZVR5cGUgPT0gInR4dCIpIHsKICAgICAgICAgIHZhciBkYXRhID0gYXRvYihleGFtcGxlRmlsZS5jb250ZW50KTsKICAgICAgICAgIGxldCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7CiAgICAgICAgICBsZXQgbmV3RG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhKU09OLnBhcnNlKGRhdGEpLCAidGV4dC9odG1sIik7CiAgICAgICAgICBsZXQgdGVzdCA9IG5ld0RvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgidHIiKTsKICAgICAgICAgIGxldCBuZXdBcnIgPSBbLi4udGVzdF07CiAgICAgICAgICBsZXQgY3VzdG9tZXJMaXN0ID0gW107CiAgICAgICAgICBsZXQgaGVhZGVyQXJyID0gW107CiAgICAgICAgICBuZXdBcnIubWFwKGcgPT4gewogICAgICAgICAgICBsZXQgaGVhZGVycyA9IGcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRoIik7CiAgICAgICAgICAgIGlmIChoZWFkZXJzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICBoZWFkZXJBcnIucHVzaChbLi4uaGVhZGVyc10pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIGxldCBoZWFkZXJzTGlzdCA9IFtdOwogICAgICAgICAgaGVhZGVyQXJyLm1hcChoID0+IHsKICAgICAgICAgICAgaC5tYXAoZyA9PiB7CiAgICAgICAgICAgICAgaGVhZGVyc0xpc3QucHVzaChnLmlubmVySFRNTCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgICBsZXQgbmV4dEFyciA9IFtdOwogICAgICAgICAgbmV3QXJyLm1hcChlID0+IHsKICAgICAgICAgICAgbGV0IHRlc3RpbmcgPSBlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpOwogICAgICAgICAgICBsZXQgY3VzdG9tZXIgPSB7fTsKICAgICAgICAgICAgbGV0IG5leHRBcnJheSA9IFsuLi50ZXN0aW5nXTsKICAgICAgICAgICAgbmV4dEFycmF5Lm1hcCgoZiwgaSkgPT4gewogICAgICAgICAgICAgIGxldCBoZWFkZXIgPSBoZWFkZXJzTGlzdFtpXTsKICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBmLnRleHRDb250ZW50OwogICAgICAgICAgICAgIGN1c3RvbWVyW2hlYWRlcl0gPSB2YWx1ZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhjdXN0b21lcikubGVuZ3RoID4gMykgewogICAgICAgICAgICAgIGN1c3RvbWVyTGlzdC5wdXNoKGN1c3RvbWVyKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBsZXQgY3N2VmVyc2lvbiA9IFBhcGEudW5wYXJzZShjdXN0b21lckxpc3QpOwogICAgICAgICAgbGV0IGpzb25WZXJzaW9uID0gUGFwYS5wYXJzZShjc3ZWZXJzaW9uKTsKICAgICAgICAgIGpzb25WZXJzaW9uID0ganNvblZlcnNpb24uZGF0YTsKICAgICAgICAgIGlmIChqc29uVmVyc2lvbi5sZW5ndGggPiAyMCkgewogICAgICAgICAgICB2bS5ydWxlc1swXS5kYXRhID0ganNvblZlcnNpb24KICAgICAgICAgICAgICAuc3BsaWNlKDAsIDExKQogICAgICAgICAgICAgIC5jb25jYXQoanNvblZlcnNpb24uc3BsaWNlKC0xMCkpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdm0ucnVsZXNbMF0uZGF0YSA9IGpzb25WZXJzaW9uOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiRXJyb3IsIHRoaXMgaGFzIGJlZW4gcmVqZWN0ZWQgZm9yIGluY29ycmVjdCBmaWxlIHR5cGUuIik7CiAgICAgICAgfQogICAgICAgIGlmKHZtLnJ1bGVzICYmIHZtLnJ1bGVzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgIHZtLnJ1bGVzLm1hcCgocnVsZSwgaSkgPT4gewogICAgICAgICAgICBpZihpID4gMCkgewogICAgICAgICAgICAgIHJ1bGUuZGF0YS5tYXAoZGF0YXNldCA9PiB7CiAgICAgICAgICAgICAgICBpZihkYXRhc2V0ICYmIGRhdGFzZXQubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICB2bS5jaGFuZ2VGaWx0ZXIoaSwgcnVsZS5vcHRpb24sIHJ1bGUuaW5wdXQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcGFyc2VCb2R5KGVtYWlsKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIHZtLmZpbGVFeGlzdHMgPSB0cnVlOwogICAgICB2bS5kaXNwbGF5U2FtcGxlcyA9IGZhbHNlOwogICAgICB2bS5zZWxlY3RlZEZpbGUgPSBlbWFpbDsKICAgICAgdmFyIHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTsKICAgICAgdmFyIGh0bWxEb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKGVtYWlsLCAndGV4dC9odG1sJyk7CiAgICAgIHZhciBwQXJyYXkgPSBBcnJheS5mcm9tKGh0bWxEb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3AnKSk7CiAgICAgIGxldCB1c2FibGVEYXRhID0gcEFycmF5WzRdLmlubmVySFRNTC5zcGxpdCgnJmx0OycpOwogICAgICBsZXQgY3VzdG9tZXJzTGlzdCA9IFtdOwogICAgICB1c2FibGVEYXRhLm1hcCgocHRhZywgaSkgPT4gewogICAgICAgIGN1c3RvbWVyc0xpc3QucHVzaChwdGFnLnN1YnN0cmluZyhwdGFnLmluZGV4T2YoJzxicj4nKSkKICAgICAgICAucmVwbGFjZSgvPGEgaHJlZj0ibWFpbHRvOi9naSwgJycpCiAgICAgICAgLnJlcGxhY2UoJyI+JywgJyAnKQogICAgICAgIC5yZXBsYWNlKC88XC9hPi9naSwgJycpCiAgICAgICAgLnJlcGxhY2UoLyAtL2dpLCAnJykKICAgICAgICAucmVwbGFjZSgvLS9naSwgJycpCiAgICAgICAgLnJlcGxhY2UoLyA8YnI+L2dpLCAnJykKICAgICAgICAucmVwbGFjZSgvPGJyPi9naSwgJycpCiAgICAgICAgLnJlcGxhY2UoLyAmYW1wOy9naSwgJycpCiAgICAgICAgLnJlcGxhY2UoLyZhbXA7L2dpLCAnJykKICAgICAgICAuc3BsaXQoJyAnKSk7CiAgICAgICAgLy8gY29uc29sZS5sb2codHlwZW9mIHB0YWcsIHB0YWcpOwogICAgICB9KQogICAgICBpZiAoY3VzdG9tZXJzTGlzdC5sZW5ndGggPiAxMDApIHsKICAgICAgICB2bS5ydWxlc1swXS5kYXRhID0gY3VzdG9tZXJzTGlzdAogICAgICAgICAgLnNwbGljZSgwLCA1MCkKICAgICAgICAgIC5jb25jYXQoY3VzdG9tZXJzTGlzdC5zcGxpY2UoLTUwKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdm0ucnVsZXNbMF0uZGF0YSA9IGN1c3RvbWVyc0xpc3Q7CiAgICAgIH0KICAgICAgLy8gbGV0IHBhcnNlZEN1c3RvbWVycyA9IFtdOwogICAgICAvLyBsZXQgcGFyc2VkRGF0YSA9IFBhcGEucGFyc2UoZW1haWwsIHtkZWxpbWV0ZXI6ICdcXG4nfSk7CiAgICAgIC8vIGxldCB1bnBhcnNlZERhdGEgPSBQYXBhLnVucGFyc2UocGFyc2VkRGF0YS5kYXRhKTsKICAgICAgLy8gbGV0IG5ld1BhcnNlRGF0YSA9IHVucGFyc2VkRGF0YS5zcGxpdCgnXG4nKTsKICAgICAgLy8gbGV0IGN1c3RvbWVyc0xpc3QgPSBbXTsKICAgICAgLy8gbmV3UGFyc2VEYXRhLm1hcChlID0+IHsKICAgICAgLy8gICBlID0gZS5yZXBsYWNlKCdcbicsICcnKQogICAgICAvLyAgIGxldCBkYXRhID0gZS5zcGxpdCgnICcpOwogICAgICAvLyAgIGlmKGRhdGEubGVuZ3RoID4gMykgewogICAgICAvLyAgICAgY3VzdG9tZXJzTGlzdC5wdXNoKGRhdGEpOwogICAgICAvLyAgIH0KICAgICAgLy8gfSk7CiAgICAgIC8vIC8vIGNvbnNvbGUubG9nKHBhcnNlZEN1c3RvbWVycyk7CiAgICAgIC8vIGlmIChjdXN0b21lcnNMaXN0Lmxlbmd0aCA+IDEwMCkgewogICAgICAvLyAgIHZtLnJ1bGVzWzBdLmRhdGEgPSBjdXN0b21lcnNMaXN0CiAgICAgIC8vICAgICAuc3BsaWNlKDAsIDUwKQogICAgICAvLyAgICAgLmNvbmNhdChjdXN0b21lcnNMaXN0LnNwbGljZSgtNTApKTsKICAgICAgLy8gfSBlbHNlIHsKICAgICAgLy8gICB2bS5ydWxlc1swXS5kYXRhID0gY3VzdG9tZXJzTGlzdDsKICAgICAgLy8gfQogICAgICAvLyBiYWNrIGVuZCBwb3RlbnRpYWwgcHJvY2Vzcy4KICAgIC8vIGxldCBsaW5lcyA9IGVtYWlsLnNwbGl0KCdcXG4nKTsKICAgIC8vIGxldCBwYXJzZWRMaW5lcyA9IFtdCiAgICAvLyBsaW5lcy5tYXAoKGwpID0+IHsKICAgIC8vICAgaWYgKGwubGVuZ3RoID4gMTApIHsKICAgIC8vICAgICBsZXQgc3BsaXRMaW5lID0gbC5zcGxpdCgnICcpOwogICAgLy8gICAgIGxldCBwYXJzZWRMaW5lID0gW107CiAgICAvLyAgICAgc3BsaXRMaW5lLm1hcCgocykgPT4gewogICAgLy8gICAgICAgaWYgKHMgJiYgcy5sZW5ndGggPiAyKSB7CiAgICAvLyAgICAgICAgIHBhcnNlZExpbmUucHVzaChzKTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgICB9KQogICAgLy8gICAgIHBhcnNlZExpbmVzLnB1c2gocGFyc2VkTGluZSk7CiAgICAvLyAgIH0KICAgIC8vIH0pCiAgICAvLyAgIGlmIChwYXJzZWRMaW5lcy5sZW5ndGggPiAxMDApIHsKICAgIC8vICAgICB2bS5ydWxlc1swXS5kYXRhID0gcGFyc2VkTGluZXMKICAgIC8vICAgICAgIC5zcGxpY2UoMCwgNTApCiAgICAvLyAgICAgICAuY29uY2F0KHBhcnNlZExpbmVzLnNwbGljZSgtNTApKTsKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICB2bS5ydWxlc1swXS5kYXRhID0gcGFyc2VkTGluZXM7CiAgICAvLyAgIH0KICAgIH0sCiAgICBjb252ZXJ0WE1MKHhtbCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBsZXQgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpOwogICAgICBsZXQgeG1sRG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyh4bWwsICJ0ZXh0L3htbCIpOwogICAgICBsZXQgeG1sQXJyID0geG1sRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJSb3ciKTsKICAgICAgbGV0IG5ld1hNTEFyciA9IFsuLi54bWxBcnJdOwogICAgICBsZXQgY3VzdG9tZXJMaXN0ID0gW107CiAgICAgIG5ld1hNTEFyci5tYXAoZSA9PiB7CiAgICAgICAgbGV0IGN1c3RvbWVyID0ge307CiAgICAgICAgbGV0IHRlc3QgPSBbLi4uZS5hdHRyaWJ1dGVzXTsKICAgICAgICB0ZXN0Lm1hcChmID0+IHsKICAgICAgICAgIGxldCBoZWFkZXIgPSBmLm5hbWU7CiAgICAgICAgICBsZXQgdmFsdWUgPSBmLm5vZGVWYWx1ZTsKICAgICAgICAgIGN1c3RvbWVyW2hlYWRlcl0gPSB2YWx1ZTsKICAgICAgICB9KTsKICAgICAgICBjdXN0b21lckxpc3QucHVzaChjdXN0b21lcik7CiAgICAgIH0pOwogICAgICBsZXQgY3N2VmVyc2lvbiA9IFBhcGEudW5wYXJzZShjdXN0b21lckxpc3QpOwogICAgICBsZXQganNvblZlcnNpb24gPSBQYXBhLnBhcnNlKGNzdlZlcnNpb24pOwogICAgICBqc29uVmVyc2lvbiA9IGpzb25WZXJzaW9uLmRhdGE7CiAgICAgIGlmIChqc29uVmVyc2lvbi5sZW5ndGggPiAyMCkgewogICAgICAgIHZtLnJ1bGVzWzBdLmRhdGEgPSBqc29uVmVyc2lvbgogICAgICAgICAgLnNwbGljZSgwLCAxMSkKICAgICAgICAgIC5jb25jYXQoanNvblZlcnNpb24uc3BsaWNlKC0xMCkpOwogICAgICB9IGVsc2UgewogICAgICAgIHZtLnJ1bGVzWzBdLmRhdGEgPSBqc29uVmVyc2lvbjsKICAgICAgfQogICAgfSwKICAgIGFkZFJ1bGUoaW5kZXgpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgdm0ucnVsZXMuc3BsaWNlKCBpbmRleCsxLCAwLCB7CiAgICAgICAgZGF0YTogW10sCiAgICAgICAgb3B0aW9uOiAiIiwKICAgICAgICBpbnB1dDoge30KICAgICAgfSk7CiAgICB9LAogICAgYWRkQ3VzdG9tZXJSdWxlKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICB2bS5ydWxlcy5wdXNoKHsKICAgICAgICBydWxlOiB2bS5ydWxlcy5sZW5ndGggKyAxLAogICAgICAgIGNoZWNrOiAiY3VzdG9tZXJDcmVhdGUiLAogICAgICAgIGRhdGE6IFtdLAogICAgICAgIG9wdGlvbjogInByb2Nlc3NDdXN0b21lcnMiLAogICAgICAgIGlucHV0OiB7fQogICAgICB9KTsKICAgIH0sCiAgICByZW1vdmVSdWxlKGluZGV4KSB7CiAgICAgIHRoaXMucnVsZXMuc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICBjaGFuZ2VMb2NhdGlvbihpbmRleCwgbG9jYXRpb25EYXRhKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmICh2bS5ydWxlc1tpbmRleF0uaW5wdXQubG9jYXRpb24gIT0gbG9jYXRpb25EYXRhKSB7CiAgICAgICAgdm0ucnVsZXNbaW5kZXhdLmlucHV0LmxvY2F0aW9uID0gbG9jYXRpb25EYXRhOwogICAgICAgIGlmKGxvY2F0aW9uRGF0YSAmJiBsb2NhdGlvbkRhdGEucXNFbmFibGVkKSB7CiAgICAgICAgICBBdXRvbWF0aW9uU2VydmljZS5nZXRBdXRvbWF0aW9uc0J5TG9jYXRpb24obG9jYXRpb25EYXRhLnZhbHVlKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgbGV0IHFTZWxlY3QgPSBbXTsKICAgICAgICAgICAgcmVzcG9uc2UucmVzdWx0Lm1hcChhdXRvID0+IHsKICAgICAgICAgICAgICBxU2VsZWN0LnB1c2goYXV0by5pZGVudGlmaWVyKQogICAgICAgICAgICB9KQogICAgICAgICAgICB2bS5xU2VsZWN0aW9uID0gcVNlbGVjdDsKICAgICAgICAgIH0pCiAgICAgICAgICAvLyBMb2NhdGlvblNlcnZpY2UuZ2V0TG9jYXRpb24obG9jYXRpb25EYXRhLnZhbHVlKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgLy8gbGV0IHRvdGFsUXMgPSByZXNwb25zZS5xdWVzdGlvbgogICAgICAgICAgICAvLyBsZXQgYXV0b21hdGlvbnMgPSByZXNwb25zZS5hdXRvbWF0aW9uczsKICAgICAgICAgICAgLy8gYXV0b21hdGlvbnMubWFwKGF1dG8gPT4gewogICAgICAgICAgICAgIC8vICAgdm0ucVNlbGVjdGlvbi5wdXNoKGF1dG9tYXRpb24uaWRlbnRpZmllcikKICAgICAgICAgICAgLy8gfSkKICAgICAgICAgIC8vIH0pCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgY2hhbmdlRmlsdGVyKGluZGV4LCBvcHRpb24sIGlucHV0KSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGxldCBwcmV2aW91c0RhdGE7CiAgICAgIGlmICgKICAgICAgICB2bS5ydWxlc1tpbmRleCAtIDFdLmNoZWNrICYmCiAgICAgICAgdm0ucnVsZXNbaW5kZXggLSAxXS5jaGVjayA9PSAiY3VzdG9tZXJDcmVhdGUiCiAgICAgICkgewogICAgICAgIHByZXZpb3VzRGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodm0ucnVsZXNbMF0uZGF0YSkpOwogICAgICB9IGVsc2UgewogICAgICAgIHByZXZpb3VzRGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodm0ucnVsZXNbaW5kZXggLSAxXS5kYXRhKSk7CiAgICAgIH0KICAgICAgLy8gY29uc29sZS5sb2coLi4uYXJndW1lbnRzKTsKICAgICAgc3dpdGNoIChvcHRpb24pIHsKICAgICAgICBjYXNlICJyb3dCeVZhbCI6CiAgICAgICAgICBpZiAoaW5wdXQgJiYgaW5wdXQudmFsdWUxICYmIGlucHV0LnR5cGUgJiYgaW5wdXQudmFsdWUyKSB7CiAgICAgICAgICAgIGlmIChpbnB1dC50eXBlID09ICJjb25UZXJtIikgewogICAgICAgICAgICAgIHZtLnJ1bGVzW2luZGV4XS5kYXRhID0gcHJldmlvdXNEYXRhLmZpbHRlcihlID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiBlW2lucHV0LnZhbHVlMV0KICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKCkKICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKHR5cGVvZiBpbnB1dC52YWx1ZTIgPT0gJ3N0cmluZycgPyBpbnB1dC52YWx1ZTIudG9Mb3dlckNhc2UoKSA6IGlucHV0LnZhbHVlMik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQudHlwZSA9PSAibm9Db25UZXJtIikgewogICAgICAgICAgICAgIDA7CiAgICAgICAgICAgICAgdm0ucnVsZXNbaW5kZXhdLmRhdGEgPSBwcmV2aW91c0RhdGEuZmlsdGVyKGUgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuICFlW2lucHV0LnZhbHVlMV0KICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKCkKICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKHR5cGVvZiBpbnB1dC52YWx1ZTIgPT0gJ3N0cmluZycgPyBpbnB1dC52YWx1ZTIudG9Mb3dlckNhc2UoKSA6IGlucHV0LnZhbHVlMik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQgJiYgaW5wdXQudmFsdWUxICYmIGlucHV0LnR5cGUpIHsKICAgICAgICAgICAgaWYgKGlucHV0LnR5cGUgPT0gImhhc1ZhbCIpIHsKICAgICAgICAgICAgICB2bS5ydWxlc1tpbmRleF0uZGF0YSA9IHByZXZpb3VzRGF0YS5maWx0ZXIoZSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gZVtpbnB1dC52YWx1ZTFdOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0LnR5cGUgPT0gImlzV29yZCIpIHsKICAgICAgICAgICAgICB2bS5ydWxlc1tpbmRleF0uZGF0YSA9IHByZXZpb3VzRGF0YS5maWx0ZXIoZSA9PiB7CiAgICAgICAgICAgICAgICAvLyBOZWVkcyBtb3JlIHdvcmsgdG8gZGV0ZXJtaW5lIGlmIHN0cmluZyBvciBub3QuCiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICBlW2lucHV0LnZhbHVlMV0gJiYKICAgICAgICAgICAgICAgICAgdHlwZW9mIGVbaW5wdXQudmFsdWUxXSA9PSAic3RyaW5nIiAmJgogICAgICAgICAgICAgICAgICBlW2lucHV0LnZhbHVlMV0udHJpbSgpLmluZGV4T2YoIiAiKSA9PSAtMQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dC50eXBlID09ICJpc051bSIpIHsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwcmV2aW91c0RhdGEpOwogICAgICAgICAgICAgIHZtLnJ1bGVzW2luZGV4XS5kYXRhID0gcHJldmlvdXNEYXRhLmZpbHRlcihlID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludChlW2lucHV0LnZhbHVlMV0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2bS5ydWxlc1tpbmRleF0uZGF0YSA9IHByZXZpb3VzRGF0YTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJyb3dCeUxlbiI6CiAgICAgICAgICBpZiAoaW5wdXQgJiYgaW5wdXQudmFsdWUpIHsKICAgICAgICAgICAgdm0ucnVsZXNbaW5kZXhdLmRhdGEgPSBwcmV2aW91c0RhdGEuZmlsdGVyKGUgPT4gewogICAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZS5sZW5ndGggPT0gaW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZtLnJ1bGVzW2luZGV4XS5kYXRhID0gcHJldmlvdXNEYXRhOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgInJvd0J5VmFsTGVuIjoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJyb3dCeUNvbExlbiI6CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAicm93UmFuZ2UiOgogICAgICAgICAgaWYgKGlucHV0ICYmIGlucHV0LnR5cGUpIHsKICAgICAgICAgICAgaWYgKGlucHV0LnR5cGUgPT0gInJlbW92ZSIpIHsKICAgICAgICAgICAgICBpZiAoaW5wdXQudmFsdWUxICYmIGlucHV0LnZhbHVlMikgewogICAgICAgICAgICAgICAgbGV0IG5ld1ZhbHVlcyA9IHByZXZpb3VzRGF0YS5zbGljZSgKICAgICAgICAgICAgICAgICAgaW5wdXQudmFsdWUxLAogICAgICAgICAgICAgICAgICB2bS5ydWxlc1tpbmRleCAtIDFdLmRhdGEubGVuZ3RoIC0gaW5wdXQudmFsdWUyCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgdm0ucnVsZXNbaW5kZXhdLmRhdGEgPSBuZXdWYWx1ZXM7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0LnR5cGUgPT0gImZpeCIpIHsKICAgICAgICAgICAgICBpZiAoaW5wdXQudmFsdWUxICYmIGlucHV0LnZhbHVlMikgewogICAgICAgICAgICAgICAgbGV0IG5ld1ZhbHVlcyA9IHByZXZpb3VzRGF0YS5zbGljZSgKICAgICAgICAgICAgICAgICAgaW5wdXQudmFsdWUxLAogICAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZTIgLSBpbnB1dC52YWx1ZTEgKyAxCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgdm0ucnVsZXNbaW5kZXhdLmRhdGEgPSBuZXdWYWx1ZXM7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2bS5ydWxlc1tpbmRleF0uZGF0YSA9IHByZXZpb3VzRGF0YTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJjb2xSYW5nZSI6CiAgICAgICAgICBpZiAoaW5wdXQgJiYgaW5wdXQudHlwZSkgewogICAgICAgICAgICBpZiAoaW5wdXQudHlwZSA9PSAicmVtb3ZlIikgewogICAgICAgICAgICAgIGlmIChpbnB1dC52YWx1ZTEgJiYgaW5wdXQudmFsdWUyKSB7CiAgICAgICAgICAgICAgICBsZXQgbmV3VmFsdWVzID0gW107CiAgICAgICAgICAgICAgICB2bS5ydWxlc1tpbmRleCAtIDFdLmRhdGEubWFwKGUgPT4gewogICAgICAgICAgICAgICAgICBuZXdWYWx1ZXMucHVzaCgKICAgICAgICAgICAgICAgICAgICBlLnNsaWNlKGlucHV0LnZhbHVlMSwgZS5sZW5ndGggLSBpbnB1dC52YWx1ZTIpCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHZtLnJ1bGVzW2luZGV4XS5kYXRhID0gbmV3VmFsdWVzOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dC50eXBlID09ICJmaXgiKSB7CiAgICAgICAgICAgICAgaWYgKGlucHV0LnZhbHVlMSAmJiBpbnB1dC52YWx1ZTIpIHsKICAgICAgICAgICAgICAgIGxldCBuZXdWYWx1ZXMgPSBbXTsKICAgICAgICAgICAgICAgIHZtLnJ1bGVzW2luZGV4IC0gMV0uZGF0YS5tYXAoZSA9PiB7CiAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlcy5wdXNoKGUuc2xpY2UoaW5wdXQudmFsdWUxLCBpbnB1dC52YWx1ZTIpKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdm0ucnVsZXNbaW5kZXhdLmRhdGEgPSBuZXdWYWx1ZXM7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2bS5ydWxlc1tpbmRleF0uZGF0YSA9IHByZXZpb3VzRGF0YTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJyZW1Db2wiOgogICAgICAgICAgaWYgKAogICAgICAgICAgICBpbnB1dCAmJgogICAgICAgICAgICAoaW5wdXQudmFsdWUxIHx8CiAgICAgICAgICAgICAgaW5wdXQudmFsdWUyIHx8CiAgICAgICAgICAgICAgaW5wdXQudmFsdWUzIHx8CiAgICAgICAgICAgICAgaW5wdXQudmFsdWU0IHx8CiAgICAgICAgICAgICAgaW5wdXQudmFsdWU1KQogICAgICAgICAgKSB7CiAgICAgICAgICAgIGxldCBuZXdWYWx1ZXMgPSB2bS5ydWxlc1tpbmRleCAtIDFdLmRhdGE7CiAgICAgICAgICAgIGxldCBpbnB1dEtleXMgPSBPYmplY3Qua2V5cyhpbnB1dCk7CiAgICAgICAgICAgIGlucHV0S2V5cy5tYXAoKGlucHV0VmFsLCBnKSA9PiB7CiAgICAgICAgICAgICAgbmV3VmFsdWVzID0gbmV3VmFsdWVzLm1hcCgoZSwgaSkgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIGUuZmlsdGVyKCh4LCBqKSA9PiB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBqICE9IHBhcnNlSW50KGlucHV0W2lucHV0VmFsXSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZtLnJ1bGVzW2luZGV4XS5kYXRhID0gbmV3VmFsdWVzOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdm0ucnVsZXNbaW5kZXhdLmRhdGEgPSBwcmV2aW91c0RhdGE7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAicmVtUm93IjoKICAgICAgICAgIGlmICgKICAgICAgICAgICAgaW5wdXQgJiYKICAgICAgICAgICAgKGlucHV0LnZhbHVlMSB8fAogICAgICAgICAgICAgIGlucHV0LnZhbHVlMiB8fAogICAgICAgICAgICAgIGlucHV0LnZhbHVlMyB8fAogICAgICAgICAgICAgIGlucHV0LnZhbHVlNCB8fAogICAgICAgICAgICAgIGlucHV0LnZhbHVlNSkKICAgICAgICAgICkgewogICAgICAgICAgICBsZXQgbmV3RGF0YSA9IHByZXZpb3VzRGF0YTsKICAgICAgICAgICAgbGV0IGlucHV0S2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTsKICAgICAgICAgICAgaW5wdXRLZXlzLm1hcChpbnB1dFZhbCA9PiB7CiAgICAgICAgICAgICAgbmV3RGF0YSA9IG5ld0RhdGEuZmlsdGVyKChlLCBpKSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gaSAhPSBwYXJzZUludChpbnB1dFtpbnB1dFZhbF0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdm0ucnVsZXNbaW5kZXhdLmRhdGEgPSBuZXdEYXRhOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdm0ucnVsZXNbaW5kZXhdLmRhdGEgPSBwcmV2aW91c0RhdGE7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiZXhwbG9kZUNvbCI6CiAgICAgICAgICBpZiAoaW5wdXQgJiYgaW5wdXQudHlwZSAmJiBpbnB1dC52YWx1ZSkgewogICAgICAgICAgICBsZXQgY29sTGVuZ3RocyA9IFtdOwogICAgICAgICAgICB2bS5ydWxlc1tpbmRleCAtIDFdLmRhdGEubWFwKGUgPT4gewogICAgICAgICAgICAgIGlmKGVbaW5wdXQudHlwZV0pIHsKICAgICAgICAgICAgICAgIGNvbExlbmd0aHMucHVzaChlW2lucHV0LnR5cGVdLnNwbGl0KGlucHV0LnZhbHVlKS5sZW5ndGgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGxldCBuZXdDb2xOdW0gPSBNYXRoLm1heCguLi5jb2xMZW5ndGhzKTsKICAgICAgICAgICAgbGV0IG5ld1ZhbHVlcyA9IHByZXZpb3VzRGF0YTsKICAgICAgICAgICAgbmV3VmFsdWVzLm1hcChlID0+IHsKICAgICAgICAgICAgICBpZihlW2lucHV0LnR5cGVdKSB7CiAgICAgICAgICAgICAgICBsZXQgbmV3Q29sdW1ucyA9IGVbaW5wdXQudHlwZV0uc3BsaXQoaW5wdXQudmFsdWUpOwogICAgICAgICAgICAgICAgaWYgKG5ld0NvbHVtbnMubGVuZ3RoICE9IG5ld0NvbE51bSkgewogICAgICAgICAgICAgICAgICBuZXdDb2x1bW5zLmxlbmd0aCA9IG5ld0NvbE51bTsKICAgICAgICAgICAgICAgICAgbmV3Q29sdW1ucy5maWxsKDAsIG5ld0NvbHVtbnMubGVuZ3RoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGUuc3BsaWNlKGlucHV0LnR5cGUsIDEsIC4uLm5ld0NvbHVtbnMpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZtLnJ1bGVzW2luZGV4XS5kYXRhID0gbmV3VmFsdWVzOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdm0ucnVsZXNbaW5kZXhdLmRhdGEgPSB2bS5ydWxlc1tpbmRleCAtIDFdLmRhdGE7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAibWVyZ2VDb2wiOgogICAgICAgICAgaWYgKGlucHV0ICYmIGlucHV0LnZhbHVlMSAmJiBpbnB1dC52YWx1ZTIpIHsKICAgICAgICAgICAgbGV0IGlucHV0MSA9IHBhcnNlSW50KGlucHV0LnZhbHVlMSk7CiAgICAgICAgICAgIGxldCBpbnB1dDIgPSBwYXJzZUludChpbnB1dC52YWx1ZTIpOwogICAgICAgICAgICBsZXQgbmV3QXJyYXkgPSBbXTsKICAgICAgICAgICAgbGV0IG5ld1ZhbHVlcyA9IHByZXZpb3VzRGF0YTsKICAgICAgICAgICAgbmV3VmFsdWVzLm1hcCh4ID0+IHsKICAgICAgICAgICAgICBsZXQgbmV3SXRlbSA9IHgKICAgICAgICAgICAgICAgIC5zbGljZShpbnB1dDEsIGlucHV0MiArIDEpCiAgICAgICAgICAgICAgICAuam9pbigpCiAgICAgICAgICAgICAgICAucmVwbGFjZSgiLCIsICIsICIpOwogICAgICAgICAgICAgIHguc3BsaWNlKGlucHV0MSwgaW5wdXQyICsgMSAtIGlucHV0MSwgbmV3SXRlbSk7CiAgICAgICAgICAgICAgbmV3QXJyYXkucHVzaCh4KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZtLnJ1bGVzW2luZGV4XS5kYXRhID0gbmV3QXJyYXk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2bS5ydWxlc1tpbmRleF0uZGF0YSA9IHZtLnJ1bGVzW2luZGV4IC0gMV0uZGF0YTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJzZWFyY2hSZXBsYWNlIjoKICAgICAgICAgIGlmIChpbnB1dCAmJiBpbnB1dC52YWx1ZTEgJiYgaW5wdXQudmFsdWUyKSB7CiAgICAgICAgICAgIGxldCBpbnB1dDEgPSBwYXJzZUludChpbnB1dC52YWx1ZTEpOwogICAgICAgICAgICBpZiAoIWlucHV0LnZhbHVlMykgaW5wdXQudmFsdWUzID0gIiI7CiAgICAgICAgICAgIGxldCBuZXdWYWx1ZXMgPSBwcmV2aW91c0RhdGE7CiAgICAgICAgICAgIG5ld1ZhbHVlcy5tYXAoZSA9PiB7CiAgICAgICAgICAgICAgZVtpbnB1dDFdID0gZVtpbnB1dDFdCiAgICAgICAgICAgICAgICAudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgLnJlcGxhY2UoaW5wdXQudmFsdWUyLCBpbnB1dC52YWx1ZTMpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdm0ucnVsZXNbaW5kZXhdLmRhdGEgPSBuZXdWYWx1ZXM7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2bS5ydWxlc1tpbmRleF0uZGF0YSA9IHZtLnJ1bGVzW2luZGV4IC0gMV0uZGF0YTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJmb3JtRGF0ZXMiOgogICAgICAgICAgaWYgKGlucHV0ICYmIGlucHV0LnZhbHVlMSAmJiBpbnB1dC52YWx1ZTIpIHsKICAgICAgICAgICAgYWxlcnQoCiAgICAgICAgICAgICAgIkNhbid0IGRvIHRoaXMgb3BlcmF0aW9uIGF0IHRoaXMgdGltZSB1bnRpbCB3ZSBzdGFuZGFyZGl6ZSB3aGF0IGRhdGVzIHdlIHdhbnQgY29taW5nIGluLCBpZiB3ZSBkbyB3YW50IHRvIGNhcHR1cmUgdGhhdCBkYXRhLiIKICAgICAgICAgICAgKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZtLnJ1bGVzW2luZGV4XS5kYXRhID0gdm0ucnVsZXNbaW5kZXggLSAxXS5kYXRhOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgInByb2Nlc3NDdXN0b21lcnMiOgogICAgICAgICAgaWYgKGlucHV0LmVtYWlsIHx8IGlucHV0LnBob25lKSB7CiAgICAgICAgICAgIGxldCBkYXRhID0gcHJldmlvdXNEYXRhOwogICAgICAgICAgICBsZXQgY3VzdG9tZXJMaXN0ID0gW107CiAgICAgICAgICAgIGRhdGEubWFwKGN1c3RvbWVyID0+IHsKICAgICAgICAgICAgICBsZXQgbmV3Q3VzdG9tZXIgPSB7CiAgICAgICAgICAgICAgICBmaXJzdG5hbWU6IGlucHV0LmZpcnN0bmFtZSA/IGN1c3RvbWVyW2lucHV0LmZpcnN0bmFtZV0gOiAiIiwKICAgICAgICAgICAgICAgIGxhc3RuYW1lOiBpbnB1dC5sYXN0bmFtZSA/IGN1c3RvbWVyW2lucHV0Lmxhc3RuYW1lXSA6ICIiLAogICAgICAgICAgICAgICAgZW1haWw6IGlucHV0LmVtYWlsID8gY3VzdG9tZXJbaW5wdXQuZW1haWxdIDogIiIsCiAgICAgICAgICAgICAgICBwaG9uZTogaW5wdXQucGhvbmUgPyBjdXN0b21lcltpbnB1dC5waG9uZV0gOiAiIiwKICAgICAgICAgICAgICAgIG5vdGVzOiBpbnB1dC5ub3RlcyA/IGN1c3RvbWVyW2lucHV0Lm5vdGVzXSA6ICIiCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBpZihpbnB1dC5ub3RlcyA9PSAnQ3VzdG9tJykgewogICAgICAgICAgICAgICAgbmV3Q3VzdG9tZXIubm90ZXMgPSBpbnB1dC5jdXN0b21Ob3RlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjdXN0b21lckxpc3QucHVzaChuZXdDdXN0b21lcik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2bS5ydWxlc1tpbmRleF0uZGF0YSA9IGN1c3RvbWVyTGlzdDsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgaWYgKGlucHV0ICYmIGlucHV0LnZhbHVlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGlucHV0LnZhbHVlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZtLnJ1bGVzW2luZGV4XS5kYXRhID0gdm0ucnVsZXNbaW5kZXggLSAxXS5kYXRhOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChpbmRleCAhPSB2bS5ydWxlcy5sZW5ndGggLSAxKSB7CiAgICAgICAgdm0ucnVsZXMubWFwKChlLCBpKSA9PiB7CiAgICAgICAgICBpZiAoaSA+IGluZGV4KSB7CiAgICAgICAgICAgIHZtLmNoYW5nZUZpbHRlcihpLCBlLm9wdGlvbiwgZS5pbnB1dCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBtYXBEYXRhKCkgewogICAgICB0aGlzLmNzdkRhdGEubWFwKChlLCBpKSA9PiB7CiAgICAgICAgZS5tYXAoKGgsIGopID0+IHsKICAgICAgICAgIGggPSBoLnRyaW0oKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgYWRkTWFudWFsRmlsZShldmVudCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICAvLyBFdmVudFNlcnZpY2UuJGVtaXQoImxvYWRpbmciLCAic2hvdyIpOwogICAgICBpZiAoZXZlbnQudGFyZ2V0LmZpbGVzWzBdKSB7CiAgICAgICAgdm0uZmlsZUV4aXN0cyA9IHRydWU7CiAgICAgICAgbGV0IGV4YW1wbGVGaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdOwogICAgICAgIGxldCBmaWxlTmFtZSA9IGV4YW1wbGVGaWxlLm5hbWU7CiAgICAgICAgbGV0IGZpbGVUeXBlID0gZmlsZU5hbWUuc3Vic3RyKGZpbGVOYW1lLmluZGV4T2YoIi4iKSArIDEpOwogICAgICAgIGlmIChmaWxlVHlwZSA9PSAieGxzeCIgfHwgZmlsZVR5cGUgPT0gInhscyIpIHsKICAgICAgICAgIHZhciByQUJTID0gdHJ1ZTsKICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIGRhdGEgPSBlLnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICAgIGlmICghckFCUykgZGF0YSA9IG5ldyBVaW50OEFycmF5KGRhdGEpOwogICAgICAgICAgICB2YXIgd29ya2Jvb2sgPSBYTFNYLnJlYWQoZGF0YSwgeyB0eXBlOiByQUJTID8gImJpbmFyeSIgOiAiYXJyYXkiIH0pOwogICAgICAgICAgICBsZXQgcHJvY2Vzc2VkWExTID0gWExTWC51dGlscy5zaGVldF90b19qc29uKAogICAgICAgICAgICAgIHdvcmtib29rLlNoZWV0c1t3b3JrYm9vay5TaGVldE5hbWVzWzBdXSwKICAgICAgICAgICAgICB7IGhlYWRlcjogMSB9CiAgICAgICAgICAgICkuZmlsdGVyKHJvdyA9PiB7CiAgICAgICAgICAgIHJldHVybiByb3cubGVuZ3RoID4gMDsKICAgICAgICAgIH0pOzsKICAgICAgICAgICAgbGV0IG1heFNpemUgPSAwOwogICAgICAgICAgICBwcm9jZXNzZWRYTFMubWFwKGUgPT4gewogICAgICAgICAgICAgIGlmKGUubGVuZ3RoID4gbWF4U2l6ZSkgbWF4U2l6ZSA9IGUubGVuZ3RoOwogICAgICAgICAgICB9KQogICAgICAgICAgICBsZXQgZGlmZiA9IG1heFNpemUgLSBwcm9jZXNzZWRYTFNbMF0ubGVuZ3RoOwogICAgICAgICAgICB3aGlsZSAoZGlmZiA+IDApIHsKICAgICAgICAgICAgICBwcm9jZXNzZWRYTFNbMF0ucHVzaCgnLScpOwogICAgICAgICAgICAgIGRpZmYgPSBtYXhTaXplIC0gcHJvY2Vzc2VkWExTWzBdLmxlbmd0aDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocHJvY2Vzc2VkWExTLmxlbmd0aCA+IDIwKSB7CiAgICAgICAgICAgICAgdm0ucnVsZXNbMF0uZGF0YSA9IHByb2Nlc3NlZFhMUwogICAgICAgICAgICAgICAgLnNwbGljZSgwLCAxMSkKICAgICAgICAgICAgICAgIC5jb25jYXQocHJvY2Vzc2VkWExTLnNwbGljZSgtMTApKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2bS5ydWxlc1swXS5kYXRhID0gcHJvY2Vzc2VkWExTOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgaWYgKHJBQlMpIHJlYWRlci5yZWFkQXNCaW5hcnlTdHJpbmcoZXhhbXBsZUZpbGUpOwogICAgICAgICAgZWxzZSByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZXhhbXBsZUZpbGUpOwogICAgICAgIH0gZWxzZSBpZiAoZmlsZVR5cGUgPT0gImNzdiIpIHsKICAgICAgICAgIGxldCBwcm9jZXNzZWRDU1Y7CiAgICAgICAgICBQYXBhLnBhcnNlKGV4YW1wbGVGaWxlLCB7CiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbihyZXN1bHRzKSB7CiAgICAgICAgICAgICAgcHJvY2Vzc2VkQ1NWID0gcmVzdWx0cy5kYXRhOwogICAgICAgICAgICAgIGlmIChwcm9jZXNzZWRDU1YubGVuZ3RoID4gMjApIHsKICAgICAgICAgICAgICAgIHZtLnJ1bGVzWzBdLmRhdGEgPSBwcm9jZXNzZWRDU1YKICAgICAgICAgICAgICAgICAgLnNwbGljZSgwLCAxMSkKICAgICAgICAgICAgICAgICAgLmNvbmNhdChwcm9jZXNzZWRDU1Yuc3BsaWNlKC0xMCkpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2bS5ydWxlc1swXS5kYXRhID0gcHJvY2Vzc2VkQ1NWOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChmaWxlVHlwZSA9PSAieG1sIikgewogICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgZGF0YSA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgICAgdm0uY29udmVydE1hbnVhbFhNTChkYXRhKTsKICAgICAgICAgIH07CiAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChleGFtcGxlRmlsZSk7CiAgICAgICAgfSBlbHNlIGlmIChmaWxlVHlwZSA9PSAidHh0IikgewogICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgZGF0YSA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgICAgbGV0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTsKICAgICAgICAgICAgbGV0IG5ld0RvYyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoSlNPTi5wYXJzZShkYXRhKSwgInRleHQvaHRtbCIpOwogICAgICAgICAgICBsZXQgdGVzdCA9IG5ld0RvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgidHIiKTsKICAgICAgICAgICAgbGV0IG5ld0FyciA9IFsuLi50ZXN0XTsKICAgICAgICAgICAgbGV0IGN1c3RvbWVyTGlzdCA9IFtdOwogICAgICAgICAgICBsZXQgaGVhZGVyQXJyID0gW107CiAgICAgICAgICAgIG5ld0Fyci5tYXAoZyA9PiB7CiAgICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBnLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0aCIpOwogICAgICAgICAgICAgIGlmIChoZWFkZXJzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGhlYWRlckFyci5wdXNoKFsuLi5oZWFkZXJzXSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbGV0IGhlYWRlcnNMaXN0ID0gW107CiAgICAgICAgICAgIGhlYWRlckFyci5tYXAoaCA9PiB7CiAgICAgICAgICAgICAgaC5tYXAoZyA9PiB7CiAgICAgICAgICAgICAgICBoZWFkZXJzTGlzdC5wdXNoKGcuaW5uZXJIVE1MKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGxldCBuZXh0QXJyID0gW107CiAgICAgICAgICAgIG5ld0Fyci5tYXAoZSA9PiB7CiAgICAgICAgICAgICAgbGV0IHRlc3RpbmcgPSBlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpOwogICAgICAgICAgICAgIGxldCBjdXN0b21lciA9IHt9OwogICAgICAgICAgICAgIGxldCBuZXh0QXJyYXkgPSBbLi4udGVzdGluZ107CiAgICAgICAgICAgICAgbmV4dEFycmF5Lm1hcCgoZiwgaSkgPT4gewogICAgICAgICAgICAgICAgbGV0IGhlYWRlciA9IGhlYWRlcnNMaXN0W2ldOwogICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gZi50ZXh0Q29udGVudDsKICAgICAgICAgICAgICAgIGN1c3RvbWVyW2hlYWRlcl0gPSB2YWx1ZTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoY3VzdG9tZXIpLmxlbmd0aCA+IDMpIHsKICAgICAgICAgICAgICAgIGN1c3RvbWVyTGlzdC5wdXNoKGN1c3RvbWVyKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBsZXQgY3N2VmVyc2lvbiA9IFBhcGEudW5wYXJzZShjdXN0b21lckxpc3QpOwogICAgICAgICAgICBsZXQganNvblZlcnNpb24gPSBQYXBhLnBhcnNlKGNzdlZlcnNpb24pOwogICAgICAgICAgICBqc29uVmVyc2lvbiA9IGpzb25WZXJzaW9uLmRhdGE7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGpzb25WZXJzaW9uKTsKICAgICAgICAgICAgaWYgKGpzb25WZXJzaW9uLmxlbmd0aCA+IDEwMCkgewogICAgICAgICAgICAgIHZtLnJ1bGVzWzBdLmRhdGEgPSBqc29uVmVyc2lvbgogICAgICAgICAgICAgICAgLnNwbGljZSgwLCA1MCkKICAgICAgICAgICAgICAgIC5jb25jYXQoanNvblZlcnNpb24uc3BsaWNlKC01MCkpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZtLnJ1bGVzWzBdLmRhdGEgPSBqc29uVmVyc2lvbjsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGV4YW1wbGVGaWxlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coIkVycm9yLCB0aGlzIGhhcyBiZWVuIHJlamVjdGVkIGZvciBpbmNvcnJlY3QgZmlsZSB0eXBlLiIpOwogICAgICAgIH0KICAgICAgICBpZih2bS5ydWxlcyAmJiB2bS5ydWxlcy5sZW5ndGggPiAxKSB7CiAgICAgICAgICB2bS5ydWxlcy5tYXAoKHJ1bGUsIGkpID0+IHsKICAgICAgICAgICAgaWYoaSA+IDApIHsKICAgICAgICAgICAgICBydWxlLmRhdGEubWFwKGRhdGFzZXQgPT4gewogICAgICAgICAgICAgICAgaWYoZGF0YXNldCAmJiBkYXRhc2V0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgdm0uY2hhbmdlRmlsdGVyKGksIHJ1bGUub3B0aW9uLCBydWxlLmlucHV0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGNvbnZlcnRNYW51YWxYTUwoeG1sKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGxldCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7CiAgICAgIGxldCB4bWxEb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHhtbCwgInRleHQveG1sIik7CiAgICAgIGxldCB4bWxBcnIgPSB4bWxEb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIlJvdyIpOwogICAgICBsZXQgbmV3WE1MQXJyID0gWy4uLnhtbEFycl07CiAgICAgIGxldCBjdXN0b21lckxpc3QgPSBbXTsKICAgICAgbmV3WE1MQXJyLm1hcChlID0+IHsKICAgICAgICBsZXQgY3VzdG9tZXIgPSB7fTsKICAgICAgICBsZXQgdGVzdCA9IFsuLi5lLmF0dHJpYnV0ZXNdOwogICAgICAgIHRlc3QubWFwKGYgPT4gewogICAgICAgICAgbGV0IGhlYWRlciA9IGYubmFtZTsKICAgICAgICAgIGxldCB2YWx1ZSA9IGYubm9kZVZhbHVlOwogICAgICAgICAgY3VzdG9tZXJbaGVhZGVyXSA9IHZhbHVlOwogICAgICAgIH0pOwogICAgICAgIGN1c3RvbWVyTGlzdC5wdXNoKGN1c3RvbWVyKTsKICAgICAgfSk7CiAgICAgIGxldCBjc3ZWZXJzaW9uID0gUGFwYS51bnBhcnNlKGN1c3RvbWVyTGlzdCk7CiAgICAgIGxldCBqc29uVmVyc2lvbiA9IFBhcGEucGFyc2UoY3N2VmVyc2lvbik7CiAgICAgIGpzb25WZXJzaW9uID0ganNvblZlcnNpb24uZGF0YTsKICAgICAgaWYgKGpzb25WZXJzaW9uLmxlbmd0aCA+IDIwKSB7CiAgICAgICAgdm0ucnVsZXNbMF0uZGF0YSA9IGpzb25WZXJzaW9uCiAgICAgICAgICAuc3BsaWNlKDAsIDExKQogICAgICAgICAgLmNvbmNhdChqc29uVmVyc2lvbi5zcGxpY2UoLTEwKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdm0ucnVsZXNbMF0uZGF0YSA9IGpzb25WZXJzaW9uOwogICAgICB9CiAgICB9LAogICAgc2F2ZVJ1bGVzKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBsZXQgcnVsZUlkID0gbnVsbDsKICAgICAgaWYodGhpcy4kcm91dGUucGFyYW1zLnBhcnNlciAmJiAhdGhpcy4kcm91dGUucGFyYW1zLmFjdGlvbikgewogICAgICAgIHJ1bGVJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5wYXJzZXI7CiAgICAgIH0KICAgICAgbGV0IHBhcnNpbmdPYmplY3QgPSB7CiAgICAgICAgbmFtZTogdm0ucnVsZU5hbWUsCiAgICAgICAgdHJpZ2dlcjogdm0udHJpZ2dlciwKICAgICAgICBmaWxlVHlwZTogdm0ucGFyc2VGaWxlVHlwZSwKICAgICAgICBwYXJzZUZpbGVOYW1lOiB2bS5wYXJzZUZpbGVOYW1lLAogICAgICAgIHZhbHVlOiB2bS5maWxlTmFtZSwKICAgICAgICBydWxlczogdm0ucnVsZXMKICAgICAgfTsKICAgICAgbGV0IGNvbXBsZXRlTWFpbGJveCA9ICcnCiAgICAgIGlmKHZtLm1haWxib3guaW5jbHVkZXMoJ0BsaXZlbWFpbC5vcGluaWlvbi5jb20nKSB8fCB2bS5tYWlsYm94LmluY2x1ZGVzKCdAZGVtb21haWwub3Bpbmlpb24uY29tJykpIHsKICAgICAgICBjb21wbGV0ZU1haWxib3ggPSB2bS5tYWlsYm94OwogICAgICB9IGVsc2UgewogICAgICAgIGNvbXBsZXRlTWFpbGJveCA9CiAgICAgICAgdm0uZG9tYWluID09ICJhcHAiCiAgICAgICAgICA/IHZtLm1haWxib3ggKyAiQGxpdmVtYWlsLm9waW5paW9uLmNvbSIKICAgICAgICAgIDogdm0ubWFpbGJveCArICJAZGVtb21haWwub3Bpbmlpb24uY29tIjsKICAgICAgICB9CiAgICAgIFBhcnNpbmdTZXJ2aWNlLnNhdmVQYXJzaW5nUnVsZXMoY29tcGxldGVNYWlsYm94LCBwYXJzaW5nT2JqZWN0LCBydWxlSWQpLnRoZW4oCiAgICAgICAgcmVzcG9uc2UgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgKHZtLmNzdiA9IFtdKSwKICAgICAgICAgICAgKHZtLnhtbCA9IFtdKSwKICAgICAgICAgICAgKHZtLmZpbGVPcHRpb25zID0gWyJjc3YiLCAieG1sIiwgInhscyIsICJ4bHN4IiwgInR4dCJdKSwKICAgICAgICAgICAgKHZtLmluZGljYXRvcnMgPSBbInN1YmplY3QiLCAiZnJvbU5hbWUiLCAiYm9keSJdKSwKICAgICAgICAgICAgKHZtLmZpbGVOYW1lID0gIiIpLAogICAgICAgICAgICAodm0uZmlsZUV4aXN0cyA9IGZhbHNlKSwKICAgICAgICAgICAgKHZtLm5ld0ZpbGUgPSAiIiksCiAgICAgICAgICAgICh2bS50cmlnZ2VyID0gIiIpLAogICAgICAgICAgICAodm0ucGFyc2VGaWxlVHlwZSA9ICIiKSwKICAgICAgICAgICAgKHZtLm1haWxib3ggPSAiIiksCiAgICAgICAgICAgICh2bS5qc29uID0gIiIpLAogICAgICAgICAgICAodm0uZG9tYWluID0gIiIpLAogICAgICAgICAgICAodm0uYWN0aXZlTG9jYXRpb24gPSAiIiksCiAgICAgICAgICAgICh2bS5sb2NhdGlvbk9wdGlvbnMgPSBbXSksCiAgICAgICAgICAgICh2bS5ydWxlTmFtZSA9ICIiKSwKICAgICAgICAgICAgdm0uc2VsZWN0ZWRGaWxlID0gJycsCiAgICAgICAgICAgICh2bS5ydWxlcyA9IFt7IHJ1bGU6IDEsIGRhdGE6ICIiLCBvcHRpb246ICJpbnRpYWxEYXRhIiB9XSk7CiAgICAgICAgICAgIHZtLiRyb3V0ZXIucHVzaCgnL3BhcnNpbmdMaXN0JykKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["ParsingRules.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ParsingRules.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"parsing-container\">\n    <div class=\"parsing-description\">\n      <span><label>Parsing Rule Name: </label> <input type=\"text\" :class=\"{'duplicate': dupeName, 'duplicate': includesDash}\" v-model=\"ruleName\" @change=\"evalName()\"><span class=\"dupeMessage\" v-if=\"dupeName\">Name Already Exists</span><span class=\"dupeMessage\" v-if=\"includesDash\">Name Cannot Contain \"-\"</span></span>\n      <span><label>Parsing Mailbox: </label> <input type=\"text\" v-model=\"mailbox\"><span v-if=\"mailbox && mailbox.length > 0\">{{ domain == 'app' ? '@livemail.opiniion.com' : '@demomail.opiniion.com' }}</span></span><br>\n      <span>Rule fires when </span>\n      <select v-model=\"trigger\">\n        <option value=\"subject\">Subject</option>\n        <option value=\"fileType\">File Type</option>\n        <option value=\"body\">Body</option>\n      </select>\n      <span v-if=\"trigger == 'subject' || trigger == 'body'\"> includes: <input type=\"text\" v-model=\"fileName\"> <span v-if=\"trigger == 'body'\" > in the first 500 characters) </span>\n      </span>\n      <span v-if=\"trigger == 'fileType'\"> is:\n        <select v-model=\"parseFileType\">\n          <option v-for=\"file in fileOptions\">{{file}}</option>\n        </select>\n        with <input type=\"text\" v-model=\"parseFileName\" placeholder=\"Insert filename element\"> in the filename.\n      </span>\n    </div>\n    <div class=\"mail-select\" v-if=\"trigger\">\n      <button @click=\"displaySamples = true\">Select Email To Create Parsing Rule</button>\n      <div class=\"email-container\" v-for=\"mail in sampleEmails\" v-if=\"displaySamples\">\n        <div class=\"email-headers\">\n          <span>From: {{mail.email.from}}</span>\n          <span>Subject: {{mail.email.subject}}</span>\n          <span v-if=\"mail.email.attachments && mail.email.attachments.length > 0\">Attachments:</span>\n          <span class=\"body-link\" v-if=\"!mail.email.attachments || mail.email.attachments.length == 0\" @click=\"parseBody(mail.email.body.textashtml)\">Use Body</span>\n        </div>\n        <div class=\"attachments\" v-for=\"attachment in mail.email.attachments\" v-if=\"mail && mail.email.attachments\">\n          <span @click=\"addFile(attachment)\">- {{attachment.filename}} {{attachment.size}}</span>\n        </div>\n      </div>\n      <div style=\"margin-top:5px;margin-left:80px;\" v-if=\"!fileExists\">No Email Selected Yet</div>\n      <div class=\"upload-container\">\n        Upload Example File to Set Parsing Rules\n        <input ref=\"fileInput\" type=\"file\" accept=\"text/csv, .xml, .xls, .xlsx, .txt\" @change=\"addManualFile($event)\" />\n      </div>\n    </div>\n    <div v-if=\"fileExists && !displaySamples && selectedFile\">Parsing {{selectedFile.filename}}</div>\n    <div class=\"data-display\" v-for=\"(rule, i) in rules\" v-if=\"fileExists\">\n      <div class=\"filter-options\" v-if=\"i != 0\">\n        <span >\n          <label v-if=\"rule.check != 'customerCreate'\">Filter by</label>\n          <select v-model=\"rule.check\">\n            <option value=\"remsel\">Remove & Select</option>\n            <option value=\"spmetrans\">Split, Merge, & Transpose</option>\n            <option value=\"refine\">Refine Cell Values</option>\n            <option value=\"customerCreate\" hidden>CreateCustomers</option>\n          </select>\n          <select v-if=\"rule.check == 'remsel'\" v-model=\"rule.option\" @change=\"changeFilter(i, rule.option, rule.input)\">\n            <option value=\"rowByVal\">Filter Rows by Values</option>\n            <option value=\"rowByLen\">Filter Rows by Length</option>\n            <!-- <option value=\"rowByValLen\">Filter Rows by Value Length</option>\n            <option value=\"rowByColLen\">Filter Column by Value Length</option> -->\n            <option value=\"rowRange\">Set Row Range</option>\n            <option value=\"colRange\">Set Column Range</option>\n            <option value=\"remCol\">Remove Columns</option>\n            <option value=\"remRow\">Remove Rows</option>\n          </select>\n          <select v-if=\"rule.check == 'spmetrans'\" v-model=\"rule.option\" @change=\"changeFilter(i, rule.option, rule.input)\">\n            <option value=\"explodeCol\">Explode Columns</option>\n            <option value=\"mergeCol\">Merge Columns</option>\n          </select>\n          <select v-if=\"rule.check == 'refine'\" v-model=\"rule.option\" @change=\"changeFilter(i, rule.option, rule.input)\">\n            <option value=\"searchReplace\">Search & Replace</option>\n            <option value=\"formDates\">Format Dates</option>\n          </select>\n          <div class=\"save-container\" v-if=\"rule.check == 'customerCreate'\">\n            Input Example:\n            <div class=\"api-example\">\n              https://api.opiniion.com/_services/opiniion/customer\n              {\n                \"location\": <v-select class=\"v-select\" v-model=\"rule.activeLocation\" :options=\"locationOptions\" :on-change=\"changeLocation(i, rule.activeLocation)\" placeholder=\"Select Location\" >\n                  <span slot=\"no-options\">Sorry, no locations were found with that filter.</span>\n                </v-select>\n                <span v-if=\"rule.option && rule.input.locationId\">\"uid\": {{rule.input.locationId}},</span>\n                <span v-if=\"rule.option && rule.input.apiKey\">\"apiKey\": {{rule.input.apiKey}},</span>\n                \"firstname\":  <select v-model=\"rule.input.firstname\" @change=\"changeFilter(i, 'processCustomers', rule.input)\">\n                  <option v-for=\"option in maxColumn(rules[i-1].data, ['None'])\">{{option}}</option>\n                </select> ,\n                \"lastname\":  <select v-model=\"rule.input.lastname\" @change=\"changeFilter(i, 'processCustomers', rule.input)\">\n                  <option v-for=\"option in maxColumn(rules[i-1].data, ['None'])\">{{option}}</option>\n                </select> ,\n                \"email\":  <select v-model=\"rule.input.email\" @change=\"changeFilter(i, 'processCustomers', rule.input)\">\n                  <option v-for=\"option in maxColumn(rules[i-1].data, ['None'])\">{{option}}</option>\n                </select> ,\n                \"countrycode\": +1,\n                \"phone\":  <select v-model=\"rule.input.phone\" @change=\"changeFilter(i, 'processCustomers', rule.input)\">\n                  <option v-for=\"option in maxColumn(rules[i-1].data, ['None'])\">{{option}}</option>\n                </select> ,\n                \"notes\":  <select v-model=\"rule.input.notes\" @change=\"changeFilter(i, 'processCustomers', rule.input)\">\n                  <option v-for=\"option in maxColumn(rules[i-1].data, ['None', 'Custom'])\">{{option}}</option>\n                </select>\n                <span v-if=\"rule.input.notes == 'Custom'\">Custom Note: <input type=\"text\" v-model=\"rule.input.customNote\" @change=\"changeFilter(i, 'processCustomers', rule.input)\"> </span>\n                <span v-if=\"rule.input.location && rule.input.location.qsEnabled\">, \"q\":</span> <select v-if=\"rule.input.location && rule.input.location.qsEnabled\" v-model=\"rule.input.q\" @change=\"changeFilter(i, 'processCustomers', rule.input)\">\n                  <option v-for=\"option in qSelection\">{{option}}</option>\n                </select>\n              }\n            </div>\n          </div>\n          <span v-if=\"rule.option == 'rowByVal'\">\n            Keep row if column #\n            <input type=\"number\" v-model=\"rule.input.value1\" @change=\"changeFilter(i, rule.option, rule.input)\" min=\"0\">\n            <select v-model=\"rule.input.type\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option value=\"hasVal\" selected>has a value</option>\n              <option value=\"isWord\">is a single word</option>\n              <option value=\"isNum\">is a number</option>\n              <option value=\"conTerm\">contains a specfic term</option>\n              <option value=\"noConTerm\">doesn't contain term</option>\n            </select>\n            <input type=\"text\" v-if=\"rule.input.type == 'conTerm' || rule.input.type == 'noConTerm'\" v-model=\"rule.input.value2\" @change=\"changeFilter(i, rule.option, rule.input)\">\n          </span>\n          <span v-if=\"rule.option == 'rowByLen'\">\n            Keep rows with <input type=\"number\" :min=\"0\" :max=\"rule.data[0] ? rule.data[0].length : 50\" v-model=\"rule.input.value\" @change=\"changeFilter(i, rule.option, rule.input)\"> Columns\n          </span>\n          <span v-if=\"rule.option == 'rowByValLen'\">\n            <select v-model=\"rule.input.type\">\n              <option value=\"remove\">Remove Row If</option>\n              <option value=\"keep\">Keep Row If</option>\n            </select>\n            row at column #\n            <select v-model=\"rule.input.value1\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option v-for=\"option in maxColumn(rules[i-1].data)\">{{option}}</option>\n            </select>\n            <select v-model=\"rulr.input.value2\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option value=\"is\">is equal to</option>\n              <option value=\"not\">is not equal to</option>\n            </select>\n            <input type=\"number\" min=\"1\" max=\"50\" v-model=\"rule.input.value3\" @change=\"changeFilter(i, rule.option, rule.input)\"> characters in length\n          </span>\n          <span v-if=\"rule.option == 'rowByColLen'\">\n            <select v-model=\"rule.input.type\">\n              <option value=\"remove\">Remove Column If</option>\n              <option value=\"keep\">Keep column If</option>\n            </select>\n            at column number #\n            <select v-model=\"rule.input.value1\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option v-for=\"option in maxColumn(rules[i-1].data)\">{{option}}</option>\n            </select>\n            <select v-model=\"rulr.input.value2\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option value=\"is\">is equal to</option>\n              <option value=\"not\">is not equal to</option>\n            </select>\n            <input type=\"number\" min=\"1\" max=\"50\" v-model=\"rule.input.value3\" @change=\"changeFilter(i, rule.option, rule.input)\"> characters in length\n          </span>\n          <span v-if=\"rule.option == 'rowRange'\">\n            <select v-model=\"rule.input.type\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option value=\"remove\">Remove From Start / End</option>\n              <option value=\"fix\">Fixed Start / End</option>\n            </select>\n            <span v-if=\"rule.input.type == 'remove'\">\n              Skip First\n              <select v-model=\"rule.input.value1\" @change=\"changeFilter(i, rule.option, rule.input)\">\n                <option v-for=\"option in Array.from(new Array(rules[i-1].data.length),(val,index)=>index)\">{{option}}</option>\n              </select>\n              and crop last\n              <select v-model=\"rule.input.value2\" @change=\"changeFilter(i, rule.option, rule.input)\">\n                <option v-for=\"option in Array.from(new Array(rules[i-1].data.length),(val,index)=>index)\">{{option}}</option>\n              </select>\n              rows\n            </span>\n            <span v-if=\"rule.input.type == 'fix'\">\n              From row #\n              <select v-model=\"rule.input.value1\" @change=\"changeFilter(i, rule.option, rule.input)\">\n                <option v-for=\"option in Array.from(new Array(rules[i-1].data.length),(val,index)=>index)\">{{option}}</option>\n              </select>\n              to #\n              <select v-model=\"rule.input.value2\" @change=\"changeFilter(i, rule.option, rule.input)\">\n                <option v-for=\"option in Array.from(new Array(rules[i-1].data.length),(val,index)=>index)\">{{option}}</option>\n              </select>\n            </span>\n          </span>\n          <span v-if=\"rule.option == 'colRange'\">\n            <select v-model=\"rule.input.type\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option value=\"remove\">Remove From Start / End</option>\n              <option value=\"fix\">Fixed Start / End</option>\n            </select>\n            <span v-if=\"rule.input.type == 'remove'\">\n              Skip First\n              <select v-model=\"rule.input.value1\" @change=\"changeFilter(i, rule.option, rule.input)\">\n                <option v-for=\"option in maxColumn(rules[i-1].data)\">{{option}}</option>\n              </select>\n              and crop last\n              <select v-model=\"rule.input.value2\" @change=\"changeFilter(i, rule.option, rule.input)\">\n                <option v-for=\"option in maxColumn(rules[i-1].data)\">{{option}}</option>\n              </select>\n              columns\n            </span>\n            <span v-if=\"rule.input.type == 'fix'\">\n              From column #\n              <select v-model=\"rule.input.value1\" @change=\"changeFilter(i, rule.option, rule.input)\">\n                <option v-for=\"option in maxColumn(rules[i-1].data)\">{{option}}</option>\n              </select>\n              to #\n              <select v-model=\"rule.input.value2\" @change=\"changeFilter(i, rule.option, rule.input)\">\n                <option v-for=\"option in maxColumn(rules[i-1].data)\">{{option}}</option>\n              </select>\n            </span>\n          </span>\n          <span v-if=\"rule.option == 'remCol'\">\n            Remove column #\n            <select v-model=\"rule.input.value1\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option v-for=\"option in maxColumn(rules[i-1].data, ['None'])\">{{option}}</option>\n            </select>\n            <select v-model=\"rule.input.value2\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option v-for=\"option in maxColumn(rules[i-1].data, ['None'])\">{{option}}</option>\n            </select>\n            <select v-model=\"rule.input.value3\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option v-for=\"option in maxColumn(rules[i-1].data, ['None'])\">{{option}}</option>\n            </select>\n            <select v-model=\"rule.input.value4\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option v-for=\"option in maxColumn(rules[i-1].data, ['None'])\">{{option}}</option>\n            </select>\n            <select v-model=\"rule.input.value5\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option v-for=\"option in maxColumn(rules[i-1].data, ['None'])\">{{option}}</option>\n            </select>\n          </span>\n          <span v-if=\"rule.option == 'remRow'\">\n            Remove row #\n            <select v-model=\"rule.input.value1\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option v-for=\"option in Array.from(new Array(rules[i-1].data.length),(val,index)=>index).concat(['None'])\">{{option}}</option>\n            </select>\n            <select v-model=\"rule.input.value2\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option v-for=\"option in Array.from(new Array(rules[i-1].data.length),(val,index)=>index).concat(['None'])\">{{option}}</option>\n            </select>\n            <select v-model=\"rule.input.value3\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option v-for=\"option in Array.from(new Array(rules[i-1].data.length),(val,index)=>index).concat(['None'])\">{{option}}</option>\n            </select>\n            <select v-model=\"rule.input.value4\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option v-for=\"option in Array.from(new Array(rules[i-1].data.length),(val,index)=>index).concat(['None'])\">{{option}}</option>\n            </select>\n            <select v-model=\"rule.input.value5\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option v-for=\"option in Array.from(new Array(rules[i-1].data.length),(val,index)=>index).concat(['None'])\">{{option}}</option>\n            </select>\n          </span>\n          <span v-if=\"rule.option == 'explodeCol'\">\n            Split column #\n            <select v-model=\"rule.input.type\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option v-for=\"option in Array.from(new Array(rules[i-1].data.length),(val,index)=>index)\">{{option}}</option>\n            </select>\n            at occurence of\n            <input type=\"text\" v-model=\"rule.input.value\" @change=\"changeFilter(i, rule.option, rule.input)\"> (use space for between words)\n          </span>\n          <span v-if=\"rule.option == 'mergeCol'\">\n            merge from cell\n            <select v-model=\"rule.input.value1\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option v-for=\"option in Array.from(new Array(rules[i-1].data.length),(val,index)=>index)\">{{option}}</option>\n            </select>\n            to\n            <select v-model=\"rule.input.value2\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option v-for=\"option in Array.from(new Array(rules[i-1].data.length),(val,index)=>index)\">{{option}}</option>\n            </select>\n            columns\n          </span>\n          <span v-if=\"rule.option == 'searchReplace'\">\n            In column #\n            <select v-model=\"rule.input.value1\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option v-for=\"option in Array.from(new Array(rules[i-1].data.length),(val,index)=>index)\">{{option}}</option>\n            </select>\n            replace\n            <input type=\"text\" v-model=\"rule.input.value2\" @change=\"changeFilter(i, rule.option, rule.input)\">\n            with\n            <input type=\"text\" v-model=\"rule.input.value3\" @change=\"changeFilter(i, rule.option, rule.input)\">\n          </span>\n          <span v-if=\"rule.option == 'formDates'\">\n            Column #\n            <select v-model=\"rule.input.value1\" @change=\"changeFilter(i, rule.option, rule.input)\">\n              <option v-for=\"option in Array.from(new Array(rules[i-1].data.length),(val,index)=>index)\">{{option}}</option>\n            </select>\n            format from\n            <input type=\"text\" v-model=\"rule.input.value2\" @change=\"changeFilter(i, rule.option, rule.input)\">\n            to\n            <input type=\"text\" placeholder=\"Y-M-D\" v-model=\"rule.input.value3\" @change=\"changeFilter(i, rule.option, rule.input)\">\n          </span>\n        </span>\n      </div>\n      <div class=\"removal\" @click=\"removeRule(i)\" v-if=\"rule.data && i != 0\">Remove Rule <i class=\"fal fa-times\"></i> </div>\n      <div class=\"data-container\" :class=\"{'hidden': rule.data.length == 0}\" >\n        <div class=\"data-table border\"><div class=\"data-selection\"  v-for=\"column in maxColumn(rule.data)\">{{column}}</div></div>\n        <div class=\"data-table\" v-for=\"datapoint in rule.data\">\n          <div class=\"data-selection\" v-for=\"data in datapoint\" :title=\"data\">\n            {{data ? data : ''}}\n          </div>\n        </div>\n      </div>\n      <div class=\"\" v-if=\" fileExists && (!rule.data || rule.data.length == 0) && (rule.check != 'customerCreate')\">\n        No data would pass this filter.\n      </div>\n\n      <span >Add New Parsing Rule <i class=\"fal fa-plus\" @click=\"addRule(i)\" title=\"Add Additional Rule\"></i>\n      </span>\n\n      <span v-if=\"rule.data && i == rules.length -1\">\n        Add Customer Creation Rule  <i class=\"fal fa-plus\" v-if=\"rule.data && i == rules.length -1\" @click=\"addCustomerRule()\" title=\"Add Customer Creation Rule\"></i>\n      </span>\n\n      <span v-if=\"rule.check && rule.check == 'customerCreate' && rule.option && (rule.input.email || rule.input.phone) && ruleName && mailbox && !dupeName && !includesDash\"><button @click=\"saveRules()\"> Save Parsing Rules</button></span>\n    </div>\n  </div>\n</template>\n\n\n<script>\nimport config from \"../config.js\";\nimport { EventService } from \"../main\";\nimport Papa from \"../../node_modules/papaparse/papaparse.js\";\nimport ParsingService from \"../services/ParsingService.js\";\nimport UserService from \"../services/UserService.js\";\nimport LocationService from \"../services/LocationService.js\";\nimport XLSX from \"xlsx\";\nimport convertFromXML from \"xml-js\";\nimport vSelect from \"../../node_modules/vue-select/src/components/Select.vue\";\nimport AutomationService from '../services/AutomationService';\n\nexport default {\n  name: \"csvPreview\",\n  components: {\n    vSelect\n  },\n  data: function() {\n    return {\n      csv: [],\n      xml: [],\n      sampleEmails: [],\n      fileOptions: [\"csv\", \"xml\", \"xls\", \"xlsx\", \"txt\"],\n      indicators: [\"subject\", \"fromName\", \"body\"],\n      fileName: \"\",\n      fileExists: false,\n      displaySamples: false,\n      newFile: \"\",\n      trigger: \"\",\n      parseFileType: \"\",\n      parseFileName: \"\",\n      selectedFile: '',\n      mailbox: \"\",\n      json: \"\",\n      domain: \"\",\n      activeLocation: \"\",\n      locationOptions: [],\n      ruleName: \"\",\n      rules: [{ data: \"\", option: \"intialData\" }],\n      qSelection: ['default', 1, 2, 3],\n      allRuleNames: [],\n      dupeName: false,\n      includesDash: false,\n    };\n  },\n  computed: {\n    data() {\n      let vm = this;\n      if (vm.json) {\n        return vm.json.splice(1, 11);\n      }\n    }\n  },\n  created() {\n    if(this.$route.params.parser) {\n      this.getParsingRule();\n    }\n    this.selectedLocation = localStorage.getItem(\"locationId\");\n    this.getAllParsingRuleNames();\n    this.getLocationOptions();\n    this.getSampleMail();\n    this.domain = config.subDomain;\n  },\n  methods: {\n    getAllParsingRuleNames() {\n      let vm = this;\n      ParsingService.getParsingRules().then(response => {\n        response.response.map(rule => {\n          vm.allRuleNames.push(rule.parsingRules.name);\n        })\n      })\n    },\n    // evaluateData(data) {\n    //   data.map(line => {\n    //     console.log(line.length);\n    //   })\n    //   return data[0]\n    // },\n    evalName() {\n      let vm = this;\n      if(vm.allRuleNames.includes(vm.ruleName)) {\n        vm.dupeName = true;\n      } else if(vm.ruleName.includes(\"-\")) {\n        vm.includesDash = true;\n      } else {\n        vm.includesDash = false;\n        vm.dupeName = false;\n      }\n    },\n    maxColumn(data, concat) {\n      let lineLength = 0;\n      data.map(line => {\n        if(line.length > lineLength) lineLength = line.length\n      })\n      if(concat) {\n        return Array.from(new Array(lineLength),(val,index)=>index).concat(concat);\n      } else {\n        return Array.from(new Array(lineLength),(val,index)=>index);\n      }\n    },\n    getParsingRule(){\n      let vm = this;\n      ParsingService.getParsingRule(this.$route.params.parser).then(response => {\n        vm.selectedRule = response.result[0];\n        if(!this.$route.params.action) {\n\n          vm.ruleName = vm.selectedRule.parsingRules.name;\n          vm.mailbox = vm.selectedRule.mailbox.substr(0, vm.selectedRule.mailbox.indexOf('@'));\n        }\n        vm.rules = vm.selectedRule.parsingRules.rules;\n        vm.trigger = vm.selectedRule.parsingRules.trigger;\n        vm.parseFileType = vm.selectedRule.parsingRules.fileType;\n        vm.fileExists = true;\n        if(vm.trigger == 'subject') {\n          vm.fileName = vm.selectedRule.parsingRules.value;\n        } else {\n          vm.parseFileName = vm.selectedRule.parsingRules.parseFileName;\n        }\n        vm.rules.map(rule => {\n          if(rule.check && rule.check == 'customerCreate') {\n            rule.activeLocation = rule.input.location;\n          }\n        })\n      })\n    },\n    getLocationOptions() {\n      let vm = this;\n      UserService.getAllUserLocations().then(response => {\n        response.map(e => {\n          let singleLocation = {\n            label: e.name,\n            value: e.locationId,\n            api: e.apiKey,\n            qsEnabled: e.prop\n          };\n          vm.locationOptions.push(singleLocation);\n        });\n      });\n    },\n    getSampleMail() {\n      let vm = this;\n      ParsingService.getSampleMail().then(response => {\n        vm.sampleEmails = response.response;\n        // console.log(vm.sampleEmails);\n      });\n    },\n    addFile(file) {\n      let vm = this;\n      // EventService.$emit(\"loading\", \"show\");\n      if (file) {\n        vm.fileExists = true;\n        vm.displaySamples = false;\n        vm.selectedFile = file;\n        let exampleFile = file;\n        let fileName;\n        if(exampleFile.filename.includes('.zip')) {\n          fileName = exampleFile.filename.substr(0,exampleFile.filename.lastIndexOf('.'));\n          } else {\n          fileName = exampleFile.filename;\n        }\n        let fileType = fileName.substr(fileName.lastIndexOf(\".\") + 1);\n        if (fileType == \"xlsx\" || fileType == \"xls\") {\n          var rABS = true;\n          var data = atob(exampleFile.content);\n          if (!rABS) data = new Uint8Array(data);\n          var workbook = XLSX.read(data, { type: rABS ? \"binary\" : \"array\" });\n          let processedXLS = XLSX.utils.sheet_to_json(\n            workbook.Sheets[workbook.SheetNames[0]],\n            { header: 1 }\n          ).filter(row => {\n            return row.length > 0;\n          });\n          let maxSize = 0;\n          processedXLS.map(e => {\n            if(e.length > maxSize) maxSize = e.length;\n          })\n          let diff = maxSize - processedXLS[0].length;\n          while (diff > 0) {\n            processedXLS[0].push('-');\n            diff = maxSize - processedXLS[0].length;\n          }\n          if (processedXLS.length > 20) {\n            vm.rules[0].data = processedXLS\n              .splice(0, 11)\n              .concat(processedXLS.splice(-10));\n          } else {\n            vm.rules[0].data = processedXLS;\n          }\n        } else if (fileType == \"csv\") {\n          let processedCSV;\n          Papa.parse(atob(exampleFile.content), {\n            complete: function(results) {\n              processedCSV = results.data;\n              if (processedCSV.length > 20) {\n                vm.rules[0].data = processedCSV\n                  .splice(0, 11)\n                  .concat(processedCSV.splice(-10));\n              } else {\n                vm.rules[0].data = processedCSV;\n              }\n            }\n          });\n        } else if (fileType == \"xml\") {\n          var data = atob(exampleFile.content);\n          vm.convertXML(data);\n        } else if (fileType == \"txt\") {\n          var data = atob(exampleFile.content);\n          let parser = new DOMParser();\n          let newDoc = parser.parseFromString(JSON.parse(data), \"text/html\");\n          let test = newDoc.getElementsByTagName(\"tr\");\n          let newArr = [...test];\n          let customerList = [];\n          let headerArr = [];\n          newArr.map(g => {\n            let headers = g.getElementsByTagName(\"th\");\n            if (headers.length > 0) {\n              headerArr.push([...headers]);\n            }\n          });\n          let headersList = [];\n          headerArr.map(h => {\n            h.map(g => {\n              headersList.push(g.innerHTML);\n            });\n          });\n          let nextArr = [];\n          newArr.map(e => {\n            let testing = e.getElementsByTagName(\"td\");\n            let customer = {};\n            let nextArray = [...testing];\n            nextArray.map((f, i) => {\n              let header = headersList[i];\n              let value = f.textContent;\n              customer[header] = value;\n            });\n            if (Object.keys(customer).length > 3) {\n              customerList.push(customer);\n            }\n          });\n          let csvVersion = Papa.unparse(customerList);\n          let jsonVersion = Papa.parse(csvVersion);\n          jsonVersion = jsonVersion.data;\n          if (jsonVersion.length > 20) {\n            vm.rules[0].data = jsonVersion\n              .splice(0, 11)\n              .concat(jsonVersion.splice(-10));\n          } else {\n            vm.rules[0].data = jsonVersion;\n          }\n        } else {\n          console.log(\"Error, this has been rejected for incorrect file type.\");\n        }\n        if(vm.rules && vm.rules.length > 1) {\n          vm.rules.map((rule, i) => {\n            if(i > 0) {\n              rule.data.map(dataset => {\n                if(dataset && dataset.length > 0) {\n                  vm.changeFilter(i, rule.option, rule.input);\n                }\n              })\n            }\n          })\n        }\n      }\n    },\n    parseBody(email) {\n      let vm = this;\n      vm.fileExists = true;\n      vm.displaySamples = false;\n      vm.selectedFile = email;\n      var parser = new DOMParser();\n      var htmlDoc = parser.parseFromString(email, 'text/html');\n      var pArray = Array.from(htmlDoc.getElementsByTagName('p'));\n      let usableData = pArray[4].innerHTML.split('&lt;');\n      let customersList = [];\n      usableData.map((ptag, i) => {\n        customersList.push(ptag.substring(ptag.indexOf('<br>'))\n        .replace(/<a href=\"mailto:/gi, '')\n        .replace('\">', ' ')\n        .replace(/<\\/a>/gi, '')\n        .replace(/ -/gi, '')\n        .replace(/-/gi, '')\n        .replace(/ <br>/gi, '')\n        .replace(/<br>/gi, '')\n        .replace(/ &amp;/gi, '')\n        .replace(/&amp;/gi, '')\n        .split(' '));\n        // console.log(typeof ptag, ptag);\n      })\n      if (customersList.length > 100) {\n        vm.rules[0].data = customersList\n          .splice(0, 50)\n          .concat(customersList.splice(-50));\n      } else {\n        vm.rules[0].data = customersList;\n      }\n      // let parsedCustomers = [];\n      // let parsedData = Papa.parse(email, {delimeter: '\\\\n'});\n      // let unparsedData = Papa.unparse(parsedData.data);\n      // let newParseData = unparsedData.split('\\n');\n      // let customersList = [];\n      // newParseData.map(e => {\n      //   e = e.replace('\\n', '')\n      //   let data = e.split(' ');\n      //   if(data.length > 3) {\n      //     customersList.push(data);\n      //   }\n      // });\n      // // console.log(parsedCustomers);\n      // if (customersList.length > 100) {\n      //   vm.rules[0].data = customersList\n      //     .splice(0, 50)\n      //     .concat(customersList.splice(-50));\n      // } else {\n      //   vm.rules[0].data = customersList;\n      // }\n      // back end potential process.\n    // let lines = email.split('\\\\n');\n    // let parsedLines = []\n    // lines.map((l) => {\n    //   if (l.length > 10) {\n    //     let splitLine = l.split(' ');\n    //     let parsedLine = [];\n    //     splitLine.map((s) => {\n    //       if (s && s.length > 2) {\n    //         parsedLine.push(s);\n    //       }\n    //     })\n    //     parsedLines.push(parsedLine);\n    //   }\n    // })\n    //   if (parsedLines.length > 100) {\n    //     vm.rules[0].data = parsedLines\n    //       .splice(0, 50)\n    //       .concat(parsedLines.splice(-50));\n    //   } else {\n    //     vm.rules[0].data = parsedLines;\n    //   }\n    },\n    convertXML(xml) {\n      let vm = this;\n      let parser = new DOMParser();\n      let xmlDoc = parser.parseFromString(xml, \"text/xml\");\n      let xmlArr = xmlDoc.getElementsByTagName(\"Row\");\n      let newXMLArr = [...xmlArr];\n      let customerList = [];\n      newXMLArr.map(e => {\n        let customer = {};\n        let test = [...e.attributes];\n        test.map(f => {\n          let header = f.name;\n          let value = f.nodeValue;\n          customer[header] = value;\n        });\n        customerList.push(customer);\n      });\n      let csvVersion = Papa.unparse(customerList);\n      let jsonVersion = Papa.parse(csvVersion);\n      jsonVersion = jsonVersion.data;\n      if (jsonVersion.length > 20) {\n        vm.rules[0].data = jsonVersion\n          .splice(0, 11)\n          .concat(jsonVersion.splice(-10));\n      } else {\n        vm.rules[0].data = jsonVersion;\n      }\n    },\n    addRule(index) {\n      let vm = this;\n      vm.rules.splice( index+1, 0, {\n        data: [],\n        option: \"\",\n        input: {}\n      });\n    },\n    addCustomerRule() {\n      let vm = this;\n      vm.rules.push({\n        rule: vm.rules.length + 1,\n        check: \"customerCreate\",\n        data: [],\n        option: \"processCustomers\",\n        input: {}\n      });\n    },\n    removeRule(index) {\n      this.rules.splice(index, 1);\n    },\n    changeLocation(index, locationData) {\n      let vm = this;\n      if (vm.rules[index].input.location != locationData) {\n        vm.rules[index].input.location = locationData;\n        if(locationData && locationData.qsEnabled) {\n          AutomationService.getAutomationsByLocation(locationData.value).then(response => {\n            let qSelect = [];\n            response.result.map(auto => {\n              qSelect.push(auto.identifier)\n            })\n            vm.qSelection = qSelect;\n          })\n          // LocationService.getLocation(locationData.value).then(response => {\n            // let totalQs = response.question\n            // let automations = response.automations;\n            // automations.map(auto => {\n              //   vm.qSelection.push(automation.identifier)\n            // })\n          // })\n        }\n      }\n    },\n    changeFilter(index, option, input) {\n      let vm = this;\n      let previousData;\n      if (\n        vm.rules[index - 1].check &&\n        vm.rules[index - 1].check == \"customerCreate\"\n      ) {\n        previousData = JSON.parse(JSON.stringify(vm.rules[0].data));\n      } else {\n        previousData = JSON.parse(JSON.stringify(vm.rules[index - 1].data));\n      }\n      // console.log(...arguments);\n      switch (option) {\n        case \"rowByVal\":\n          if (input && input.value1 && input.type && input.value2) {\n            if (input.type == \"conTerm\") {\n              vm.rules[index].data = previousData.filter(e => {\n                return e[input.value1]\n                  .toLowerCase()\n                  .includes(typeof input.value2 == 'string' ? input.value2.toLowerCase() : input.value2);\n              });\n            } else if (input.type == \"noConTerm\") {\n              0;\n              vm.rules[index].data = previousData.filter(e => {\n                return !e[input.value1]\n                  .toLowerCase()\n                  .includes(typeof input.value2 == 'string' ? input.value2.toLowerCase() : input.value2);\n              });\n            }\n          } else if (input && input.value1 && input.type) {\n            if (input.type == \"hasVal\") {\n              vm.rules[index].data = previousData.filter(e => {\n                return e[input.value1];\n              });\n            } else if (input.type == \"isWord\") {\n              vm.rules[index].data = previousData.filter(e => {\n                // Needs more work to determine if string or not.\n                return (\n                  e[input.value1] &&\n                  typeof e[input.value1] == \"string\" &&\n                  e[input.value1].trim().indexOf(\" \") == -1\n                );\n              });\n            } else if (input.type == \"isNum\") {\n              // console.log(previousData);\n              vm.rules[index].data = previousData.filter(e => {\n                return parseInt(e[input.value1]);\n              });\n            }\n          } else {\n            vm.rules[index].data = previousData;\n          }\n          break;\n\n        case \"rowByLen\":\n          if (input && input.value) {\n            vm.rules[index].data = previousData.filter(e => {\n              if (e) {\n                return e.length == input.value;\n              }\n            });\n          } else {\n            vm.rules[index].data = previousData;\n          }\n          break;\n\n        case \"rowByValLen\":\n          break;\n\n        case \"rowByColLen\":\n          break;\n\n        case \"rowRange\":\n          if (input && input.type) {\n            if (input.type == \"remove\") {\n              if (input.value1 && input.value2) {\n                let newValues = previousData.slice(\n                  input.value1,\n                  vm.rules[index - 1].data.length - input.value2\n                );\n                vm.rules[index].data = newValues;\n              }\n            } else if (input.type == \"fix\") {\n              if (input.value1 && input.value2) {\n                let newValues = previousData.slice(\n                  input.value1,\n                  input.value2 - input.value1 + 1\n                );\n                vm.rules[index].data = newValues;\n              }\n            }\n          } else {\n            vm.rules[index].data = previousData;\n          }\n          break;\n\n        case \"colRange\":\n          if (input && input.type) {\n            if (input.type == \"remove\") {\n              if (input.value1 && input.value2) {\n                let newValues = [];\n                vm.rules[index - 1].data.map(e => {\n                  newValues.push(\n                    e.slice(input.value1, e.length - input.value2)\n                  );\n                });\n                vm.rules[index].data = newValues;\n              }\n            } else if (input.type == \"fix\") {\n              if (input.value1 && input.value2) {\n                let newValues = [];\n                vm.rules[index - 1].data.map(e => {\n                  newValues.push(e.slice(input.value1, input.value2));\n                });\n                vm.rules[index].data = newValues;\n              }\n            }\n          } else {\n            vm.rules[index].data = previousData;\n          }\n          break;\n\n        case \"remCol\":\n          if (\n            input &&\n            (input.value1 ||\n              input.value2 ||\n              input.value3 ||\n              input.value4 ||\n              input.value5)\n          ) {\n            let newValues = vm.rules[index - 1].data;\n            let inputKeys = Object.keys(input);\n            inputKeys.map((inputVal, g) => {\n              newValues = newValues.map((e, i) => {\n                return e.filter((x, j) => {\n                  return j != parseInt(input[inputVal]);\n                });\n              });\n            });\n            vm.rules[index].data = newValues;\n          } else {\n            vm.rules[index].data = previousData;\n          }\n          break;\n\n        case \"remRow\":\n          if (\n            input &&\n            (input.value1 ||\n              input.value2 ||\n              input.value3 ||\n              input.value4 ||\n              input.value5)\n          ) {\n            let newData = previousData;\n            let inputKeys = Object.keys(input);\n            inputKeys.map(inputVal => {\n              newData = newData.filter((e, i) => {\n                return i != parseInt(input[inputVal]);\n              });\n            });\n            vm.rules[index].data = newData;\n          } else {\n            vm.rules[index].data = previousData;\n          }\n          break;\n\n        case \"explodeCol\":\n          if (input && input.type && input.value) {\n            let colLengths = [];\n            vm.rules[index - 1].data.map(e => {\n              if(e[input.type]) {\n                colLengths.push(e[input.type].split(input.value).length);\n              }\n            });\n            let newColNum = Math.max(...colLengths);\n            let newValues = previousData;\n            newValues.map(e => {\n              if(e[input.type]) {\n                let newColumns = e[input.type].split(input.value);\n                if (newColumns.length != newColNum) {\n                  newColumns.length = newColNum;\n                  newColumns.fill(0, newColumns.length);\n                }\n                e.splice(input.type, 1, ...newColumns);\n              }\n            });\n            vm.rules[index].data = newValues;\n          } else {\n            vm.rules[index].data = vm.rules[index - 1].data;\n          }\n          break;\n\n        case \"mergeCol\":\n          if (input && input.value1 && input.value2) {\n            let input1 = parseInt(input.value1);\n            let input2 = parseInt(input.value2);\n            let newArray = [];\n            let newValues = previousData;\n            newValues.map(x => {\n              let newItem = x\n                .slice(input1, input2 + 1)\n                .join()\n                .replace(\",\", \", \");\n              x.splice(input1, input2 + 1 - input1, newItem);\n              newArray.push(x);\n            });\n            vm.rules[index].data = newArray;\n          } else {\n            vm.rules[index].data = vm.rules[index - 1].data;\n          }\n          break;\n\n        case \"searchReplace\":\n          if (input && input.value1 && input.value2) {\n            let input1 = parseInt(input.value1);\n            if (!input.value3) input.value3 = \"\";\n            let newValues = previousData;\n            newValues.map(e => {\n              e[input1] = e[input1]\n                .toString()\n                .replace(input.value2, input.value3);\n            });\n            vm.rules[index].data = newValues;\n          } else {\n            vm.rules[index].data = vm.rules[index - 1].data;\n          }\n          break;\n\n        case \"formDates\":\n          if (input && input.value1 && input.value2) {\n            alert(\n              \"Can't do this operation at this time until we standardize what dates we want coming in, if we do want to capture that data.\"\n            );\n          } else {\n            vm.rules[index].data = vm.rules[index - 1].data;\n          }\n          break;\n\n        case \"processCustomers\":\n          if (input.email || input.phone) {\n            let data = previousData;\n            let customerList = [];\n            data.map(customer => {\n              let newCustomer = {\n                firstname: input.firstname ? customer[input.firstname] : \"\",\n                lastname: input.lastname ? customer[input.lastname] : \"\",\n                email: input.email ? customer[input.email] : \"\",\n                phone: input.phone ? customer[input.phone] : \"\",\n                notes: input.notes ? customer[input.notes] : \"\"\n              };\n              if(input.notes == 'Custom') {\n                newCustomer.notes = input.customNote;\n              }\n              customerList.push(newCustomer);\n            });\n            vm.rules[index].data = customerList;\n          }\n          break;\n\n        default:\n          if (input && input.value) {\n            console.log(input.value);\n          } else {\n            vm.rules[index].data = vm.rules[index - 1].data;\n          }\n      }\n      if (index != vm.rules.length - 1) {\n        vm.rules.map((e, i) => {\n          if (i > index) {\n            vm.changeFilter(i, e.option, e.input);\n          }\n        });\n      }\n    },\n    mapData() {\n      this.csvData.map((e, i) => {\n        e.map((h, j) => {\n          h = h.trim();\n        });\n      });\n    },\n    addManualFile(event) {\n      let vm = this;\n      // EventService.$emit(\"loading\", \"show\");\n      if (event.target.files[0]) {\n        vm.fileExists = true;\n        let exampleFile = event.target.files[0];\n        let fileName = exampleFile.name;\n        let fileType = fileName.substr(fileName.indexOf(\".\") + 1);\n        if (fileType == \"xlsx\" || fileType == \"xls\") {\n          var rABS = true;\n          var reader = new FileReader();\n          reader.onload = function(e) {\n            var data = e.target.result;\n            if (!rABS) data = new Uint8Array(data);\n            var workbook = XLSX.read(data, { type: rABS ? \"binary\" : \"array\" });\n            let processedXLS = XLSX.utils.sheet_to_json(\n              workbook.Sheets[workbook.SheetNames[0]],\n              { header: 1 }\n            ).filter(row => {\n            return row.length > 0;\n          });;\n            let maxSize = 0;\n            processedXLS.map(e => {\n              if(e.length > maxSize) maxSize = e.length;\n            })\n            let diff = maxSize - processedXLS[0].length;\n            while (diff > 0) {\n              processedXLS[0].push('-');\n              diff = maxSize - processedXLS[0].length;\n            }\n            if (processedXLS.length > 20) {\n              vm.rules[0].data = processedXLS\n                .splice(0, 11)\n                .concat(processedXLS.splice(-10));\n            } else {\n              vm.rules[0].data = processedXLS;\n            }\n          };\n          if (rABS) reader.readAsBinaryString(exampleFile);\n          else reader.readAsArrayBuffer(exampleFile);\n        } else if (fileType == \"csv\") {\n          let processedCSV;\n          Papa.parse(exampleFile, {\n            complete: function(results) {\n              processedCSV = results.data;\n              if (processedCSV.length > 20) {\n                vm.rules[0].data = processedCSV\n                  .splice(0, 11)\n                  .concat(processedCSV.splice(-10));\n              } else {\n                vm.rules[0].data = processedCSV;\n              }\n            }\n          });\n        } else if (fileType == \"xml\") {\n          let reader = new FileReader();\n          reader.onload = function(e) {\n            var data = e.target.result;\n            vm.convertManualXML(data);\n          };\n          reader.readAsText(exampleFile);\n        } else if (fileType == \"txt\") {\n          let reader = new FileReader();\n          reader.onload = function(e) {\n            var data = e.target.result;\n            let parser = new DOMParser();\n            let newDoc = parser.parseFromString(JSON.parse(data), \"text/html\");\n            let test = newDoc.getElementsByTagName(\"tr\");\n            let newArr = [...test];\n            let customerList = [];\n            let headerArr = [];\n            newArr.map(g => {\n              let headers = g.getElementsByTagName(\"th\");\n              if (headers.length > 0) {\n                headerArr.push([...headers]);\n              }\n            });\n            let headersList = [];\n            headerArr.map(h => {\n              h.map(g => {\n                headersList.push(g.innerHTML);\n              });\n            });\n            let nextArr = [];\n            newArr.map(e => {\n              let testing = e.getElementsByTagName(\"td\");\n              let customer = {};\n              let nextArray = [...testing];\n              nextArray.map((f, i) => {\n                let header = headersList[i];\n                let value = f.textContent;\n                customer[header] = value;\n              });\n              if (Object.keys(customer).length > 3) {\n                customerList.push(customer);\n              }\n            });\n            let csvVersion = Papa.unparse(customerList);\n            let jsonVersion = Papa.parse(csvVersion);\n            jsonVersion = jsonVersion.data;\n            // console.log(jsonVersion);\n            if (jsonVersion.length > 100) {\n              vm.rules[0].data = jsonVersion\n                .splice(0, 50)\n                .concat(jsonVersion.splice(-50));\n            } else {\n              vm.rules[0].data = jsonVersion;\n            }\n          };\n          reader.readAsText(exampleFile);\n        } else {\n          console.log(\"Error, this has been rejected for incorrect file type.\");\n        }\n        if(vm.rules && vm.rules.length > 1) {\n          vm.rules.map((rule, i) => {\n            if(i > 0) {\n              rule.data.map(dataset => {\n                if(dataset && dataset.length > 0) {\n                  vm.changeFilter(i, rule.option, rule.input);\n                }\n              })\n            }\n          })\n        }\n      }\n    },\n    convertManualXML(xml) {\n      let vm = this;\n      let parser = new DOMParser();\n      let xmlDoc = parser.parseFromString(xml, \"text/xml\");\n      let xmlArr = xmlDoc.getElementsByTagName(\"Row\");\n      let newXMLArr = [...xmlArr];\n      let customerList = [];\n      newXMLArr.map(e => {\n        let customer = {};\n        let test = [...e.attributes];\n        test.map(f => {\n          let header = f.name;\n          let value = f.nodeValue;\n          customer[header] = value;\n        });\n        customerList.push(customer);\n      });\n      let csvVersion = Papa.unparse(customerList);\n      let jsonVersion = Papa.parse(csvVersion);\n      jsonVersion = jsonVersion.data;\n      if (jsonVersion.length > 20) {\n        vm.rules[0].data = jsonVersion\n          .splice(0, 11)\n          .concat(jsonVersion.splice(-10));\n      } else {\n        vm.rules[0].data = jsonVersion;\n      }\n    },\n    saveRules() {\n      let vm = this;\n      let ruleId = null;\n      if(this.$route.params.parser && !this.$route.params.action) {\n        ruleId = this.$route.params.parser;\n      }\n      let parsingObject = {\n        name: vm.ruleName,\n        trigger: vm.trigger,\n        fileType: vm.parseFileType,\n        parseFileName: vm.parseFileName,\n        value: vm.fileName,\n        rules: vm.rules\n      };\n      let completeMailbox = ''\n      if(vm.mailbox.includes('@livemail.opiniion.com') || vm.mailbox.includes('@demomail.opiniion.com')) {\n        completeMailbox = vm.mailbox;\n      } else {\n        completeMailbox =\n        vm.domain == \"app\"\n          ? vm.mailbox + \"@livemail.opiniion.com\"\n          : vm.mailbox + \"@demomail.opiniion.com\";\n        }\n      ParsingService.saveParsingRules(completeMailbox, parsingObject, ruleId).then(\n        response => {\n          if (response.success) {\n            (vm.csv = []),\n            (vm.xml = []),\n            (vm.fileOptions = [\"csv\", \"xml\", \"xls\", \"xlsx\", \"txt\"]),\n            (vm.indicators = [\"subject\", \"fromName\", \"body\"]),\n            (vm.fileName = \"\"),\n            (vm.fileExists = false),\n            (vm.newFile = \"\"),\n            (vm.trigger = \"\"),\n            (vm.parseFileType = \"\"),\n            (vm.mailbox = \"\"),\n            (vm.json = \"\"),\n            (vm.domain = \"\"),\n            (vm.activeLocation = \"\"),\n            (vm.locationOptions = []),\n            (vm.ruleName = \"\"),\n            vm.selectedFile = '',\n            (vm.rules = [{ rule: 1, data: \"\", option: \"intialData\" }]);\n            vm.$router.push('/parsingList')\n          }\n        }\n      );\n    }\n  }\n};\n</script>\n\n<style scoped>\n.parsing-container {\n  min-height: 100vh;\n  background: white;\n  min-width: 100%;\n  padding-left: 10px;\n}\n\n.parsing-description {\n  margin-left: 30px;\n}\n\n.data-container {\n  border: 1px solid grey;\n  overflow: scroll;\n  max-height: 400px;\n  font-size: 14px;\n  margin-bottom: 20px;\n}\n\n.mail-select {\n  margin-left: 30px;\n}\n\n.mail-select button {\n  background: #4fcbc5;\n  color: white;\n  margin: 20px 0 0 20px;\n  cursor: pointer;\n}\n\n.email-container {\n  margin: 20px 0 0 20px;\n  width: 400px;\n  box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.25);\n  padding: 10px 20px;\n}\n\n.email-headers {\n  display: flex;\n  flex-direction: column;\n}\n\n.removal {\n  width: 200px;\n  cursor: pointer;\n  border-radius: 3px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.55);\n  padding: 5px 10px;\n  margin: 10px 0;\n  display: flex;\n  justify-content: space-between;\n  background: orange;\n  color: rgb(255, 248, 236);\n  font-size: 18px;\n}\n\n.attachments {\n  margin-left: 20px;\n}\n\n.attachments span {\n  cursor: pointer;\n}\n\n.body-link {\n  cursor: pointer;\n}\n\n.hidden {\n  display: none;\n}\n\n.border {\n  border-bottom: 1px solid lightgrey;\n}\n\n.data-table {\n  display: flex;\n  flex-direction: row;\n}\n\n.data-selection {\n  flex: 0 0 180px;\n  margin: 5px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.fa-plus {\n  margin: 15px;\n  font-size: 20px;\n}\n\nbutton {\n  cursor: pointer;\n  border-radius: 3px;\n  box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.55);\n  padding: 5px 10px;\n  background: #4fcbc5;\n  color: white;\n}\n\n.dupeMessage {\n  color: red;\n  position: absolute;\n  transform: translate(-90px, 35px);\n  font-size: 11px;\n}\n\n</style>\n"]}]}