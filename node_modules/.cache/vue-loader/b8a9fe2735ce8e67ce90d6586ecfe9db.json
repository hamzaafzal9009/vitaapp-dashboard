{"remainingRequest":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/Reports/OpenedEmailsModal.vue?vue&type=style&index=0&id=43ca4d06&scoped=true&lang=css&","dependencies":[{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/Reports/OpenedEmailsModal.vue","mtime":1581270622000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLm1vZGFsLWNvbnRhaW5lciB7CiAgd2lkdGg6IDYwMHB4OwogIG1pbi1oZWlnaHQ6IDM1MHB4OwogIG1hcmdpbjogMjAwcHggYXV0byAwOwogIHBhZGRpbmc6IDIwcHggMzBweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIC4zMyk7CiAgdHJhbnNpdGlvbjogYWxsIC4zcyBlYXNlOwogIHBvc2l0aW9uOiBzdGlja3k7CiAgdG9wOiA0MHB4OwogIHotaW5kZXg6IDU4MDsKfQoKLm1vZGFsLW1hc2sgewogIHotaW5kZXg6IDU4MDsKfQoKLm1vZGFsLWhlYWRlciB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgbWFyZ2luLXRvcDogMTBweDsKICBwYWRkaW5nOiA1cHggMDsKfQoKLm1vZGFsLWhlYWRlciBoNCB7CiAgdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemU7Cn0KCi5tb2RhbC1oZWFkZXIgc3BhbiB7CiAgbWFyZ2luOiAxNXB4IDAgMCAwOwogIGZvbnQtc2l6ZTogMjVweDsKICBjb2xvcjogIzY5Njk2OTsKfQoKLm1vZGFsLWJvZHkgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBtYXgtaGVpZ2h0OiAzNTBweDsKfQoKLm92ZXJmbG93IHsKICBvdmVyZmxvdy15OiBzY3JvbGw7Cn0KCi5jbG9zZSB7CiAgZmxvYXQ6IHJpZ2h0OwogIGZvbnQtc2l6ZTogMjBweDsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KCi5vcGVuZWQtZGF0YSB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LWRpcmVjdGlvbjogcm93OwogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKfQoKLm9wZW5lZC1kYXRhIHNwYW4gewogIHdpZHRoOiAzMy4zJTsKICBvdmVyZmxvdzogaGlkZGVuOwogIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgbWFyZ2luOiA1cHggMDsKICBwYWRkaW5nOiA1cHggOwogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBsaWdodGdyZXk7Cn0KCi5ib3JkZXJlZCB7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIGdyZXk7CiAgbWFyZ2luLWJvdHRvbTogNXB4Owp9CgouYm9yZGVyZWQgc3BhbiB7CiAgZm9udC13ZWlnaHQ6IDYwMDsKICBib3JkZXItYm90dG9tOiBub25lOwp9CgouZGF0YS1wYWdpbmF0aW9uIHsKICBtYXJnaW4tbGVmdDogMjBweDsKICAvKiBib3JkZXItdG9wOiAzcHggc29saWQgI2VmZWZlZjsgKi8KICBwYWRkaW5nOiAxMHB4OwogIHdpZHRoOiAxMDAlOwogIGZvbnQtc2l6ZTogMTJweDsKfQoKLmRhdGEtcGFnaW5hdGlvbiBidXR0b24gewogIGJvcmRlcjogMXB4IHNvbGlkICNlZmVmZWY7CiAgcGFkZGluZzogMTBweDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgYmFja2dyb3VuZDogd2hpdGU7CiAgYm9yZGVyLXJhZGl1czogMDsKICBtaW4td2lkdGg6IDI1cHg7Cn0KCi5kYXRhLXBhZ2luYXRpb24gYnV0dG9uLmJ1dHRvbi1zZWxlY3RlZCB7CiAgYmFja2dyb3VuZDogI2RmZGZkZjsKfQoKLmRhdGEtcGFnaW5hdGlvbiBidXR0b246aG92ZXIgewogIGJhY2tncm91bmQ6ICNkZmRmZGY7Cn0KLmRpYWxvZy1mb290ZXIgewogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgaGVpZ2h0OiAzMHB4OwogIC8qIGJhY2tncm91bmQ6IHJlZDsgKi8KICBtYXJnaW4tdG9wOiAyMHB4OwogIHdpZHRoOiAxMDAlOwp9Ci5mb290ZXItY291bnQgewogIGZvbnQtc2l6ZTogMTRweDsKICBjb2xvcjogIzlhOWE5YTsKfQoK"},{"version":3,"sources":["OpenedEmailsModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"OpenedEmailsModal.vue","sourceRoot":"src/components/Reports","sourcesContent":["<template>\n  <el-dialog :title=\"parseDialogTitle\" width=\"900px\" center :show-close=\"true\" :before-close=\"closeModal\" :visible.sync=\"modalOpen\">\n    <el-table size=\"mini\" :data=\"openedData\" max-height=\"450px\">\n      <el-table-column prop=\"name\" sortable min-width=\"120\" label=\"Name\">\n        <template slot-scope=\"scope\">\n          <span>{{scope.row.firstName + ' ' + scope.row.lastName}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"email\" sortable min-width=\"120\" label=\"Email\">\n        <template slot-scope=\"scope\">\n          <span>{{scope.row.email}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"phone\" sortable min-width=\"120\" label=\"Phone\">\n        <template slot-scope=\"scope\">\n          <span>{{scope.row.phone}}</span>\n        </template>\n      </el-table-column>\n      <!-- Conditionally rendered labels below -->\n      <el-table-column v-if=\"parseDialogTitle == 'Email Replied'\" prop=\"date\" sortable min-width=\"150\" label=\"Date Replied\">\n        <template slot-scope=\"scope\">\n          <span>{{scope.row.text}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column v-else-if=\"parseDialogTitle == 'Email Engagement'\" sortable prop=\"date\" min-width=\"150\" label=\"Date Engaged\">\n        <template slot-scope=\"scope\">\n          <span>{{scope.row.text}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column v-else-if=\"parseDialogTitle == 'Sms Engagement'\" sortable prop=\"date\" min-width=\"150\" label=\"Date Engaged\">\n        <template slot-scope=\"scope\">\n          <span>{{scope.row.text}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column v-else-if=\"parseDialogTitle == 'Sms Replied'\" sortable prop=\"date\" min-width=\"150\" label=\"Date Replied\">\n        <template slot-scope=\"scope\">\n          <span>{{scope.row.text}}</span>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div class=\"dialog-footer\">\n      <div class=\"footer-count\">Total: {{count}}</div>\n    </div>\n    <!-- <span class=\"close\" title=\"Close\" @click=\"closeModal()\"><i class=\"fal fa-times\"></i></span> -->\n    <!-- <h4>{{reportType.split('-').join(' ')}}</h4> -->\n    <!-- <div class=\"modal-header\">\n      <span v-if=\"openedData && openedData.length\">Total: {{count}}</span>\n    </div> -->\n    <!-- <div class=\"modal-body\" :class=\"{'overflow': openedData.length > 10}\">\n      <div class=\"opened-data bordered\">\n        <span>Name</span>\n        <span>Phone</span>\n        <span>Email</span>\n        <span>Timestamp</span>\n      </div>\n      <div class=\"opened-data\" v-for=\"data in openedData\">\n        <span :title=\"data.firstName + ' ' + data.lastName\">{{data.firstName}} {{data.lastName}}</span>\n        <span :title=\"data.phone\">{{data.phone}}</span>\n        <span :title=\"data.email\">{{data.email}}</span>\n        <span :title=\"data.text\">{{data.date | dateConversion}}</span>\n      </div>\n      <div class=\"no-data\" v-if=\"openedData.length < 1\">\n        No data found.\n      </div>\n    </div>\n    <div class=\"data-pagination\" v-if=\"count > 50\">\n      <button @click=\"setPageNum(0)\">First</button>\n      <button @click=\"setPageNum(selectedPage-1)\" :disabled=\"selectedPage == 0\">Previous</button>\n      <button v-for=\"i in pagination\" @click=\"setPageNum(i-1)\" :class=\"{'button-selected': selectedPage == i-1}\">{{i}}</button>\n      <button @click=\"setPageNum(selectedPage+1)\" :disabled=\"selectedPage == Math.ceil(count/50) - 1\">Next</button>\n      <button @click=\"setPageNum(Math.ceil(count/50) - 1)\">Last</button>\n    </div> -->\n  </el-dialog>\n</template>\n\n<script>\nimport ReportService from '../../services/ReportService'\nimport { EventService } from '../../main';\n\nexport default {\n  name: 'openedEmailsModal',\n  props: ['startDate', 'endDate', 'reportType'],\n\n  data: function() {\n    return {\n      modalOpen: true,\n      openedData: [],\n      count: 0,\n      selectedPage: 0,\n    }\n  },\n  filters: {\n    dateConversion(date) {\n      let convertedDate = date + (1000*60*60*6);\n      let dateString = new Date(convertedDate).toString().substr(4,11);            \n      return dateString;\n    }\n  },\n  created() {\n    this.getData();   \n  },\n  computed: {\n    parseDialogTitle (propType) {\n      let type = this.reportType.split('-');\n      for (let i = 0; i < type.length; i++) {\n        const element = type[0].charAt(0).toUpperCase() + type[0].slice(1) + ' ' + type[1].charAt(0).toUpperCase() + type[1].slice(1);\n        return element;\n      }\n    },\n    upperBound() {\n      return Math.ceil(this.count/50)\n    },\n    pagination() {\n      if(this.selectedPage > 4 && this.selectedPage < this.upperBound - 5 && this.upperBound > 10 ) {\n        return [this.selectedPage -4, this.selectedPage -3, this.selectedPage -2, this.selectedPage -1, this.selectedPage, this.selectedPage + 1, this.selectedPage + 2, this.selectedPage + 3, this.selectedPage + 4, this.selectedPage + 5]\n      }\n      if(this.selectedPage >= this.upperBound - 6 && this.upperBound > 10 ) {\n        return [this.upperBound - 9, this.upperBound - 8, this.upperBound - 7, this.upperBound - 6, this.upperBound - 5, this.upperBound - 4, this.upperBound - 3, this.upperBound - 2, this.upperBound - 1, this.upperBound ]\n      }\n      else {\n        return Math.min(10, Math.ceil(this.count/50))\n      }\n    }\n  },\n  methods: {\n    getData(num) {\n      EventService.$emit(\"loading\", \"show\");\n      var locationIdArray = [];\n      let locationId = localStorage.getItem('locationId');\n      if(locationId) {\n        locationIdArray.push(locationId);\n      } else {\n        let locOptions = JSON.parse(localStorage.getItem('locationOptions'));\n        locOptions.map(el => locationIdArray.push(el.locationId));\n      }\n      let selectNum = 0;\n      if(num) {\n        selectNum = num;\n      }\n      let vm = this;\n      if(vm.reportType == 'email-opened') {\n          ReportService.getEmailOpenedEngagement(new Date(vm.startDate).getTime(), new Date(vm.endDate).getTime(), locationIdArray, selectNum).then(response => {\n            if(response.result) vm.openedData = response.result;\n            if(response.count && response.count[0]) {\n              vm.count = response.count[0].totalCount;\n            }\n            EventService.$emit(\"loading\", \"hide\");\n        })\n      } else if(vm.reportType == 'email-replied') {\n          ReportService.getEmailRepliedEngagement(new Date(vm.startDate).getTime(), new Date(vm.endDate).getTime(), locationIdArray, selectNum).then(response => {\n            if(response.result) vm.openedData = response.result;\n            if(response.count && response.count[0]) {\n              vm.count = response.count[0].totalCount;\n            }\n            EventService.$emit(\"loading\", \"hide\");\n        })\n      } else if(vm.reportType == 'sms-opened') {\n          ReportService.getSmsOpenedEngagement(new Date(vm.startDate).getTime(), new Date(vm.endDate).getTime(), locationIdArray, selectNum).then(response => {\n            if(response.result) vm.openedData = response.result;\n            if(response.count && response.count[0]) {\n              vm.count = response.count[0].totalCount;\n            }\n            EventService.$emit(\"loading\", \"hide\");\n        })\n      } else if(vm.reportType == 'sms-replied') {\n          ReportService.getSmsRepliedEngagement(new Date(vm.startDate).getTime(), new Date(vm.endDate).getTime(), locationIdArray, selectNum).then(response => {\n            if(response.result) vm.openedData = response.result;\n            if(response.count && response.count[0]) {\n              vm.count = response.count[0].totalCount;\n            }\n            EventService.$emit(\"loading\", \"hide\");\n        })\n      }\n    },\n    setPageNum(pageNum) {\n      if(pageNum != this.selectedPage) {\n        this.selectedPage = pageNum;\n        this.getData(pageNum);\n      }\n    },\n    closeModal: function () {\n      this.$emit('closeModal');\n      this.openedData = null;\n      this.modalOpen = false;\n      this.selectedPage = 1;\n      EventService.$emit('loading', 'hide')\n    },\n  }\n}\n</script>\n\n<style scoped>\n.modal-container {\n  width: 600px;\n  min-height: 350px;\n  margin: 200px auto 0;\n  padding: 20px 30px;\n  background-color: #fff;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, .33);\n  transition: all .3s ease;\n  position: sticky;\n  top: 40px;\n  z-index: 580;\n}\n\n.modal-mask {\n  z-index: 580;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 10px;\n  padding: 5px 0;\n}\n\n.modal-header h4 {\n  text-transform: capitalize;\n}\n\n.modal-header span {\n  margin: 15px 0 0 0;\n  font-size: 25px;\n  color: #696969;\n}\n\n.modal-body {\n  display: flex;\n  flex-direction: column;\n  max-height: 350px;\n}\n\n.overflow {\n  overflow-y: scroll;\n}\n\n.close {\n  float: right;\n  font-size: 20px;\n  cursor: pointer;\n}\n\n.opened-data {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n}\n\n.opened-data span {\n  width: 33.3%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  margin: 5px 0;\n  padding: 5px ;\n  border-bottom: 1px solid lightgrey;\n}\n\n.bordered {\n  border-bottom: 1px solid grey;\n  margin-bottom: 5px;\n}\n\n.bordered span {\n  font-weight: 600;\n  border-bottom: none;\n}\n\n.data-pagination {\n  margin-left: 20px;\n  /* border-top: 3px solid #efefef; */\n  padding: 10px;\n  width: 100%;\n  font-size: 12px;\n}\n\n.data-pagination button {\n  border: 1px solid #efefef;\n  padding: 10px;\n  cursor: pointer;\n  background: white;\n  border-radius: 0;\n  min-width: 25px;\n}\n\n.data-pagination button.button-selected {\n  background: #dfdfdf;\n}\n\n.data-pagination button:hover {\n  background: #dfdfdf;\n}\n.dialog-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 30px;\n  /* background: red; */\n  margin-top: 20px;\n  width: 100%;\n}\n.footer-count {\n  font-size: 14px;\n  color: #9a9a9a;\n}\n\n</style>\n"]}]}