{"remainingRequest":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/AutomationDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/AutomationDetails.vue","mtime":1581270622000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7RXZlbnRTZXJ2aWNlfSBmcm9tICcuLi9tYWluLmpzJzsKaW1wb3J0IEF1dG9tYXRpb25TZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2VzL0F1dG9tYXRpb25TZXJ2aWNlLmpzJzsKaW1wb3J0IEhvcnpCYXJDaGFydCBmcm9tICcuL0NoYXJ0cy9Ib3J6QmFyQ2hhcnQnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdhdXRvbWF0aW9uRGV0YWlscycsCiAgY29tcG9uZW50czogeyBIb3J6QmFyQ2hhcnQgfSwKICBwcm9wczogWydzZWxlY3RlZEF1dG9tYXRpb24nXSwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIGF1dG9tYXRpb246IHt9LAogICAgICBhdXRvbWF0aW9uTG9nczogW3thY3Rpb24gOiAnMScsIGFjdGlvbnRpbWUgOiAwLCBlbWFpbFNlbnQgOiAyNTAsIHNtc1NlbnQgOiAyNTAsIGVtYWlsc09wZW5lZCA6IDE1MCwgZW1haWxDbGlja3MgOiA1MCwgc21zQ2xpY2tzIDogMTI1fV0sCiAgICAgIGV4YW1wbGU6IHthY3Rpb24gOiAnMScsIGFjdGlvbnRpbWUgOiAwLCBlbWFpbFNlbnQgOiAyNTAsIHNtc1NlbnQgOiAyNTAsIGVtYWlsc09wZW5lZCA6IDE1MCwgZW1haWxDbGlja3MgOiA1MCwgc21zQ2xpY2tzIDogMTI1fSwKICAgICAgY291bnRlcjogMCwKICAgICAgc2VsZWN0ZWRBY3Rpb246IG51bGwsCiAgICAgIGJhckNoYXJ0T3B0aW9uczogewogICAgICAgIG1haW50YWluQXNwZWN0UmF0aW86IGZhbHNlLAogICAgICAgIGJhclBlcmNlbnRhZ2U6IDAuOCwKICAgICAgICBzY2FsZXM6IHsKICAgICAgICAgIHhBeGVzOiBbewogICAgICAgICAgICB0aWNrczogewogICAgICAgICAgICAgIG1pbjogMAogICAgICAgICAgICB9CiAgICAgICAgICB9XQogICAgICAgIH0sCiAgICAgICAgbGVnZW5kOiB7CiAgICAgICAgICBkaXNwbGF5OiBmYWxzZQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuYXV0b21hdGlvbiA9IHRoaXMuc2VsZWN0ZWRBdXRvbWF0aW9uOwogICAgdGhpcy5zZXRBdXRvbWF0aW9uTG9nc0V4YW1wbGUoKTsKICAgIC8vIHRoaXMuc2VsZWN0ZWRBY3Rpb24gPSB0aGlzLmF1dG9tYXRpb25Mb2dzWzBdOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHJlcG9ydERhdGEoKSB7CiAgICAgIGxldCB2bSA9IHRoaXM7CiAgICAgIGlmKHZtLnNlbGVjdGVkQWN0aW9uKXsKICAgICAgICBsZXQgZGF0YVNldCA9IFtdOwogICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5zZWxlY3RlZEFjdGlvbik7CiAgICAgICAgT2JqZWN0LmtleXModm0uc2VsZWN0ZWRBY3Rpb24pLmZvckVhY2goZWwgPT4gewogICAgICAgICAgaWYoYCR7ZWx9YCAhPSAnYWN0aW9uJyAmJiBgJHtlbH1gICE9ICdhY3Rpb250aW1lJykgewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwYXJzZUludChgJHt2bS5zZWxlY3RlZEFjdGlvbltlbF19YCkpOwogICAgICAgICAgICBkYXRhU2V0LnB1c2gocGFyc2VJbnQoYCR7dm0uc2VsZWN0ZWRBY3Rpb25bZWxdfWApKTsKICAgICAgICAgIH0gCiAgICAgICAgfSkKICAgICAgICByZXR1cm4gewogICAgICAgICAgbGFiZWxzOiBbJ0VtYWlscyBTZW50JywgJ1NNUyBTZW50JywgJ0VtYWlscyBPcGVuZWQnLCAnRW1haWxzIENsaWNrZWQnLCAnU01TIENsaWNrZWQnXSwKICAgICAgICAgIGRhdGFzZXRzOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBkYXRhOiBkYXRhU2V0IHx8IFtdLAogICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogWwogICAgICAgICAgICAgICAgJ3JnYmEoNzksIDIwMywgMTk3LCAxKScsCiAgICAgICAgICAgICAgICAncmdiYSg3OSwgMTUwLCAxOTcsIDEpJywKICAgICAgICAgICAgICAgICdyZ2JhKDc5LCAyMCwgNTUsIDEpJywKICAgICAgICAgICAgICAgICdyZ2JhKDE2NiwgMzQsIDE5NywgMSknLAogICAgICAgICAgICAgICAgJ3JnYmEoMjUwLCAxLCAxOTcsIDEpJwogICAgICAgICAgICAgIF0KICAgICAgICAgICAgfQogICAgICAgICAgXQogICAgICAgIH0gICAgICAgICAgICAgIAogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZWxlY3RBY3Rpb24oYWN0aW9uKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRBY3Rpb24gPSBhY3Rpb247CiAgICB9LAogICAgc2V0QXV0b21hdGlvbkxvZ3NFeGFtcGxlKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBpZih2bS5jb3VudGVyIDwgNCkgewogICAgICAgIGxldCB0ZXN0ID0ge307CiAgICAgIE9iamVjdC5rZXlzKHZtLmV4YW1wbGUpLmZvckVhY2goKGVsLCBpKSA9PiB7CiAgICAgICAgaWYoYCR7ZWx9YCA9PSAnYWN0aW9uJykgewogICAgICAgICAgdGVzdFtlbF0gPSAocGFyc2VJbnQoYCR7dm0uZXhhbXBsZVtlbF19YCkgKyAxKTsKICAgICAgICB9IGVsc2UgaWYoYCR7ZWx9YCA9PSAnYWN0aW9udGltZScpIHsgICAgICAgIAogICAgICAgICAgdGVzdFtlbF0gPSAocGFyc2VJbnQoYCR7dm0uZXhhbXBsZVtlbF19YCkrIDIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0ZXN0W2VsXSA9IE1hdGguY2VpbChgJHt2bS5leGFtcGxlW2VsXSooTWF0aC5yYW5kb20oKSl9YCk7CiAgICAgICAgfQogICAgICB9KQogICAgICB2bS5leGFtcGxlID0gdGVzdDsKICAgICAgdm0uYXV0b21hdGlvbkxvZ3MucHVzaCh0ZXN0KTsKICAgICAgdm0uY291bnRlcisrCiAgICAgIHZtLnNldEF1dG9tYXRpb25Mb2dzRXhhbXBsZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCdEb25lIScpOwogICAgICB9CiAgICB9LAogICAgY2xvc2VNb2RhbCgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2xvc2VNb2RhbCIpOwogICAgICB0aGlzLmF1dG9tYXRpb24gPSB7fTsKICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgImhpZGUiKTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["AutomationDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AutomationDetails.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <transition name=\"modal\">\n    <div class=\"modal-mask\" @click=\"closeModal()\">\n      <div class=\"automation-report\" @click.stop>\n        <header>\n          <span>{{automation.name}}</span>\n          <i class=\"fal fa-times\" @click=\"closeModal()\"></i>\n        </header>\n        <div class=\"automation-graphic-reports\">\n          <div v-if=\"!selectedAction\">Select an action to get funnel report on that message's conversion.</div>\n          <div class=\"funnel-report\">\n              <horz-bar-chart :chart-data=\"reportData\" :options=\"barChartOptions\" height=\"300\" style=\"padding: 0; margin: 0;\" />\n          </div>\n        </div>\n        <div class=\"automation-analytics\" v-for=\"log in automationLogs\">\n          <div class=\"action-grouping\">\n            <span class=\"analytic-row\"><label>Action: </label><span class=\"selectable\" :class=\"{'selected': log == selectedAction}\" @click=\"selectAction(log)\">{{log.action}}</span> </span>\n            <span class=\"analytic-row\"><label>Time Delay: </label><span>{{log.actiontime}}</span> </span>\n            <span class=\"analytic-row\"><label>Emails Sent: </label><span>{{log.emailSent}}</span> </span>\n            <span class=\"analytic-row\"><label>SMS Sent: </label><span>{{log.smsSent}}</span> </span>\n            <span class=\"analytic-row\"><label>Emails Opened: </label><span>{{log.emailsOpened}}</span> </span>\n            <span class=\"analytic-row\"><label>Emails Clicked: </label><span>{{log.emailClicks}}</span> </span>\n            <span class=\"analytic-row\"><label>SMS Clicked: </label><span>{{log.smsClicks}}</span> </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport {EventService} from '../main.js';\nimport AutomationService from '../services/AutomationService.js';\nimport HorzBarChart from './Charts/HorzBarChart';\n\nexport default {\n  name: 'automationDetails',\n  components: { HorzBarChart },\n  props: ['selectedAutomation'],\n  data: function() {\n    return {\n      automation: {},\n      automationLogs: [{action : '1', actiontime : 0, emailSent : 250, smsSent : 250, emailsOpened : 150, emailClicks : 50, smsClicks : 125}],\n      example: {action : '1', actiontime : 0, emailSent : 250, smsSent : 250, emailsOpened : 150, emailClicks : 50, smsClicks : 125},\n      counter: 0,\n      selectedAction: null,\n      barChartOptions: {\n        maintainAspectRatio: false,\n        barPercentage: 0.8,\n        scales: {\n          xAxes: [{\n            ticks: {\n              min: 0\n            }\n          }]\n        },\n        legend: {\n          display: false\n        }\n      }\n    }\n  },\n  created() {\n    this.automation = this.selectedAutomation;\n    this.setAutomationLogsExample();\n    // this.selectedAction = this.automationLogs[0];\n  },\n  computed: {\n    reportData() {\n      let vm = this;\n      if(vm.selectedAction){\n        let dataSet = [];\n          // console.log(this.selectedAction);\n        Object.keys(vm.selectedAction).forEach(el => {\n          if(`${el}` != 'action' && `${el}` != 'actiontime') {\n            // console.log(parseInt(`${vm.selectedAction[el]}`));\n            dataSet.push(parseInt(`${vm.selectedAction[el]}`));\n          } \n        })\n        return {\n          labels: ['Emails Sent', 'SMS Sent', 'Emails Opened', 'Emails Clicked', 'SMS Clicked'],\n          datasets: [\n            {\n              data: dataSet || [],\n              backgroundColor: [\n                'rgba(79, 203, 197, 1)',\n                'rgba(79, 150, 197, 1)',\n                'rgba(79, 20, 55, 1)',\n                'rgba(166, 34, 197, 1)',\n                'rgba(250, 1, 197, 1)'\n              ]\n            }\n          ]\n        }              \n      }\n    }\n  },\n  methods: {\n    selectAction(action) {\n      this.selectedAction = action;\n    },\n    setAutomationLogsExample() {\n      let vm = this;\n      if(vm.counter < 4) {\n        let test = {};\n      Object.keys(vm.example).forEach((el, i) => {\n        if(`${el}` == 'action') {\n          test[el] = (parseInt(`${vm.example[el]}`) + 1);\n        } else if(`${el}` == 'actiontime') {        \n          test[el] = (parseInt(`${vm.example[el]}`)+ 2);\n        } else {\n          test[el] = Math.ceil(`${vm.example[el]*(Math.random())}`);\n        }\n      })\n      vm.example = test;\n      vm.automationLogs.push(test);\n      vm.counter++\n      vm.setAutomationLogsExample();\n      } else {\n        console.log('Done!');\n      }\n    },\n    closeModal() {\n      this.$emit(\"closeModal\");\n      this.automation = {};\n      EventService.$emit(\"loading\", \"hide\");\n    }\n  }\n}\n</script>\n\n\n<style scoped>\n\n.automation-report {\n  display: flex;\n  flex-direction: column;\n  background: white;\n  width: 80%;\n  height: 700px;\n  margin-top: 60px;\n  margin-left: 50%;\n  transform: translateX(-50%);\n}\n\nheader {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px 30px;\n  font-size: 25px;\n  border-bottom: 1px solid lightgrey;\n  margin-bottom: 30px;\n}\n\nheader i {\n  cursor: pointer;\n  color: grey;\n}\n\n.automation-graphic-reports {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-content: center;\n  align-items: center;\n}\n\n.automation-analytics {\n  display: flex;\n  flex-direction: column;\n}\n\n.action-grouping {\n  display: flex;\n  justify-content: space-around;\n}\n\n.analytic-row {\n  margin-top: 20px;\n}\n\n.selectable {\n  cursor: pointer;\n  color: #4fcbc5;\n}\n\n.selected {\n  color: #f48d46;\n  cursor: unset;\n}\n\n</style>\n"]}]}