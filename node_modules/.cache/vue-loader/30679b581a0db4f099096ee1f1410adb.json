{"remainingRequest":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/Reports/ReviewsByYearReport.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/Reports/ReviewsByYearReport.vue","mtime":1581270622000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7RXZlbnRTZXJ2aWNlfSBmcm9tICcuLi8uLi9tYWluJzsKaW1wb3J0IFJlcG9ydFNlcnZpY2UgZnJvbSAnLi8uLi8uLi9zZXJ2aWNlcy9SZXBvcnRTZXJ2aWNlJwppbXBvcnQgVXNlclNlcnZpY2UgZnJvbSAnLi8uLi8uLi9zZXJ2aWNlcy9Vc2VyU2VydmljZScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUmV2aWV3c0J5WWVhclJlcG9ydCcsCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICByZXZpZXdEYXRhOiBudWxsLAogICAgICBzZWxlY3RlZFllYXI6ICcnLAogICAgICB5ZWFyT3B0aW9uczogW10sCiAgICAgIHByaW9yRGF0YTogW10sCiAgICAgIHByaW9yR29vZ2xlRGF0YToge3ByaW9yUmV2aWV3czogMCwgcHJpb3JSYXRpbmc6IDAuMH0sCiAgICAgIHByaW9yRmFjZWJvb2tEYXRhOiB7cHJpb3JSZXZpZXdzOiAwLCBwcmlvclJhdGluZzogMC4wfSwKICAgICAgcHJpb3JZZWxwRGF0YToge3ByaW9yUmV2aWV3czogMCwgcHJpb3JSYXRpbmc6IDAuMH0sCiAgICAgIHByaW9yT3Bpbmlpb25EYXRhOiB7cHJpb3JSZXZpZXdzOiAwLCBwcmlvclJhdGluZzogMC4wfSwKICAgICAgZGlzcGxheWVkQ2FyZHM6IFtdLAogICAgICB5ZWFySW5kZXg6IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLCAnT2N0JywgJ05vdicsICdEZWMnIF0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBjdXJyZW50TW9udGggKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICBsZXQgbmV3RGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIGxldCBjdXJyZW50TW9udGggPSBuZXdEYXRlLmdldE1vbnRoKCk7CiAgICAgIHJldHVybiB2bS55ZWFySW5kZXhbY3VycmVudE1vbnRoXTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnNldFllYXJPcHRpb25zKCkKICAgIHRoaXMuZ2V0UmV2aWV3c0RhdGEoKTsKICAgIHRoaXMuY2hlY2tGb3JEYXRlKCk7CiAgICBFdmVudFNlcnZpY2UuJG9uKCdsb2NhdGlvbkNoYW5nZScsIHRoaXMuZ2V0UmV2aWV3c0RhdGEpOwogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gKCkgewogICAgRXZlbnRTZXJ2aWNlLiRvZmYoJ2xvY2F0aW9uQ2hhbmdlJywgdGhpcy5nZXRSZXZpZXdzRGF0YSk7CiAgfSwKICBmaWx0ZXJzOiB7CiAgICBvbmVEZWNpbWFsKHZhbHVlKSB7CiAgICAgIHJldHVybiAodmFsdWUpLnRvRml4ZWQoMSk7CiAgICB9LAogICAgLy8gY29tbWFTZXBhcmF0ZSh2YWx1ZSkgewogICAgLy8gICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKS5yZXBsYWNlKC8oXGQpKD89KFxkezN9KSsoPyFcZCkpL2csICckMSwnKTsKICAgIC8vIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNldFllYXJPcHRpb25zKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICB2YXIgdGhpc1llYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7CiAgICAgIGZvcih2YXIgaSA9IDIwMDA7IGkgPCB0aGlzWWVhcisxOyBpKyspIHsKICAgICAgICB2bS55ZWFyT3B0aW9ucy5wdXNoKGkudG9TdHJpbmcoKSkKICAgICAgfQogICAgICB2bS5zZWxlY3RlZFllYXIgPSB0aGlzWWVhci50b1N0cmluZygpOwogICAgfSwKICAgIGdldFJldmlld3NEYXRhKGRhdGEpIHsKICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgInNob3ciKTsKICAgICAgdGhpcy5yZXZpZXdEYXRhID0gbnVsbDsKICAgICAgdmFyIGxvY2F0aW9uSWRBcnJheSA9IFtdOwogICAgICBsZXQgbG9jYXRpb25JZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2NhdGlvbklkJyk7CiAgICAgIGlmKGxvY2F0aW9uSWQpIHsKICAgICAgICBsb2NhdGlvbklkQXJyYXkucHVzaChsb2NhdGlvbklkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBsZXQgbG9jT3B0aW9ucyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2F0aW9uT3B0aW9ucycpKTsKICAgICAgICBsb2NPcHRpb25zLm1hcChlbCA9PiBsb2NhdGlvbklkQXJyYXkucHVzaChlbC5sb2NhdGlvbklkKSk7CiAgICAgIH0KICAgICAgCiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIFJlcG9ydFNlcnZpY2UucmV2aWV3c0J5WWVhcih2bS5zZWxlY3RlZFllYXIsIGxvY2F0aW9uSWRBcnJheSkudGhlbigKICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgRXZlbnRTZXJ2aWNlLiRlbWl0KCJsb2FkaW5nIiwgImhpZGUiKTsKICAgICAgICAgIHZtLnJldmlld0RhdGEgPSByZXNwb25zZS5yZXN1bHQ7CiAgICAgICAgICBsZXQgZ29vZ2xlID0gW107CiAgICAgICAgICBsZXQgZmFjZWJvb2sgPSBbXTsKICAgICAgICAgIGxldCB5ZWxwID0gW107CiAgICAgICAgICBsZXQgb3Bpbmlpb24gPSBbXTsKICAgICAgICAgIHZtLnJldmlld0RhdGEubWFwKG1vbnRoID0+IHsKICAgICAgICAgICAgbW9udGgubmV3UmV2aWV3cy5tYXAoc291cmNlID0+IHsKICAgICAgICAgICAgICBsZXQgbmFtZSA9IHNvdXJjZS5zb3VyY2UudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICBpZihuYW1lID09ICdnb29nbGUnKSB7CiAgICAgICAgICAgICAgICBnb29nbGUucHVzaCgKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHNvdXJjZTogbmFtZSwKICAgICAgICAgICAgICAgICAgICBtb250aDogbW9udGgubmFtZSwKICAgICAgICAgICAgICAgICAgICBhdmVyYWdlUmF0aW5nOiBzb3VyY2UuYXZlcmFnZVJhdGluZywKICAgICAgICAgICAgICAgICAgICBjb3VudDogc291cmNlLmNvdW50CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICB9IGVsc2UgaWYobmFtZSA9PSAnZmFjZWJvb2snKSB7CiAgICAgICAgICAgICAgICBmYWNlYm9vay5wdXNoKAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBuYW1lLAogICAgICAgICAgICAgICAgICAgIG1vbnRoOiBtb250aC5uYW1lLAogICAgICAgICAgICAgICAgICAgIGF2ZXJhZ2VSYXRpbmc6IHNvdXJjZS5hdmVyYWdlUmF0aW5nLAogICAgICAgICAgICAgICAgICAgIGNvdW50OiBzb3VyY2UuY291bnQKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIH0gZWxzZSBpZihuYW1lID09ICd5ZWxwJykgewogICAgICAgICAgICAgICAgeWVscC5wdXNoKAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBuYW1lLAogICAgICAgICAgICAgICAgICAgIG1vbnRoOiBtb250aC5uYW1lLAogICAgICAgICAgICAgICAgICAgIGF2ZXJhZ2VSYXRpbmc6IHNvdXJjZS5hdmVyYWdlUmF0aW5nLAogICAgICAgICAgICAgICAgICAgIGNvdW50OiBzb3VyY2UuY291bnQKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIH0gZWxzZSBpZihuYW1lID09ICdvcGluaWlvbicpIHsKICAgICAgICAgICAgICAgIG9waW5paW9uLnB1c2goCiAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG5hbWUsCiAgICAgICAgICAgICAgICAgICAgbW9udGg6IG1vbnRoLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgYXZlcmFnZVJhdGluZzogc291cmNlLmF2ZXJhZ2VSYXRpbmcsCiAgICAgICAgICAgICAgICAgICAgY291bnQ6IHNvdXJjZS5jb3VudAogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgfSkKICAgICAgICAgIHZtLnJldmlld0RhdGEgPSBbZ29vZ2xlLCBmYWNlYm9vaywgeWVscCwgb3Bpbmlpb25dOwogICAgICAgICAgdm0uZ2V0UHJpb3JEYXRhKCk7CiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0UHJpb3JEYXRhKCkgewogICAgICBsZXQgdm0gPSB0aGlzOwogICAgICB2bS5wcmlvckRhdGEgPSBudWxsOwogICAgICB2bS5wcmlvckdvb2dsZURhdGEgPSB7cHJpb3JSZXZpZXdzOiAwLCBwcmlvclJhdGluZzogMC4wfTsKICAgICAgdm0ucHJpb3JGYWNlYm9va0RhdGEgPSB7cHJpb3JSZXZpZXdzOiAwLCBwcmlvclJhdGluZzogMC4wfTsKICAgICAgdm0ucHJpb3JZZWxwRGF0YSA9IHtwcmlvclJldmlld3M6IDAsIHByaW9yUmF0aW5nOiAwLjB9OwogICAgICB2bS5wcmlvck9waW5paW9uRGF0YSA9IHtwcmlvclJldmlld3M6IDAsIHByaW9yUmF0aW5nOiAwLjB9OwogICAgICB2YXIgbG9jYXRpb25JZEFycmF5ID0gW107CiAgICAgIGxldCBsb2NhdGlvbklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2F0aW9uSWQnKTsKICAgICAgaWYobG9jYXRpb25JZCkgewogICAgICAgIGxvY2F0aW9uSWRBcnJheS5wdXNoKGxvY2F0aW9uSWQpOwogICAgICB9IGVsc2UgewogICAgICAgIGxldCBsb2NPcHRpb25zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9jYXRpb25PcHRpb25zJykpOwogICAgICAgIGxvY09wdGlvbnMubWFwKGVsID0+IGxvY2F0aW9uSWRBcnJheS5wdXNoKGVsLmxvY2F0aW9uSWQpKTsKICAgICAgfQogICAgICBSZXBvcnRTZXJ2aWNlLnJldmlld3NQcmlvclRvWWVhcih2bS5zZWxlY3RlZFllYXIsIGxvY2F0aW9uSWRBcnJheSkudGhlbihyZXNwb25zZSA9PiB7ICAgICAgICAKICAgICAgICBpZihyZXNwb25zZS5yZXN1bHQpIHsKICAgICAgICAgIHZtLnByaW9yRGF0YSA9IHJlc3BvbnNlLnJlc3VsdDsKICAgICAgICAgIHZtLnByaW9yRGF0YS5tYXAoZWwgPT4gewogICAgICAgICAgICBpZihlbC5faWQgPT0gJ0dvb2dsZScpIHsKICAgICAgICAgICAgICB2bS5wcmlvckdvb2dsZURhdGEgPSB7cHJpb3JSZXZpZXdzOiBlbC50b3RhbFJldmlld3MsIHByaW9yUmF0aW5nOiBlbC5hdmVyYWdlUmF0aW5nfQogICAgICAgICAgICB9IGVsc2UgaWYoZWwuX2lkID09ICdGYWNlYm9vaycpIHsKICAgICAgICAgICAgICB2bS5wcmlvckZhY2Vib29rRGF0YSA9IHtwcmlvclJldmlld3M6IGVsLnRvdGFsUmV2aWV3cywgcHJpb3JSYXRpbmc6IGVsLmF2ZXJhZ2VSYXRpbmd9OyAgICAgICAgICAgIAogICAgICAgICAgICB9IGVsc2UgaWYoZWwuX2lkID09ICdZZWxwJykgewogICAgICAgICAgICAgIHZtLnByaW9yWWVscERhdGEgPSB7cHJpb3JSZXZpZXdzOiBlbC50b3RhbFJldmlld3MsIHByaW9yUmF0aW5nOiBlbC5hdmVyYWdlUmF0aW5nfTsKICAgICAgICAgICAgfSBlbHNlIGlmKGVsLl9pZCA9PSAnT3Bpbmlpb24nKSB7CiAgICAgICAgICAgICAgdm0ucHJpb3JPcGluaWlvbkRhdGEgPSB7cHJpb3JSZXZpZXdzOiBlbC50b3RhbFJldmlld3MsIHByaW9yUmF0aW5nOiBlbC5hdmVyYWdlUmF0aW5nfTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIGlmKHZtLnByaW9yR29vZ2xlRGF0YS5wcmlvclJldmlld3MgPT0gMCkgewogICAgICAgICAgICBpZih2bS5yZXZpZXdEYXRhWzBdLnNvbWUoZWwgPT4gewogICAgICAgICAgICAgIHJldHVybiBlbC5jb3VudCA+IDA7CiAgICAgICAgICAgIH0pKSB7CiAgICAgICAgICAgICAgLy8gTm90aGluZyBoYXBwZW5zCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdm0ucmV2aWV3RGF0YS5zcGxpY2UoMCwgMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gCiAgICAgICAgICBpZih2bS5wcmlvckZhY2Vib29rRGF0YS5wcmlvclJldmlld3MgPT0gMCkgewogICAgICAgICAgICBpZih2bS5yZXZpZXdEYXRhW3ZtLnJldmlld0RhdGEubGVuZ3RoIC0gM10uc29tZShlbCA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIGVsLmNvdW50ID4gMDsKICAgICAgICAgICAgfSkpIHsKICAgICAgICAgICAgICAvLyBEbyBOb3RoaW5nCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdm0ucmV2aWV3RGF0YS5zcGxpY2Uodm0ucmV2aWV3RGF0YS5sZW5ndGggLSAzLCAxKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSAKICAgICAgICAgIGlmKHZtLnByaW9yWWVscERhdGEucHJpb3JSZXZpZXdzID09IDApIHsKICAgICAgICAgICAgaWYodm0ucmV2aWV3RGF0YVt2bS5yZXZpZXdEYXRhLmxlbmd0aCAtIDJdLnNvbWUoZWwgPT4gewogICAgICAgICAgICAgIHJldHVybiBlbC5jb3VudCA+IDA7CiAgICAgICAgICAgIH0pKSB7CiAgICAgICAgICAgICAgLy8gRG8gTm90aGluZwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZtLnJldmlld0RhdGEuc3BsaWNlKHZtLnJldmlld0RhdGEubGVuZ3RoIC0gMiwgMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmKHZtLnByaW9yT3Bpbmlpb25EYXRhLnByaW9yUmV2aWV3cyA9PSAwKSB7CiAgICAgICAgICAgIGlmKHZtLnJldmlld0RhdGFbdm0ucmV2aWV3RGF0YS5sZW5ndGggLSAxXS5zb21lKGVsID0+IHsKICAgICAgICAgICAgICByZXR1cm4gZWwuY291bnQgPiAwOwogICAgICAgICAgICB9KSkgewogICAgICAgICAgICAgIC8vIERvIE5vdGhpbmcKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2bS5yZXZpZXdEYXRhLnNwbGljZSh2bS5yZXZpZXdEYXRhLmxlbmd0aCAtIDEsIDEpOyAgICAgICAgICAgIAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGdldEljb25Gb3JTb3VyY2Uoc291cmNlKSB7CiAgICAgIGlmIChzb3VyY2UgPT0gImdvb2dsZSIpIHsKICAgICAgICByZXR1cm4gcmVxdWlyZSgiLi4vLi4vLi4vcHVibGljL2ltZy9Hb29nbGVfSWNvbi5wbmciKTsKICAgICAgfSBlbHNlIGlmIChzb3VyY2UgPT0gInllbHAiKSB7CiAgICAgICAgcmV0dXJuIHJlcXVpcmUoIi4uLy4uLy4uL3B1YmxpYy9pbWcvWWVscF9JY29uLnBuZyIpOwogICAgICB9IGVsc2UgaWYgKHNvdXJjZSA9PSAiZmFjZWJvb2siKSB7CiAgICAgICAgcmV0dXJuIHJlcXVpcmUoIi4uLy4uLy4uL3B1YmxpYy9pbWcvRmFjZWJvb2tfSWNvbi5wbmciKTsKICAgICAgfSBlbHNlIGlmIChzb3VyY2UgPT0gImZvdXJzcXVhcmUiKSB7CiAgICAgICAgcmV0dXJuIHJlcXVpcmUoIi4uLy4uLy4uL3B1YmxpYy9pbWcvRm91cnNxdWFyZV9JY29uLnBuZyIpOwogICAgICB9IGVsc2UgaWYgKHNvdXJjZSA9PSAiY2l0eXNlYXJjaCIpIHsKICAgICAgICByZXR1cm4gcmVxdWlyZSgiLi4vLi4vLi4vcHVibGljL2ltZy9DaXR5c2VhcmNoX0ljb24ucG5nIik7CiAgICAgIH0gZWxzZSBpZiAoc291cmNlID09ICJ5ZWxsb3dwYWdlcyIpIHsKICAgICAgICByZXR1cm4gcmVxdWlyZSgiLi4vLi4vLi4vcHVibGljL2ltZy9ZUF9JY29uLnBuZyIpOwogICAgICAgIC8vIH0gZWxzZSBpZiAoc291cmNlID09ICdUcmlwQWR2aXNvcicpIHsKICAgICAgICAvLyAgIHJldHVybiByZXF1aXJlKCcuLi8uLi8uLi9wdWJsaWMvaW1nL1RyaXBBZHZpc29yX0ljb24ucG5nJyk7CiAgICAgICAgLy8gfSBlbHNlIGlmIChzb3VyY2UgPT0gJ0JCQicpIHsKICAgICAgICAvLyAgIHJldHVybiByZXF1aXJlKCcuLi8uLi8uLi9wdWJsaWMvaW1nL0JCQl9JY29uLnBuZycpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiByZXF1aXJlKCIuLi8uLi8uLi9wdWJsaWMvaW1nL09waW5paW9uX0ljb24ucG5nIik7CiAgICAgIH0KICAgIH0sCiAgICBnZXRQcmlvckFtb3VudHMoaW5kZXgsIGRhdGEpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgcmV0dXJuIGRhdGEucmVkdWNlKChhY2MsIGN1cnIsIGkpID0+IHsKICAgICAgICBpZihpIDwgaW5kZXgpIHsKICAgICAgICAgIHJldHVybiBhY2MgKyBjdXJyLmNvdW50CiAgICAgICAgfcKgZWxzZSB7CiAgICAgICAgICByZXR1cm4gYWNjOwogICAgICAgIH0KICAgICAgfSwgMCkKICAgIH0sCiAgICBjaGVja0ZvckRhdGUoZGF0YXApIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKTsKICAgICAgbGV0IHRoaXNZZWFyID0gdG9kYXkuZ2V0RnVsbFllYXIoKTsKICAgICAgbGV0IHNlbFllYXIgPSB2bS5zZWxlY3RlZFllYXI7CiAgICAgIGlmKHRoaXNZZWFyID09IHNlbFllYXIpIHsgICAgICAgIAogICAgICAgIGlmKGRhdGFwICYmIGRhdGFwLm1vbnRoKSB7CiAgICAgICAgICBsZXQgdGhpc01vbnRoID0gdG9kYXkudG9TdHJpbmcoKS5zdWJzdHIoNCwzKQogICAgICAgICAgbGV0IGRhdGFNb250aCA9IGRhdGFwLm1vbnRoLnN1YnN0cigwLDMpOwogICAgICAgICAgaWYodm0ueWVhckluZGV4LmluZGV4T2YoZGF0YU1vbnRoKSA+IHZtLnllYXJJbmRleC5pbmRleE9mKHRoaXNNb250aCkpIHsKICAgICAgICAgICAgcmV0dXJuICctJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBkYXRhcC5jb3VudDsKICAgICAgICAgIH0gICAgICAgIAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gJy0nCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBkYXRhcC5jb3VudDsKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["ReviewsByYearReport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ReviewsByYearReport.vue","sourceRoot":"src/components/Reports","sourcesContent":["<template>\n  <div id=\"reviews-by-source-report-wrapper\">\n    <!-- <div id=\"report-header\">\n      <div id=\"report-name-wrapper\">\n        Reviews by Year\n      </div>\n      <div id=\"report-options-wrapper\">\n        <label>Selected Year</label>\n        <select v-model=\"selectedYear\" @change=\"getReviewsData()\">\n          <option :value=\"option\" v-for=\"option in yearOptions\">{{option}}</option>\n        </select>\n      </div>\n    </div> -->\n    <div id=\"report-header\" class=\"box-shadow\">\n      <div id=\"report-name-wrapper\">\n        Reviews by Year\n      </div>\n      <div id=\"report-options-wrapper\">\n        <el-date-picker\n          v-model=\"selectedYear\"\n          @input=\"getReviewsData\"\n          type=\"year\"\n          placeholder=\"Select year\"\n          value-format=\"yyyy\" />\n      </div>\n    </div>\n    <div id=\"report-body\">\n      <div v-if=\"reviewData && reviewData.length\" class=\"card-wrapper\">\n        <!-- <div class=\"report-data\" v-for=\"data in reviewData\">\n          <span class='source-name-icon'>\n            <img :src=\"getIconForSource(data[0].source)\" height=\"30\" style=\"padding: 0 10px 0 5px;\"/> {{data[0].source}}\n          </span>\n          <div class=\"labels\">\n            <span>Total Reviews</span>\n            <span>New Reviews</span>\n            <span>Monthly Rating</span>\n          </div>\n          <div class=\"report-box\" v-for=\"(datap, i) in data\">\n            <span>\n              {{datap.month.substr(0,3)}}\n            </span>\n            <span v-if=\"data[0].source == 'google'\">\n              {{datap.count + getPriorAmounts(i, data) + priorGoogleData.priorReviews}}\n            </span>\n            <span v-if=\"data[0].source == 'facebook'\">\n              {{datap.count + getPriorAmounts(i, data) + priorFacebookData.priorReviews}}\n            </span>\n            <span v-if=\"data[0].source == 'yelp'\">\n              {{datap.count + getPriorAmounts(i, data) + priorYelpData.priorReviews}}\n            </span>\n            <span v-if=\"data[0].source == 'opiniion'\">\n              {{datap.count + getPriorAmounts(i, data) + priorOpiniionData.priorReviews}}\n            </span>\n            <span>\n            {{checkForDate(datap)}}\n            </span>\n            <span v-if=\"!isNaN(datap.averageRating)\">\n            {{datap.averageRating}}\n            </span>\n            <span v-else>\n              -\n            </span>\n          </div>         \n        </div> -->\n        <div class=\"card-RbY \" v-for=\"(data, dataIndex) in reviewData\" :key=\"dataIndex\">\n              <el-card  class=\"box-card\">\n                  <el-row>\n                    <el-col :span=\"24\">\n                      <img class=\"cardIcons\" :src=\"getIconForSource(data[0].source)\" alt=\"Logo\"> <p  class=\"cardTitle\">{{data[0].source}}</p>\n                    </el-col>\n                    <!-- <el-col :span=\"5\">\n                      <el-select placeholder=\"Last 12 Months\">\n                      </el-select>\n                    </el-col> -->\n                  </el-row>\n                  <br>\n                  <el-row :gutter=\"20\">\n                    <el-col :span=\"4\">\n                      <div class=\"labels\">\n                        <span>Total Reviews</span>\n                        <span>New Reviews</span>\n                        <span>Monthly Rating</span>\n                      </div>\n                    </el-col>\n                    <el-col :span=\"18\" class=\"report-box-wrapper\">\n                      <div :class=\"['report-box', {'current-month': datap.month.substr(0,3) == currentMonth}]\" v-for=\"(datap, i) in data\" :key=\"i\">\n                        <span>\n                          {{datap.month.substr(0,3)}}\n                        </span>\n                        <span v-if=\"data[0].source == 'google'\">\n                          {{datap.count + getPriorAmounts(i, data) + priorGoogleData.priorReviews}}\n                        </span>\n                        <span v-if=\"data[0].source == 'facebook'\">\n                          {{datap.count + getPriorAmounts(i, data) + priorFacebookData.priorReviews}}\n                        </span>\n                        <span v-if=\"data[0].source == 'yelp'\">\n                          {{datap.count + getPriorAmounts(i, data) + priorYelpData.priorReviews}}\n                        </span>\n                        <span v-if=\"data[0].source == 'opiniion'\">\n                          {{datap.count + getPriorAmounts(i, data) + priorOpiniionData.priorReviews}}\n                        </span>\n                        <span>\n                        {{checkForDate(datap)}}\n                        </span>\n                        <span v-if=\"!isNaN(datap.averageRating)\">\n                        {{datap.averageRating}}\n                        </span>\n                        <span v-else>\n                          -\n                        </span>\n                      </div>         \n                    </el-col>\n                  </el-row>\n                  <!-- <el-divider></el-divider> -->\n                  <div class=\"cardFooter\">\n               <!-- <i class=\"el-icon-refresh\"></i> Updated in the last hour -->\n              </div>\n              </el-card>\n        </div>\n      </div>\n      <div v-if=\"!reviewData || !reviewData.length\" class=\"no-data\">\n        No data found for selected year.\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {EventService} from '../../main';\nimport ReportService from './../../services/ReportService'\nimport UserService from './../../services/UserService'\n\nexport default {\n  name: 'ReviewsByYearReport',\n  data: function() {\n    return {\n      reviewData: null,\n      selectedYear: '',\n      yearOptions: [],\n      priorData: [],\n      priorGoogleData: {priorReviews: 0, priorRating: 0.0},\n      priorFacebookData: {priorReviews: 0, priorRating: 0.0},\n      priorYelpData: {priorReviews: 0, priorRating: 0.0},\n      priorOpiniionData: {priorReviews: 0, priorRating: 0.0},\n      displayedCards: [],\n      yearIndex: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ]\n    }\n  },\n  computed: {\n    currentMonth () {\n      let vm = this;\n      let newDate = new Date();\n      let currentMonth = newDate.getMonth();\n      return vm.yearIndex[currentMonth];\n    }\n  },\n  created() {\n    this.setYearOptions()\n    this.getReviewsData();\n    this.checkForDate();\n    EventService.$on('locationChange', this.getReviewsData);\n  },\n  beforeDestroy: function () {\n    EventService.$off('locationChange', this.getReviewsData);\n  },\n  filters: {\n    oneDecimal(value) {\n      return (value).toFixed(1);\n    },\n    // commaSeparate(value) {\n    //   return value.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,');\n    // }\n  },\n  methods: {\n    setYearOptions() {\n      let vm = this;\n      var thisYear = new Date().getFullYear();\n      for(var i = 2000; i < thisYear+1; i++) {\n        vm.yearOptions.push(i.toString())\n      }\n      vm.selectedYear = thisYear.toString();\n    },\n    getReviewsData(data) {\n      EventService.$emit(\"loading\", \"show\");\n      this.reviewData = null;\n      var locationIdArray = [];\n      let locationId = localStorage.getItem('locationId');\n      if(locationId) {\n        locationIdArray.push(locationId);\n      } else {\n        let locOptions = JSON.parse(localStorage.getItem('locationOptions'));\n        locOptions.map(el => locationIdArray.push(el.locationId));\n      }\n      \n      var vm = this;\n      ReportService.reviewsByYear(vm.selectedYear, locationIdArray).then(\n        function(response) {\n          EventService.$emit(\"loading\", \"hide\");\n          vm.reviewData = response.result;\n          let google = [];\n          let facebook = [];\n          let yelp = [];\n          let opiniion = [];\n          vm.reviewData.map(month => {\n            month.newReviews.map(source => {\n              let name = source.source.toLowerCase();\n              if(name == 'google') {\n                google.push(\n                  {\n                    source: name,\n                    month: month.name,\n                    averageRating: source.averageRating,\n                    count: source.count\n                  }\n                )\n              } else if(name == 'facebook') {\n                facebook.push(\n                  {\n                    source: name,\n                    month: month.name,\n                    averageRating: source.averageRating,\n                    count: source.count\n                  }\n                )\n              } else if(name == 'yelp') {\n                yelp.push(\n                  {\n                    source: name,\n                    month: month.name,\n                    averageRating: source.averageRating,\n                    count: source.count\n                  }\n                )\n              } else if(name == 'opiniion') {\n                opiniion.push(\n                  {\n                    source: name,\n                    month: month.name,\n                    averageRating: source.averageRating,\n                    count: source.count\n                  }\n                )\n              }\n            })\n          })\n          vm.reviewData = [google, facebook, yelp, opiniion];\n          vm.getPriorData();\n        }, function(error) {\n          console.log(error);\n      });\n    },\n    getPriorData() {\n      let vm = this;\n      vm.priorData = null;\n      vm.priorGoogleData = {priorReviews: 0, priorRating: 0.0};\n      vm.priorFacebookData = {priorReviews: 0, priorRating: 0.0};\n      vm.priorYelpData = {priorReviews: 0, priorRating: 0.0};\n      vm.priorOpiniionData = {priorReviews: 0, priorRating: 0.0};\n      var locationIdArray = [];\n      let locationId = localStorage.getItem('locationId');\n      if(locationId) {\n        locationIdArray.push(locationId);\n      } else {\n        let locOptions = JSON.parse(localStorage.getItem('locationOptions'));\n        locOptions.map(el => locationIdArray.push(el.locationId));\n      }\n      ReportService.reviewsPriorToYear(vm.selectedYear, locationIdArray).then(response => {        \n        if(response.result) {\n          vm.priorData = response.result;\n          vm.priorData.map(el => {\n            if(el._id == 'Google') {\n              vm.priorGoogleData = {priorReviews: el.totalReviews, priorRating: el.averageRating}\n            } else if(el._id == 'Facebook') {\n              vm.priorFacebookData = {priorReviews: el.totalReviews, priorRating: el.averageRating};            \n            } else if(el._id == 'Yelp') {\n              vm.priorYelpData = {priorReviews: el.totalReviews, priorRating: el.averageRating};\n            } else if(el._id == 'Opiniion') {\n              vm.priorOpiniionData = {priorReviews: el.totalReviews, priorRating: el.averageRating};\n            }\n          })\n          if(vm.priorGoogleData.priorReviews == 0) {\n            if(vm.reviewData[0].some(el => {\n              return el.count > 0;\n            })) {\n              // Nothing happens\n            } else {\n              vm.reviewData.splice(0, 1);\n            }\n          } \n          if(vm.priorFacebookData.priorReviews == 0) {\n            if(vm.reviewData[vm.reviewData.length - 3].some(el => {\n              return el.count > 0;\n            })) {\n              // Do Nothing\n            } else {\n              vm.reviewData.splice(vm.reviewData.length - 3, 1);\n            }\n          } \n          if(vm.priorYelpData.priorReviews == 0) {\n            if(vm.reviewData[vm.reviewData.length - 2].some(el => {\n              return el.count > 0;\n            })) {\n              // Do Nothing\n            } else {\n              vm.reviewData.splice(vm.reviewData.length - 2, 1);\n            }\n          }\n          if(vm.priorOpiniionData.priorReviews == 0) {\n            if(vm.reviewData[vm.reviewData.length - 1].some(el => {\n              return el.count > 0;\n            })) {\n              // Do Nothing\n            } else {\n              vm.reviewData.splice(vm.reviewData.length - 1, 1);            \n            }\n          }\n        }\n      })\n    },\n    getIconForSource(source) {\n      if (source == \"google\") {\n        return require(\"../../../public/img/Google_Icon.png\");\n      } else if (source == \"yelp\") {\n        return require(\"../../../public/img/Yelp_Icon.png\");\n      } else if (source == \"facebook\") {\n        return require(\"../../../public/img/Facebook_Icon.png\");\n      } else if (source == \"foursquare\") {\n        return require(\"../../../public/img/Foursquare_Icon.png\");\n      } else if (source == \"citysearch\") {\n        return require(\"../../../public/img/Citysearch_Icon.png\");\n      } else if (source == \"yellowpages\") {\n        return require(\"../../../public/img/YP_Icon.png\");\n        // } else if (source == 'TripAdvisor') {\n        //   return require('../../../public/img/TripAdvisor_Icon.png');\n        // } else if (source == 'BBB') {\n        //   return require('../../../public/img/BBB_Icon.png');\n      } else {\n        return require(\"../../../public/img/Opiniion_Icon.png\");\n      }\n    },\n    getPriorAmounts(index, data) {\n      let vm = this;\n      return data.reduce((acc, curr, i) => {\n        if(i < index) {\n          return acc + curr.count\n        } else {\n          return acc;\n        }\n      }, 0)\n    },\n    checkForDate(datap) {\n      let vm = this;\n      let today = new Date();\n      let thisYear = today.getFullYear();\n      let selYear = vm.selectedYear;\n      if(thisYear == selYear) {        \n        if(datap && datap.month) {\n          let thisMonth = today.toString().substr(4,3)\n          let dataMonth = datap.month.substr(0,3);\n          if(vm.yearIndex.indexOf(dataMonth) > vm.yearIndex.indexOf(thisMonth)) {\n            return '-';\n          } else {\n            return datap.count;\n          }        \n        } else {\n          return '-'\n        }\n      } else {\n        return datap.count;\n      }\n    }\n  }\n}\n</script>\n\n\n<style scoped>\n.current-month {\n  color: var(--opiniionblue);\n}\n.current-month.report-box span:nth-child(n+2) {\n  background: #E9F9F9;\n  color: var(--opiniionblue);\n  font-weight: bolder;\n  transition: all .2s ease;\n  -webkit-transition: all .2s ease;\n}\n.current-month.report-box span:nth-child(n+2):hover {\n  background: #B1E8E8;\n  color: white;\n}\n#report-header {\n    background: white;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-left: 2px;\n    height: 66px;\n    color: #545454;\n  }\n\n  #report-content-wrapper {\n    width: 100%;\n  }\n\n  #report-name-wrapper {\n    font-size: 24px;\n    padding: 20px 0 20px 20px;\n    font-weight: 700;\n  }\n\n  .card-wrapper {\n    display: flex;\n    flex-wrap: wrap;\n    padding: 5px;\n  }\n\n  #report-options-wrapper {\n    font-size: 20px;\n    padding: 20px 20px 10px 0;\n    display: flex;\n    align-items: baseline;\n  }\n\n  #report-options-wrapper > div {\n    margin-right: 20px;\n  }\n\n  .card {\n    width: 20vw;\n    background: white;\n    margin: 5px;\n  }\n\n  .card-title {\n    width: auto;\n    display: flex;\n    padding: 10px 5px;\n    border-bottom: .5px solid lightgray;\n    align-items: center;\n    font-weight: 600;\n    font-size: 14px;\n  }\n\n  .card-body {\n    display: flex;\n    justify-content: space-evenly;\n    padding: 10px 0 36px;\n  }\n\n  .total-reviews-wrapper,\n  .average-rating-wrapper {\n    text-align: center;\n    display: flex;\n    flex-direction: column;\n    margin: 7px 0;\n  }\n\n  .total-reviews-header,\n  .average-rating-header {\n    font-size: 12px;\n  }\n\n  .total-reviews-body,\n  .average-rating-body {\n    border: 1px solid black;\n    font-size: 30px;\n    font-weight: bold;\n    align-self: center;\n    margin-top: 5px;\n  }\n\n  .total-reviews-body {\n    padding: 20px;\n  }\n\n  .average-rating-body {\n    padding: 15px;\n  }\n\n  .report-body {\n    display: flex;\n    flex-direction: row;\n  }\n\n  .report-data {\n    width: 100%;\n    position: relative;\n    display: flex;\n    margin: 20px;\n    padding: 20px;\n    padding-top: 80px;\n    padding-bottom: 50px;\n    background: white;\n    box-shadow: 0 4px 8px rgba(0,0,0,.15);\n    justify-content: center;\n  }\n\n  .source-name-icon {\n    text-transform: capitalize;\n    position: absolute;\n    top: 5px;\n    left: 0;\n    display: flex;\n    align-items: center;\n    width: 100%;\n    border-bottom: 1px solid lightgrey;\n    padding-bottom: 5px;\n    font-weight: 800;\n  }\n\n  .report-box-wrapper {\n    display: flex;\n    width: 880px;\n    height: 225px;\n    overflow-x: auto;\n    overflow-y: hidden;\n  }\n\n  .report-box {\n    display: flex;\n    flex-direction: column;\n    text-align: center;\n    width: 100%;\n  }\n\n  .report-box span:nth-child(1) {\n    margin-bottom: 10px;\n    font-weight: 600;\n    font-size: 14px;\n  }\n\n  .report-box span:nth-child(n+2) {\n    border: 1px solid #eeecec;\n    padding: 20px 5px;\n    font-weight: 600;\n    box-sizing: border-box;\n    transition: all .2s ease;\n    -webkit-transition: all .2s ease;\n  }\n  .report-box span:nth-child(n+2):hover {\n    background: #fafafa;\n  }\n\n  .labels {\n    text-align: right;\n    font-size: 14px;\n    font-weight: 600;\n  }\n\n  .labels span {\n    display: block;\n    /* margin: 25px 15px 35px 0; */\n    /* margin-top: 38px */\n    margin-top: 45px;\n  }\n\n  #report-header {\n    background: transparent;\n    display: flex;\n    justify-content: space-between;\n    margin-left: 2px;\n    height: 66px;\n    box-shadow: transparent;\n    color: #545454;\n  }\n  .card-RbY {\n    /* width: 90%; */\n    /* margin-top: 75px; */\n    /* margin-left: 5% */\n    margin-top: 40px;\n    padding-left: 30px;\n    /* width: 80%; */\n    width: 90%;\n    max-width: 1200px;\n  }\n  .cardIcons {\n    float: left;\n    height: 25px;\n  }\n  .cardTitle {\n    float: left;\n    text-transform:capitalize;\n    margin-top: 5px;\n    margin-left: 10px\n\n  }\n\n  .cardFooter {\n    font-size: 14px;\n    padding-top: 20px;\n  }\n  .export-btn {\n    margin-top: -10px;\n    margin-left: 20px;\n    background-color: #66615B;\n    border: none\n  }\n  .export-btn:hover {\n    background-color: #66615B\n  }\n</style>\n"]}]}