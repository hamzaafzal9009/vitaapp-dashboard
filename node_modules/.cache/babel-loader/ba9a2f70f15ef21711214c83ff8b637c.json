{"remainingRequest":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/DashboardComponents/NewCustomers.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/components/DashboardComponents/NewCustomers.vue","mtime":1581270622000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/package.json","mtime":1587799327166},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYucmVnZXhwLnJlcGxhY2UiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgRGFzaGJvYXJkU2VydmljZSBmcm9tICIuLy4uLy4uL3NlcnZpY2VzL0Rhc2hib2FyZFNlcnZpY2UiOwppbXBvcnQgeyBFdmVudFNlcnZpY2UgfSBmcm9tICIuLi8uLi9tYWluIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICduZXdDdXN0b21lcnMnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjYXJkRGF0YTogbnVsbCwKICAgICAgdGltZWZyYW1lOiAzMCwKICAgICAgc2hvd0xvYWRpbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgRXZlbnRTZXJ2aWNlLiRvbignbG9jYXRpb25DaGFuZ2UnLCB0aGlzLmdldERhdGEpOwogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIEV2ZW50U2VydmljZS4kb2ZmKCdsb2NhdGlvbkNoYW5nZScsIHRoaXMuZ2V0RGF0YSk7CiAgfSwKICBmaWx0ZXJzOiB7CiAgICBmb3JtYXROdW06IGZ1bmN0aW9uIGZvcm1hdE51bSh2YWx1ZSkgewogICAgICB2YXIgdmFsID0gKHZhbHVlIC8gMSkudG9GaXhlZCgwKS5yZXBsYWNlKCcuJywgJywnKTsKICAgICAgcmV0dXJuIHZhbC50b1N0cmluZygpLnJlcGxhY2UoL1xCKD89KFxkezN9KSsoPyFcZCkpL2csICIsIik7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBmb2xsb3dMaW5rOiBmdW5jdGlvbiBmb2xsb3dMaW5rKHRhcmdldFBhZ2UpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2godGFyZ2V0UGFnZSk7CiAgICB9LAogICAgY2hhbmdlVGltZWZyYW1lOiBmdW5jdGlvbiBjaGFuZ2VUaW1lZnJhbWUodGltZSkgewogICAgICB0aGlzLnRpbWVmcmFtZSA9IHRpbWU7CiAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgfSwKICAgIGNoZWNrRm9yU2VsZWN0ZWQ6IGZ1bmN0aW9uIGNoZWNrRm9yU2VsZWN0ZWQoY29tbWFuZCkgewogICAgICB2YXIgdm0gPSB0aGlzOwoKICAgICAgaWYgKGNvbW1hbmQgPT0gdm0udGltZWZyYW1lKSB7CiAgICAgICAgcmV0dXJuICdlbC1pY29uLWNoZWNrJzsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KICAgIH0sCiAgICBnZXREYXRhOiBmdW5jdGlvbiBnZXREYXRhKCkgewogICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdmFyIGxvY2F0aW9uSWRBcnJheSA9IFtdOwogICAgICB2YXIgbG9jYXRpb25JZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2NhdGlvbklkJyk7CgogICAgICBpZiAobG9jYXRpb25JZCkgewogICAgICAgIGxvY2F0aW9uSWRBcnJheS5wdXNoKGxvY2F0aW9uSWQpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBsb2NPcHRpb25zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9jYXRpb25PcHRpb25zJykpOwogICAgICAgIGxvY09wdGlvbnMubWFwKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgcmV0dXJuIGxvY2F0aW9uSWRBcnJheS5wdXNoKGVsLmxvY2F0aW9uSWQpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICB2YXIgc2VhcmNoT2JqZWN0ID0gewogICAgICAgIGxvY2F0aW9uczogbG9jYXRpb25JZEFycmF5LAogICAgICAgIHRpbWVmcmFtZTogdm0udGltZWZyYW1lCiAgICAgIH07CiAgICAgIERhc2hib2FyZFNlcnZpY2UuZ2V0TmV3Q3VzdG9tZXJzKHNlYXJjaE9iamVjdCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2bS5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgIHZtLmNhcmREYXRhID0gcmVzcG9uc2U7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["NewCustomers.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,OAAA,gBAAA;AACA,SAAA,YAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,IADA;AAEA,MAAA,SAAA,EAAA,EAFA;AAGA,MAAA,WAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,OATA,qBASA;AACA,SAAA,OAAA;AACA,IAAA,YAAA,CAAA,GAAA,CAAA,gBAAA,EAAA,KAAA,OAAA;AACA,GAZA;AAaA,EAAA,aAAA,EAAA,yBAAA;AACA,IAAA,YAAA,CAAA,IAAA,CAAA,gBAAA,EAAA,KAAA,OAAA;AACA,GAfA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,qBACA,KADA,EACA;AACA,UAAA,GAAA,GAAA,CAAA,KAAA,GAAA,CAAA,EAAA,OAAA,CAAA,CAAA,EAAA,OAAA,CAAA,GAAA,EAAA,GAAA,CAAA;AACA,aAAA,GAAA,CAAA,QAAA,GAAA,OAAA,CAAA,uBAAA,EAAA,GAAA,CAAA;AACA;AAJA,GAhBA;AAsBA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,UADA,EACA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,UAAA;AACA,KAHA;AAIA,IAAA,eAJA,2BAIA,IAJA,EAIA;AACA,WAAA,SAAA,GAAA,IAAA;AACA,WAAA,OAAA;AACA,KAPA;AAQA,IAAA,gBARA,4BAQA,OARA,EAQA;AACA,UAAA,EAAA,GAAA,IAAA;;AACA,UAAA,OAAA,IAAA,EAAA,CAAA,SAAA,EAAA;AACA,eAAA,eAAA;AACA,OAFA,MAEA;AACA,eAAA,EAAA;AACA;AACA,KAfA;AAgBA,IAAA,OAhBA,qBAgBA;AACA,WAAA,WAAA,GAAA,IAAA;AACA,UAAA,EAAA,GAAA,IAAA;AACA,UAAA,eAAA,GAAA,EAAA;AACA,UAAA,UAAA,GAAA,YAAA,CAAA,OAAA,CAAA,YAAA,CAAA;;AACA,UAAA,UAAA,EAAA;AACA,QAAA,eAAA,CAAA,IAAA,CAAA,UAAA;AACA,OAFA,MAEA;AACA,YAAA,UAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,CAAA;AACA,QAAA,UAAA,CAAA,GAAA,CAAA,UAAA,EAAA;AAAA,iBAAA,eAAA,CAAA,IAAA,CAAA,EAAA,CAAA,UAAA,CAAA;AAAA,SAAA;AACA;;AAEA,UAAA,YAAA,GAAA;AACA,QAAA,SAAA,EAAA,eADA;AAEA,QAAA,SAAA,EAAA,EAAA,CAAA;AAFA,OAAA;AAKA,MAAA,gBAAA,CAAA,eAAA,CAAA,YAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,EAAA,CAAA,WAAA,GAAA,KAAA;AACA,QAAA,EAAA,CAAA,QAAA,GAAA,QAAA;AACA,OAHA;AAIA;AArCA;AAtBA,CAAA","sourcesContent":["<template>\n  <el-card shadow=\"always\" class=\"short-card\">\n    <el-row>\n      <el-col :span=\"12\">\n        <div class=\"o-card-title-3 clickable\" @click=\"followLink('/customerList')\">\n          New Customers\n        </div>\n        <div class=\"o-card-data\" v-show=\"!showLoading && cardData >= 0\">\n          {{ cardData | formatNum }}\n        </div>\n        <div class=\"dashboard-row dashboard-loader\" v-show=\"showLoading\"><i class=\"far fa-hourglass fa-spin\"></i></div>\n      </el-col>\n      <el-col :span=\"11\">\n        <div class=\"o-card-icon\">\n          <i class=\"fas fa-user-friends opiniion-blue\"></i>\n        </div>\n      </el-col>\n      <el-col :span=\"1\">\n        <el-dropdown trigger=\"click\" @command=\"changeTimeframe\">\n          <span class=\"opiniion-grey el-dropdown-link\">\n            <i class=\"fa fa-ellipsis-v clickable\" aria-hidden=\"true\"></i>\n          </span>\n          <el-dropdown-menu slot=\"dropdown\">\n            <el-dropdown-item :icon=\"checkForSelected('always')\" command=\"always\">All time</el-dropdown-item>\n            <el-dropdown-item :icon=\"checkForSelected(30)\" :command=\"30\">Last 30 days</el-dropdown-item>\n            <el-dropdown-item :icon=\"checkForSelected(120)\" :command=\"120\">Last 3 months</el-dropdown-item>\n            <el-dropdown-item :icon=\"checkForSelected(240)\" :command=\"240\">Last 6 months</el-dropdown-item>\n            <el-dropdown-item :icon=\"checkForSelected(365)\" :command=\"365\">In the last year</el-dropdown-item>\n          </el-dropdown-menu>\n        </el-dropdown>\n      </el-col>\n    </el-row>\n  </el-card>\n</template>\n\n<script>\nimport DashboardService from './../../services/DashboardService'\nimport {EventService} from '../../main'\n\nexport default {\n  name: 'newCustomers',\n  data() {\n    return {\n      cardData: null,\n      timeframe: 30,\n      showLoading: false\n    }\n  },\n  created() {\n    this.getData();\n    EventService.$on('locationChange', this.getData);\n  },\n  beforeDestroy: function () {\n    EventService.$off('locationChange', this.getData);\n  },\n  filters: {\n    formatNum(value) {\n        let val = (value/1).toFixed(0).replace('.', ',')\n        return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n    }\n  },\n  methods: {\n    followLink(targetPage) {\n      this.$router.push(targetPage);\n    },\n    changeTimeframe(time) {\n      this.timeframe = time;\n      this.getData();\n    },\n    checkForSelected(command) {\n      let vm = this;\n      if(command == vm.timeframe) {\n        return 'el-icon-check'\n      } else {\n        return '';\n      }\n    },\n    getData() {\n      this.showLoading = true;\n      var vm = this;\n      let locationIdArray = [];\n      let locationId = localStorage.getItem('locationId');\n      if(locationId) {\n        locationIdArray.push(locationId);\n      } else {\n        let locOptions = JSON.parse(localStorage.getItem('locationOptions'));\n        locOptions.map(el => locationIdArray.push(el.locationId));\n      }\n\n      let searchObject = {\n        locations: locationIdArray,\n        timeframe: vm.timeframe\n      }\n\n      DashboardService.getNewCustomers(searchObject).then(function(response) {\n        vm.showLoading = false;\n        vm.cardData = response;\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/components/DashboardComponents"}]}