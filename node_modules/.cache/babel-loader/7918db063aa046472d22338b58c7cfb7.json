{"remainingRequest":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js!/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/DashboardComponents/OpiniionRating.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/src/components/DashboardComponents/OpiniionRating.vue","mtime":1581270622000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/package.json","mtime":1587799327166},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hamzaafzal/OLD DATA/Mac Home/vueJS/OPINIION FINAL/opiniionv4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYucmVnZXhwLnJlcGxhY2UiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgRGFzaGJvYXJkU2VydmljZSBmcm9tICIuLy4uLy4uL3NlcnZpY2VzL0Rhc2hib2FyZFNlcnZpY2UiOwppbXBvcnQgeyBFdmVudFNlcnZpY2UgfSBmcm9tICIuLi8uLi9tYWluIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdvcGluaWlvblJhdGluZycsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNhcmREYXRhOiAwLAogICAgICB0aW1lZnJhbWU6IDMwLAogICAgICBzaG93TG9hZGluZzogdHJ1ZQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldERhdGEoKTsKICAgIEV2ZW50U2VydmljZS4kb24oJ2xvY2F0aW9uQ2hhbmdlJywgdGhpcy5nZXREYXRhKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICBFdmVudFNlcnZpY2UuJG9mZignbG9jYXRpb25DaGFuZ2UnLCB0aGlzLmdldERhdGEpOwogIH0sCiAgZmlsdGVyczogewogICAgZm9ybWF0TnVtOiBmdW5jdGlvbiBmb3JtYXROdW0odmFsdWUpIHsKICAgICAgdmFyIHZhbCA9ICh2YWx1ZSAvIDEpLnRvRml4ZWQoMCkucmVwbGFjZSgnLicsICcsJyk7CiAgICAgIHJldHVybiB2YWwudG9TdHJpbmcoKS5yZXBsYWNlKC9cQig/PShcZHszfSkrKD8hXGQpKS9nLCAiLCIpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZm9sbG93TGluazogZnVuY3Rpb24gZm9sbG93TGluayh0YXJnZXRQYWdlKSB7CiAgICAgIHRyeSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Bhc3NlZEZpbHRlcnMnLCBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICBuYW1lOiAnc291cmNlJywKICAgICAgICAgIHZhbHVlOiBbJ09waW5paW9uJ10KICAgICAgICB9KSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CgogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh0YXJnZXRQYWdlKTsKICAgIH0sCiAgICBjaGFuZ2VUaW1lZnJhbWU6IGZ1bmN0aW9uIGNoYW5nZVRpbWVmcmFtZSh0aW1lKSB7CiAgICAgIHRoaXMudGltZWZyYW1lID0gdGltZTsKICAgICAgdGhpcy5nZXREYXRhKCk7CiAgICB9LAogICAgY2hlY2tGb3JTZWxlY3RlZDogZnVuY3Rpb24gY2hlY2tGb3JTZWxlY3RlZChjb21tYW5kKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CgogICAgICBpZiAoY29tbWFuZCA9PSB2bS50aW1lZnJhbWUpIHsKICAgICAgICByZXR1cm4gJ2VsLWljb24tY2hlY2snOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQogICAgfSwKICAgIGdldERhdGE6IGZ1bmN0aW9uIGdldERhdGEoKSB7CiAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICB2YXIgbG9jYXRpb25JZEFycmF5ID0gW107CiAgICAgIHZhciBsb2NhdGlvbklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2F0aW9uSWQnKTsKCiAgICAgIGlmIChsb2NhdGlvbklkKSB7CiAgICAgICAgbG9jYXRpb25JZEFycmF5LnB1c2gobG9jYXRpb25JZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGxvY09wdGlvbnMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2NhdGlvbk9wdGlvbnMnKSk7CiAgICAgICAgbG9jT3B0aW9ucy5tYXAoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICByZXR1cm4gbG9jYXRpb25JZEFycmF5LnB1c2goZWwubG9jYXRpb25JZCk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHZhciBzZWFyY2hPYmplY3QgPSB7CiAgICAgICAgbG9jYXRpb25zOiBsb2NhdGlvbklkQXJyYXksCiAgICAgICAgdGltZWZyYW1lOiB2bS50aW1lZnJhbWUKICAgICAgfTsKICAgICAgRGFzaGJvYXJkU2VydmljZS5nZXRPcGluaWlvblJhdGluZyhzZWFyY2hPYmplY3QpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdm0uc2hvd0xvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgaWYgKHJlc3BvbnNlLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHZtLmNhcmREYXRhID0gcmVzcG9uc2VbMF0uYXZlcmFnZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdm0uY2FyZERhdGEgPSAwOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["OpiniionRating.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,OAAA,gBAAA;AACA,SAAA,YAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,gBADA;AAEA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,CADA;AAEA,MAAA,SAAA,EAAA,EAFA;AAGA,MAAA,WAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,OATA,qBASA;AACA,SAAA,OAAA;AACA,IAAA,YAAA,CAAA,GAAA,CAAA,gBAAA,EAAA,KAAA,OAAA;AACA,GAZA;AAaA,EAAA,aAAA,EAAA,yBAAA;AACA,IAAA,YAAA,CAAA,IAAA,CAAA,gBAAA,EAAA,KAAA,OAAA;AACA,GAfA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,qBACA,KADA,EACA;AACA,UAAA,GAAA,GAAA,CAAA,KAAA,GAAA,CAAA,EAAA,OAAA,CAAA,CAAA,EAAA,OAAA,CAAA,GAAA,EAAA,GAAA,CAAA;AACA,aAAA,GAAA,CAAA,QAAA,GAAA,OAAA,CAAA,uBAAA,EAAA,GAAA,CAAA;AACA;AAJA,GAhBA;AAsBA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,UADA,EACA;AACA,UAAA;AACA,QAAA,YAAA,CAAA,OAAA,CAAA,eAAA,EAAA,IAAA,CAAA,SAAA,CAAA;AAAA,UAAA,IAAA,EAAA,QAAA;AAAA,UAAA,KAAA,EAAA,CAAA,UAAA;AAAA,SAAA,CAAA;AACA,OAFA,CAEA,OAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA;;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,UAAA;AACA,KARA;AASA,IAAA,eATA,2BASA,IATA,EASA;AACA,WAAA,SAAA,GAAA,IAAA;AACA,WAAA,OAAA;AACA,KAZA;AAaA,IAAA,gBAbA,4BAaA,OAbA,EAaA;AACA,UAAA,EAAA,GAAA,IAAA;;AACA,UAAA,OAAA,IAAA,EAAA,CAAA,SAAA,EAAA;AACA,eAAA,eAAA;AACA,OAFA,MAEA;AACA,eAAA,EAAA;AACA;AACA,KApBA;AAqBA,IAAA,OArBA,qBAqBA;AACA,WAAA,WAAA,GAAA,IAAA;AACA,UAAA,EAAA,GAAA,IAAA;AACA,UAAA,eAAA,GAAA,EAAA;AACA,UAAA,UAAA,GAAA,YAAA,CAAA,OAAA,CAAA,YAAA,CAAA;;AACA,UAAA,UAAA,EAAA;AACA,QAAA,eAAA,CAAA,IAAA,CAAA,UAAA;AACA,OAFA,MAEA;AACA,YAAA,UAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,CAAA;AACA,QAAA,UAAA,CAAA,GAAA,CAAA,UAAA,EAAA;AAAA,iBAAA,eAAA,CAAA,IAAA,CAAA,EAAA,CAAA,UAAA,CAAA;AAAA,SAAA;AACA;;AAEA,UAAA,YAAA,GAAA;AACA,QAAA,SAAA,EAAA,eADA;AAEA,QAAA,SAAA,EAAA,EAAA,CAAA;AAFA,OAAA;AAKA,MAAA,gBAAA,CAAA,iBAAA,CAAA,YAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,EAAA,CAAA,WAAA,GAAA,KAAA;;AACA,YAAA,QAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,UAAA,EAAA,CAAA,QAAA,GAAA,QAAA,CAAA,CAAA,CAAA,CAAA,OAAA;AACA,SAFA,MAEA;AACA,UAAA,EAAA,CAAA,QAAA,GAAA,CAAA;AACA;AACA,OAPA;AAQA;AA9CA;AAtBA,CAAA","sourcesContent":["<template>\n  <el-card shadow=\"always\" class=\"short-card\">\n    <el-row>\n      <el-col :span=\"12\">\n        <div class=\"o-card-title-3 clickable\" @click=\"followLink('/feedback')\">        \n          Opiniion Rating\n        </div>\n        <div class=\"o-card-data\" v-show=\"!showLoading && cardData >= 0\">\n          {{ cardData.toFixed(1) }}\n        </div>\n        <div class=\"dashboard-row dashboard-loader\" v-show=\"showLoading\"><i class=\"far fa-hourglass fa-spin\"></i></div>\n      </el-col>\n      <el-col :span=\"11\">\n        <div class=\"o-card-icon\">\n          <img src=\"../../../public/img/Opiniion_Icon.png\" alt=\"Opiniion Rating\" />\n        </div>\n      </el-col>\n      <el-col :span=\"1\">\n        <el-dropdown trigger=\"click\" @command=\"changeTimeframe\">\n          <span class=\"opiniion-grey el-dropdown-link\">\n            <i class=\"fa fa-ellipsis-v clickable\" aria-hidden=\"true\"></i>\n          </span>\n          <el-dropdown-menu slot=\"dropdown\">\n            <el-dropdown-item :icon=\"checkForSelected('always')\" command=\"always\">All time</el-dropdown-item>\n            <el-dropdown-item :icon=\"checkForSelected(30)\" :command=\"30\">Last 30 days</el-dropdown-item>\n            <el-dropdown-item :icon=\"checkForSelected(120)\" :command=\"120\">Last 3 months</el-dropdown-item>\n            <el-dropdown-item :icon=\"checkForSelected(240)\" :command=\"240\">Last 6 months</el-dropdown-item>\n            <el-dropdown-item :icon=\"checkForSelected(365)\" :command=\"365\">In the last year</el-dropdown-item>\n          </el-dropdown-menu>\n        </el-dropdown>\n      </el-col>\n    </el-row>\n  </el-card>\n</template>\n\n<script>\nimport DashboardService from './../../services/DashboardService'\nimport {EventService} from '../../main'\n\nexport default {\n  name: 'opiniionRating',\n  data: function() {\n    return {\n      cardData: 0,\n      timeframe: 30,\n      showLoading: true\n    }\n  },\n  created() {\n    this.getData();\n    EventService.$on('locationChange', this.getData);\n  },\n  beforeDestroy: function () {\n    EventService.$off('locationChange', this.getData);\n  },\n  filters: {\n    formatNum(value) {\n      let val = (value/1).toFixed(0).replace('.', ',')\n      return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n    }\n  },\n  methods: {\n    followLink(targetPage) {\n      try {\n        localStorage.setItem('passedFilters', JSON.stringify({name: 'source', value: ['Opiniion']}));  \n      } catch (error) {\n        console.log(error);\n      }\n      this.$router.push(targetPage);\n    },\n    changeTimeframe(time) {\n      this.timeframe = time;\n      this.getData();\n    },\n    checkForSelected(command) {\n      let vm = this;\n      if(command == vm.timeframe) {\n        return 'el-icon-check'\n      } else {\n        return '';\n      }\n    },\n    getData() {\n      this.showLoading = true;\n      var vm = this;\n      let locationIdArray = [];\n      let locationId = localStorage.getItem('locationId');\n      if(locationId) {\n        locationIdArray.push(locationId);\n      } else {\n        let locOptions = JSON.parse(localStorage.getItem('locationOptions'));\n        locOptions.map(el => locationIdArray.push(el.locationId));\n      }\n\n      let searchObject = {\n        locations: locationIdArray,\n        timeframe: vm.timeframe\n      }\n      \n      DashboardService.getOpiniionRating(searchObject).then(function(response) {\n        vm.showLoading = false;\n        if (response.length > 0) {\n          vm.cardData = response[0].average;\n        } else {\n          vm.cardData = 0;\n        }\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/components/DashboardComponents"}]}