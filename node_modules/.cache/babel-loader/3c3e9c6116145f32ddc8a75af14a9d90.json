{"remainingRequest":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js!/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/services/http-common.js","dependencies":[{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/services/http-common.js","mtime":1581270622000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/package.json","mtime":1587799327166},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IGNvbmZpZyBmcm9tICIuLi9jb25maWciOwp2YXIgaHR0cCA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogY29uZmlnLmJhc2VVcmwsCiAgaGVhZGVyczogewogICAgJ0NhY2hlLUNvbnRyb2wnOiAnbm8tY2FjaGUnLAogICAgJ1ByYWdtYSc6ICduby1jYWNoZScsCiAgICAnRXhwaXJlcyc6IC0xCiAgfQp9KTsKaHR0cC5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGh0dHBDb25maWcpIHsKICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKCiAgaWYgKHRva2VuKSB7CiAgICBodHRwQ29uZmlnLmhlYWRlcnMudG9rZW4gPSB0b2tlbjsKICB9CgogIHJldHVybiBodHRwQ29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBjb25zb2xlLmxvZyhlcnJvcik7CiAgcmV0dXJuIGVycm9yOwp9KTsKaHR0cC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIGlmIChyZXNwb25zZS5oZWFkZXJzLnRva2VuKSB7CiAgICB0cnkgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCByZXNwb25zZS5oZWFkZXJzLnRva2VuKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUubG9nOwogICAgfQoKICAgIGlmICh3aW5kb3cuaWRsZVRpbWVyKSBjbGVhclRpbWVvdXQod2luZG93LmlkbGVUaW1lcik7CiAgICB3aW5kb3cuaWRsZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcvbG9naW4vaWRsZSc7CiAgICB9LCA5MDAwMDApOwogIH0KCiAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGlmIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMykgewogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICB3aW5kb3cubG9jYXRpb24gPSAnL2xvZ2luJzsKICB9CgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpleHBvcnQgZGVmYXVsdCBodHRwOw=="},{"version":3,"sources":["/Library/WebServer/Documents/Projects/OPINIION FINAL/opiniionv4/src/services/http-common.js"],"names":["axios","config","http","create","baseURL","baseUrl","headers","interceptors","request","use","httpConfig","token","localStorage","getItem","error","console","log","response","setItem","window","idleTimer","clearTimeout","setTimeout","location","data","status","removeItem","Promise","reject"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP;AAEA,IAAMC,IAAI,GAAGF,KAAK,CAACG,MAAN,CAAa;AACxBC,EAAAA,OAAO,EAAEH,MAAM,CAACI,OADQ;AAExBC,EAAAA,OAAO,EAAE;AACP,qBAAiB,UADV;AAEP,cAAU,UAFH;AAGP,eAAW,CAAC;AAHL;AAFe,CAAb,CAAb;AASAJ,IAAI,CAACK,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CAA8B,UAAUC,UAAV,EAAsB;AAClD,MAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;;AACA,MAAIF,KAAJ,EAAW;AACTD,IAAAA,UAAU,CAACJ,OAAX,CAAmBK,KAAnB,GAA2BA,KAA3B;AACD;;AACD,SAAOD,UAAP;AACD,CAND,EAMG,UAASI,KAAT,EAAgB;AACjBC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,SAAOA,KAAP;AACD,CATD;AAWAZ,IAAI,CAACK,YAAL,CAAkBU,QAAlB,CAA2BR,GAA3B,CAA+B,UAASQ,QAAT,EAAmB;AAChD,MAAIA,QAAQ,CAACX,OAAT,CAAiBK,KAArB,EAA4B;AAC1B,QAAI;AACFC,MAAAA,YAAY,CAACM,OAAb,CAAqB,OAArB,EAA8BD,QAAQ,CAACX,OAAT,CAAiBK,KAA/C;AACD,KAFD,CAEE,OAAOG,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR;AACD;;AACD,QAAIG,MAAM,CAACC,SAAX,EAAsBC,YAAY,CAACF,MAAM,CAACC,SAAR,CAAZ;AACtBD,IAAAA,MAAM,CAACC,SAAP,GAAmBE,UAAU,CAAC,YAAW;AACvCH,MAAAA,MAAM,CAACI,QAAP,GAAkB,aAAlB;AACD,KAF4B,EAE1B,MAF0B,CAA7B;AAGD;;AACD,SAAON,QAAQ,CAACO,IAAhB;AACD,CAbD,EAaG,UAAUV,KAAV,EAAiB;AAClB,MAAIA,KAAK,CAACG,QAAN,IAAmBH,KAAK,CAACG,QAAN,CAAeQ,MAAf,KAA0B,GAAjD,EAAuD;AACrDb,IAAAA,YAAY,CAACc,UAAb,CAAwB,OAAxB;AACAP,IAAAA,MAAM,CAACI,QAAP,GAAkB,QAAlB;AACD;;AACD,SAAOI,OAAO,CAACC,MAAR,CAAed,KAAf,CAAP;AACD,CAnBD;AAqBA,eAAeZ,IAAf","sourcesContent":["import axios from 'axios';\nimport config from '../config';\n\nconst http = axios.create({\n  baseURL: config.baseUrl,\n  headers: {\n    'Cache-Control': 'no-cache',\n    'Pragma': 'no-cache',\n    'Expires': -1\n  }\n});\n\nhttp.interceptors.request.use(function (httpConfig) {\n  var token = localStorage.getItem('token');\n  if (token) {\n    httpConfig.headers.token = token;\n  }\n  return httpConfig;\n}, function(error) {\n  console.log(error);\n  return error;\n});\n\nhttp.interceptors.response.use(function(response) {\n  if (response.headers.token) {\n    try {\n      localStorage.setItem('token', response.headers.token);\n    } catch (error) {\n      console.log\n    }\n    if (window.idleTimer) clearTimeout(window.idleTimer);\n    window.idleTimer = setTimeout(function() {\n      window.location = '/login/idle';\n    }, 900000);\n  }\n  return response.data;\n}, function (error) {\n  if (error.response && (error.response.status === 403)) {\n    localStorage.removeItem('token');\n    window.location = '/login';\n  }\n  return Promise.reject(error);\n});\n\nexport default http;\n"]}]}